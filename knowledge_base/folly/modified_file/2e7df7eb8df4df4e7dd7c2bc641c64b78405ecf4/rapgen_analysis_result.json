{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/2e7df7eb8df4df4e7dd7c2bc641c64b78405ecf4",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/2e7df7eb8df4df4e7dd7c2bc641c64b78405ecf4/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/2e7df7eb8df4df4e7dd7c2bc641c64b78405ecf4/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/2e7df7eb8df4df4e7dd7c2bc641c64b78405ecf4/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1210,
          "old_api": "std::numeric_limits<Src>::max()",
          "new_api": "std::numeric_limits<Tgt>::max()",
          "old_text": "std::numeric_limits<Src>::max()",
          "new_text": "std::numeric_limits<Tgt>::max()",
          "old_line_content": "      folly::_t<std::make_unsigned<Src>>(std::numeric_limits<Src>::max())) {",
          "new_line_content": "      folly::_t<std::make_unsigned<Tgt>>(std::numeric_limits<Tgt>::max()) <",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": "greater_than<Tgt, std::numeric_limits<Tgt>::max()>(value)",
          "new_api": "std::numeric_limits<Src>::max()",
          "old_text": "greater_than<Tgt, std::numeric_limits<Tgt>::max()>(value)",
          "new_text": "std::numeric_limits<Src>::max()",
          "old_line_content": "    if (greater_than<Tgt, std::numeric_limits<Tgt>::max()>(value)) {",
          "new_line_content": "      folly::_t<std::make_unsigned<Src>>(std::numeric_limits<Src>::max())) {",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": "makeUnexpected",
          "new_api": "greater_than<Tgt, std::numeric_limits<Tgt>::max()>(value)",
          "old_text": "makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW)",
          "new_text": "greater_than<Tgt, std::numeric_limits<Tgt>::max()>(value)",
          "old_line_content": "      return makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW);",
          "new_line_content": "    if (greater_than<Tgt, std::numeric_limits<Tgt>::max()>(value)) {",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "makeUnexpected",
          "new_api": "less_than<Tgt, std::numeric_limits<Tgt>::min()>(value)",
          "old_text": "makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW)",
          "new_text": "less_than<Tgt, std::numeric_limits<Tgt>::min()>(value)",
          "old_line_content": "      return makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW);",
          "new_line_content": "    if (less_than<Tgt, std::numeric_limits<Tgt>::min()>(value)) {",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": "std::numeric_limits<Tgt>::max()",
          "new_api": "std::numeric_limits<Src>::max()",
          "old_text": "std::numeric_limits<Tgt>::max()",
          "new_text": "std::numeric_limits<Src>::max()",
          "old_line_content": "    if (value > std::numeric_limits<Tgt>::max()) {",
          "new_line_content": "      std::numeric_limits<Tgt>::max() < std::numeric_limits<Src>::max()) {",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": "makeUnexpected",
          "new_api": "std::numeric_limits<Tgt>::max()",
          "old_text": "makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW)",
          "new_text": "std::numeric_limits<Tgt>::max()",
          "old_line_content": "      return makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW);",
          "new_line_content": "    if (value > std::numeric_limits<Tgt>::max()) {",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "makeUnexpected",
          "new_api": "std::numeric_limits<Tgt>::lowest()",
          "old_text": "makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW)",
          "new_text": "std::numeric_limits<Tgt>::lowest()",
          "old_line_content": "      return makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW);",
          "new_line_content": "    if (value < std::numeric_limits<Tgt>::lowest()) {",
          "content_same": false
        },
        {
          "line": 1259,
          "old_api": "std::numeric_limits<Tgt>::min()",
          "new_api": "std::numeric_limits<Tgt>::max()",
          "old_text": "std::numeric_limits<Tgt>::min()",
          "new_text": "std::numeric_limits<Tgt>::max()",
          "old_line_content": "  constexpr Src tgtMinAsSrc = static_cast<Src>(std::numeric_limits<Tgt>::min());",
          "new_line_content": "  constexpr Src tgtMaxAsSrc = static_cast<Src>(std::numeric_limits<Tgt>::max());",
          "content_same": false
        },
        {
          "line": 1265,
          "old_api": "static_cast<Tgt>(value - mmax)",
          "new_api": "Src",
          "old_text": "static_cast<Tgt>(value - mmax)",
          "new_text": "Src()",
          "old_line_content": "    if (static_cast<Tgt>(value - mmax) >",
          "new_line_content": "    const Src mmax = folly::nextafter(tgtMaxAsSrc, Src());",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "static_cast<Tgt>(mmax)",
          "new_api": "static_cast<Tgt>(value - mmax)",
          "old_text": "static_cast<Tgt>(mmax)",
          "new_text": "static_cast<Tgt>(value - mmax)",
          "old_line_content": "        std::numeric_limits<Tgt>::max() - static_cast<Tgt>(mmax)) {",
          "new_line_content": "    if (static_cast<Tgt>(value - mmax) >",
          "content_same": false
        },
        {
          "line": 1274,
          "old_api": "static_cast<Tgt>(value - mmin)",
          "new_api": "Src",
          "old_text": "static_cast<Tgt>(value - mmin)",
          "new_text": "Src()",
          "old_line_content": "    if (static_cast<Tgt>(value - mmin) <",
          "new_line_content": "    const Src mmin = folly::nextafter(tgtMinAsSrc, Src());",
          "content_same": false
        },
        {
          "line": 1275,
          "old_api": "static_cast<Tgt>(mmin)",
          "new_api": "static_cast<Tgt>(value - mmin)",
          "old_text": "static_cast<Tgt>(mmin)",
          "new_text": "static_cast<Tgt>(value - mmin)",
          "old_line_content": "        std::numeric_limits<Tgt>::min() - static_cast<Tgt>(mmin)) {",
          "new_line_content": "    if (static_cast<Tgt>(value - mmin) <",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "static_cast<Tgt>(value)",
          "new_api": "checkConversion<Tgt>(value)",
          "old_text": "static_cast<Tgt>(value)",
          "new_text": "checkConversion<Tgt>(value)",
          "old_line_content": "    Tgt result = static_cast<Tgt>(value);",
          "new_line_content": "  if (LIKELY(checkConversion<Tgt>(value))) {",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": "checkConversion<Src>(result)",
          "new_api": "static_cast<Tgt>(value)",
          "old_text": "checkConversion<Src>(result)",
          "new_text": "static_cast<Tgt>(value)",
          "old_line_content": "    if (LIKELY(checkConversion<Src>(result))) {",
          "new_line_content": "    Tgt result = static_cast<Tgt>(value);",
          "content_same": false
        },
        {
          "line": 1317,
          "old_api": "static_cast<Src>(result)",
          "new_api": "checkConversion<Src>(result)",
          "old_text": "static_cast<Src>(result)",
          "new_text": "checkConversion<Src>(result)",
          "old_line_content": "      Src witness = static_cast<Src>(result);",
          "new_line_content": "    if (LIKELY(checkConversion<Src>(result))) {",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "LIKELY",
          "new_api": "static_cast<Src>(result)",
          "old_text": "LIKELY(value == witness)",
          "new_text": "static_cast<Src>(result)",
          "old_line_content": "      if (LIKELY(value == witness)) {",
          "new_line_content": "      Src witness = static_cast<Src>(result);",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "static_cast<T>(tmp)",
          "new_api": "parseTo",
          "old_text": "static_cast<T>(tmp)",
          "new_text": "parseTo(in, tmp)",
          "old_line_content": "  out = static_cast<T>(tmp); // Harmless if parseTo fails",
          "new_line_content": "  auto restOrError = parseTo(in, tmp);",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": "size",
          "new_api": "clear",
          "old_text": "in.size()",
          "new_text": "out.clear()",
          "old_line_content": "  out.append(in.data(), in.size()); // TODO try/catch?",
          "new_line_content": "  out.clear();",
          "content_same": false
        },
        {
          "line": 1399,
          "old_api": "end",
          "new_api": "size",
          "old_text": "in.end()",
          "new_text": "in.size()",
          "old_line_content": "  return StringPiece{in.end(), in.end()};",
          "new_line_content": "  out.append(in.data(), in.size()); // TODO try/catch?",
          "content_same": false
        },
        {
          "line": 1407,
          "old_api": "size",
          "new_api": "clear",
          "old_text": "in.size()",
          "new_text": "out.clear()",
          "old_line_content": "  out.append(in.data(), in.size()); // TODO try/catch?",
          "new_line_content": "  out.clear();",
          "content_same": false
        },
        {
          "line": 1408,
          "old_api": "end",
          "new_api": "size",
          "old_text": "in.end()",
          "new_text": "in.size()",
          "old_line_content": "  return StringPiece{in.end(), in.end()};",
          "new_line_content": "  out.append(in.data(), in.size()); // TODO try/catch?",
          "content_same": false
        },
        {
          "line": 1418,
          "old_api": "UNLIKELY",
          "new_api": "enforceWhitespaceErr",
          "old_text": "UNLIKELY(e != ConversionCode::SUCCESS)",
          "new_text": "enforceWhitespaceErr(sp)",
          "old_line_content": "    if (UNLIKELY(e != ConversionCode::SUCCESS))",
          "new_line_content": "    auto e = enforceWhitespaceErr(sp);",
          "content_same": false
        },
        {
          "line": 1419,
          "old_api": "makeUnexpected",
          "new_api": "UNLIKELY",
          "old_text": "makeUnexpected(e)",
          "new_text": "UNLIKELY(e != ConversionCode::SUCCESS)",
          "old_line_content": "      return makeUnexpected(e);",
          "new_line_content": "    if (UNLIKELY(e != ConversionCode::SUCCESS))",
          "content_same": false
        },
        {
          "line": 1440,
          "old_api": "end",
          "new_api": "parseTo",
          "old_text": "sp.end()",
          "new_text": "parseTo(sp, out)",
          "old_line_content": "  return StringPiece(sp.end(), sp.end());",
          "new_line_content": "  parseTo(sp, out);",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "std::move(result)",
          "new_api": "Check",
          "old_text": "std::move(result)",
          "new_text": "Check()",
          "old_line_content": "    return std::move(result);",
          "new_line_content": "  return parseTo(src, result).then(Check(), [&](Unit) {",
          "content_same": false
        },
        {
          "line": 1489,
          "old_api": "thenOrThrow",
          "new_api": "detail::parseToWrap(src, result)",
          "old_text": "tmp\n      .thenOrThrow(Check(), [&](Error e) { throw makeConversionError(e, src); })\n      .thenOrThrow(\n          [&](Unit) { return std::move(result); },\n          [&](Error e) { throw makeConversionError(e, tmp.value()); })",
          "new_text": "detail::parseToWrap(src, result)",
          "old_line_content": "  return tmp",
          "new_line_content": "  auto tmp = detail::parseToWrap(src, result);",
          "content_same": false
        },
        {
          "line": 1490,
          "old_api": "makeConversionError",
          "new_api": "thenOrThrow",
          "old_text": "makeConversionError(e, src)",
          "new_text": "tmp\n      .thenOrThrow(Check(), [&](Error e) { throw makeConversionError(e, src); })\n      .thenOrThrow(\n          [&](Unit) { return std::move(result); },\n          [&](Error e) { throw makeConversionError(e, tmp.value()); })",
          "old_line_content": "      .thenOrThrow(Check(), [&](Error e) { throw makeConversionError(e, src); })",
          "new_line_content": "  return tmp",
          "content_same": false
        },
        {
          "line": 1493,
          "old_api": "value",
          "new_api": "std::move(result)",
          "old_text": "tmp.value()",
          "new_text": "std::move(result)",
          "old_line_content": "          [&](Error e) { throw makeConversionError(e, tmp.value()); });",
          "new_line_content": "          [&](Unit) { return std::move(result); },",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1409,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "in.end()",
          "old_line_content": "}",
          "new_line_content": "  return StringPiece{in.end(), in.end()};",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": null,
          "new_api": "thenOrThrow",
          "old_text": null,
          "new_text": "tryTo<Tgt>(b, e).thenOrThrow(\n      [](Tgt res) { return res; },\n      [=](ConversionCode code) {\n        return makeConversionError(code, StringPiece(b, e));\n      })",
          "old_line_content": "      [](Tgt res) { return res; },",
          "new_line_content": "  return tryTo<Tgt>(b, e).thenOrThrow(",
          "content_same": false
        },
        {
          "line": 1157,
          "old_api": null,
          "new_api": "StringPiece",
          "old_text": null,
          "new_text": "StringPiece(b, e)",
          "old_line_content": "      });",
          "new_line_content": "        return makeConversionError(code, StringPiece(b, e));",
          "content_same": false
        },
        {
          "line": 1285,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "    std::is_integral<Src>::value && std::is_floating_point<Tgt>::value,",
          "new_line_content": "constexpr typename std::enable_if<",
          "content_same": false
        },
        {
          "line": 1543,
          "old_api": null,
          "new_api": "static_cast<Tgt>(i)",
          "old_text": null,
          "new_text": "static_cast<Tgt>(i)",
          "old_line_content": "}",
          "new_line_content": "  return tryTo<I>(value).then([](I i) { return static_cast<Tgt>(i); });",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "makeUnexpected",
          "old_text": null,
          "new_text": "makeUnexpected(e)",
          "old_line_content": "    return unit;",
          "new_line_content": "      return makeUnexpected(e);",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "static_cast<typename std::underlying_type<Src>::type>(value)",
          "old_text": null,
          "new_text": "static_cast<typename std::underlying_type<Src>::type>(value)",
          "old_line_content": "}",
          "new_line_content": "  return to<Tgt>(static_cast<typename std::underlying_type<Src>::type>(value));",
          "content_same": false
        },
        {
          "line": 1295,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "    std::is_floating_point<Src>::value && std::is_same<Tgt, bool>::value,",
          "new_line_content": "constexpr typename std::enable_if<",
          "content_same": false
        },
        {
          "line": 1428,
          "old_api": null,
          "new_api": "constexpr",
          "old_text": null,
          "new_text": "constexpr",
          "old_line_content": "    return unit;",
          "new_line_content": "  constexpr Expected<Unit, Error> operator()(T&&) const {",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": null,
          "new_api": "then",
          "old_text": null,
          "new_text": "detail::convertTo<Tgt>(&src).then(\n      [&](Tgt res) { return void(out = res), src; })",
          "old_line_content": "      [&](Tgt res) { return void(out = res), src; });",
          "new_line_content": "  return detail::convertTo<Tgt>(&src).then(",
          "content_same": false
        },
        {
          "line": 1558,
          "old_api": null,
          "new_api": "to<typename std::underlying_type<Tgt>::type>(value)",
          "old_text": null,
          "new_text": "to<typename std::underlying_type<Tgt>::type>(value)",
          "old_line_content": "}",
          "new_line_content": "  return static_cast<Tgt>(to<typename std::underlying_type<Tgt>::type>(value));",
          "content_same": false
        },
        {
          "line": 1441,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "sp.end()",
          "old_line_content": "}",
          "new_line_content": "  return StringPiece(sp.end(), sp.end());",
          "content_same": false
        },
        {
          "line": 1319,
          "old_api": null,
          "new_api": "LIKELY",
          "old_text": null,
          "new_text": "LIKELY(value == witness)",
          "old_line_content": "        return result;",
          "new_line_content": "      if (LIKELY(value == witness)) {",
          "content_same": false
        },
        {
          "line": 1449,
          "old_api": null,
          "new_api": "parseTo",
          "old_text": null,
          "new_text": "parseTo(sp, out)",
          "old_line_content": "}",
          "new_line_content": "  return parseTo(sp, out);",
          "content_same": false
        },
        {
          "line": 1194,
          "old_api": null,
          "new_api": "static_cast<Tgt>(value ? 1 : 0)",
          "old_text": null,
          "new_text": "static_cast<Tgt>(value ? 1 : 0)",
          "old_line_content": "}",
          "new_line_content": "  return static_cast<Tgt>(value ? 1 : 0);",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "makeUnexpected",
          "old_text": null,
          "new_text": "makeUnexpected(ConversionCode::ARITH_LOSS_OF_PRECISION)",
          "old_line_content": "}",
          "new_line_content": "  return makeUnexpected(ConversionCode::ARITH_LOSS_OF_PRECISION);",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": null,
          "new_api": "typeid",
          "old_text": null,
          "new_text": "typeid(Tgt)",
          "old_line_content": "#else",
          "new_line_content": "  return to<std::string>(\"(\", demangle(typeid(Tgt)), \") \", value);",
          "content_same": false
        },
        {
          "line": 1332,
          "old_api": null,
          "new_api": "to<std::string>(value)",
          "old_text": null,
          "new_text": "to<std::string>(value)",
          "old_line_content": "#endif",
          "new_line_content": "  return to<std::string>(value);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": null,
          "new_api": "makeUnexpected",
          "old_text": null,
          "new_text": "makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW)",
          "old_line_content": "    }",
          "new_line_content": "      return makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW);",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": null,
          "new_api": "std::move(result)",
          "old_text": null,
          "new_text": "std::move(result)",
          "old_line_content": "  });",
          "new_line_content": "    return std::move(result);",
          "content_same": false
        },
        {
          "line": 1220,
          "old_api": null,
          "new_api": "makeUnexpected",
          "old_text": null,
          "new_text": "makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW)",
          "old_line_content": "    }",
          "new_line_content": "      return makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW);",
          "content_same": false
        },
        {
          "line": 1350,
          "old_api": null,
          "new_api": "detail::convertTo<Tgt>(value)",
          "old_text": null,
          "new_text": "detail::convertTo<Tgt>(value)",
          "old_line_content": "}",
          "new_line_content": "  return detail::convertTo<Tgt>(value);",
          "content_same": false
        },
        {
          "line": 1223,
          "old_api": null,
          "new_api": "static_cast<Tgt>(value)",
          "old_text": null,
          "new_text": "static_cast<Tgt>(value)",
          "old_line_content": "}",
          "new_line_content": "  return static_cast<Tgt>(value);",
          "content_same": false
        },
        {
          "line": 1356,
          "old_api": null,
          "new_api": "thenOrThrow",
          "old_text": null,
          "new_text": "tryTo<Tgt>(value).thenOrThrow(\n      [](Tgt res) { return res; },\n      [&](ConversionCode e) {\n        return makeConversionError(e, detail::errorValue<Tgt>(value));\n      })",
          "old_line_content": "      [](Tgt res) { return res; },",
          "new_line_content": "  return tryTo<Tgt>(value).thenOrThrow(",
          "content_same": false
        },
        {
          "line": 1359,
          "old_api": null,
          "new_api": "detail::errorValue<Tgt>(value)",
          "old_text": null,
          "new_text": "detail::errorValue<Tgt>(value)",
          "old_line_content": "      });",
          "new_line_content": "        return makeConversionError(e, detail::errorValue<Tgt>(value));",
          "content_same": false
        },
        {
          "line": 1491,
          "old_api": null,
          "new_api": "makeConversionError",
          "old_text": null,
          "new_text": "makeConversionError(e, src)",
          "old_line_content": "      .thenOrThrow(",
          "new_line_content": "      .thenOrThrow(Check(), [&](Error e) { throw makeConversionError(e, src); })",
          "content_same": false
        },
        {
          "line": 1494,
          "old_api": null,
          "new_api": "value",
          "old_text": null,
          "new_text": "tmp.value()",
          "old_line_content": "}",
          "new_line_content": "          [&](Error e) { throw makeConversionError(e, tmp.value()); });",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": null,
          "new_api": "makeUnexpected",
          "old_text": null,
          "new_text": "makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW)",
          "old_line_content": "    }",
          "new_line_content": "      return makeUnexpected(ConversionCode::ARITH_POSITIVE_OVERFLOW);",
          "content_same": false
        },
        {
          "line": 1243,
          "old_api": null,
          "new_api": "makeUnexpected",
          "old_text": null,
          "new_text": "makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW)",
          "old_line_content": "    }",
          "new_line_content": "      return makeUnexpected(ConversionCode::ARITH_NEGATIVE_OVERFLOW);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "str_to_bool",
          "old_text": null,
          "new_text": "str_to_bool(src)",
          "old_line_content": "}",
          "new_line_content": "  return str_to_bool(src);",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": null,
          "new_api": "static_cast<Tgt>(value)",
          "old_text": null,
          "new_text": "static_cast<Tgt>(value)",
          "old_line_content": "}",
          "new_line_content": "  return static_cast<Tgt>(value);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": null,
          "new_api": "then",
          "old_text": null,
          "new_text": "parseTo(*src, result).then([&, src](StringPiece sp) -> Tgt {\n    *src = sp;\n    return std::move(result);\n  })",
          "old_line_content": "    *src = sp;",
          "new_line_content": "  return parseTo(*src, result).then([&, src](StringPiece sp) -> Tgt {",
          "content_same": false
        },
        {
          "line": 994,
          "old_api": null,
          "new_api": "std::forward<Src>(value)",
          "old_text": null,
          "new_text": "std::forward<Src>(value)",
          "old_line_content": "}",
          "new_line_content": "  return std::forward<Src>(value);",
          "content_same": false
        },
        {
          "line": 1507,
          "old_api": null,
          "new_api": "std::move(result)",
          "old_text": null,
          "new_text": "std::move(result)",
          "old_line_content": "  });",
          "new_line_content": "    return std::move(result);",
          "content_same": false
        },
        {
          "line": 1124,
          "old_api": null,
          "new_api": "str_to_floating<T>(src)",
          "old_text": null,
          "new_text": "str_to_floating<T>(src)",
          "old_line_content": "}",
          "new_line_content": "  return str_to_floating<T>(src);",
          "content_same": false
        },
        {
          "line": 1382,
          "old_api": null,
          "new_api": "static_cast<T>(tmp)",
          "old_text": null,
          "new_text": "static_cast<T>(tmp)",
          "old_line_content": "  return restOrError;",
          "new_line_content": "  out = static_cast<T>(tmp); // Harmless if parseTo fails",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": null,
          "new_api": "thenOrThrow",
          "old_text": null,
          "new_text": "parseTo(*src, result)\n      .thenOrThrow(\n          [&, src](StringPiece sp) -> Tgt {\n            *src = sp;\n            return std::move(result);\n          },\n          [=](Error e) { return makeConversionError(e, *src); })",
          "old_line_content": "      .thenOrThrow(",
          "new_line_content": "  return parseTo(*src, result)",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "str_to_integral<T>(src)",
          "old_text": null,
          "new_text": "str_to_integral<T>(src)",
          "old_line_content": "}",
          "new_line_content": "  return str_to_integral<T>(src);",
          "content_same": false
        },
        {
          "line": 1260,
          "old_api": null,
          "new_api": "std::numeric_limits<Tgt>::min()",
          "old_text": null,
          "new_text": "std::numeric_limits<Tgt>::min()",
          "old_line_content": "  if (value >= tgtMaxAsSrc) {",
          "new_line_content": "  constexpr Src tgtMinAsSrc = static_cast<Src>(std::numeric_limits<Tgt>::min());",
          "content_same": false
        },
        {
          "line": 1391,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "in.end()",
          "old_line_content": "}",
          "new_line_content": "  return StringPiece{in.end(), in.end()};",
          "content_same": false
        },
        {
          "line": 1519,
          "old_api": null,
          "new_api": "std::move(result)",
          "old_text": null,
          "new_text": "std::move(result)",
          "old_line_content": "          },",
          "new_line_content": "            return std::move(result);",
          "content_same": false
        },
        {
          "line": 1521,
          "old_api": null,
          "new_api": "makeConversionError",
          "old_text": null,
          "new_text": "makeConversionError(e, *src)",
          "old_line_content": "}",
          "new_line_content": "          [=](Error e) { return makeConversionError(e, *src); });",
          "content_same": false
        },
        {
          "line": 1010,
          "old_api": null,
          "new_api": "toAppendDelimFit",
          "old_text": null,
          "new_text": "toAppendDelimFit(delim, vs..., &result)",
          "old_line_content": "  return result;",
          "new_line_content": "  toAppendDelimFit(delim, vs..., &result);",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "static_cast<Tgt>(mmax)",
          "old_text": null,
          "new_text": "static_cast<Tgt>(mmax)",
          "old_line_content": "      return false;",
          "new_line_content": "        std::numeric_limits<Tgt>::max() - static_cast<Tgt>(mmax)) {",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "in.end()",
          "old_line_content": "}",
          "new_line_content": "  return StringPiece{in.end(), in.end()};",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "detail::digits_to<Tgt>(b, e)",
          "old_text": null,
          "new_text": "detail::digits_to<Tgt>(b, e)",
          "old_line_content": "}",
          "new_line_content": "  return detail::digits_to<Tgt>(b, e);",
          "content_same": false
        },
        {
          "line": 1276,
          "old_api": null,
          "new_api": "static_cast<Tgt>(mmin)",
          "old_text": null,
          "new_text": "static_cast<Tgt>(mmin)",
          "old_line_content": "      return false;",
          "new_line_content": "        std::numeric_limits<Tgt>::min() - static_cast<Tgt>(mmin)) {",
          "content_same": false
        },
        {
          "line": 1534,
          "old_api": null,
          "new_api": "static_cast<I>(value)",
          "old_text": null,
          "new_text": "static_cast<I>(value)",
          "old_line_content": "}",
          "new_line_content": "  return tryTo<Tgt>(static_cast<I>(value));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1153,
          "old_api": "thenOrThrow",
          "new_api": null,
          "old_text": "tryTo<Tgt>(b, e).thenOrThrow(\n      [](Tgt res) { return res; },\n      [=](ConversionCode code) {\n        return makeConversionError(code, StringPiece(b, e));\n      })",
          "new_text": null,
          "old_line_content": "  return tryTo<Tgt>(b, e).thenOrThrow(",
          "new_line_content": "to(const char* b, const char* e) {",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "StringPiece",
          "new_api": null,
          "old_text": "StringPiece(b, e)",
          "new_text": null,
          "old_line_content": "        return makeConversionError(code, StringPiece(b, e));",
          "new_line_content": "      [=](ConversionCode code) {",
          "content_same": false
        },
        {
          "line": 1273,
          "old_api": "Src",
          "new_api": null,
          "old_text": "Src()",
          "new_text": null,
          "old_line_content": "    const Src mmin = folly::nextafter(tgtMinAsSrc, Src());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1542,
          "old_api": "static_cast<Tgt>(i)",
          "new_api": null,
          "old_text": "static_cast<Tgt>(i)",
          "new_text": null,
          "old_line_content": "  return tryTo<I>(value).then([](I i) { return static_cast<Tgt>(i); });",
          "new_line_content": "  using I = typename std::underlying_type<Tgt>::type;",
          "content_same": false
        },
        {
          "line": 1284,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "constexpr typename std::enable_if<",
          "new_line_content": "template <typename Tgt, typename Src>",
          "content_same": false
        },
        {
          "line": 1417,
          "old_api": "enforceWhitespaceErr",
          "new_api": null,
          "old_text": "enforceWhitespaceErr(sp)",
          "new_text": null,
          "old_line_content": "    auto e = enforceWhitespaceErr(sp);",
          "new_line_content": "  Expected<Unit, ConversionCode> operator()(StringPiece sp) const {",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": "static_cast<typename std::underlying_type<Src>::type>(value)",
          "new_api": null,
          "old_text": "static_cast<typename std::underlying_type<Src>::type>(value)",
          "new_text": null,
          "old_line_content": "  return to<Tgt>(static_cast<typename std::underlying_type<Src>::type>(value));",
          "new_line_content": "to(const Src& value) {",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "constexpr typename std::enable_if<",
          "new_line_content": "template <typename Tgt, typename Src>",
          "content_same": false
        },
        {
          "line": 1427,
          "old_api": "constexpr",
          "new_api": null,
          "old_text": "constexpr",
          "new_text": null,
          "old_line_content": "  constexpr Expected<Unit, Error> operator()(T&&) const {",
          "new_line_content": "  template <class T>",
          "content_same": false
        },
        {
          "line": 1172,
          "old_api": "then",
          "new_api": null,
          "old_text": "detail::convertTo<Tgt>(&src).then(\n      [&](Tgt res) { return void(out = res), src; })",
          "new_text": null,
          "old_line_content": "  return detail::convertTo<Tgt>(&src).then(",
          "new_line_content": "parseTo(StringPiece src, Tgt& out) {",
          "content_same": false
        },
        {
          "line": 1557,
          "old_api": "to<typename std::underlying_type<Tgt>::type>(value)",
          "new_api": null,
          "old_text": "to<typename std::underlying_type<Tgt>::type>(value)",
          "new_text": null,
          "old_line_content": "  return static_cast<Tgt>(to<typename std::underlying_type<Tgt>::type>(value));",
          "new_line_content": "to(const Src & value) {",
          "content_same": false
        },
        {
          "line": 1439,
          "old_api": "parseTo",
          "new_api": null,
          "old_text": "parseTo(sp, out)",
          "new_text": null,
          "old_line_content": "  parseTo(sp, out);",
          "new_line_content": "parseToWrap(StringPiece sp, Tgt& out) {",
          "content_same": false
        },
        {
          "line": 1314,
          "old_api": "checkConversion<Tgt>(value)",
          "new_api": null,
          "old_text": "checkConversion<Tgt>(value)",
          "new_text": null,
          "old_line_content": "  if (LIKELY(checkConversion<Tgt>(value))) {",
          "new_line_content": "convertTo(const Src& value) noexcept {",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": "parseTo",
          "new_api": null,
          "old_text": "parseTo(sp, out)",
          "new_text": null,
          "old_line_content": "  return parseTo(sp, out);",
          "new_line_content": "parseToWrap(StringPiece sp, Tgt& out) {",
          "content_same": false
        },
        {
          "line": 1193,
          "old_api": "static_cast<Tgt>(value ? 1 : 0)",
          "new_api": null,
          "old_text": "static_cast<Tgt>(value ? 1 : 0)",
          "new_text": null,
          "old_line_content": "  return static_cast<Tgt>(value ? 1 : 0);",
          "new_line_content": "convertTo(const bool& value) noexcept {",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "makeUnexpected",
          "new_api": null,
          "old_text": "makeUnexpected(ConversionCode::ARITH_LOSS_OF_PRECISION)",
          "new_text": null,
          "old_line_content": "  return makeUnexpected(ConversionCode::ARITH_LOSS_OF_PRECISION);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "typeid",
          "new_api": null,
          "old_text": "typeid(Tgt)",
          "new_text": null,
          "old_line_content": "  return to<std::string>(\"(\", demangle(typeid(Tgt)), \") \", value);",
          "new_line_content": "#ifdef FOLLY_HAS_RTTI",
          "content_same": false
        },
        {
          "line": 1331,
          "old_api": "to<std::string>(value)",
          "new_api": null,
          "old_text": "to<std::string>(value)",
          "new_text": null,
          "old_line_content": "  return to<std::string>(value);",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 1209,
          "old_api": "std::numeric_limits<Tgt>::max()",
          "new_api": null,
          "old_text": "std::numeric_limits<Tgt>::max()",
          "new_text": null,
          "old_line_content": "      folly::_t<std::make_unsigned<Tgt>>(std::numeric_limits<Tgt>::max()) <",
          "new_line_content": "  /* static */ if (",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "Check",
          "new_api": null,
          "old_text": "Check()",
          "new_text": null,
          "old_line_content": "  return parseTo(src, result).then(Check(), [&](Unit) {",
          "new_line_content": "      detail::ReturnUnit<Error>>::type;",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "less_than<Tgt, std::numeric_limits<Tgt>::min()>(value)",
          "new_api": null,
          "old_text": "less_than<Tgt, std::numeric_limits<Tgt>::min()>(value)",
          "new_text": null,
          "old_line_content": "    if (less_than<Tgt, std::numeric_limits<Tgt>::min()>(value)) {",
          "new_line_content": "      (!std::is_signed<Tgt>::value || sizeof(Src) > sizeof(Tgt))) {",
          "content_same": false
        },
        {
          "line": 1349,
          "old_api": "detail::convertTo<Tgt>(value)",
          "new_api": null,
          "old_text": "detail::convertTo<Tgt>(value)",
          "new_text": null,
          "old_line_content": "  return detail::convertTo<Tgt>(value);",
          "new_line_content": "tryTo(const Src& value) noexcept {",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": "static_cast<Tgt>(value)",
          "new_api": null,
          "old_text": "static_cast<Tgt>(value)",
          "new_text": null,
          "old_line_content": "  return static_cast<Tgt>(value);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1355,
          "old_api": "thenOrThrow",
          "new_api": null,
          "old_text": "tryTo<Tgt>(value).thenOrThrow(\n      [](Tgt res) { return res; },\n      [&](ConversionCode e) {\n        return makeConversionError(e, detail::errorValue<Tgt>(value));\n      })",
          "new_text": null,
          "old_line_content": "  return tryTo<Tgt>(value).thenOrThrow(",
          "new_line_content": "    const Src& value) {",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": "detail::errorValue<Tgt>(value)",
          "new_api": null,
          "old_text": "detail::errorValue<Tgt>(value)",
          "new_text": null,
          "old_line_content": "        return makeConversionError(e, detail::errorValue<Tgt>(value));",
          "new_line_content": "      [&](ConversionCode e) {",
          "content_same": false
        },
        {
          "line": 1488,
          "old_api": "detail::parseToWrap(src, result)",
          "new_api": null,
          "old_text": "detail::parseToWrap(src, result)",
          "new_text": null,
          "old_line_content": "  auto tmp = detail::parseToWrap(src, result);",
          "new_line_content": "      detail::ReturnUnit<Error>>::type;",
          "content_same": false
        },
        {
          "line": 1492,
          "old_api": "std::move(result)",
          "new_api": null,
          "old_text": "std::move(result)",
          "new_text": null,
          "old_line_content": "          [&](Unit) { return std::move(result); },",
          "new_line_content": "      .thenOrThrow(",
          "content_same": false
        },
        {
          "line": 1237,
          "old_api": "std::numeric_limits<Src>::max()",
          "new_api": null,
          "old_text": "std::numeric_limits<Src>::max()",
          "new_text": null,
          "old_line_content": "      std::numeric_limits<Tgt>::max() < std::numeric_limits<Src>::max()) {",
          "new_line_content": "  /* static */ if (",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "std::numeric_limits<Tgt>::lowest()",
          "new_api": null,
          "old_text": "std::numeric_limits<Tgt>::lowest()",
          "new_text": null,
          "old_line_content": "    if (value < std::numeric_limits<Tgt>::lowest()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "str_to_bool",
          "new_api": null,
          "old_text": "str_to_bool(src)",
          "new_text": null,
          "old_line_content": "  return str_to_bool(src);",
          "new_line_content": "    convertTo(StringPiece* src) noexcept {",
          "content_same": false
        },
        {
          "line": 1245,
          "old_api": "static_cast<Tgt>(value)",
          "new_api": null,
          "old_text": "static_cast<Tgt>(value)",
          "new_text": null,
          "old_line_content": "  return static_cast<Tgt>(value);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 1504,
          "old_api": "then",
          "new_api": null,
          "old_text": "parseTo(*src, result).then([&, src](StringPiece sp) -> Tgt {\n    *src = sp;\n    return std::move(result);\n  })",
          "new_text": null,
          "old_line_content": "  return parseTo(*src, result).then([&, src](StringPiece sp) -> Tgt {",
          "new_line_content": "  Tgt result;",
          "content_same": false
        },
        {
          "line": 1506,
          "old_api": "std::move(result)",
          "new_api": null,
          "old_text": "std::move(result)",
          "new_text": null,
          "old_line_content": "    return std::move(result);",
          "new_line_content": "    *src = sp;",
          "content_same": false
        },
        {
          "line": 1123,
          "old_api": "str_to_floating<T>(src)",
          "new_api": null,
          "old_text": "str_to_floating<T>(src)",
          "new_text": null,
          "old_line_content": "  return str_to_floating<T>(src);",
          "new_line_content": "convertTo(StringPiece* src) noexcept {",
          "content_same": false
        },
        {
          "line": 1380,
          "old_api": "parseTo",
          "new_api": null,
          "old_text": "parseTo(in, tmp)",
          "new_text": null,
          "old_line_content": "  auto restOrError = parseTo(in, tmp);",
          "new_line_content": "  typename std::underlying_type<T>::type tmp{};",
          "content_same": false
        },
        {
          "line": 1258,
          "old_api": "std::numeric_limits<Tgt>::max()",
          "new_api": null,
          "old_text": "std::numeric_limits<Tgt>::max()",
          "new_text": null,
          "old_line_content": "  constexpr Src tgtMaxAsSrc = static_cast<Src>(std::numeric_limits<Tgt>::max());",
          "new_line_content": "checkConversion(const Src& value) {",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "str_to_integral<T>(src)",
          "new_api": null,
          "old_text": "str_to_integral<T>(src)",
          "new_text": null,
          "old_line_content": "  return str_to_integral<T>(src);",
          "new_line_content": "convertTo(StringPiece* src) noexcept {",
          "content_same": false
        },
        {
          "line": 1514,
          "old_api": "thenOrThrow",
          "new_api": null,
          "old_text": "parseTo(*src, result)\n      .thenOrThrow(\n          [&, src](StringPiece sp) -> Tgt {\n            *src = sp;\n            return std::move(result);\n          },\n          [=](Error e) { return makeConversionError(e, *src); })",
          "new_text": null,
          "old_line_content": "  return parseTo(*src, result)",
          "new_line_content": "  using Error = detail::ParseToError<Tgt>;",
          "content_same": false
        },
        {
          "line": 1390,
          "old_api": "end",
          "new_api": null,
          "old_text": "in.end()",
          "new_text": null,
          "old_line_content": "  return StringPiece{in.end(), in.end()};",
          "new_line_content": "  out = in;",
          "content_same": false
        },
        {
          "line": 1518,
          "old_api": "std::move(result)",
          "new_api": null,
          "old_text": "std::move(result)",
          "new_text": null,
          "old_line_content": "            return std::move(result);",
          "new_line_content": "            *src = sp;",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": "Src",
          "new_api": null,
          "old_text": "Src()",
          "new_text": null,
          "old_line_content": "    const Src mmax = folly::nextafter(tgtMaxAsSrc, Src());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1520,
          "old_api": "makeConversionError",
          "new_api": null,
          "old_text": "makeConversionError(e, *src)",
          "new_text": null,
          "old_line_content": "          [=](Error e) { return makeConversionError(e, *src); });",
          "new_line_content": "          },",
          "content_same": false
        },
        {
          "line": 1009,
          "old_api": "toAppendDelimFit",
          "new_api": null,
          "old_text": "toAppendDelimFit(delim, vs..., &result)",
          "new_text": null,
          "old_line_content": "  toAppendDelimFit(delim, vs..., &result);",
          "new_line_content": "  Tgt result;",
          "content_same": false
        },
        {
          "line": 1397,
          "old_api": "clear",
          "new_api": null,
          "old_text": "out.clear()",
          "new_text": null,
          "old_line_content": "  out.clear();",
          "new_line_content": "    std::string& out) {",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "detail::digits_to<Tgt>(b, e)",
          "new_api": null,
          "old_text": "detail::digits_to<Tgt>(b, e)",
          "new_text": null,
          "old_line_content": "  return detail::digits_to<Tgt>(b, e);",
          "new_line_content": "tryTo(const char* b, const char* e) {",
          "content_same": false
        },
        {
          "line": 1533,
          "old_api": "static_cast<I>(value)",
          "new_api": null,
          "old_text": "static_cast<I>(value)",
          "new_text": null,
          "old_line_content": "  return tryTo<Tgt>(static_cast<I>(value));",
          "new_line_content": "  using I = typename std::underlying_type<Src>::type;",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "clear",
          "new_api": null,
          "old_text": "out.clear()",
          "new_text": null,
          "old_line_content": "  out.clear();",
          "new_line_content": "    fbstring& out) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 28,
      "total_additions": 48,
      "total_deletions": 47,
      "total_api_changes": 123
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 123,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          992,
          993,
          989,
          990,
          991
        ]
      }
    },
    "api_calls_before": 234,
    "api_calls_after": 235,
    "diff_info": {
      "added_lines": 6,
      "removed_lines": 5,
      "total_diff_lines": 23
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/22b02d5f8cb26f973e1ac2632ac8ac4c095ab02a",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/22b02d5f8cb26f973e1ac2632ac8ac4c095ab02a/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/22b02d5f8cb26f973e1ac2632ac8ac4c095ab02a/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/folly/modified_file/22b02d5f8cb26f973e1ac2632ac8ac4c095ab02a/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 252,
          "old_api": "cloneAtMost",
          "new_api": "pullAtMost",
          "old_text": "cloneAtMost(buf, len)",
          "new_text": "pullAtMost(&byte, 1)",
          "old_line_content": "    if (UNLIKELY(cloneAtMost(buf, len) != len)) {",
          "new_line_content": "    if (UNLIKELY(pullAtMost(&byte, 1) != 1)) {",
          "content_same": false
        },
        {
          "line": 259,
          "old_api": "std::out_of_range(\"underflow\")",
          "new_api": "pullAtMost",
          "old_text": "std::out_of_range(\"underflow\")",
          "new_text": "pullAtMost(buf, len)",
          "old_line_content": "      throw std::out_of_range(\"underflow\");",
          "new_line_content": "    if (UNLIKELY(pullAtMost(buf, len) != len)) {",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "tryAdvanceBuffer",
          "new_api": "skipAtMost",
          "old_text": "tryAdvanceBuffer()",
          "new_text": "skipAtMost(len)",
          "old_line_content": "      if (UNLIKELY(!tryAdvanceBuffer())) {",
          "new_line_content": "    if (UNLIKELY(skipAtMost(len) != len)) {",
          "content_same": false
        },
        {
          "line": 296,
          "old_api": "trimStart",
          "new_api": "tryAdvanceBuffer",
          "old_text": "buf.trimStart(offset_)",
          "new_text": "tryAdvanceBuffer()",
          "old_line_content": "          buf.trimStart(offset_);",
          "new_line_content": "      if (UNLIKELY(!tryAdvanceBuffer())) {",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "cloneOneInto",
          "new_api": "length",
          "old_text": "crtBuf_->cloneOneInto(buf)",
          "new_text": "length()",
          "old_line_content": "        crtBuf_->cloneOneInto(buf);",
          "new_line_content": "      size_t available = length();",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": "trimStart",
          "new_api": "LIKELY",
          "old_text": "buf.trimStart(offset_)",
          "new_text": "LIKELY(available >= len)",
          "old_line_content": "        buf.trimStart(offset_);",
          "new_line_content": "      if (LIKELY(available >= len)) {",
          "content_same": false
        },
        {
          "line": 314,
          "old_api": "cloneOne",
          "new_api": "cloneOneInto",
          "old_text": "crtBuf_->cloneOne()",
          "new_text": "crtBuf_->cloneOneInto(buf)",
          "old_line_content": "        tmp = crtBuf_->cloneOne();",
          "new_line_content": "          crtBuf_->cloneOneInto(buf);",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "std::move(tmp)",
          "new_api": "length",
          "old_text": "std::move(tmp)",
          "new_text": "buf.length()",
          "old_line_content": "        buf.prependChain(std::move(tmp));",
          "new_line_content": "          buf.trimEnd(buf.length() - len);",
          "content_same": false
        },
        {
          "line": 320,
          "old_api": "tryAdvanceBuffer",
          "new_api": "length",
          "old_text": "tryAdvanceBuffer()",
          "new_text": "tmp->length()",
          "old_line_content": "      if (UNLIKELY(!tryAdvanceBuffer())) {",
          "new_line_content": "          tmp->trimEnd(tmp->length() - len);",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "length",
          "new_api": "tryAdvanceBuffer",
          "old_text": "length()",
          "new_text": "tryAdvanceBuffer()",
          "old_line_content": "      size_t available = length();",
          "new_line_content": "      if (UNLIKELY(!tryAdvanceBuffer())) {",
          "content_same": false
        },
        {
          "line": 365,
          "old_api": "next",
          "new_api": "tryAdvanceBuffer",
          "old_text": "otherBuf->next()",
          "new_text": "tryAdvanceBuffer()",
          "old_line_content": "           otherBuf = otherBuf->next()) {",
          "new_line_content": "      if (UNLIKELY(!tryAdvanceBuffer())) {",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": "next",
          "new_api": "std::out_of_range(\"wrap-around\")",
          "old_text": "crtBuf_->next()",
          "new_text": "std::out_of_range(\"wrap-around\")",
          "old_line_content": "    BufType* nextBuf = crtBuf_->next();",
          "new_line_content": "        throw std::out_of_range(\"wrap-around\");",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "explicit",
          "new_api": "advanceDone",
          "old_text": "explicit",
          "new_text": "static_cast<Derived*>(this)->advanceDone()",
          "old_line_content": "  explicit Cursor(const detail::CursorBase<OtherDerived, OtherBuf>& cursor)",
          "new_line_content": "    static_cast<Derived*>(this)->advanceDone();",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": "static_cast<Derived*>(this)",
          "new_api": "explicit",
          "old_text": "static_cast<Derived*>(this)",
          "new_text": "explicit",
          "old_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "new_line_content": "  explicit Cursor(const detail::CursorBase<OtherDerived, OtherBuf>& cursor)",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "pushAtMost",
          "new_api": "reinterpret_cast<const uint8_t*>(&value)",
          "old_text": "d->pushAtMost(buf, len)",
          "new_text": "reinterpret_cast<const uint8_t*>(&value)",
          "old_line_content": "    if (d->pushAtMost(buf, len) != len) {",
          "new_line_content": "    const uint8_t* u8 = reinterpret_cast<const uint8_t*>(&value);",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": "std::out_of_range(\"overflow\")",
          "new_api": "static_cast<Derived*>(this)",
          "old_text": "std::out_of_range(\"overflow\")",
          "new_text": "static_cast<Derived*>(this)",
          "old_line_content": "      throw std::out_of_range(\"overflow\");",
          "new_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "std::out_of_range(\"overflow\")",
          "new_api": "static_cast<Derived*>(this)",
          "old_text": "std::out_of_range(\"overflow\")",
          "new_text": "static_cast<Derived*>(this)",
          "old_line_content": "      throw std::out_of_range(\"overflow\");",
          "new_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": "size",
          "new_api": "static_cast<Derived*>(this)",
          "old_text": "buf.size()",
          "new_text": "static_cast<Derived*>(this)",
          "old_line_content": "    return d->pushAtMost(buf.data(), buf.size());",
          "new_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": "gather",
          "new_api": "explicit",
          "old_text": "this->crtBuf_->gather(this->offset_ + n)",
          "new_text": "explicit",
          "old_line_content": "    this->crtBuf_->gather(this->offset_ + n);",
          "new_line_content": "  explicit RWCursor(const detail::CursorBase<OtherDerived, OtherBuf>& cursor)",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "writableData",
          "new_api": "std::overflow_error(\"cannot gather() past the end of the chain\")",
          "old_text": "writableData()",
          "new_text": "std::overflow_error(\"cannot gather() past the end of the chain\")",
          "old_line_content": "        memcpy(writableData(), buf, len);",
          "new_line_content": "      throw std::overflow_error(\"cannot gather() past the end of the chain\");",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": "maybeUnshare",
          "new_api": "gather",
          "old_text": "maybeUnshare()",
          "new_text": "this->crtBuf_->gather(this->offset_ + size)",
          "old_line_content": "        maybeUnshare();",
          "new_line_content": "    return this->crtBuf_->gather(this->offset_ + size);",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": "trimStart",
          "new_api": "tryAdvanceBuffer",
          "old_text": "remaining->trimStart(this->offset_)",
          "new_text": "this->tryAdvanceBuffer()",
          "old_line_content": "        remaining->trimStart(this->offset_);",
          "new_line_content": "      if (UNLIKELY(!this->tryAdvanceBuffer())) {",
          "content_same": false
        },
        {
          "line": 625,
          "old_api": "writableData",
          "new_api": "length",
          "old_text": "this->crtBuf_->writableData()",
          "new_text": "this->crtBuf_->length()",
          "old_line_content": "    return this->crtBuf_->writableData() + this->offset_;",
          "new_line_content": "      if (this->crtBuf_->length() - this->offset_ > 0) {",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "UNLIKELY",
          "new_api": "std::move(remaining)",
          "old_text": "UNLIKELY(maybeShared_)",
          "new_text": "std::move(remaining)",
          "old_line_content": "    if (UNLIKELY(maybeShared_)) {",
          "new_line_content": "        buf->prependChain(std::move(remaining));",
          "content_same": false
        },
        {
          "line": 694,
          "old_api": "IOBuf::create(n)",
          "new_api": "append",
          "old_text": "IOBuf::create(n)",
          "new_text": "crtBuf_->append(n)",
          "old_line_content": "    buffer_->prependChain(IOBuf::create(n));",
          "new_line_content": "    crtBuf_->append(n);",
          "content_same": false
        },
        {
          "line": 713,
          "old_api": "tryGrowChain",
          "new_api": "IOBuf::create(n)",
          "old_text": "tryGrowChain()",
          "new_text": "IOBuf::create(n)",
          "old_line_content": "      if (UNLIKELY(!tryGrowChain())) {",
          "new_line_content": "    buffer_->prependChain(IOBuf::create(n));",
          "content_same": false
        },
        {
          "line": 815,
          "old_api": "std::min(remaining, growth_)",
          "new_api": "postallocate",
          "old_text": "std::min(remaining, growth_)",
          "new_text": "queue_->postallocate(n)",
          "old_line_content": "      auto p = queue_->preallocate(std::min(remaining, growth_),",
          "new_line_content": "  void append(size_t n) { queue_->postallocate(n); }",
          "content_same": false
        },
        {
          "line": 819,
          "old_api": "postallocate",
          "new_api": "preallocate",
          "old_text": "queue_->postallocate(p.second)",
          "new_text": "queue_->preallocate(n, growth_)",
          "old_line_content": "      queue_->postallocate(p.second);",
          "new_line_content": "  void ensure(uint64_t n) { queue_->preallocate(n, growth_); }",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 514,
          "old_api": null,
          "new_api": "pushAtMost",
          "old_text": null,
          "new_text": "this->pushAtMost(cursor, len)",
          "old_line_content": "        return written + len;",
          "new_line_content": "    if (this->pushAtMost(cursor, len) != len) {",
          "content_same": false
        },
        {
          "line": 515,
          "old_api": null,
          "new_api": "std::out_of_range(\"overflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"overflow\")",
          "old_line_content": "      }",
          "new_line_content": "      throw std::out_of_range(\"overflow\");",
          "content_same": false
        },
        {
          "line": 522,
          "old_api": null,
          "new_api": "peek",
          "old_text": null,
          "new_text": "cursor.peek()",
          "old_line_content": "    }",
          "new_line_content": "      auto currentBuffer = cursor.peek();",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "this->push(crtData, len)",
          "old_line_content": "};",
          "new_line_content": "        this->push(crtData, len);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": null,
          "new_api": "skip",
          "old_text": null,
          "new_text": "cursor.skip(len)",
          "old_line_content": "",
          "new_line_content": "        cursor.skip(len);",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "this->push(crtData, available)",
          "old_line_content": "  friend class detail::CursorBase<RWCursor<access>, IOBuf>;",
          "new_line_content": "      this->push(crtData, available);",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "skip",
          "old_text": null,
          "new_text": "cursor.skip(available)",
          "old_line_content": " public:",
          "new_line_content": "      cursor.skip(available);",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "    // checking.  We only have to perform an explicit check here when calling",
          "new_line_content": "  explicit RWCursor(IOBuf* buf)",
          "content_same": false
        },
        {
          "line": 579,
          "old_api": null,
          "new_api": "totalLength",
          "old_text": null,
          "new_text": "this->totalLength()",
          "old_line_content": "        }",
          "new_line_content": "    if (this->crtBuf_ != this->head() && this->totalLength() < n) {",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": null,
          "new_api": "gather",
          "old_text": null,
          "new_text": "this->crtBuf_->gather(this->offset_ + n)",
          "old_line_content": "        return copied + len;",
          "new_line_content": "    this->crtBuf_->gather(this->offset_ + n);",
          "content_same": false
        },
        {
          "line": 585,
          "old_api": null,
          "new_api": "totalLength",
          "old_text": null,
          "new_text": "this->totalLength()",
          "old_line_content": "      if (access == CursorAccess::UNSHARE) {",
          "new_line_content": "    size_t size = std::min(n, this->totalLength());",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "this->length()",
          "old_line_content": "      len -= available;",
          "new_line_content": "      size_t available = this->length();",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "LIKELY",
          "old_text": null,
          "new_text": "LIKELY(available >= len)",
          "old_line_content": "    }",
          "new_line_content": "      if (LIKELY(available >= len)) {",
          "content_same": false
        },
        {
          "line": 597,
          "old_api": null,
          "new_api": "maybeUnshare",
          "old_text": null,
          "new_text": "maybeUnshare()",
          "old_line_content": "",
          "new_line_content": "          maybeUnshare();",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "writableData",
          "old_text": null,
          "new_text": "writableData()",
          "old_line_content": "    folly::IOBuf* nextBuf;",
          "new_line_content": "        memcpy(writableData(), buf, len);",
          "content_same": false
        },
        {
          "line": 605,
          "old_api": null,
          "new_api": "maybeUnshare",
          "old_text": null,
          "new_text": "maybeUnshare()",
          "old_line_content": "      std::unique_ptr<folly::IOBuf> remaining;",
          "new_line_content": "        maybeUnshare();",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": null,
          "new_api": "writableData",
          "old_text": null,
          "new_text": "writableData()",
          "old_line_content": "        // Need to split current IOBuf in two.",
          "new_line_content": "      memcpy(writableData(), buf, available);",
          "content_same": false
        },
        {
          "line": 622,
          "old_api": null,
          "new_api": "std::move(buf)",
          "old_text": null,
          "new_text": "std::move(buf)",
          "old_line_content": "  }",
          "new_line_content": "      this->crtBuf_->prependChain(std::move(buf));",
          "content_same": false
        },
        {
          "line": 627,
          "old_api": null,
          "new_api": "cloneOne",
          "old_text": null,
          "new_text": "this->crtBuf_->cloneOne()",
          "old_line_content": "",
          "new_line_content": "        remaining = this->crtBuf_->cloneOne();",
          "content_same": false
        },
        {
          "line": 628,
          "old_api": null,
          "new_api": "trimStart",
          "old_text": null,
          "new_text": "remaining->trimStart(this->offset_)",
          "old_line_content": " private:",
          "new_line_content": "        remaining->trimStart(this->offset_);",
          "content_same": false
        },
        {
          "line": 629,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "remaining.get()",
          "old_line_content": "  void maybeUnshare() {",
          "new_line_content": "        nextBuf = remaining.get();",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "this->crtBuf_->next()",
          "old_line_content": "    }",
          "new_line_content": "        nextBuf = this->crtBuf_->next();",
          "content_same": false
        },
        {
          "line": 635,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "this->length()",
          "old_line_content": "",
          "new_line_content": "      this->crtBuf_->trimEnd(this->length());",
          "content_same": false
        },
        {
          "line": 636,
          "old_api": null,
          "new_api": "std::move(buf)",
          "old_text": null,
          "new_text": "std::move(buf)",
          "old_line_content": "  void advanceDone() {",
          "new_line_content": "      this->crtBuf_->appendChain(std::move(buf));",
          "content_same": false
        },
        {
          "line": 644,
          "old_api": null,
          "new_api": "writableData",
          "old_text": null,
          "new_text": "this->crtBuf_->writableData()",
          "old_line_content": "typedef RWCursor<CursorAccess::UNSHARE> RWUnshareCursor;",
          "new_line_content": "    return this->crtBuf_->writableData() + this->offset_;",
          "content_same": false
        },
        {
          "line": 649,
          "old_api": null,
          "new_api": "UNLIKELY",
          "old_text": null,
          "new_text": "UNLIKELY(maybeShared_)",
          "old_line_content": " * (and push() and ensure() will throw) if growth == 0.",
          "new_line_content": "    if (UNLIKELY(maybeShared_)) {",
          "content_same": false
        },
        {
          "line": 650,
          "old_api": null,
          "new_api": "unshareOne",
          "old_text": null,
          "new_text": "this->crtBuf_->unshareOne()",
          "old_line_content": " *",
          "new_line_content": "      this->crtBuf_->unshareOne();",
          "content_same": false
        },
        {
          "line": 677,
          "old_api": null,
          "new_api": "prev",
          "old_text": null,
          "new_text": "buf->prev()",
          "old_line_content": "",
          "new_line_content": "      crtBuf_(buf->prev()),",
          "content_same": false
        },
        {
          "line": 682,
          "old_api": null,
          "new_api": "writableTail",
          "old_text": null,
          "new_text": "crtBuf_->writableTail()",
          "old_line_content": "  void ensure(uint64_t n) {",
          "new_line_content": "    return crtBuf_->writableTail();",
          "content_same": false
        },
        {
          "line": 686,
          "old_api": null,
          "new_api": "tailroom",
          "old_text": null,
          "new_text": "crtBuf_->tailroom()",
          "old_line_content": "",
          "new_line_content": "    return crtBuf_->tailroom();",
          "content_same": false
        },
        {
          "line": 702,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "length()",
          "old_line_content": "      // Fast path: it all fits in one buffer.",
          "new_line_content": "    if (LIKELY(length() >= n)) {",
          "content_same": false
        },
        {
          "line": 709,
          "old_api": null,
          "new_api": "std::out_of_range(\"can't grow buffer chain\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"can't grow buffer chain\")",
          "old_line_content": "",
          "new_line_content": "      throw std::out_of_range(\"can't grow buffer chain\");",
          "content_same": false
        },
        {
          "line": 712,
          "old_api": null,
          "new_api": "std::max(n, growth_)",
          "old_text": null,
          "new_text": "std::max(n, growth_)",
          "old_line_content": "      copied += available;",
          "new_line_content": "    n = std::max(n, growth_);",
          "content_same": false
        },
        {
          "line": 714,
          "old_api": null,
          "new_api": "prev",
          "old_text": null,
          "new_text": "buffer_->prev()",
          "old_line_content": "        return copied;",
          "new_line_content": "    crtBuf_ = buffer_->prev();",
          "content_same": false
        },
        {
          "line": 722,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "length()",
          "old_line_content": "   * Append to the end of this buffer, using a printf() style",
          "new_line_content": "      size_t available = length();",
          "content_same": false
        },
        {
          "line": 723,
          "old_api": null,
          "new_api": "LIKELY",
          "old_text": null,
          "new_text": "LIKELY(available >= len)",
          "old_line_content": "   * format specifier.",
          "new_line_content": "      if (LIKELY(available >= len)) {",
          "content_same": false
        },
        {
          "line": 724,
          "old_api": null,
          "new_api": "writableData",
          "old_text": null,
          "new_text": "writableData()",
          "old_line_content": "   *",
          "new_line_content": "        memcpy(writableData(), buf, len);",
          "content_same": false
        },
        {
          "line": 725,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "append(len)",
          "old_line_content": "   * Note that folly/Format.h provides nicer and more type-safe mechanisms",
          "new_line_content": "        append(len);",
          "content_same": false
        },
        {
          "line": 729,
          "old_api": null,
          "new_api": "writableData",
          "old_text": null,
          "new_text": "writableData()",
          "old_line_content": "   *",
          "new_line_content": "      memcpy(writableData(), buf, available);",
          "content_same": false
        },
        {
          "line": 730,
          "old_api": null,
          "new_api": "append",
          "old_text": null,
          "new_text": "append(available)",
          "old_line_content": "   *   Appender app(&iobuf);",
          "new_line_content": "      append(available);",
          "content_same": false
        },
        {
          "line": 732,
          "old_api": null,
          "new_api": "tryGrowChain",
          "old_text": null,
          "new_text": "tryGrowChain()",
          "old_line_content": "   *",
          "new_line_content": "      if (UNLIKELY(!tryGrowChain())) {",
          "content_same": false
        },
        {
          "line": 244,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "length()",
          "old_line_content": "",
          "new_line_content": "    if (LIKELY(length() >= 1)) {",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "data()",
          "old_line_content": "  void clone(std::unique_ptr<folly::IOBuf>& buf, size_t len) {",
          "new_line_content": "      uint8_t byte = *data();",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": null,
          "new_api": "std::out_of_range(\"underflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"underflow\")",
          "old_line_content": "    }",
          "new_line_content": "      throw std::out_of_range(\"underflow\");",
          "content_same": false
        },
        {
          "line": 773,
          "old_api": null,
          "new_api": "ByteRange",
          "old_text": null,
          "new_text": "ByteRange(sp)",
          "old_line_content": "",
          "new_line_content": "    push(ByteRange(sp));",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "cloneAtMost",
          "old_text": null,
          "new_text": "cloneAtMost(buf, len)",
          "old_line_content": "    size_t copied = 0;",
          "new_line_content": "    if (UNLIKELY(cloneAtMost(buf, len) != len)) {",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": null,
          "new_api": "std::out_of_range(\"underflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"underflow\")",
          "old_line_content": "    for (;;) {",
          "new_line_content": "      throw std::out_of_range(\"underflow\");",
          "content_same": false
        },
        {
          "line": 778,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "crtBuf_->next()",
          "old_line_content": "   * space in the queue, we grow no more than growth bytes at once",
          "new_line_content": "    assert(crtBuf_->next() == buffer_);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "cloneAtMost",
          "old_text": null,
          "new_text": "cloneAtMost(buf, len)",
          "old_line_content": "        offset_ += len;",
          "new_line_content": "    if (UNLIKELY(cloneAtMost(buf, len) != len)) {",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "std::out_of_range(\"underflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"underflow\")",
          "old_line_content": "        return copied + len;",
          "new_line_content": "      throw std::out_of_range(\"underflow\");",
          "content_same": false
        },
        {
          "line": 783,
          "old_api": null,
          "new_api": "IOBuf::create(growth_)",
          "old_text": null,
          "new_text": "IOBuf::create(growth_)",
          "old_line_content": "  }",
          "new_line_content": "    buffer_->prependChain(IOBuf::create(growth_));",
          "content_same": false
        },
        {
          "line": 784,
          "old_api": null,
          "new_api": "prev",
          "old_text": null,
          "new_text": "buffer_->prev()",
          "old_line_content": "",
          "new_line_content": "    crtBuf_ = buffer_->prev();",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "std::out_of_range(\"underflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"underflow\")",
          "old_line_content": "        return copied;",
          "new_line_content": "      throw std::out_of_range(\"underflow\");",
          "content_same": false
        },
        {
          "line": 283,
          "old_api": null,
          "new_api": "reinterpret_cast<uint8_t*>(buf)",
          "old_text": null,
          "new_text": "reinterpret_cast<uint8_t*>(buf)",
          "old_line_content": "  }",
          "new_line_content": "    uint8_t* p = reinterpret_cast<uint8_t*>(buf);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "length()",
          "old_line_content": "",
          "new_line_content": "      size_t available = length();",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": null,
          "new_api": "LIKELY",
          "old_text": null,
          "new_text": "LIKELY(available >= len)",
          "old_line_content": "    std::unique_ptr<folly::IOBuf> tmp;",
          "new_line_content": "      if (LIKELY(available >= len)) {",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "data()",
          "old_line_content": "    size_t copied = 0;",
          "new_line_content": "        memcpy(p, data(), len);",
          "content_same": false
        },
        {
          "line": 801,
          "old_api": null,
          "new_api": "reset",
          "old_text": null,
          "new_text": "reset(queue, growth)",
          "old_line_content": "",
          "new_line_content": "    reset(queue, growth);",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": null,
          "new_api": "data",
          "old_text": null,
          "new_text": "data()",
          "old_line_content": "        if (loopCount == 0) {",
          "new_line_content": "      memcpy(p, data(), available);",
          "content_same": false
        },
        {
          "line": 810,
          "old_api": null,
          "new_api": "writableTail",
          "old_text": null,
          "new_text": "queue_->writableTail()",
          "old_line_content": "",
          "new_line_content": "    return static_cast<uint8_t*>(queue_->writableTail());",
          "content_same": false
        },
        {
          "line": 813,
          "old_api": null,
          "new_api": "tailroom",
          "old_text": null,
          "new_text": "queue_->tailroom()",
          "old_line_content": "    size_t remaining = len;",
          "new_line_content": "  size_t length() const { return queue_->tailroom(); }",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": null,
          "new_api": "folly::IOBuf()",
          "old_text": null,
          "new_text": "folly::IOBuf()",
          "old_line_content": "        offset_ += len;",
          "new_line_content": "    buf = folly::IOBuf();",
          "content_same": false
        },
        {
          "line": 825,
          "old_api": null,
          "new_api": "preallocate",
          "old_text": null,
          "new_text": "queue_->preallocate(sizeof(T), growth_)",
          "old_line_content": "  }",
          "new_line_content": "    auto p = queue_->preallocate(sizeof(T), growth_);",
          "content_same": false
        },
        {
          "line": 826,
          "old_api": null,
          "new_api": "storeUnaligned",
          "old_text": null,
          "new_text": "storeUnaligned(p.first, value)",
          "old_line_content": "",
          "new_line_content": "    storeUnaligned(p.first, value);",
          "content_same": false
        },
        {
          "line": 827,
          "old_api": null,
          "new_api": "postallocate",
          "old_text": null,
          "new_text": "queue_->postallocate(sizeof(T))",
          "old_line_content": "  void insert(std::unique_ptr<folly::IOBuf> buf) {",
          "new_line_content": "    queue_->postallocate(sizeof(T));",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "cloneOne",
          "old_text": null,
          "new_text": "crtBuf_->cloneOne()",
          "old_line_content": "",
          "new_line_content": "          tmp = crtBuf_->cloneOne();",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "trimStart",
          "old_text": null,
          "new_text": "tmp->trimStart(offset_)",
          "old_line_content": "      copied += available;",
          "new_line_content": "          tmp->trimStart(offset_);",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": null,
          "new_api": "std::move(tmp)",
          "old_text": null,
          "new_text": "std::move(tmp)",
          "old_line_content": "        return copied;",
          "new_line_content": "          buf.prependChain(std::move(tmp));",
          "content_same": false
        },
        {
          "line": 834,
          "old_api": null,
          "new_api": "std::min(remaining, growth_)",
          "old_text": null,
          "new_text": "std::min(remaining, growth_)",
          "old_line_content": "  folly::IOBufQueue* queue_;",
          "new_line_content": "      auto p = queue_->preallocate(std::min(remaining, growth_),",
          "content_same": false
        },
        {
          "line": 837,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy(p.first, buf, p.second)",
          "old_line_content": "",
          "new_line_content": "      memcpy(p.first, buf, p.second);",
          "content_same": false
        },
        {
          "line": 838,
          "old_api": null,
          "new_api": "postallocate",
          "old_text": null,
          "new_text": "queue_->postallocate(p.second)",
          "old_line_content": "}}  // folly::io",
          "new_line_content": "      queue_->postallocate(p.second);",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": null,
          "new_api": "cloneOneInto",
          "old_text": null,
          "new_text": "crtBuf_->cloneOneInto(buf)",
          "old_line_content": "    }",
          "new_line_content": "        crtBuf_->cloneOneInto(buf);",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": null,
          "new_api": "trimStart",
          "old_text": null,
          "new_text": "buf.trimStart(offset_)",
          "old_line_content": "",
          "new_line_content": "        buf.trimStart(offset_);",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": null,
          "new_api": "cloneOne",
          "old_text": null,
          "new_text": "crtBuf_->cloneOne()",
          "old_line_content": "  }",
          "new_line_content": "        tmp = crtBuf_->cloneOne();",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": null,
          "new_api": "trimStart",
          "old_text": null,
          "new_text": "tmp->trimStart(offset_)",
          "old_line_content": "",
          "new_line_content": "        tmp->trimStart(offset_);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "std::move(tmp)",
          "old_text": null,
          "new_text": "std::move(tmp)",
          "old_line_content": "  size_t skipAtMost(size_t len) {",
          "new_line_content": "        buf.prependChain(std::move(tmp));",
          "content_same": false
        },
        {
          "line": 848,
          "old_api": null,
          "new_api": "std::move(buf)",
          "old_text": null,
          "new_text": "std::move(buf)",
          "old_line_content": "",
          "new_line_content": "      queue_->append(std::move(buf), true);",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": null,
          "new_api": "make_unique<folly::IOBuf>()",
          "old_text": null,
          "new_text": "make_unique<folly::IOBuf>()",
          "old_line_content": "      }",
          "new_line_content": "      buf = make_unique<folly::IOBuf>();",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "cloneAtMost",
          "old_text": null,
          "new_text": "cloneAtMost(*buf, len)",
          "old_line_content": "  }",
          "new_line_content": "    return cloneAtMost(*buf, len);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "length()",
          "old_line_content": "    size_t len = 0;",
          "new_line_content": "      size_t available = length();",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": null,
          "new_api": "LIKELY",
          "old_text": null,
          "new_text": "LIKELY(available >= len)",
          "old_line_content": "",
          "new_line_content": "      if (LIKELY(available >= len)) {",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "otherBuf->length()",
          "old_line_content": "    }",
          "new_line_content": "      len += otherBuf->length() - other.offset_;",
          "content_same": false
        },
        {
          "line": 382,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "otherBuf->next()",
          "old_line_content": "    return len;",
          "new_line_content": "      for (otherBuf = otherBuf->next();",
          "content_same": false
        },
        {
          "line": 384,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "otherBuf->next()",
          "old_line_content": "",
          "new_line_content": "           otherBuf = otherBuf->next()) {",
          "content_same": false
        },
        {
          "line": 385,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "otherBuf->length()",
          "old_line_content": "  /**",
          "new_line_content": "        len += otherBuf->length();",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": null,
          "new_api": "std::out_of_range(\"wrap-around\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"wrap-around\")",
          "old_line_content": "    size_t len = 0;",
          "new_line_content": "        throw std::out_of_range(\"wrap-around\");",
          "content_same": false
        },
        {
          "line": 395,
          "old_api": null,
          "new_api": "std::out_of_range(\"underflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"underflow\")",
          "old_line_content": "      if (curBuf == buf || curBuf == buffer_) {",
          "new_line_content": "        throw std::out_of_range(\"underflow\");",
          "content_same": false
        },
        {
          "line": 412,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "curBuf->length()",
          "old_line_content": "  }",
          "new_line_content": "      len += curBuf->length();",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "curBuf->next()",
          "old_line_content": "",
          "new_line_content": "      curBuf = curBuf->next();",
          "content_same": false
        },
        {
          "line": 434,
          "old_api": null,
          "new_api": "next",
          "old_text": null,
          "new_text": "crtBuf_->next()",
          "old_line_content": "} //namespace detail",
          "new_line_content": "    BufType* nextBuf = crtBuf_->next();",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "UNLIKELY",
          "old_text": null,
          "new_text": "UNLIKELY(nextBuf == buffer_)",
          "old_line_content": "",
          "new_line_content": "    if (UNLIKELY(nextBuf == buffer_)) {",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": null,
          "new_api": "length",
          "old_text": null,
          "new_text": "crtBuf_->length()",
          "old_line_content": "class Cursor : public detail::CursorBase<Cursor, const IOBuf> {",
          "new_line_content": "      offset_ = crtBuf_->length();",
          "content_same": false
        },
        {
          "line": 457,
          "old_api": null,
          "new_api": "explicit",
          "old_text": null,
          "new_text": "explicit",
          "old_line_content": "  }",
          "new_line_content": "  explicit Cursor(const IOBuf* buf)",
          "content_same": false
        },
        {
          "line": 475,
          "old_api": null,
          "new_api": "push",
          "old_text": null,
          "new_text": "d->push(u8, sizeof(T))",
          "old_line_content": "    }",
          "new_line_content": "    d->push(u8, sizeof(T));",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "Endian::big(value)",
          "old_text": null,
          "new_text": "Endian::big(value)",
          "old_line_content": "    }",
          "new_line_content": "    d->write(Endian::big(value));",
          "content_same": false
        },
        {
          "line": 487,
          "old_api": null,
          "new_api": "Endian::little(value)",
          "old_text": null,
          "new_text": "Endian::little(value)",
          "old_line_content": "  }",
          "new_line_content": "    d->write(Endian::little(value));",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "static_cast<Derived*>(this)",
          "old_text": null,
          "new_text": "static_cast<Derived*>(this)",
          "old_line_content": "   * If input cursor contains less than len bytes, or this cursor has less than",
          "new_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": null,
          "new_api": "pushAtMost",
          "old_text": null,
          "new_text": "d->pushAtMost(buf, len)",
          "old_line_content": "   * len bytes writable space, an out_of_range exception will be thrown.",
          "new_line_content": "    if (d->pushAtMost(buf, len) != len) {",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "std::out_of_range(\"overflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"overflow\")",
          "old_line_content": "   */",
          "new_line_content": "      throw std::out_of_range(\"overflow\");",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "buf.size()",
          "old_line_content": "  }",
          "new_line_content": "    if (this->pushAtMost(buf) != buf.size()) {",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "std::out_of_range(\"overflow\")",
          "old_text": null,
          "new_text": "std::out_of_range(\"overflow\")",
          "old_line_content": "",
          "new_line_content": "      throw std::out_of_range(\"overflow\");",
          "content_same": false
        },
        {
          "line": 504,
          "old_api": null,
          "new_api": "static_cast<Derived*>(this)",
          "old_text": null,
          "new_text": "static_cast<Derived*>(this)",
          "old_line_content": "      const uint8_t* crtData = currentBuffer.first;",
          "new_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "content_same": false
        },
        {
          "line": 505,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "buf.size()",
          "old_line_content": "      size_t available = currentBuffer.second;",
          "new_line_content": "    return d->pushAtMost(buf.data(), buf.size());",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 512,
          "old_api": "push",
          "new_api": null,
          "old_text": "this->push(crtData, len)",
          "new_text": null,
          "old_line_content": "        this->push(crtData, len);",
          "new_line_content": "   */",
          "content_same": false
        },
        {
          "line": 513,
          "old_api": "skip",
          "new_api": null,
          "old_text": "cursor.skip(len)",
          "new_text": null,
          "old_line_content": "        cursor.skip(len);",
          "new_line_content": "  void push(Cursor cursor, size_t len) {",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": "push",
          "new_api": null,
          "old_text": "this->push(crtData, available)",
          "new_text": null,
          "old_line_content": "      this->push(crtData, available);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "skip",
          "new_api": null,
          "old_text": "cursor.skip(available)",
          "new_text": null,
          "old_line_content": "      cursor.skip(available);",
          "new_line_content": "  size_t pushAtMost(Cursor cursor, size_t len) {",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit RWCursor(IOBuf* buf)",
          "new_line_content": "      written += available;",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit RWCursor(const detail::CursorBase<OtherDerived, OtherBuf>& cursor)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 560,
          "old_api": "totalLength",
          "new_api": null,
          "old_text": "this->totalLength()",
          "new_text": null,
          "old_line_content": "    if (this->crtBuf_ != this->head() && this->totalLength() < n) {",
          "new_line_content": "      maybeShared_(true) {}",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "std::overflow_error(\"cannot gather() past the end of the chain\")",
          "new_api": null,
          "old_text": "std::overflow_error(\"cannot gather() past the end of the chain\")",
          "new_text": null,
          "old_line_content": "      throw std::overflow_error(\"cannot gather() past the end of the chain\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 566,
          "old_api": "totalLength",
          "new_api": null,
          "old_text": "this->totalLength()",
          "new_text": null,
          "old_line_content": "    size_t size = std::min(n, this->totalLength());",
          "new_line_content": "  /**",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "gather",
          "new_api": null,
          "old_text": "this->crtBuf_->gather(this->offset_ + size)",
          "new_text": null,
          "old_line_content": "    return this->crtBuf_->gather(this->offset_ + size);",
          "new_line_content": "   * Gather at least n bytes contiguously into the current buffer,",
          "content_same": false
        },
        {
          "line": 575,
          "old_api": "length",
          "new_api": null,
          "old_text": "this->length()",
          "new_text": null,
          "old_line_content": "      size_t available = this->length();",
          "new_line_content": "    //",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": "LIKELY",
          "new_api": null,
          "old_text": "LIKELY(available >= len)",
          "new_text": null,
          "old_line_content": "      if (LIKELY(available >= len)) {",
          "new_line_content": "    // If crtBuf_ == head() then IOBuf::gather() will perform all necessary",
          "content_same": false
        },
        {
          "line": 578,
          "old_api": "maybeUnshare",
          "new_api": null,
          "old_text": "maybeUnshare()",
          "new_text": null,
          "old_line_content": "          maybeUnshare();",
          "new_line_content": "    // gather() on a non-head element.",
          "content_same": false
        },
        {
          "line": 588,
          "old_api": "writableData",
          "new_api": null,
          "old_text": "writableData()",
          "new_text": null,
          "old_line_content": "      memcpy(writableData(), buf, available);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "tryAdvanceBuffer",
          "new_api": null,
          "old_text": "this->tryAdvanceBuffer()",
          "new_text": null,
          "old_line_content": "      if (UNLIKELY(!this->tryAdvanceBuffer())) {",
          "new_line_content": "  size_t pushAtMost(const uint8_t* buf, size_t len) {",
          "content_same": false
        },
        {
          "line": 603,
          "old_api": "std::move(buf)",
          "new_api": null,
          "old_text": "std::move(buf)",
          "new_text": null,
          "old_line_content": "      this->crtBuf_->prependChain(std::move(buf));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "length",
          "new_api": null,
          "old_text": "this->crtBuf_->length()",
          "new_text": null,
          "old_line_content": "      if (this->crtBuf_->length() - this->offset_ > 0) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "cloneOne",
          "new_api": null,
          "old_text": "this->crtBuf_->cloneOne()",
          "new_text": null,
          "old_line_content": "        remaining = this->crtBuf_->cloneOne();",
          "new_line_content": "      copied += available;",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": "get",
          "new_api": null,
          "old_text": "remaining.get()",
          "new_text": null,
          "old_line_content": "        nextBuf = remaining.get();",
          "new_line_content": "        return copied;",
          "content_same": false
        },
        {
          "line": 611,
          "old_api": "std::move(remaining)",
          "new_api": null,
          "old_text": "std::move(remaining)",
          "new_text": null,
          "old_line_content": "        buf->prependChain(std::move(remaining));",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 614,
          "old_api": "next",
          "new_api": null,
          "old_text": "this->crtBuf_->next()",
          "new_text": null,
          "old_line_content": "        nextBuf = this->crtBuf_->next();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 616,
          "old_api": "length",
          "new_api": null,
          "old_text": "this->length()",
          "new_text": null,
          "old_line_content": "      this->crtBuf_->trimEnd(this->length());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "std::move(buf)",
          "new_api": null,
          "old_text": "std::move(buf)",
          "new_text": null,
          "old_line_content": "      this->crtBuf_->appendChain(std::move(buf));",
          "new_line_content": "  void insert(std::unique_ptr<folly::IOBuf> buf) {",
          "content_same": false
        },
        {
          "line": 631,
          "old_api": "unshareOne",
          "new_api": null,
          "old_text": "this->crtBuf_->unshareOne()",
          "new_text": null,
          "old_line_content": "      this->crtBuf_->unshareOne();",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 658,
          "old_api": "prev",
          "new_api": null,
          "old_text": "buf->prev()",
          "new_text": null,
          "old_line_content": "      crtBuf_(buf->prev()),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 663,
          "old_api": "writableTail",
          "new_api": null,
          "old_text": "crtBuf_->writableTail()",
          "new_text": null,
          "old_line_content": "    return crtBuf_->writableTail();",
          "new_line_content": "typedef RWCursor<CursorAccess::UNSHARE> RWUnshareCursor;",
          "content_same": false
        },
        {
          "line": 667,
          "old_api": "tailroom",
          "new_api": null,
          "old_text": "crtBuf_->tailroom()",
          "new_text": null,
          "old_line_content": "    return crtBuf_->tailroom();",
          "new_line_content": " * buffers) in increments of at least growth bytes every time.  Won't grow",
          "content_same": false
        },
        {
          "line": 675,
          "old_api": "append",
          "new_api": null,
          "old_text": "crtBuf_->append(n)",
          "new_text": null,
          "old_line_content": "    crtBuf_->append(n);",
          "new_line_content": "  Appender(IOBuf* buf, uint64_t growth)",
          "content_same": false
        },
        {
          "line": 683,
          "old_api": "length",
          "new_api": null,
          "old_text": "length()",
          "new_text": null,
          "old_line_content": "    if (LIKELY(length() >= n)) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 690,
          "old_api": "std::out_of_range(\"can't grow buffer chain\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"can't grow buffer chain\")",
          "new_text": null,
          "old_line_content": "      throw std::out_of_range(\"can't grow buffer chain\");",
          "new_line_content": "   * Mark n bytes (must be <= length()) as appended, as per the",
          "content_same": false
        },
        {
          "line": 693,
          "old_api": "std::max(n, growth_)",
          "new_api": null,
          "old_text": "std::max(n, growth_)",
          "new_text": null,
          "old_line_content": "    n = std::max(n, growth_);",
          "new_line_content": "  void append(size_t n) {",
          "content_same": false
        },
        {
          "line": 695,
          "old_api": "prev",
          "new_api": null,
          "old_text": "buffer_->prev()",
          "new_text": null,
          "old_line_content": "    crtBuf_ = buffer_->prev();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 703,
          "old_api": "length",
          "new_api": null,
          "old_text": "length()",
          "new_text": null,
          "old_line_content": "      size_t available = length();",
          "new_line_content": "      return;",
          "content_same": false
        },
        {
          "line": 704,
          "old_api": "LIKELY",
          "new_api": null,
          "old_text": "LIKELY(available >= len)",
          "new_text": null,
          "old_line_content": "      if (LIKELY(available >= len)) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 705,
          "old_api": "writableData",
          "new_api": null,
          "old_text": "writableData()",
          "new_text": null,
          "old_line_content": "        memcpy(writableData(), buf, len);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 706,
          "old_api": "append",
          "new_api": null,
          "old_text": "append(len)",
          "new_text": null,
          "old_line_content": "        append(len);",
          "new_line_content": "    // Waste the rest of the current buffer and allocate a new one.",
          "content_same": false
        },
        {
          "line": 710,
          "old_api": "writableData",
          "new_api": null,
          "old_text": "writableData()",
          "new_text": null,
          "old_line_content": "      memcpy(writableData(), buf, available);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 711,
          "old_api": "append",
          "new_api": null,
          "old_text": "append(available)",
          "new_text": null,
          "old_line_content": "      append(available);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 240,
          "old_api": "pullAtMost",
          "new_api": null,
          "old_text": "pullAtMost(buf, len)",
          "new_text": null,
          "old_line_content": "    if (UNLIKELY(pullAtMost(buf, len) != len)) {",
          "new_line_content": "   * Read one byte. Equivalent to pull(&byte, 1) but faster.",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "std::out_of_range(\"underflow\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"underflow\")",
          "new_text": null,
          "old_line_content": "      throw std::out_of_range(\"underflow\");",
          "new_line_content": "   */",
          "content_same": false
        },
        {
          "line": 754,
          "old_api": "ByteRange",
          "new_api": null,
          "old_text": "ByteRange(sp)",
          "new_text": null,
          "old_line_content": "    push(ByteRange(sp));",
          "new_line_content": "   *",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "cloneAtMost",
          "new_api": null,
          "old_text": "cloneAtMost(buf, len)",
          "new_text": null,
          "old_line_content": "    if (UNLIKELY(cloneAtMost(buf, len) != len)) {",
          "new_line_content": "      offset_++;",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "std::out_of_range(\"underflow\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"underflow\")",
          "new_text": null,
          "old_line_content": "      throw std::out_of_range(\"underflow\");",
          "new_line_content": "      return byte;",
          "content_same": false
        },
        {
          "line": 759,
          "old_api": "next",
          "new_api": null,
          "old_text": "crtBuf_->next()",
          "new_text": null,
          "old_line_content": "    assert(crtBuf_->next() == buffer_);",
          "new_line_content": "   *",
          "content_same": false
        },
        {
          "line": 764,
          "old_api": "IOBuf::create(growth_)",
          "new_api": null,
          "old_text": "IOBuf::create(growth_)",
          "new_text": null,
          "old_line_content": "    buffer_->prependChain(IOBuf::create(growth_));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 765,
          "old_api": "prev",
          "new_api": null,
          "old_text": "buffer_->prev()",
          "new_text": null,
          "old_line_content": "    crtBuf_ = buffer_->prev();",
          "new_line_content": "  void vprintf(const char* fmt, va_list ap);",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": "skipAtMost",
          "new_api": null,
          "old_text": "skipAtMost(len)",
          "new_text": null,
          "old_line_content": "    if (UNLIKELY(skipAtMost(len) != len)) {",
          "new_line_content": "  void pull(void* buf, size_t len) {",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": "reinterpret_cast<uint8_t*>(buf)",
          "new_api": null,
          "old_text": "reinterpret_cast<uint8_t*>(buf)",
          "new_text": null,
          "old_line_content": "    uint8_t* p = reinterpret_cast<uint8_t*>(buf);",
          "new_line_content": "  void clone(std::unique_ptr<folly::IOBuf>& buf, size_t len) {",
          "content_same": false
        },
        {
          "line": 268,
          "old_api": "length",
          "new_api": null,
          "old_text": "length()",
          "new_text": null,
          "old_line_content": "      size_t available = length();",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": "LIKELY",
          "new_api": null,
          "old_text": "LIKELY(available >= len)",
          "new_text": null,
          "old_line_content": "      if (LIKELY(available >= len)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "data",
          "new_api": null,
          "old_text": "data()",
          "new_text": null,
          "old_line_content": "        memcpy(p, data(), len);",
          "new_line_content": "  void clone(folly::IOBuf& buf, size_t len) {",
          "content_same": false
        },
        {
          "line": 782,
          "old_api": "reset",
          "new_api": null,
          "old_text": "reset(queue, growth)",
          "new_text": null,
          "old_line_content": "    reset(queue, growth);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "data",
          "new_api": null,
          "old_text": "data()",
          "new_text": null,
          "old_line_content": "      memcpy(p, data(), available);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 791,
          "old_api": "writableTail",
          "new_api": null,
          "old_text": "queue_->writableTail()",
          "new_text": null,
          "old_line_content": "    return static_cast<uint8_t*>(queue_->writableTail());",
          "new_line_content": "};",
          "content_same": false
        },
        {
          "line": 794,
          "old_api": "tailroom",
          "new_api": null,
          "old_text": "queue_->tailroom()",
          "new_text": null,
          "old_line_content": "  size_t length() const { return queue_->tailroom(); }",
          "new_line_content": " public:",
          "content_same": false
        },
        {
          "line": 796,
          "old_api": "postallocate",
          "new_api": null,
          "old_text": "queue_->postallocate(n)",
          "new_text": null,
          "old_line_content": "  void append(size_t n) { queue_->postallocate(n); }",
          "new_line_content": "   * Create an Appender that writes to a IOBufQueue.  When we allocate",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "folly::IOBuf()",
          "new_api": null,
          "old_text": "folly::IOBuf()",
          "new_text": null,
          "old_line_content": "    buf = folly::IOBuf();",
          "new_line_content": "      // Fast path: it all fits in one buffer.",
          "content_same": false
        },
        {
          "line": 800,
          "old_api": "preallocate",
          "new_api": null,
          "old_text": "queue_->preallocate(n, growth_)",
          "new_text": null,
          "old_line_content": "  void ensure(uint64_t n) { queue_->preallocate(n, growth_); }",
          "new_line_content": "  QueueAppender(IOBufQueue* queue, uint64_t growth) {",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "length",
          "new_api": null,
          "old_text": "length()",
          "new_text": null,
          "old_line_content": "      size_t available = length();",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": "LIKELY",
          "new_api": null,
          "old_text": "LIKELY(available >= len)",
          "new_text": null,
          "old_line_content": "      if (LIKELY(available >= len)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 806,
          "old_api": "preallocate",
          "new_api": null,
          "old_text": "queue_->preallocate(sizeof(T), growth_)",
          "new_text": null,
          "old_line_content": "    auto p = queue_->preallocate(sizeof(T), growth_);",
          "new_line_content": "    growth_ = growth;",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": "cloneOneInto",
          "new_api": null,
          "old_text": "crtBuf_->cloneOneInto(buf)",
          "new_text": null,
          "old_line_content": "          crtBuf_->cloneOneInto(buf);",
          "new_line_content": "      copied += available;",
          "content_same": false
        },
        {
          "line": 807,
          "old_api": "storeUnaligned",
          "new_api": null,
          "old_text": "storeUnaligned(p.first, value)",
          "new_text": null,
          "old_line_content": "    storeUnaligned(p.first, value);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 297,
          "old_api": "length",
          "new_api": null,
          "old_text": "buf.length()",
          "new_text": null,
          "old_line_content": "          buf.trimEnd(buf.length() - len);",
          "new_line_content": "        return copied;",
          "content_same": false
        },
        {
          "line": 808,
          "old_api": "postallocate",
          "new_api": null,
          "old_text": "queue_->postallocate(sizeof(T))",
          "new_text": null,
          "old_line_content": "    queue_->postallocate(sizeof(T));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": "cloneOne",
          "new_api": null,
          "old_text": "crtBuf_->cloneOne()",
          "new_text": null,
          "old_line_content": "          tmp = crtBuf_->cloneOne();",
          "new_line_content": "      p += available;",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "trimStart",
          "new_api": null,
          "old_text": "tmp->trimStart(offset_)",
          "new_text": null,
          "old_line_content": "          tmp->trimStart(offset_);",
          "new_line_content": "      len -= available;",
          "content_same": false
        },
        {
          "line": 301,
          "old_api": "length",
          "new_api": null,
          "old_text": "tmp->length()",
          "new_text": null,
          "old_line_content": "          tmp->trimEnd(tmp->length() - len);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 302,
          "old_api": "std::move(tmp)",
          "new_api": null,
          "old_text": "std::move(tmp)",
          "new_text": null,
          "old_line_content": "          buf.prependChain(std::move(tmp));",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 818,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(p.first, buf, p.second)",
          "new_text": null,
          "old_line_content": "      memcpy(p.first, buf, p.second);",
          "new_line_content": "  // not enough room.",
          "content_same": false
        },
        {
          "line": 829,
          "old_api": "std::move(buf)",
          "new_api": null,
          "old_text": "std::move(buf)",
          "new_text": null,
          "old_line_content": "      queue_->append(std::move(buf), true);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": "make_unique<folly::IOBuf>()",
          "new_api": null,
          "old_text": "make_unique<folly::IOBuf>()",
          "new_text": null,
          "old_line_content": "      buf = make_unique<folly::IOBuf>();",
          "new_line_content": "      if (loopCount == 0) {",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": "cloneAtMost",
          "new_api": null,
          "old_text": "cloneAtMost(*buf, len)",
          "new_text": null,
          "old_line_content": "    return cloneAtMost(*buf, len);",
          "new_line_content": "      } else {",
          "content_same": false
        },
        {
          "line": 340,
          "old_api": "LIKELY",
          "new_api": null,
          "old_text": "LIKELY(available >= len)",
          "new_text": null,
          "old_line_content": "      if (LIKELY(available >= len)) {",
          "new_line_content": "        return copied;",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "tryAdvanceBuffer",
          "new_api": null,
          "old_text": "tryAdvanceBuffer()",
          "new_text": null,
          "old_line_content": "      if (UNLIKELY(!tryAdvanceBuffer())) {",
          "new_line_content": "  size_t cloneAtMost(std::unique_ptr<folly::IOBuf>& buf, size_t len) {",
          "content_same": false
        },
        {
          "line": 361,
          "old_api": "length",
          "new_api": null,
          "old_text": "otherBuf->length()",
          "new_text": null,
          "old_line_content": "      len += otherBuf->length() - other.offset_;",
          "new_line_content": "        return skipped + len;",
          "content_same": false
        },
        {
          "line": 363,
          "old_api": "next",
          "new_api": null,
          "old_text": "otherBuf->next()",
          "new_text": null,
          "old_line_content": "      for (otherBuf = otherBuf->next();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 366,
          "old_api": "length",
          "new_api": null,
          "old_text": "otherBuf->length()",
          "new_text": null,
          "old_line_content": "        len += otherBuf->length();",
          "new_line_content": "        return skipped;",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": "std::out_of_range(\"wrap-around\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"wrap-around\")",
          "new_text": null,
          "old_line_content": "        throw std::out_of_range(\"wrap-around\");",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "std::out_of_range(\"underflow\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"underflow\")",
          "new_text": null,
          "old_line_content": "        throw std::out_of_range(\"underflow\");",
          "new_line_content": "    BufType *otherBuf = other.crtBuf_;",
          "content_same": false
        },
        {
          "line": 393,
          "old_api": "length",
          "new_api": null,
          "old_text": "curBuf->length()",
          "new_text": null,
          "old_line_content": "      len += curBuf->length();",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "next",
          "new_api": null,
          "old_text": "curBuf->next()",
          "new_text": null,
          "old_line_content": "      curBuf = curBuf->next();",
          "new_line_content": "      if (offset_ < other.offset_) {",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "std::out_of_range(\"wrap-around\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"wrap-around\")",
          "new_text": null,
          "old_line_content": "        throw std::out_of_range(\"wrap-around\");",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": "UNLIKELY",
          "new_api": null,
          "old_text": "UNLIKELY(nextBuf == buffer_)",
          "new_text": null,
          "old_line_content": "    if (UNLIKELY(nextBuf == buffer_)) {",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 417,
          "old_api": "length",
          "new_api": null,
          "old_text": "crtBuf_->length()",
          "new_text": null,
          "old_line_content": "      offset_ = crtBuf_->length();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": "advanceDone",
          "new_api": null,
          "old_text": "static_cast<Derived*>(this)->advanceDone()",
          "new_text": null,
          "old_line_content": "    static_cast<Derived*>(this)->advanceDone();",
          "new_line_content": " protected:",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": "explicit",
          "new_api": null,
          "old_text": "explicit",
          "new_text": null,
          "old_line_content": "  explicit Cursor(const IOBuf* buf)",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": "reinterpret_cast<const uint8_t*>(&value)",
          "new_api": null,
          "old_text": "reinterpret_cast<const uint8_t*>(&value)",
          "new_text": null,
          "old_line_content": "    const uint8_t* u8 = reinterpret_cast<const uint8_t*>(&value);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 455,
          "old_api": "static_cast<Derived*>(this)",
          "new_api": null,
          "old_text": "static_cast<Derived*>(this)",
          "new_text": null,
          "old_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "new_line_content": "class Cursor : public detail::CursorBase<Cursor, const IOBuf> {",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "push",
          "new_api": null,
          "old_text": "d->push(u8, sizeof(T))",
          "new_text": null,
          "old_line_content": "    d->push(u8, sizeof(T));",
          "new_line_content": " public:",
          "content_same": false
        },
        {
          "line": 462,
          "old_api": "Endian::big(value)",
          "new_api": null,
          "old_text": "Endian::big(value)",
          "new_text": null,
          "old_line_content": "    d->write(Endian::big(value));",
          "new_line_content": "    : detail::CursorBase<Cursor, const IOBuf>(cursor) {}",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "static_cast<Derived*>(this)",
          "new_api": null,
          "old_text": "static_cast<Derived*>(this)",
          "new_text": null,
          "old_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "new_line_content": "template <class Derived>",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "Endian::little(value)",
          "new_api": null,
          "old_text": "Endian::little(value)",
          "new_text": null,
          "old_line_content": "    d->write(Endian::little(value));",
          "new_line_content": "class Writable {",
          "content_same": false
        },
        {
          "line": 472,
          "old_api": "static_cast<Derived*>(this)",
          "new_api": null,
          "old_text": "static_cast<Derived*>(this)",
          "new_text": null,
          "old_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "new_line_content": "  write(T value) {",
          "content_same": false
        },
        {
          "line": 479,
          "old_api": "size",
          "new_api": null,
          "old_text": "buf.size()",
          "new_text": null,
          "old_line_content": "    if (this->pushAtMost(buf) != buf.size()) {",
          "new_line_content": "  void writeBE(T value) {",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "static_cast<Derived*>(this)",
          "new_api": null,
          "old_text": "static_cast<Derived*>(this)",
          "new_text": null,
          "old_line_content": "    Derived* d = static_cast<Derived*>(this);",
          "new_line_content": "  void writeLE(T value) {",
          "content_same": false
        },
        {
          "line": 495,
          "old_api": "pushAtMost",
          "new_api": null,
          "old_text": "this->pushAtMost(cursor, len)",
          "new_text": null,
          "old_line_content": "    if (this->pushAtMost(cursor, len) != len) {",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "std::out_of_range(\"overflow\")",
          "new_api": null,
          "old_text": "std::out_of_range(\"overflow\")",
          "new_text": null,
          "old_line_content": "      throw std::out_of_range(\"overflow\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": "peek",
          "new_api": null,
          "old_text": "cursor.peek()",
          "new_text": null,
          "old_line_content": "      auto currentBuffer = cursor.peek();",
          "new_line_content": "  size_t pushAtMost(ByteRange buf) {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 28,
      "total_additions": 103,
      "total_deletions": 99,
      "total_api_changes": 230
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 19,
        "api_related_lines": 230,
        "non_api_lines": 12,
        "non_api_line_numbers": [
          256,
          257,
          239,
          242,
          243,
          248,
          249,
          250,
          251,
          253,
          254,
          255
        ]
      }
    },
    "api_calls_before": 213,
    "api_calls_after": 219,
    "diff_info": {
      "added_lines": 19,
      "removed_lines": 0,
      "total_diff_lines": 31
    }
  }
}
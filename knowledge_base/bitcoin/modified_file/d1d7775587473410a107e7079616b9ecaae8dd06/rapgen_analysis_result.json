{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/d1d7775587473410a107e7079616b9ecaae8dd06",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/d1d7775587473410a107e7079616b9ecaae8dd06/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/d1d7775587473410a107e7079616b9ecaae8dd06/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/d1d7775587473410a107e7079616b9ecaae8dd06/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 579,
          "old_api": "size",
          "new_api": "end",
          "old_text": "b.size()",
          "new_text": "b.end()",
          "old_line_content": "                pc = erase(pc, pc + b.size());",
          "new_line_content": "            while (static_cast<size_t>(end() - pc) >= b.size() && std::equal(b.begin(), b.end(), pc))",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 578,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "result.end()",
          "old_line_content": "            {",
          "new_line_content": "            result.insert(result.end(), pc2, pc);",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "b.size()",
          "old_line_content": "            }",
          "new_line_content": "                pc = pc + b.size();",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "GetOp",
          "old_text": null,
          "new_text": "GetOp(pc, opcode)",
          "old_line_content": "    int Find(opcodetype op) const",
          "new_line_content": "        while (GetOp(pc, opcode));",
          "content_same": false
        },
        {
          "line": 589,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "end()",
          "old_line_content": "        opcodetype opcode;",
          "new_line_content": "            result.insert(result.end(), pc2, end());",
          "content_same": false
        },
        {
          "line": 599,
          "old_api": null,
          "new_api": "GetOp",
          "old_text": null,
          "new_text": "GetOp(pc, opcode)",
          "old_line_content": "     * CHECKMULTISIGs serialized in scriptSigs are",
          "new_line_content": "        for (const_iterator pc = begin(); pc != end() && GetOp(pc, opcode);)",
          "content_same": false
        },
        {
          "line": 633,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "begin()",
          "old_line_content": "",
          "new_line_content": "        return (size() > 0 && *begin() == OP_RETURN);",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "begin()",
          "old_line_content": "        opcodetype opcode;",
          "new_line_content": "        iterator pc = begin(), pc2 = begin();",
          "content_same": false
        },
        {
          "line": 639,
          "old_api": null,
          "new_api": "swap",
          "old_text": null,
          "new_text": "CScriptBase().swap(*this)",
          "old_line_content": "    CReserveScript() {}",
          "new_line_content": "        CScriptBase().swap(*this);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 577,
          "old_api": "end",
          "new_api": null,
          "old_text": "b.end()",
          "new_text": null,
          "old_line_content": "            while (static_cast<size_t>(end() - pc) >= b.size() && std::equal(b.begin(), b.end(), pc))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": "GetOp",
          "new_api": null,
          "old_text": "GetOp(pc, opcode)",
          "new_text": null,
          "old_line_content": "        while (GetOp(pc, opcode));",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 590,
          "old_api": "GetOp",
          "new_api": null,
          "old_text": "GetOp(pc, opcode)",
          "new_text": null,
          "old_line_content": "        for (const_iterator pc = begin(); pc != end() && GetOp(pc, opcode);)",
          "new_line_content": "            *this = result;",
          "content_same": false
        },
        {
          "line": 624,
          "old_api": "begin",
          "new_api": null,
          "old_text": "begin()",
          "new_text": null,
          "old_line_content": "        return (size() > 0 && *begin() == OP_RETURN);",
          "new_line_content": "    bool IsPushOnly() const;",
          "content_same": false
        },
        {
          "line": 630,
          "old_api": "swap",
          "new_api": null,
          "old_text": "CScriptBase().swap(*this)",
          "new_text": null,
          "old_line_content": "        CScriptBase().swap(*this);",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": "begin",
          "new_api": null,
          "old_text": "begin()",
          "new_text": null,
          "old_line_content": "        iterator pc = begin();",
          "new_line_content": "        CScript result;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 1,
      "total_additions": 8,
      "total_deletions": 6,
      "total_api_changes": 15
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 15,
        "non_api_lines": 5,
        "non_api_line_numbers": [
          584,
          587,
          588,
          591,
          592
        ]
      }
    },
    "api_calls_before": 126,
    "api_calls_after": 131,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 2,
      "total_diff_lines": 34
    }
  }
}
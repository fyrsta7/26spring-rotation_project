{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/9189f5fe4df1ac7ea6ca75ceada867beafda90a9",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/9189f5fe4df1ac7ea6ca75ceada867beafda90a9/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/9189f5fe4df1ac7ea6ca75ceada867beafda90a9/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/9189f5fe4df1ac7ea6ca75ceada867beafda90a9/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1123,
          "old_api": "UPNP_GetExternalIPAddress",
          "new_api": "LogPrintf",
          "old_text": "UPNP_GetExternalIPAddress(urls.controlURL, data.first.servicetype, externalIPAddress)",
          "new_text": "LogPrintf(\"UPnP: GetExternalIPAddress() returned %d\\n\", r)",
          "old_line_content": "            r = UPNP_GetExternalIPAddress(urls.controlURL, data.first.servicetype, externalIPAddress);",
          "new_line_content": "                LogPrintf(\"UPnP: GetExternalIPAddress() returned %d\\n\", r);",
          "content_same": false
        },
        {
          "line": 1154,
          "old_api": "strupnperror",
          "new_api": "LogPrintf",
          "old_text": "strupnperror(r)",
          "new_text": "LogPrintf(\"UPnP Port Mapping successful.\\n\")",
          "old_line_content": "                        port, port, lanaddr, r, strupnperror(r));",
          "new_line_content": "                    LogPrintf(\"UPnP Port Mapping successful.\\n\");;",
          "content_same": false
        },
        {
          "line": 1156,
          "old_api": "LogPrintf",
          "new_api": "MilliSleep",
          "old_text": "LogPrintf(\"UPnP Port Mapping successful.\\n\")",
          "new_text": "MilliSleep(20*60*1000)",
          "old_line_content": "                    LogPrintf(\"UPnP Port Mapping successful.\\n\");;",
          "new_line_content": "                MilliSleep(20*60*1000); // Refresh every 20 minutes",
          "content_same": false
        },
        {
          "line": 1163,
          "old_api": "c_str",
          "new_api": "freeUPNPDevlist",
          "old_text": "port.c_str()",
          "new_text": "freeUPNPDevlist(devlist)",
          "old_line_content": "            r = UPNP_DeletePortMapping(urls.controlURL, data.first.servicetype, port.c_str(), \"TCP\", 0);",
          "new_line_content": "            freeUPNPDevlist(devlist); devlist = 0;",
          "content_same": false
        },
        {
          "line": 1164,
          "old_api": "LogPrintf",
          "new_api": "FreeUPNPUrls",
          "old_text": "LogPrintf(\"UPNP_DeletePortMapping() returned : %d\\n\", r)",
          "new_text": "FreeUPNPUrls(&urls)",
          "old_line_content": "            LogPrintf(\"UPNP_DeletePortMapping() returned : %d\\n\", r);",
          "new_line_content": "            FreeUPNPUrls(&urls);",
          "content_same": false
        },
        {
          "line": 1171,
          "old_api": "freeUPNPDevlist",
          "new_api": "FreeUPNPUrls",
          "old_text": "freeUPNPDevlist(devlist)",
          "new_text": "FreeUPNPUrls(&urls)",
          "old_line_content": "        freeUPNPDevlist(devlist); devlist = 0;",
          "new_line_content": "            FreeUPNPUrls(&urls);",
          "content_same": false
        },
        {
          "line": 1213,
          "old_api": "size",
          "new_api": "MilliSleep",
          "old_text": "addrman.size()",
          "new_text": "MilliSleep(11 * 1000)",
          "old_line_content": "    if ((addrman.size() > 0) &&",
          "new_line_content": "        MilliSleep(11 * 1000);",
          "content_same": false
        },
        {
          "line": 1215,
          "old_api": "MilliSleep",
          "new_api": "LOCK",
          "old_text": "MilliSleep(11 * 1000)",
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "        MilliSleep(11 * 1000);",
          "new_line_content": "        LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 1217,
          "old_api": "LOCK",
          "new_api": "LogPrintf",
          "old_text": "LOCK(cs_vNodes)",
          "new_text": "LogPrintf(\"P2P peers available. Skipped DNS seeding.\\n\")",
          "old_line_content": "        LOCK(cs_vNodes);",
          "new_line_content": "            LogPrintf(\"P2P peers available. Skipped DNS seeding.\\n\");",
          "content_same": false
        },
        {
          "line": 1240,
          "old_api": "GetDefaultPort",
          "new_api": "push_back",
          "old_text": "Params().GetDefaultPort()",
          "new_text": "vAdd.push_back(addr)",
          "old_line_content": "                    CAddress addr = CAddress(CService(ip, Params().GetDefaultPort()));",
          "new_line_content": "                    vAdd.push_back(addr);",
          "content_same": false
        },
        {
          "line": 1269,
          "old_api": "Write",
          "new_api": "size",
          "old_text": "adb.Write(addrman)",
          "new_text": "LogPrint(\"net\", \"Flushed %d addresses to peers.dat  %dms\\n\",\n           addrman.size(), GetTimeMillis() - nStart)",
          "old_line_content": "    adb.Write(addrman);",
          "new_line_content": "    LogPrint(\"net\", \"Flushed %d addresses to peers.dat  %dms\\n\",",
          "content_same": false
        },
        {
          "line": 1280,
          "old_api": "empty",
          "new_api": "front",
          "old_text": "vOneShots.empty()",
          "new_text": "vOneShots.front()",
          "old_line_content": "        if (vOneShots.empty())",
          "new_line_content": "        strDest = vOneShots.front();",
          "content_same": false
        },
        {
          "line": 1318,
          "old_api": "ProcessOneShot",
          "new_api": "MilliSleep",
          "old_text": "ProcessOneShot()",
          "new_text": "MilliSleep(500)",
          "old_line_content": "        ProcessOneShot();",
          "new_line_content": "        MilliSleep(500);",
          "content_same": false
        },
        {
          "line": 1404,
          "old_api": "LOCK",
          "new_api": "push_back",
          "old_text": "LOCK(cs_vAddedNodes)",
          "new_text": "lAddresses.push_back(strAddNode)",
          "old_line_content": "                LOCK(cs_vAddedNodes);",
          "new_line_content": "                    lAddresses.push_back(strAddNode);",
          "content_same": false
        },
        {
          "line": 1422,
          "old_api": "LOCK",
          "new_api": "push_back",
          "old_text": "LOCK(cs_vAddedNodes)",
          "new_text": "lAddresses.push_back(strAddNode)",
          "old_line_content": "            LOCK(cs_vAddedNodes);",
          "new_line_content": "                lAddresses.push_back(strAddNode);",
          "content_same": false
        },
        {
          "line": 1431,
          "old_api": "GetDefaultPort",
          "new_api": "push_back",
          "old_text": "Params().GetDefaultPort()",
          "new_text": "lservAddressesToAdd.push_back(vservNode)",
          "old_line_content": "            if(Lookup(strAddNode.c_str(), vservNode, Params().GetDefaultPort(), fNameLookup, 0))",
          "new_line_content": "                lservAddressesToAdd.push_back(vservNode);",
          "content_same": false
        },
        {
          "line": 1433,
          "old_api": "push_back",
          "new_api": "LOCK",
          "old_text": "lservAddressesToAdd.push_back(vservNode)",
          "new_text": "LOCK(cs_setservAddNodeAddresses)",
          "old_line_content": "                lservAddressesToAdd.push_back(vservNode);",
          "new_line_content": "                    LOCK(cs_setservAddNodeAddresses);",
          "content_same": false
        },
        {
          "line": 1435,
          "old_api": "LOCK",
          "new_api": "insert",
          "old_text": "LOCK(cs_setservAddNodeAddresses)",
          "new_text": "setservAddNodeAddresses.insert(serv)",
          "old_line_content": "                    LOCK(cs_setservAddNodeAddresses);",
          "new_line_content": "                        setservAddNodeAddresses.insert(serv);",
          "content_same": false
        },
        {
          "line": 1444,
          "old_api": "LOCK",
          "new_api": "end",
          "old_text": "LOCK(cs_vNodes)",
          "new_text": "lservAddressesToAdd.end()",
          "old_line_content": "            LOCK(cs_vNodes);",
          "new_line_content": "                for (list<vector<CService> >::iterator it = lservAddressesToAdd.begin(); it != lservAddressesToAdd.end(); it++)",
          "content_same": false
        },
        {
          "line": 1471,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": "IsLocal",
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": "IsLocal(addrConnect)",
          "old_line_content": "    boost::this_thread::interruption_point();",
          "new_line_content": "        if (IsLocal(addrConnect) ||",
          "content_same": false
        },
        {
          "line": 1473,
          "old_api": "IsLocal",
          "new_api": "ToStringIPPort",
          "old_text": "IsLocal(addrConnect)",
          "new_text": "addrConnect.ToStringIPPort()",
          "old_line_content": "        if (IsLocal(addrConnect) ||",
          "new_line_content": "            FindNode(addrConnect.ToStringIPPort()))",
          "content_same": false
        },
        {
          "line": 1475,
          "old_api": "ToStringIPPort",
          "new_api": "FindNode",
          "old_text": "addrConnect.ToStringIPPort()",
          "new_text": "FindNode(pszDest)",
          "old_line_content": "            FindNode(addrConnect.ToStringIPPort()))",
          "new_line_content": "    } else if (FindNode(pszDest))",
          "content_same": false
        },
        {
          "line": 1568,
          "old_api": "CloseSocketDisconnect",
          "new_api": "SendBufferSize",
          "old_text": "pnode->CloseSocketDisconnect()",
          "new_text": "SendBufferSize()",
          "old_line_content": "                        pnode->CloseSocketDisconnect();",
          "new_line_content": "                    if (pnode->nSendSize < SendBufferSize())",
          "content_same": false
        },
        {
          "line": 1570,
          "old_api": "SendBufferSize",
          "new_api": "complete",
          "old_text": "SendBufferSize()",
          "new_text": "pnode->vRecvMsg[0].complete()",
          "old_line_content": "                    if (pnode->nSendSize < SendBufferSize())",
          "new_line_content": "                        if (!pnode->vRecvGetData.empty() || (!pnode->vRecvMsg.empty() && pnode->vRecvMsg[0].complete()))",
          "content_same": false
        },
        {
          "line": 1583,
          "old_api": "TRY_LOCK",
          "new_api": "SendMessages",
          "old_text": "TRY_LOCK(pnode->cs_vSend, lockSend)",
          "new_text": "g_signals.SendMessages(pnode, pnode == pnodeTrickle)",
          "old_line_content": "                TRY_LOCK(pnode->cs_vSend, lockSend);",
          "new_line_content": "                    g_signals.SendMessages(pnode, pnode == pnodeTrickle);",
          "content_same": false
        },
        {
          "line": 1585,
          "old_api": "SendMessages",
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": "g_signals.SendMessages(pnode, pnode == pnodeTrickle)",
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "                    g_signals.SendMessages(pnode, pnode == pnodeTrickle);",
          "new_line_content": "            boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 1591,
          "old_api": "LOCK",
          "new_api": "Release",
          "old_text": "LOCK(cs_vNodes)",
          "new_text": "pnode->Release()",
          "old_line_content": "            LOCK(cs_vNodes);",
          "new_line_content": "                pnode->Release();",
          "content_same": false
        },
        {
          "line": 1614,
          "old_api": "GetSockAddr",
          "new_api": "ToString",
          "old_text": "addrBind.GetSockAddr((struct sockaddr*)&sockaddr, &len)",
          "new_text": "addrBind.ToString()",
          "old_line_content": "    if (!addrBind.GetSockAddr((struct sockaddr*)&sockaddr, &len))",
          "new_line_content": "        strError = strprintf(\"Error: Bind address family for %s not supported\", addrBind.ToString());",
          "content_same": false
        },
        {
          "line": 1640,
          "old_api": "SetSocketNonBlocking",
          "new_api": "LogPrintf",
          "old_text": "SetSocketNonBlocking(hListenSocket, true)",
          "new_text": "LogPrintf(\"%s\\n\", strError)",
          "old_line_content": "    if (!SetSocketNonBlocking(hListenSocket, true)) {",
          "new_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "content_same": false
        },
        {
          "line": 1662,
          "old_api": "::bind(hListenSocket, (struct sockaddr*)&sockaddr, len)",
          "new_api": "WSAGetLastError",
          "old_text": "::bind(hListenSocket, (struct sockaddr*)&sockaddr, len)",
          "new_text": "WSAGetLastError()",
          "old_line_content": "    if (::bind(hListenSocket, (struct sockaddr*)&sockaddr, len) == SOCKET_ERROR)",
          "new_line_content": "        int nErr = WSAGetLastError();",
          "content_same": false
        },
        {
          "line": 1664,
          "old_api": "WSAGetLastError",
          "new_api": "ToString",
          "old_text": "WSAGetLastError()",
          "new_text": "addrBind.ToString()",
          "old_line_content": "        int nErr = WSAGetLastError();",
          "new_line_content": "            strError = strprintf(_(\"Unable to bind to %s on this computer. Bitcoin Core is probably already running.\"), addrBind.ToString());",
          "content_same": false
        },
        {
          "line": 1666,
          "old_api": "ToString",
          "new_api": "NetworkErrorString",
          "old_text": "addrBind.ToString()",
          "new_text": "NetworkErrorString(nErr)",
          "old_line_content": "            strError = strprintf(_(\"Unable to bind to %s on this computer. Bitcoin Core is probably already running.\"), addrBind.ToString());",
          "new_line_content": "            strError = strprintf(_(\"Unable to bind to %s on this computer (bind returned error %s)\"), addrBind.ToString(), NetworkErrorString(nErr));",
          "content_same": false
        },
        {
          "line": 1668,
          "old_api": "NetworkErrorString",
          "new_api": "CloseSocket",
          "old_text": "NetworkErrorString(nErr)",
          "new_text": "CloseSocket(hListenSocket)",
          "old_line_content": "            strError = strprintf(_(\"Unable to bind to %s on this computer (bind returned error %s)\"), addrBind.ToString(), NetworkErrorString(nErr));",
          "new_line_content": "        CloseSocket(hListenSocket);",
          "content_same": false
        },
        {
          "line": 1676,
          "old_api": "listen",
          "new_api": "WSAGetLastError",
          "old_text": "listen(hListenSocket, SOMAXCONN)",
          "new_text": "WSAGetLastError()",
          "old_line_content": "    if (listen(hListenSocket, SOMAXCONN) == SOCKET_ERROR)",
          "new_line_content": "        strError = strprintf(_(\"Error: Listening for incoming connections failed (listen returned error %s)\"), NetworkErrorString(WSAGetLastError()));",
          "content_same": false
        },
        {
          "line": 1678,
          "old_api": "WSAGetLastError",
          "new_api": "CloseSocket",
          "old_text": "WSAGetLastError()",
          "new_text": "CloseSocket(hListenSocket)",
          "old_line_content": "        strError = strprintf(_(\"Error: Listening for incoming connections failed (listen returned error %s)\"), NetworkErrorString(WSAGetLastError()));",
          "new_line_content": "        CloseSocket(hListenSocket);",
          "content_same": false
        },
        {
          "line": 1684,
          "old_api": "ListenSocket",
          "new_api": "IsRoutable",
          "old_text": "ListenSocket(hListenSocket, fWhitelisted)",
          "new_text": "addrBind.IsRoutable()",
          "old_line_content": "    vhListenSocket.push_back(ListenSocket(hListenSocket, fWhitelisted));",
          "new_line_content": "    if (addrBind.IsRoutable() && fDiscover && !fWhitelisted)",
          "content_same": false
        },
        {
          "line": 1755,
          "old_api": "CService",
          "new_api": "Discover",
          "old_text": "CService(\"127.0.0.1\", 0)",
          "new_text": "Discover(threadGroup)",
          "old_line_content": "        pnodeLocalHost = new CNode(INVALID_SOCKET, CAddress(CService(\"127.0.0.1\", 0), nLocalServices));",
          "new_line_content": "    Discover(threadGroup);",
          "content_same": false
        },
        {
          "line": 1764,
          "old_api": "LogPrintf",
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed)",
          "old_text": "LogPrintf(\"DNS seeding disabled\\n\")",
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed)",
          "old_line_content": "        LogPrintf(\"DNS seeding disabled\\n\");",
          "new_line_content": "        threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed));",
          "content_same": false
        },
        {
          "line": 1793,
          "old_api": "post",
          "new_api": "DumpAddresses",
          "old_text": "semOutbound->post()",
          "new_text": "DumpAddresses()",
          "old_line_content": "            semOutbound->post();",
          "new_line_content": "    DumpAddresses();",
          "content_same": false
        },
        {
          "line": 1846,
          "old_api": "reserve",
          "new_api": "RelayTransaction",
          "old_text": "ss.reserve(10000)",
          "new_text": "RelayTransaction(tx, ss)",
          "old_line_content": "    ss.reserve(10000);",
          "new_line_content": "    RelayTransaction(tx, ss);",
          "content_same": false
        },
        {
          "line": 1853,
          "old_api": "GetHash",
          "new_api": "LOCK",
          "old_text": "tx.GetHash()",
          "new_text": "LOCK(cs_mapRelay)",
          "old_line_content": "    CInv inv(MSG_TX, tx.GetHash());",
          "new_line_content": "        LOCK(cs_mapRelay);",
          "content_same": false
        },
        {
          "line": 1855,
          "old_api": "LOCK",
          "new_api": "GetTime",
          "old_text": "LOCK(cs_mapRelay)",
          "new_text": "GetTime()",
          "old_line_content": "        LOCK(cs_mapRelay);",
          "new_line_content": "        while (!vRelayExpiration.empty() && vRelayExpiration.front().first < GetTime())",
          "content_same": false
        },
        {
          "line": 1857,
          "old_api": "GetTime",
          "new_api": "front",
          "old_text": "GetTime()",
          "new_text": "vRelayExpiration.front()",
          "old_line_content": "        while (!vRelayExpiration.empty() && vRelayExpiration.front().first < GetTime())",
          "new_line_content": "            mapRelay.erase(vRelayExpiration.front().second);",
          "content_same": false
        },
        {
          "line": 1865,
          "old_api": "GetTime",
          "new_api": "LOCK",
          "old_text": "GetTime()",
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "        vRelayExpiration.push_back(std::make_pair(GetTime() + 15 * 60, inv));",
          "new_line_content": "    LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 1915,
          "old_api": "empty",
          "new_api": "GetRand",
          "old_text": "ssSend.empty()",
          "new_text": "GetRand(256)",
          "old_line_content": "        if (!ssSend.empty()) {",
          "new_line_content": "            ssSend[pos] ^= (unsigned char)(GetRand(256));",
          "content_same": false
        },
        {
          "line": 1922,
          "old_api": "empty",
          "new_api": "begin",
          "old_text": "ssSend.empty()",
          "new_text": "ssSend.begin()",
          "old_line_content": "        if (!ssSend.empty()) {",
          "new_line_content": "            ssSend.erase(ssSend.begin()+pos);",
          "content_same": false
        },
        {
          "line": 1930,
          "old_api": "size",
          "new_api": "begin",
          "old_text": "ssSend.size()",
          "new_text": "ssSend.begin()",
          "old_line_content": "            CDataStream::size_type pos = GetRand(ssSend.size());",
          "new_line_content": "            ssSend.insert(ssSend.begin()+pos, ch);",
          "content_same": false
        },
        {
          "line": 1959,
          "old_api": "MessageStart",
          "new_api": "end",
          "old_text": "Params().MessageStart()",
          "new_text": "ssPeers.end()",
          "old_line_content": "    ssPeers << FLATDATA(Params().MessageStart());",
          "new_line_content": "    uint256 hash = Hash(ssPeers.begin(), ssPeers.end());",
          "content_same": false
        },
        {
          "line": 1965,
          "old_api": "GetDataDir",
          "new_api": "CAutoFile",
          "old_text": "GetDataDir()",
          "new_text": "CAutoFile(file, SER_DISK, CLIENT_VERSION)",
          "old_line_content": "    boost::filesystem::path pathTmp = GetDataDir() / tmpfn;",
          "new_line_content": "    CAutoFile fileout = CAutoFile(file, SER_DISK, CLIENT_VERSION);",
          "content_same": false
        },
        {
          "line": 1967,
          "old_api": "CAutoFile",
          "new_api": "string",
          "old_text": "CAutoFile(file, SER_DISK, CLIENT_VERSION)",
          "new_text": "pathTmp.string()",
          "old_line_content": "    CAutoFile fileout = CAutoFile(file, SER_DISK, CLIENT_VERSION);",
          "new_line_content": "        return error(\"%s : Failed to open file %s\", __func__, pathTmp.string());",
          "content_same": false
        },
        {
          "line": 1976,
          "old_api": "what",
          "new_api": "FileCommit",
          "old_text": "e.what()",
          "new_text": "FileCommit(fileout)",
          "old_line_content": "        return error(\"%s : Serialize or I/O error - %s\", __func__, e.what());",
          "new_line_content": "    FileCommit(fileout);",
          "content_same": false
        },
        {
          "line": 1992,
          "old_api": "CAutoFile",
          "new_api": "string",
          "old_text": "CAutoFile(file, SER_DISK, CLIENT_VERSION)",
          "new_text": "pathAddr.string()",
          "old_line_content": "    CAutoFile filein = CAutoFile(file, SER_DISK, CLIENT_VERSION);",
          "new_line_content": "        return error(\"%s : Failed to open file %s\", __func__, pathAddr.string());",
          "content_same": false
        },
        {
          "line": 2012,
          "old_api": "what",
          "new_api": "fclose",
          "old_text": "e.what()",
          "new_text": "filein.fclose()",
          "old_line_content": "        return error(\"%s : Deserialize or I/O error - %s\", __func__, e.what());",
          "new_line_content": "    filein.fclose();",
          "content_same": false
        },
        {
          "line": 2019,
          "old_api": "end",
          "new_api": "error",
          "old_text": "ssPeers.end()",
          "new_text": "error(\"%s : Checksum mismatch, data corrupted\", __func__)",
          "old_line_content": "    uint256 hashTmp = Hash(ssPeers.begin(), ssPeers.end());",
          "new_line_content": "        return error(\"%s : Checksum mismatch, data corrupted\", __func__);",
          "content_same": false
        },
        {
          "line": 2054,
          "old_api": "GetTime",
          "new_api": "ToStringIPPort",
          "old_text": "GetTime()",
          "new_text": "addr.ToStringIPPort()",
          "old_line_content": "    nTimeConnected = GetTime();",
          "new_line_content": "    addrName = addrNameIn == \"\" ? addr.ToStringIPPort() : addrNameIn;",
          "content_same": false
        },
        {
          "line": 2095,
          "old_api": "PushVersion",
          "new_api": "GetId",
          "old_text": "PushVersion()",
          "new_text": "GetId()",
          "old_line_content": "        PushVersion();",
          "new_line_content": "    GetNodeSignals().InitializeNode(GetId(), this);",
          "content_same": false
        },
        {
          "line": 2130,
          "old_api": "std::max(nRequestTime + 2 * 60 * 1000000, nNow)",
          "new_api": "update",
          "old_text": "std::max(nRequestTime + 2 * 60 * 1000000, nNow)",
          "new_text": "mapAlreadyAskedFor.update(it, nRequestTime)",
          "old_line_content": "    nRequestTime = std::max(nRequestTime + 2 * 60 * 1000000, nNow);",
          "new_line_content": "        mapAlreadyAskedFor.update(it, nRequestTime);",
          "content_same": false
        },
        {
          "line": 2132,
          "old_api": "update",
          "new_api": "std::make_pair(inv, nRequestTime)",
          "old_text": "mapAlreadyAskedFor.update(it, nRequestTime)",
          "new_text": "std::make_pair(inv, nRequestTime)",
          "old_line_content": "        mapAlreadyAskedFor.update(it, nRequestTime);",
          "new_line_content": "        mapAlreadyAskedFor.insert(std::make_pair(inv, nRequestTime));",
          "content_same": false
        },
        {
          "line": 2140,
          "old_api": "ENTER_CRITICAL_SECTION",
          "new_api": "CMessageHeader",
          "old_text": "ENTER_CRITICAL_SECTION(cs_vSend)",
          "new_text": "CMessageHeader(pszCommand, 0)",
          "old_line_content": "    ENTER_CRITICAL_SECTION(cs_vSend);",
          "new_line_content": "    ssSend << CMessageHeader(pszCommand, 0);",
          "content_same": false
        },
        {
          "line": 2141,
          "old_api": "size",
          "new_api": "LogPrint",
          "old_text": "ssSend.size()",
          "new_text": "LogPrint(\"net\", \"sending: %s \", pszCommand)",
          "old_line_content": "    assert(ssSend.size() == 0);",
          "new_line_content": "    LogPrint(\"net\", \"sending: %s \", pszCommand);",
          "content_same": false
        },
        {
          "line": 2148,
          "old_api": "clear",
          "new_api": "LEAVE_CRITICAL_SECTION",
          "old_text": "ssSend.clear()",
          "new_text": "LEAVE_CRITICAL_SECTION(cs_vSend)",
          "old_line_content": "    ssSend.clear();",
          "new_line_content": "    LEAVE_CRITICAL_SECTION(cs_vSend);",
          "content_same": false
        },
        {
          "line": 2150,
          "old_api": "LEAVE_CRITICAL_SECTION",
          "new_api": "LogPrint",
          "old_text": "LEAVE_CRITICAL_SECTION(cs_vSend)",
          "new_text": "LogPrint(\"net\", \"(aborted)\\n\")",
          "old_line_content": "    LEAVE_CRITICAL_SECTION(cs_vSend);",
          "new_line_content": "    LogPrint(\"net\", \"(aborted)\\n\");",
          "content_same": false
        },
        {
          "line": 2160,
          "old_api": "GetArg",
          "new_api": "LogPrint",
          "old_text": "GetArg(\"-dropmessagestest\", 2)",
          "new_text": "LogPrint(\"net\", \"dropmessages DROPPING SEND MESSAGE\\n\")",
          "old_line_content": "    if (mapArgs.count(\"-dropmessagestest\") && GetRand(GetArg(\"-dropmessagestest\", 2)) == 0)",
          "new_line_content": "        LogPrint(\"net\", \"dropmessages DROPPING SEND MESSAGE\\n\");",
          "content_same": false
        },
        {
          "line": 2167,
          "old_api": "GetArg",
          "new_api": "size",
          "old_text": "GetArg(\"-fuzzmessagestest\", 10)",
          "new_text": "ssSend.size()",
          "old_line_content": "        Fuzz(GetArg(\"-fuzzmessagestest\", 10));",
          "new_line_content": "    if (ssSend.size() == 0)",
          "content_same": false
        },
        {
          "line": 2177,
          "old_api": "end",
          "new_api": "memcpy",
          "old_text": "ssSend.end()",
          "new_text": "memcpy(&nChecksum, &hash, sizeof(nChecksum))",
          "old_line_content": "    uint256 hash = Hash(ssSend.begin() + CMessageHeader::HEADER_SIZE, ssSend.end());",
          "new_line_content": "    memcpy(&nChecksum, &hash, sizeof(nChecksum));",
          "content_same": false
        },
        {
          "line": 2181,
          "old_api": "memcpy",
          "new_api": "LogPrint",
          "old_text": "memcpy((char*)&ssSend[CMessageHeader::CHECKSUM_OFFSET], &nChecksum, sizeof(nChecksum))",
          "new_text": "LogPrint(\"net\", \"(%d bytes) peer=%d\\n\", nSize, id)",
          "old_line_content": "    memcpy((char*)&ssSend[CMessageHeader::CHECKSUM_OFFSET], &nChecksum, sizeof(nChecksum));",
          "new_line_content": "    LogPrint(\"net\", \"(%d bytes) peer=%d\\n\", nSize, id);",
          "content_same": false
        },
        {
          "line": 2183,
          "old_api": "LogPrint",
          "new_api": "CSerializeData",
          "old_text": "LogPrint(\"net\", \"(%d bytes) peer=%d\\n\", nSize, id)",
          "new_text": "CSerializeData()",
          "old_line_content": "    LogPrint(\"net\", \"(%d bytes) peer=%d\\n\", nSize, id);",
          "new_line_content": "    std::deque<CSerializeData>::iterator it = vSendMsg.insert(vSendMsg.end(), CSerializeData());",
          "content_same": false
        },
        {
          "line": 2185,
          "old_api": "CSerializeData",
          "new_api": "size",
          "old_text": "CSerializeData()",
          "new_text": "*it).size()",
          "old_line_content": "    std::deque<CSerializeData>::iterator it = vSendMsg.insert(vSendMsg.end(), CSerializeData());",
          "new_line_content": "    nSendSize += (*it).size();",
          "content_same": false
        },
        {
          "line": 2191,
          "old_api": "SocketSendData",
          "new_api": "LEAVE_CRITICAL_SECTION",
          "old_text": "SocketSendData(this)",
          "new_text": "LEAVE_CRITICAL_SECTION(cs_vSend)",
          "old_line_content": "        SocketSendData(this);",
          "new_line_content": "    LEAVE_CRITICAL_SECTION(cs_vSend);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1536,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "        vector<CNode*> vNodesCopy;",
          "new_line_content": "            LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 1539,
          "old_api": null,
          "new_api": "AddRef",
          "old_text": null,
          "new_text": "pnode->AddRef()",
          "old_line_content": "            vNodesCopy = vNodes;",
          "new_line_content": "                pnode->AddRef();",
          "content_same": false
        },
        {
          "line": 2052,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "    nSendBytes = 0;",
          "new_line_content": "    nTimeConnected = GetTime();",
          "content_same": false
        },
        {
          "line": 1546,
          "old_api": null,
          "new_api": "StartSync",
          "old_text": null,
          "new_text": "StartSync(vNodesCopy)",
          "old_line_content": "",
          "new_line_content": "            StartSync(vNodesCopy);",
          "content_same": false
        },
        {
          "line": 1550,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vNodesCopy.empty()",
          "old_line_content": "        // Poll the connected nodes for messages",
          "new_line_content": "        if (!vNodesCopy.empty())",
          "content_same": false
        },
        {
          "line": 1551,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vNodesCopy.size()",
          "old_line_content": "        CNode* pnodeTrickle = NULL;",
          "new_line_content": "            pnodeTrickle = vNodesCopy[GetRand(vNodesCopy.size())];",
          "content_same": false
        },
        {
          "line": 2074,
          "old_api": null,
          "new_api": "SendBufferSize",
          "old_text": null,
          "new_text": "SendBufferSize()",
          "old_line_content": "    fGetAddr = false;",
          "new_line_content": "    setInventoryKnown.max_size(SendBufferSize() / 1000);",
          "content_same": false
        },
        {
          "line": 1562,
          "old_api": null,
          "new_api": "TRY_LOCK",
          "old_text": null,
          "new_text": "TRY_LOCK(pnode->cs_vRecvMsg, lockRecv)",
          "old_line_content": "            // Receive messages",
          "new_line_content": "                TRY_LOCK(pnode->cs_vRecvMsg, lockRecv);",
          "content_same": false
        },
        {
          "line": 1565,
          "old_api": null,
          "new_api": "ProcessMessages",
          "old_text": null,
          "new_text": "g_signals.ProcessMessages(pnode)",
          "old_line_content": "                if (lockRecv)",
          "new_line_content": "                    if (!g_signals.ProcessMessages(pnode))",
          "content_same": false
        },
        {
          "line": 1566,
          "old_api": null,
          "new_api": "CloseSocketDisconnect",
          "old_text": null,
          "new_text": "pnode->CloseSocketDisconnect()",
          "old_line_content": "                {",
          "new_line_content": "                        pnode->CloseSocketDisconnect();",
          "content_same": false
        },
        {
          "line": 2041,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-maxsendbuffer\", 1*1000)",
          "old_line_content": "",
          "new_line_content": "unsigned int SendBufferSize() { return 1000*GetArg(\"-maxsendbuffer\", 1*1000); }",
          "content_same": false
        },
        {
          "line": 2082,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_nLastNodeId)",
          "old_line_content": "",
          "new_line_content": "        LOCK(cs_nLastNodeId);",
          "content_same": false
        },
        {
          "line": 2087,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Added connection to %s peer=%d\\n\", addrName, id)",
          "old_line_content": "",
          "new_line_content": "        LogPrint(\"net\", \"Added connection to %s peer=%d\\n\", addrName, id);",
          "content_same": false
        },
        {
          "line": 1577,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "                }",
          "new_line_content": "            boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 2093,
          "old_api": null,
          "new_api": "PushVersion",
          "old_text": null,
          "new_text": "PushVersion()",
          "old_line_content": "    // Be shy and don't send version until we hear",
          "new_line_content": "        PushVersion();",
          "content_same": false
        },
        {
          "line": 1581,
          "old_api": null,
          "new_api": "TRY_LOCK",
          "old_text": null,
          "new_text": "TRY_LOCK(pnode->cs_vSend, lockSend)",
          "old_line_content": "            // Send messages",
          "new_line_content": "                TRY_LOCK(pnode->cs_vSend, lockSend);",
          "content_same": false
        },
        {
          "line": 2100,
          "old_api": null,
          "new_api": "CloseSocket",
          "old_text": null,
          "new_text": "CloseSocket(hSocket)",
          "old_line_content": "CNode::~CNode()",
          "new_line_content": "    CloseSocket(hSocket);",
          "content_same": false
        },
        {
          "line": 1589,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "",
          "new_line_content": "            LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 2105,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "GetId()",
          "old_line_content": "        delete pfilter;",
          "new_line_content": "    GetNodeSignals().FinalizeNode(GetId());",
          "content_same": false
        },
        {
          "line": 1595,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(100)",
          "old_line_content": "",
          "new_line_content": "            MilliSleep(100);",
          "content_same": false
        },
        {
          "line": 2113,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapAlreadyAskedFor.find(inv)",
          "old_line_content": "    // the key is the earliest time the request can be sent",
          "new_line_content": "    limitedmap<CInv, int64_t>::const_iterator it = mapAlreadyAskedFor.find(inv);",
          "content_same": false
        },
        {
          "line": 2114,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapAlreadyAskedFor.end()",
          "old_line_content": "    int64_t nRequestTime;",
          "new_line_content": "    if (it != mapAlreadyAskedFor.end())",
          "content_same": false
        },
        {
          "line": 2118,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "DateTimeStrFormat(\"%H:%M:%S\", nRequestTime/1000000).c_str()",
          "old_line_content": "    else",
          "new_line_content": "    LogPrint(\"net\", \"askfor %s  %d (%s) peer=%d\\n\", inv.ToString(), nRequestTime, DateTimeStrFormat(\"%H:%M:%S\", nRequestTime/1000000).c_str(), id);",
          "content_same": false
        },
        {
          "line": 2121,
          "old_api": null,
          "new_api": "GetTimeMicros",
          "old_text": null,
          "new_text": "GetTimeMicros()",
          "old_line_content": "",
          "new_line_content": "    int64_t nNow = GetTimeMicros() - 1000000;",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": null,
          "new_api": "GetListenPort",
          "old_text": null,
          "new_text": "GetListenPort()",
          "old_line_content": "void ThreadMapPort()",
          "new_line_content": "    std::string port = strprintf(\"%u\", GetListenPort());",
          "content_same": false
        },
        {
          "line": 2124,
          "old_api": null,
          "new_api": "std::max(nNow, nLastTime)",
          "old_text": null,
          "new_text": "std::max(nNow, nLastTime)",
          "old_line_content": "    static int64_t nLastTime;",
          "new_line_content": "    nNow = std::max(nNow, nLastTime);",
          "content_same": false
        },
        {
          "line": 1612,
          "old_api": null,
          "new_api": "GetSockAddr",
          "old_text": null,
          "new_text": "addrBind.GetSockAddr((struct sockaddr*)&sockaddr, &len)",
          "old_line_content": "    struct sockaddr_storage sockaddr;",
          "new_line_content": "    if (!addrBind.GetSockAddr((struct sockaddr*)&sockaddr, &len))",
          "content_same": false
        },
        {
          "line": 1615,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s\\n\", strError)",
          "old_line_content": "    {",
          "new_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "content_same": false
        },
        {
          "line": 2128,
          "old_api": null,
          "new_api": "std::max(nRequestTime + 2 * 60 * 1000000, nNow)",
          "old_text": null,
          "new_text": "std::max(nRequestTime + 2 * 60 * 1000000, nNow)",
          "old_line_content": "",
          "new_line_content": "    nRequestTime = std::max(nRequestTime + 2 * 60 * 1000000, nNow);",
          "content_same": false
        },
        {
          "line": 2129,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapAlreadyAskedFor.end()",
          "old_line_content": "    // Each retry is 2 minutes after the last",
          "new_line_content": "    if (it != mapAlreadyAskedFor.end())",
          "content_same": false
        },
        {
          "line": 1105,
          "old_api": null,
          "new_api": "upnpDiscover",
          "old_text": null,
          "new_text": "upnpDiscover(2000, multicastif, minissdpdpath, 0)",
          "old_line_content": "#ifndef UPNPDISCOVER_SUCCESS",
          "new_line_content": "    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0);",
          "content_same": false
        },
        {
          "line": 1619,
          "old_api": null,
          "new_api": "socket",
          "old_text": null,
          "new_text": "socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, IPPROTO_TCP)",
          "old_line_content": "    }",
          "new_line_content": "    SOCKET hListenSocket = socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, IPPROTO_TCP);",
          "content_same": false
        },
        {
          "line": 2133,
          "old_api": null,
          "new_api": "std::make_pair(nRequestTime, inv)",
          "old_text": null,
          "new_text": "std::make_pair(nRequestTime, inv)",
          "old_line_content": "    else",
          "new_line_content": "    mapAskFor.insert(std::make_pair(nRequestTime, inv));",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "upnpDiscover",
          "old_text": null,
          "new_text": "upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, &error)",
          "old_line_content": "    /* miniupnpc 1.6 */",
          "new_line_content": "    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, &error);",
          "content_same": false
        },
        {
          "line": 1622,
          "old_api": null,
          "new_api": "WSAGetLastError",
          "old_text": null,
          "new_text": "WSAGetLastError()",
          "old_line_content": "    if (hListenSocket == INVALID_SOCKET)",
          "new_line_content": "        strError = strprintf(\"Error: Couldn't open socket for incoming connections (socket returned error %s)\", NetworkErrorString(WSAGetLastError()));",
          "content_same": false
        },
        {
          "line": 1623,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s\\n\", strError)",
          "old_line_content": "    {",
          "new_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "content_same": false
        },
        {
          "line": 2138,
          "old_api": null,
          "new_api": "ENTER_CRITICAL_SECTION",
          "old_text": null,
          "new_text": "ENTER_CRITICAL_SECTION(cs_vSend)",
          "old_line_content": "void CNode::BeginMessage(const char* pszCommand) EXCLUSIVE_LOCK_FUNCTION(cs_vSend)",
          "new_line_content": "    ENTER_CRITICAL_SECTION(cs_vSend);",
          "content_same": false
        },
        {
          "line": 2139,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ssSend.size()",
          "old_line_content": "{",
          "new_line_content": "    assert(ssSend.size() == 0);",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": null,
          "new_api": "UPNP_GetValidIGD",
          "old_text": null,
          "new_text": "UPNP_GetValidIGD(devlist, &urls, &data, lanaddr, sizeof(lanaddr))",
          "old_line_content": "    int r;",
          "new_line_content": "    r = UPNP_GetValidIGD(devlist, &urls, &data, lanaddr, sizeof(lanaddr));",
          "content_same": false
        },
        {
          "line": 1630,
          "old_api": null,
          "new_api": "setsockopt",
          "old_text": null,
          "new_text": "setsockopt(hListenSocket, SOL_SOCKET, SO_NOSIGPIPE, (void*)&nOne, sizeof(int))",
          "old_line_content": "#ifdef SO_NOSIGPIPE",
          "new_line_content": "    setsockopt(hListenSocket, SOL_SOCKET, SO_NOSIGPIPE, (void*)&nOne, sizeof(int));",
          "content_same": false
        },
        {
          "line": 1121,
          "old_api": null,
          "new_api": "UPNP_GetExternalIPAddress",
          "old_text": null,
          "new_text": "UPNP_GetExternalIPAddress(urls.controlURL, data.first.servicetype, externalIPAddress)",
          "old_line_content": "        if (fDiscover) {",
          "new_line_content": "            r = UPNP_GetExternalIPAddress(urls.controlURL, data.first.servicetype, externalIPAddress);",
          "content_same": false
        },
        {
          "line": 2146,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "ssSend.clear()",
          "old_line_content": "void CNode::AbortMessage() UNLOCK_FUNCTION(cs_vSend)",
          "new_line_content": "    ssSend.clear();",
          "content_same": false
        },
        {
          "line": 1634,
          "old_api": null,
          "new_api": "setsockopt",
          "old_text": null,
          "new_text": "setsockopt(hListenSocket, SOL_SOCKET, SO_REUSEADDR, (void*)&nOne, sizeof(int))",
          "old_line_content": "    // Allow binding if the port is still in TIME_WAIT state after",
          "new_line_content": "    setsockopt(hListenSocket, SOL_SOCKET, SO_REUSEADDR, (void*)&nOne, sizeof(int));",
          "content_same": false
        },
        {
          "line": 1638,
          "old_api": null,
          "new_api": "SetSocketNonBlocking",
          "old_text": null,
          "new_text": "SetSocketNonBlocking(hListenSocket, true)",
          "old_line_content": "",
          "new_line_content": "    if (!SetSocketNonBlocking(hListenSocket, true)) {",
          "content_same": false
        },
        {
          "line": 1639,
          "old_api": null,
          "new_api": "WSAGetLastError",
          "old_text": null,
          "new_text": "WSAGetLastError()",
          "old_line_content": "    // Set to non-blocking, incoming connections will also inherit this",
          "new_line_content": "        strError = strprintf(\"BindListenPort: Setting listening socket to non-blocking failed, error %s\\n\", NetworkErrorString(WSAGetLastError()));",
          "content_same": false
        },
        {
          "line": 1128,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"UPnP: ExternalIPAddress = %s\\n\", externalIPAddress)",
          "old_line_content": "                if(externalIPAddress[0])",
          "new_line_content": "                    LogPrintf(\"UPnP: ExternalIPAddress = %s\\n\", externalIPAddress);",
          "content_same": false
        },
        {
          "line": 1129,
          "old_api": null,
          "new_api": "CNetAddr",
          "old_text": null,
          "new_text": "CNetAddr(externalIPAddress)",
          "old_line_content": "                {",
          "new_line_content": "                    AddLocal(CNetAddr(externalIPAddress), LOCAL_UPNP);",
          "content_same": false
        },
        {
          "line": 1132,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"UPnP: GetExternalIPAddress failed.\\n\")",
          "old_line_content": "                }",
          "new_line_content": "                    LogPrintf(\"UPnP: GetExternalIPAddress failed.\\n\");",
          "content_same": false
        },
        {
          "line": 2158,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-dropmessagestest\", 2)",
          "old_line_content": "    // since they are only used during development to debug the networking code and are",
          "new_line_content": "    if (mapArgs.count(\"-dropmessagestest\") && GetRand(GetArg(\"-dropmessagestest\", 2)) == 0)",
          "content_same": false
        },
        {
          "line": 1646,
          "old_api": null,
          "new_api": "IsIPv6",
          "old_text": null,
          "new_text": "addrBind.IsIPv6()",
          "old_line_content": "    // some systems don't have IPV6_V6ONLY but are always v6only; others do have the option",
          "new_line_content": "    if (addrBind.IsIPv6()) {",
          "content_same": false
        },
        {
          "line": 1136,
          "old_api": null,
          "new_api": "FormatFullVersion",
          "old_text": null,
          "new_text": "FormatFullVersion()",
          "old_line_content": "        }",
          "new_line_content": "        string strDesc = \"Bitcoin \" + FormatFullVersion();",
          "content_same": false
        },
        {
          "line": 2161,
          "old_api": null,
          "new_api": "AbortMessage",
          "old_text": null,
          "new_text": "AbortMessage()",
          "old_line_content": "    {",
          "new_line_content": "        AbortMessage();",
          "content_same": false
        },
        {
          "line": 1649,
          "old_api": null,
          "new_api": "setsockopt",
          "old_text": null,
          "new_text": "setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_V6ONLY, (const char*)&nOne, sizeof(int))",
          "old_line_content": "#ifdef IPV6_V6ONLY",
          "new_line_content": "        setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_V6ONLY, (const char*)&nOne, sizeof(int));",
          "content_same": false
        },
        {
          "line": 2164,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "mapArgs.count(\"-fuzzmessagestest\")",
          "old_line_content": "        return;",
          "new_line_content": "    if (mapArgs.count(\"-fuzzmessagestest\"))",
          "content_same": false
        },
        {
          "line": 2165,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-fuzzmessagestest\", 10)",
          "old_line_content": "    }",
          "new_line_content": "        Fuzz(GetArg(\"-fuzzmessagestest\", 10));",
          "content_same": false
        },
        {
          "line": 1142,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0)",
          "old_line_content": "#ifndef UPNPDISCOVER_SUCCESS",
          "new_line_content": "                r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,",
          "content_same": false
        },
        {
          "line": 1143,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "strDesc.c_str()",
          "old_line_content": "                /* miniupnpc 1.5 */",
          "new_line_content": "                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0);",
          "content_same": false
        },
        {
          "line": 1656,
          "old_api": null,
          "new_api": "setsockopt",
          "old_text": null,
          "new_text": "setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_PROTECTION_LEVEL, (const char*)&nProtLevel, sizeof(int))",
          "old_line_content": "#ifdef WIN32",
          "new_line_content": "        setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_PROTECTION_LEVEL, (const char*)&nProtLevel, sizeof(int));",
          "content_same": false
        },
        {
          "line": 1146,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\")",
          "old_line_content": "#else",
          "new_line_content": "                r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,",
          "content_same": false
        },
        {
          "line": 1147,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "strDesc.c_str()",
          "old_line_content": "                /* miniupnpc 1.6 */",
          "new_line_content": "                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\");",
          "content_same": false
        },
        {
          "line": 2171,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ssSend.size()",
          "old_line_content": "",
          "new_line_content": "    unsigned int nSize = ssSend.size() - CMessageHeader::HEADER_SIZE;",
          "content_same": false
        },
        {
          "line": 2172,
          "old_api": null,
          "new_api": "memcpy",
          "old_text": null,
          "new_text": "memcpy((char*)&ssSend[CMessageHeader::MESSAGE_SIZE_OFFSET], &nSize, sizeof(nSize))",
          "old_line_content": "    // Set the size",
          "new_line_content": "    memcpy((char*)&ssSend[CMessageHeader::MESSAGE_SIZE_OFFSET], &nSize, sizeof(nSize));",
          "content_same": false
        },
        {
          "line": 1660,
          "old_api": null,
          "new_api": "::bind(hListenSocket, (struct sockaddr*)&sockaddr, len)",
          "old_text": null,
          "new_text": "::bind(hListenSocket, (struct sockaddr*)&sockaddr, len)",
          "old_line_content": "    }",
          "new_line_content": "    if (::bind(hListenSocket, (struct sockaddr*)&sockaddr, len) == SOCKET_ERROR)",
          "content_same": false
        },
        {
          "line": 1151,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\",\n                        port, port, lanaddr, r, strupnperror(r))",
          "old_line_content": "",
          "new_line_content": "                    LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\",",
          "content_same": false
        },
        {
          "line": 1152,
          "old_api": null,
          "new_api": "strupnperror",
          "old_text": null,
          "new_text": "strupnperror(r)",
          "old_line_content": "                if(r!=UPNPCOMMAND_SUCCESS)",
          "new_line_content": "                        port, port, lanaddr, r, strupnperror(r));",
          "content_same": false
        },
        {
          "line": 2175,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "ssSend.end()",
          "old_line_content": "",
          "new_line_content": "    uint256 hash = Hash(ssSend.begin() + CMessageHeader::HEADER_SIZE, ssSend.end());",
          "content_same": false
        },
        {
          "line": 2178,
          "old_api": null,
          "new_api": "ssSend.size ()",
          "old_text": null,
          "new_text": "ssSend.size ()",
          "old_line_content": "    unsigned int nChecksum = 0;",
          "new_line_content": "    assert(ssSend.size () >= CMessageHeader::CHECKSUM_OFFSET + sizeof(nChecksum));",
          "content_same": false
        },
        {
          "line": 1667,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s\\n\", strError)",
          "old_line_content": "        else",
          "new_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "content_same": false
        },
        {
          "line": 1671,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "addrBind.ToString()",
          "old_line_content": "        return false;",
          "new_line_content": "    LogPrintf(\"Bound to %s\\n\", addrBind.ToString());",
          "content_same": false
        },
        {
          "line": 2184,
          "old_api": null,
          "new_api": "GetAndClear",
          "old_text": null,
          "new_text": "ssSend.GetAndClear(*it)",
          "old_line_content": "",
          "new_line_content": "    ssSend.GetAndClear(*it);",
          "content_same": false
        },
        {
          "line": 1161,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "port.c_str()",
          "old_line_content": "        catch (boost::thread_interrupted)",
          "new_line_content": "            r = UPNP_DeletePortMapping(urls.controlURL, data.first.servicetype, port.c_str(), \"TCP\", 0);",
          "content_same": false
        },
        {
          "line": 1162,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"UPNP_DeletePortMapping() returned : %d\\n\", r)",
          "old_line_content": "        {",
          "new_line_content": "            LogPrintf(\"UPNP_DeletePortMapping() returned : %d\\n\", r);",
          "content_same": false
        },
        {
          "line": 1674,
          "old_api": null,
          "new_api": "listen",
          "old_text": null,
          "new_text": "listen(hListenSocket, SOMAXCONN)",
          "old_line_content": "",
          "new_line_content": "    if (listen(hListenSocket, SOMAXCONN) == SOCKET_ERROR)",
          "content_same": false
        },
        {
          "line": 2188,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "vSendMsg.begin()",
          "old_line_content": "",
          "new_line_content": "    if (it == vSendMsg.begin())",
          "content_same": false
        },
        {
          "line": 2189,
          "old_api": null,
          "new_api": "SocketSendData",
          "old_text": null,
          "new_text": "SocketSendData(this)",
          "old_line_content": "    // If write queue empty, attempt \"optimistic write\"",
          "new_line_content": "        SocketSendData(this);",
          "content_same": false
        },
        {
          "line": 1677,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s\\n\", strError)",
          "old_line_content": "    {",
          "new_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "content_same": false
        },
        {
          "line": 1168,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"No valid UPnP IGDs found\\n\")",
          "old_line_content": "        }",
          "new_line_content": "        LogPrintf(\"No valid UPnP IGDs found\\n\");",
          "content_same": false
        },
        {
          "line": 1169,
          "old_api": null,
          "new_api": "freeUPNPDevlist",
          "old_text": null,
          "new_text": "freeUPNPDevlist(devlist)",
          "old_line_content": "    } else {",
          "new_line_content": "        freeUPNPDevlist(devlist); devlist = 0;",
          "content_same": false
        },
        {
          "line": 1682,
          "old_api": null,
          "new_api": "ListenSocket",
          "old_text": null,
          "new_text": "ListenSocket(hListenSocket, fWhitelisted)",
          "old_line_content": "    }",
          "new_line_content": "    vhListenSocket.push_back(ListenSocket(hListenSocket, fWhitelisted));",
          "content_same": false
        },
        {
          "line": 1685,
          "old_api": null,
          "new_api": "AddLocal",
          "old_text": null,
          "new_text": "AddLocal(addrBind, LOCAL_BIND)",
          "old_line_content": "",
          "new_line_content": "        AddLocal(addrBind, LOCAL_BIND);",
          "content_same": false
        },
        {
          "line": 1182,
          "old_api": null,
          "new_api": "interrupt",
          "old_text": null,
          "new_text": "upnp_thread->interrupt()",
          "old_line_content": "    {",
          "new_line_content": "            upnp_thread->interrupt();",
          "content_same": false
        },
        {
          "line": 1183,
          "old_api": null,
          "new_api": "join",
          "old_text": null,
          "new_text": "upnp_thread->join()",
          "old_line_content": "        if (upnp_thread) {",
          "new_line_content": "            upnp_thread->join();",
          "content_same": false
        },
        {
          "line": 1186,
          "old_api": null,
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort)",
          "old_text": null,
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort)",
          "old_line_content": "            delete upnp_thread;",
          "new_line_content": "        upnp_thread = new boost::thread(boost::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort));",
          "content_same": false
        },
        {
          "line": 1698,
          "old_api": null,
          "new_api": "gethostname",
          "old_text": null,
          "new_text": "gethostname(pszHostName, sizeof(pszHostName))",
          "old_line_content": "    // Get local host IP",
          "new_line_content": "    if (gethostname(pszHostName, sizeof(pszHostName)) != SOCKET_ERROR)",
          "content_same": false
        },
        {
          "line": 1189,
          "old_api": null,
          "new_api": "interrupt",
          "old_text": null,
          "new_text": "upnp_thread->interrupt()",
          "old_line_content": "    }",
          "new_line_content": "        upnp_thread->interrupt();",
          "content_same": false
        },
        {
          "line": 1190,
          "old_api": null,
          "new_api": "join",
          "old_text": null,
          "new_text": "upnp_thread->join()",
          "old_line_content": "    else if (upnp_thread) {",
          "new_line_content": "        upnp_thread->join();",
          "content_same": false
        },
        {
          "line": 1701,
          "old_api": null,
          "new_api": "LookupHost",
          "old_text": null,
          "new_text": "LookupHost(pszHostName, vaddr)",
          "old_line_content": "    {",
          "new_line_content": "        if (LookupHost(pszHostName, vaddr))",
          "content_same": false
        },
        {
          "line": 1705,
          "old_api": null,
          "new_api": "AddLocal",
          "old_text": null,
          "new_text": "AddLocal(addr, LOCAL_IF)",
          "old_line_content": "            BOOST_FOREACH (const CNetAddr &addr, vaddr)",
          "new_line_content": "                AddLocal(addr, LOCAL_IF);",
          "content_same": false
        },
        {
          "line": 1712,
          "old_api": null,
          "new_api": "getifaddrs",
          "old_text": null,
          "new_text": "getifaddrs(&myaddrs)",
          "old_line_content": "    // Get local host ip",
          "new_line_content": "    if (getifaddrs(&myaddrs) == 0)",
          "content_same": false
        },
        {
          "line": 1718,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ifa->ifa_name, \"lo\")",
          "old_line_content": "            if (ifa->ifa_addr == NULL) continue;",
          "new_line_content": "            if (strcmp(ifa->ifa_name, \"lo\") == 0) continue;",
          "content_same": false
        },
        {
          "line": 1719,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ifa->ifa_name, \"lo0\")",
          "old_line_content": "            if ((ifa->ifa_flags & IFF_UP) == 0) continue;",
          "new_line_content": "            if (strcmp(ifa->ifa_name, \"lo0\") == 0) continue;",
          "content_same": false
        },
        {
          "line": 1211,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "addrman.size()",
          "old_line_content": "{",
          "new_line_content": "    if ((addrman.size() > 0) &&",
          "content_same": false
        },
        {
          "line": 1212,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-forcednsseed\", false)",
          "old_line_content": "    // goal: only query DNS seeds if address need is acute",
          "new_line_content": "        (!GetBoolArg(\"-forcednsseed\", false))) {",
          "content_same": false
        },
        {
          "line": 1724,
          "old_api": null,
          "new_api": "AddLocal",
          "old_text": null,
          "new_text": "AddLocal(addr, LOCAL_IF)",
          "old_line_content": "                struct sockaddr_in* s4 = (struct sockaddr_in*)(ifa->ifa_addr);",
          "new_line_content": "                if (AddLocal(addr, LOCAL_IF))",
          "content_same": false
        },
        {
          "line": 1725,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "addr.ToString()",
          "old_line_content": "                CNetAddr addr(s4->sin_addr);",
          "new_line_content": "                    LogPrintf(\"IPv4 %s: %s\\n\", ifa->ifa_name, addr.ToString());",
          "content_same": false
        },
        {
          "line": 1216,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vNodes.size()",
          "old_line_content": "",
          "new_line_content": "        if (vNodes.size() >= 2) {",
          "content_same": false
        },
        {
          "line": 1731,
          "old_api": null,
          "new_api": "AddLocal",
          "old_text": null,
          "new_text": "AddLocal(addr, LOCAL_IF)",
          "old_line_content": "                struct sockaddr_in6* s6 = (struct sockaddr_in6*)(ifa->ifa_addr);",
          "new_line_content": "                if (AddLocal(addr, LOCAL_IF))",
          "content_same": false
        },
        {
          "line": 1732,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "addr.ToString()",
          "old_line_content": "                CNetAddr addr(s6->sin6_addr);",
          "new_line_content": "                    LogPrintf(\"IPv6 %s: %s\\n\", ifa->ifa_name, addr.ToString());",
          "content_same": false
        },
        {
          "line": 1222,
          "old_api": null,
          "new_api": "DNSSeeds",
          "old_text": null,
          "new_text": "Params().DNSSeeds()",
          "old_line_content": "    }",
          "new_line_content": "    const vector<CDNSSeedData> &vSeeds = Params().DNSSeeds();",
          "content_same": false
        },
        {
          "line": 1735,
          "old_api": null,
          "new_api": "freeifaddrs",
          "old_text": null,
          "new_text": "freeifaddrs(myaddrs)",
          "old_line_content": "            }",
          "new_line_content": "        freeifaddrs(myaddrs);",
          "content_same": false
        },
        {
          "line": 1225,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"Loading addresses from DNS seeds (could take a while)\\n\")",
          "old_line_content": "    int found = 0;",
          "new_line_content": "    LogPrintf(\"Loading addresses from DNS seeds (could take a while)\\n\");",
          "content_same": false
        },
        {
          "line": 1228,
          "old_api": null,
          "new_api": "HaveNameProxy",
          "old_text": null,
          "new_text": "HaveNameProxy()",
          "old_line_content": "",
          "new_line_content": "        if (HaveNameProxy()) {",
          "content_same": false
        },
        {
          "line": 1229,
          "old_api": null,
          "new_api": "AddOneShot",
          "old_text": null,
          "new_text": "AddOneShot(seed.host)",
          "old_line_content": "    BOOST_FOREACH(const CDNSSeedData &seed, vSeeds) {",
          "new_line_content": "            AddOneShot(seed.host);",
          "content_same": false
        },
        {
          "line": 1740,
          "old_api": null,
          "new_api": "IsLimited",
          "old_text": null,
          "new_text": "IsLimited(NET_IPV4)",
          "old_line_content": "",
          "new_line_content": "    if (!IsLimited(NET_IPV4))",
          "content_same": false
        },
        {
          "line": 1741,
          "old_api": null,
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"ext-ip\", &ThreadGetMyExternalIP)",
          "old_text": null,
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"ext-ip\", &ThreadGetMyExternalIP)",
          "old_line_content": "    // Don't use external IPv4 discovery, when -onlynet=\"IPv6\"",
          "new_line_content": "        threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"ext-ip\", &ThreadGetMyExternalIP));",
          "content_same": false
        },
        {
          "line": 1233,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "seed.host.c_str()",
          "old_line_content": "            vector<CNetAddr> vIPs;",
          "new_line_content": "            if (LookupHost(seed.host.c_str(), vIPs))",
          "content_same": false
        },
        {
          "line": 1748,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(MAX_OUTBOUND_CONNECTIONS, nMaxConnections)",
          "old_line_content": "    if (semOutbound == NULL) {",
          "new_line_content": "        int nMaxOutbound = min(MAX_OUTBOUND_CONNECTIONS, nMaxConnections);",
          "content_same": false
        },
        {
          "line": 1238,
          "old_api": null,
          "new_api": "GetDefaultPort",
          "old_text": null,
          "new_text": "Params().GetDefaultPort()",
          "old_line_content": "                {",
          "new_line_content": "                    CAddress addr = CAddress(CService(ip, Params().GetDefaultPort()));",
          "content_same": false
        },
        {
          "line": 1239,
          "old_api": null,
          "new_api": "GetRand",
          "old_text": null,
          "new_text": "GetRand(4*nOneDay)",
          "old_line_content": "                    int nOneDay = 24*3600;",
          "new_line_content": "                    addr.nTime = GetTime() - 3*nOneDay - GetRand(4*nOneDay); // use a random age between 3 and 7 days old",
          "content_same": false
        },
        {
          "line": 1753,
          "old_api": null,
          "new_api": "CService",
          "old_text": null,
          "new_text": "CService(\"127.0.0.1\", 0)",
          "old_line_content": "",
          "new_line_content": "        pnodeLocalHost = new CNode(INVALID_SOCKET, CAddress(CService(\"127.0.0.1\", 0), nLocalServices));",
          "content_same": false
        },
        {
          "line": 1244,
          "old_api": null,
          "new_api": "CNetAddr",
          "old_text": null,
          "new_text": "CNetAddr(seed.name, true)",
          "old_line_content": "                }",
          "new_line_content": "            addrman.Add(vAdd, CNetAddr(seed.name, true));",
          "content_same": false
        },
        {
          "line": 1248,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%d addresses found from DNS seeds\\n\", found)",
          "old_line_content": "    }",
          "new_line_content": "    LogPrintf(\"%d addresses found from DNS seeds\\n\", found);",
          "content_same": false
        },
        {
          "line": 1761,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-dnsseed\", true)",
          "old_line_content": "    //",
          "new_line_content": "    if (!GetBoolArg(\"-dnsseed\", true))",
          "content_same": false
        },
        {
          "line": 1762,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"DNS seeding disabled\\n\")",
          "old_line_content": "",
          "new_line_content": "        LogPrintf(\"DNS seeding disabled\\n\");",
          "content_same": false
        },
        {
          "line": 1767,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-upnp\", DEFAULT_UPNP)",
          "old_line_content": "",
          "new_line_content": "    MapPort(GetBoolArg(\"-upnp\", DEFAULT_UPNP));",
          "content_same": false
        },
        {
          "line": 1770,
          "old_api": null,
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler)",
          "old_text": null,
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler)",
          "old_line_content": "",
          "new_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler));",
          "content_same": false
        },
        {
          "line": 1773,
          "old_api": null,
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"addcon\", &ThreadOpenAddedConnections)",
          "old_text": null,
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"addcon\", &ThreadOpenAddedConnections)",
          "old_line_content": "",
          "new_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"addcon\", &ThreadOpenAddedConnections));",
          "content_same": false
        },
        {
          "line": 1264,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "void DumpAddresses()",
          "new_line_content": "    int64_t nStart = GetTimeMillis();",
          "content_same": false
        },
        {
          "line": 1776,
          "old_api": null,
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"opencon\", &ThreadOpenConnections)",
          "old_text": null,
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"opencon\", &ThreadOpenConnections)",
          "old_line_content": "",
          "new_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"opencon\", &ThreadOpenConnections));",
          "content_same": false
        },
        {
          "line": 1267,
          "old_api": null,
          "new_api": "Write",
          "old_text": null,
          "new_text": "adb.Write(addrman)",
          "old_line_content": "",
          "new_line_content": "    adb.Write(addrman);",
          "content_same": false
        },
        {
          "line": 1779,
          "old_api": null,
          "new_api": "boost::bind(&TraceThread<void (*)()>, \"msghand\", &ThreadMessageHandler)",
          "old_text": null,
          "new_text": "boost::bind(&TraceThread<void (*)()>, \"msghand\", &ThreadMessageHandler)",
          "old_line_content": "",
          "new_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"msghand\", &ThreadMessageHandler));",
          "content_same": false
        },
        {
          "line": 1270,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "",
          "new_line_content": "           addrman.size(), GetTimeMillis() - nStart);",
          "content_same": false
        },
        {
          "line": 1782,
          "old_api": null,
          "new_api": "boost::bind(&LoopForever<void (*)()>, \"dumpaddr\", &DumpAddresses, DUMP_ADDRESSES_INTERVAL * 1000)",
          "old_text": null,
          "new_text": "boost::bind(&LoopForever<void (*)()>, \"dumpaddr\", &DumpAddresses, DUMP_ADDRESSES_INTERVAL * 1000)",
          "old_line_content": "",
          "new_line_content": "    threadGroup.create_thread(boost::bind(&LoopForever<void (*)()>, \"dumpaddr\", &DumpAddresses, DUMP_ADDRESSES_INTERVAL * 1000));",
          "content_same": false
        },
        {
          "line": 1787,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"StopNode()\\n\")",
          "old_line_content": "bool StopNode()",
          "new_line_content": "    LogPrintf(\"StopNode()\\n\");",
          "content_same": false
        },
        {
          "line": 1788,
          "old_api": null,
          "new_api": "MapPort",
          "old_text": null,
          "new_text": "MapPort(false)",
          "old_line_content": "{",
          "new_line_content": "    MapPort(false);",
          "content_same": false
        },
        {
          "line": 1277,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vOneShots)",
          "old_line_content": "    string strDest;",
          "new_line_content": "        LOCK(cs_vOneShots);",
          "content_same": false
        },
        {
          "line": 1278,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vOneShots.empty()",
          "old_line_content": "    {",
          "new_line_content": "        if (vOneShots.empty())",
          "content_same": false
        },
        {
          "line": 1791,
          "old_api": null,
          "new_api": "post",
          "old_text": null,
          "new_text": "semOutbound->post()",
          "old_line_content": "    if (semOutbound)",
          "new_line_content": "            semOutbound->post();",
          "content_same": false
        },
        {
          "line": 1792,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(50)",
          "old_line_content": "        for (int i=0; i<MAX_OUTBOUND_CONNECTIONS; i++)",
          "new_line_content": "    MilliSleep(50);",
          "content_same": false
        },
        {
          "line": 1281,
          "old_api": null,
          "new_api": "pop_front",
          "old_text": null,
          "new_text": "vOneShots.pop_front()",
          "old_line_content": "            return;",
          "new_line_content": "        vOneShots.pop_front();",
          "content_same": false
        },
        {
          "line": 1286,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "strDest.c_str()",
          "old_line_content": "    CSemaphoreGrant grant(*semOutbound, true);",
          "new_line_content": "        if (!OpenNetworkConnection(addr, &grant, strDest.c_str(), true))",
          "content_same": false
        },
        {
          "line": 1287,
          "old_api": null,
          "new_api": "AddOneShot",
          "old_text": null,
          "new_text": "AddOneShot(strDest)",
          "old_line_content": "    if (grant) {",
          "new_line_content": "            AddOneShot(strDest);",
          "content_same": false
        },
        {
          "line": 1294,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "mapMultiArgs[\"-connect\"].size()",
          "old_line_content": "{",
          "new_line_content": "    if (mapArgs.count(\"-connect\") && mapMultiArgs[\"-connect\"].size() > 0)",
          "content_same": false
        },
        {
          "line": 1808,
          "old_api": null,
          "new_api": "CloseSocket",
          "old_text": null,
          "new_text": "CloseSocket(pnode->hSocket)",
          "old_line_content": "        BOOST_FOREACH(CNode* pnode, vNodes)",
          "new_line_content": "                CloseSocket(pnode->hSocket);",
          "content_same": false
        },
        {
          "line": 1298,
          "old_api": null,
          "new_api": "ProcessOneShot",
          "old_text": null,
          "new_text": "ProcessOneShot()",
          "old_line_content": "        for (int64_t nLoop = 0;; nLoop++)",
          "new_line_content": "            ProcessOneShot();",
          "content_same": false
        },
        {
          "line": 1811,
          "old_api": null,
          "new_api": "CloseSocket",
          "old_text": null,
          "new_text": "CloseSocket(hListenSocket.socket)",
          "old_line_content": "        BOOST_FOREACH(ListenSocket& hListenSocket, vhListenSocket)",
          "new_line_content": "                if (!CloseSocket(hListenSocket.socket))",
          "content_same": false
        },
        {
          "line": 1812,
          "old_api": null,
          "new_api": "WSAGetLastError",
          "old_text": null,
          "new_text": "WSAGetLastError()",
          "old_line_content": "            if (hListenSocket.socket != INVALID_SOCKET)",
          "new_line_content": "                    LogPrintf(\"CloseSocket(hListenSocket) failed with error %s\\n\", NetworkErrorString(WSAGetLastError()));",
          "content_same": false
        },
        {
          "line": 1302,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "strAddr.c_str()",
          "old_line_content": "            {",
          "new_line_content": "                OpenNetworkConnection(addr, NULL, strAddr.c_str());",
          "content_same": false
        },
        {
          "line": 1305,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(500)",
          "old_line_content": "                for (int i = 0; i < 10 && i < nLoop; i++)",
          "new_line_content": "                    MilliSleep(500);",
          "content_same": false
        },
        {
          "line": 1819,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "vNodes.clear()",
          "old_line_content": "        BOOST_FOREACH(CNode *pnode, vNodesDisconnected)",
          "new_line_content": "        vNodes.clear();",
          "content_same": false
        },
        {
          "line": 1308,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(500)",
          "old_line_content": "                }",
          "new_line_content": "            MilliSleep(500);",
          "content_same": false
        },
        {
          "line": 1820,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "vNodesDisconnected.clear()",
          "old_line_content": "            delete pnode;",
          "new_line_content": "        vNodesDisconnected.clear();",
          "content_same": false
        },
        {
          "line": 1313,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "",
          "new_line_content": "    int64_t nStart = GetTime();",
          "content_same": false
        },
        {
          "line": 1316,
          "old_api": null,
          "new_api": "ProcessOneShot",
          "old_text": null,
          "new_text": "ProcessOneShot()",
          "old_line_content": "    while (true)",
          "new_line_content": "        ProcessOneShot();",
          "content_same": false
        },
        {
          "line": 1829,
          "old_api": null,
          "new_api": "WSACleanup",
          "old_text": null,
          "new_text": "WSACleanup()",
          "old_line_content": "#ifdef WIN32",
          "new_line_content": "        WSACleanup();",
          "content_same": false
        },
        {
          "line": 1321,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "",
          "new_line_content": "        boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 1324,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "",
          "new_line_content": "        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {",
          "content_same": false
        },
        {
          "line": 1327,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\")",
          "old_line_content": "            static bool done = false;",
          "new_line_content": "                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");",
          "content_same": false
        },
        {
          "line": 1328,
          "old_api": null,
          "new_api": "CNetAddr",
          "old_text": null,
          "new_text": "CNetAddr(\"127.0.0.1\")",
          "old_line_content": "            if (!done) {",
          "new_line_content": "                addrman.Add(Params().FixedSeeds(), CNetAddr(\"127.0.0.1\"));",
          "content_same": false
        },
        {
          "line": 1844,
          "old_api": null,
          "new_api": "reserve",
          "old_text": null,
          "new_text": "ss.reserve(10000)",
          "old_line_content": "{",
          "new_line_content": "    ss.reserve(10000);",
          "content_same": false
        },
        {
          "line": 1851,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "tx.GetHash()",
          "old_line_content": "void RelayTransaction(const CTransaction& tx, const CDataStream& ss)",
          "new_line_content": "    CInv inv(MSG_TX, tx.GetHash());",
          "content_same": false
        },
        {
          "line": 1343,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "        set<vector<unsigned char> > setConnected;",
          "new_line_content": "            LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 1346,
          "old_api": null,
          "new_api": "GetGroup",
          "old_text": null,
          "new_text": "pnode->addr.GetGroup()",
          "old_line_content": "            BOOST_FOREACH(CNode* pnode, vNodes) {",
          "new_line_content": "                    setConnected.insert(pnode->addr.GetGroup());",
          "content_same": false
        },
        {
          "line": 1858,
          "old_api": null,
          "new_api": "pop_front",
          "old_text": null,
          "new_text": "vRelayExpiration.pop_front()",
          "old_line_content": "        {",
          "new_line_content": "            vRelayExpiration.pop_front();",
          "content_same": false
        },
        {
          "line": 1862,
          "old_api": null,
          "new_api": "std::make_pair(inv, ss)",
          "old_text": null,
          "new_text": "std::make_pair(inv, ss)",
          "old_line_content": "",
          "new_line_content": "        mapRelay.insert(std::make_pair(inv, ss));",
          "content_same": false
        },
        {
          "line": 1863,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "        // Save original serialized message so newer versions are preserved",
          "new_line_content": "        vRelayExpiration.push_back(std::make_pair(GetTime() + 15 * 60, inv));",
          "content_same": false
        },
        {
          "line": 1352,
          "old_api": null,
          "new_api": "GetAdjustedTime",
          "old_text": null,
          "new_text": "GetAdjustedTime()",
          "old_line_content": "        }",
          "new_line_content": "        int64_t nANow = GetAdjustedTime();",
          "content_same": false
        },
        {
          "line": 1358,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(nOutbound,8)",
          "old_line_content": "        {",
          "new_line_content": "            CAddress addr = addrman.Select(10 + min(nOutbound,8)*10);",
          "content_same": false
        },
        {
          "line": 1870,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(pnode->cs_filter)",
          "old_line_content": "        if(!pnode->fRelayTxes)",
          "new_line_content": "        LOCK(pnode->cs_filter);",
          "content_same": false
        },
        {
          "line": 1361,
          "old_api": null,
          "new_api": "IsLocal",
          "old_text": null,
          "new_text": "IsLocal(addr)",
          "old_line_content": "",
          "new_line_content": "            if (!addr.IsValid() || setConnected.count(addr.GetGroup()) || IsLocal(addr))",
          "content_same": false
        },
        {
          "line": 1873,
          "old_api": null,
          "new_api": "IsRelevantAndUpdate",
          "old_text": null,
          "new_text": "pnode->pfilter->IsRelevantAndUpdate(tx)",
          "old_line_content": "        if (pnode->pfilter)",
          "new_line_content": "            if (pnode->pfilter->IsRelevantAndUpdate(tx))",
          "content_same": false
        },
        {
          "line": 1874,
          "old_api": null,
          "new_api": "PushInventory",
          "old_text": null,
          "new_text": "pnode->PushInventory(inv)",
          "old_line_content": "        {",
          "new_line_content": "                pnode->PushInventory(inv);",
          "content_same": false
        },
        {
          "line": 1882,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_totalBytesRecv)",
          "old_line_content": "void CNode::RecordBytesRecv(uint64_t bytes)",
          "new_line_content": "    LOCK(cs_totalBytesRecv);",
          "content_same": false
        },
        {
          "line": 1371,
          "old_api": null,
          "new_api": "IsLimited",
          "old_text": null,
          "new_text": "IsLimited(addr)",
          "old_line_content": "                break;",
          "new_line_content": "            if (IsLimited(addr))",
          "content_same": false
        },
        {
          "line": 1888,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_totalBytesSent)",
          "old_line_content": "void CNode::RecordBytesSent(uint64_t bytes)",
          "new_line_content": "    LOCK(cs_totalBytesSent);",
          "content_same": false
        },
        {
          "line": 1379,
          "old_api": null,
          "new_api": "GetDefaultPort",
          "old_text": null,
          "new_text": "Params().GetDefaultPort()",
          "old_line_content": "",
          "new_line_content": "            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)",
          "content_same": false
        },
        {
          "line": 1894,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_totalBytesRecv)",
          "old_line_content": "uint64_t CNode::GetTotalBytesRecv()",
          "new_line_content": "    LOCK(cs_totalBytesRecv);",
          "content_same": false
        },
        {
          "line": 1386,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "addrConnect.IsValid()",
          "old_line_content": "        }",
          "new_line_content": "        if (addrConnect.IsValid())",
          "content_same": false
        },
        {
          "line": 1387,
          "old_api": null,
          "new_api": "OpenNetworkConnection",
          "old_text": null,
          "new_text": "OpenNetworkConnection(addrConnect, &grant)",
          "old_line_content": "",
          "new_line_content": "            OpenNetworkConnection(addrConnect, &grant);",
          "content_same": false
        },
        {
          "line": 1900,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_totalBytesSent)",
          "old_line_content": "uint64_t CNode::GetTotalBytesSent()",
          "new_line_content": "    LOCK(cs_totalBytesSent);",
          "content_same": false
        },
        {
          "line": 1394,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vAddedNodes)",
          "old_line_content": "{",
          "new_line_content": "        LOCK(cs_vAddedNodes);",
          "content_same": false
        },
        {
          "line": 1907,
          "old_api": null,
          "new_api": "GetRand",
          "old_text": null,
          "new_text": "GetRand(nChance)",
          "old_line_content": "{",
          "new_line_content": "    if (GetRand(nChance) != 0) return; // Fuzz 1 of every nChance messages",
          "content_same": false
        },
        {
          "line": 1398,
          "old_api": null,
          "new_api": "HaveNameProxy",
          "old_text": null,
          "new_text": "HaveNameProxy()",
          "old_line_content": "    }",
          "new_line_content": "    if (HaveNameProxy()) {",
          "content_same": false
        },
        {
          "line": 1913,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "ssSend.empty()",
          "old_line_content": "    case 0:",
          "new_line_content": "        if (!ssSend.empty()) {",
          "content_same": false
        },
        {
          "line": 1402,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vAddedNodes)",
          "old_line_content": "            list<string> lAddresses(0);",
          "new_line_content": "                LOCK(cs_vAddedNodes);",
          "content_same": false
        },
        {
          "line": 1914,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ssSend.size()",
          "old_line_content": "        // xor a random byte with a random value:",
          "new_line_content": "            CDataStream::size_type pos = GetRand(ssSend.size());",
          "content_same": false
        },
        {
          "line": 1920,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "ssSend.empty()",
          "old_line_content": "    case 1:",
          "new_line_content": "        if (!ssSend.empty()) {",
          "content_same": false
        },
        {
          "line": 1409,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "strAddNode.c_str()",
          "old_line_content": "                CAddress addr;",
          "new_line_content": "                OpenNetworkConnection(addr, &grant, strAddNode.c_str());",
          "content_same": false
        },
        {
          "line": 1410,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(500)",
          "old_line_content": "                CSemaphoreGrant grant(*semOutbound);",
          "new_line_content": "                MilliSleep(500);",
          "content_same": false
        },
        {
          "line": 1921,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ssSend.size()",
          "old_line_content": "        // delete a random byte:",
          "new_line_content": "            CDataStream::size_type pos = GetRand(ssSend.size());",
          "content_same": false
        },
        {
          "line": 1928,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "ssSend.size()",
          "old_line_content": "        // insert a random byte at a random position",
          "new_line_content": "            CDataStream::size_type pos = GetRand(ssSend.size());",
          "content_same": false
        },
        {
          "line": 1929,
          "old_api": null,
          "new_api": "GetRand",
          "old_text": null,
          "new_text": "GetRand(256)",
          "old_line_content": "        {",
          "new_line_content": "            char ch = (char)GetRand(256);",
          "content_same": false
        },
        {
          "line": 1420,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vAddedNodes)",
          "old_line_content": "        list<string> lAddresses(0);",
          "new_line_content": "            LOCK(cs_vAddedNodes);",
          "content_same": false
        },
        {
          "line": 1936,
          "old_api": null,
          "new_api": "Fuzz",
          "old_text": null,
          "new_text": "Fuzz(2)",
          "old_line_content": "    // Chance of more than one change half the time:",
          "new_line_content": "    Fuzz(2);",
          "content_same": false
        },
        {
          "line": 1429,
          "old_api": null,
          "new_api": "GetDefaultPort",
          "old_text": null,
          "new_text": "Params().GetDefaultPort()",
          "old_line_content": "        {",
          "new_line_content": "            if(Lookup(strAddNode.c_str(), vservNode, Params().GetDefaultPort(), fNameLookup, 0))",
          "content_same": false
        },
        {
          "line": 1945,
          "old_api": null,
          "new_api": "GetDataDir",
          "old_text": null,
          "new_text": "GetDataDir()",
          "old_line_content": "CAddrDB::CAddrDB()",
          "new_line_content": "    pathAddr = GetDataDir() / \"peers.dat\";",
          "content_same": false
        },
        {
          "line": 1952,
          "old_api": null,
          "new_api": "GetRandBytes",
          "old_text": null,
          "new_text": "GetRandBytes((unsigned char*)&randv, sizeof(randv))",
          "old_line_content": "    // Generate random temporary filename",
          "new_line_content": "    GetRandBytes((unsigned char*)&randv, sizeof(randv));",
          "content_same": false
        },
        {
          "line": 1953,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"peers.dat.%04x\", randv)",
          "old_line_content": "    unsigned short randv = 0;",
          "new_line_content": "    std::string tmpfn = strprintf(\"peers.dat.%04x\", randv);",
          "content_same": false
        },
        {
          "line": 1442,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "        // (keeping in mind that addnode entries can have many IPs if fNameLookup)",
          "new_line_content": "            LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 1445,
          "old_api": null,
          "new_api": "BOOST_FOREACH",
          "old_text": null,
          "new_text": "BOOST_FOREACH(CService& addrNode, *(it))",
          "old_line_content": "            BOOST_FOREACH(CNode* pnode, vNodes)",
          "new_line_content": "                    BOOST_FOREACH(CService& addrNode, *(it))",
          "content_same": false
        },
        {
          "line": 1957,
          "old_api": null,
          "new_api": "MessageStart",
          "old_text": null,
          "new_text": "Params().MessageStart()",
          "old_line_content": "    // serialize addresses, checksum data up to that point, then append csum",
          "new_line_content": "    ssPeers << FLATDATA(Params().MessageStart());",
          "content_same": false
        },
        {
          "line": 1448,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "lservAddressesToAdd.erase(it)",
          "old_line_content": "                        if (pnode->addr == addrNode)",
          "new_line_content": "                            it = lservAddressesToAdd.erase(it);",
          "content_same": false
        },
        {
          "line": 1963,
          "old_api": null,
          "new_api": "GetDataDir",
          "old_text": null,
          "new_text": "GetDataDir()",
          "old_line_content": "",
          "new_line_content": "    boost::filesystem::path pathTmp = GetDataDir() / tmpfn;",
          "content_same": false
        },
        {
          "line": 1964,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "pathTmp.string().c_str()",
          "old_line_content": "    // open temp output file, and associate with CAutoFile",
          "new_line_content": "    FILE *file = fopen(pathTmp.string().c_str(), \"wb\");",
          "content_same": false
        },
        {
          "line": 1456,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vserv.size()",
          "old_line_content": "        {",
          "new_line_content": "            OpenNetworkConnection(CAddress(vserv[i % vserv.size()]), &grant);",
          "content_same": false
        },
        {
          "line": 1457,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(500)",
          "old_line_content": "            CSemaphoreGrant grant(*semOutbound);",
          "new_line_content": "            MilliSleep(500);",
          "content_same": false
        },
        {
          "line": 1974,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "        return error(\"%s : Serialize or I/O error - %s\", __func__, e.what());",
          "content_same": false
        },
        {
          "line": 1977,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fileout.fclose()",
          "old_line_content": "    }",
          "new_line_content": "    fileout.fclose();",
          "content_same": false
        },
        {
          "line": 1980,
          "old_api": null,
          "new_api": "RenameOver",
          "old_text": null,
          "new_text": "RenameOver(pathTmp, pathAddr)",
          "old_line_content": "",
          "new_line_content": "    if (!RenameOver(pathTmp, pathAddr))",
          "content_same": false
        },
        {
          "line": 1469,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "    // Initiate outbound network connection",
          "new_line_content": "    boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 1981,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s : Rename-into-place failed\", __func__)",
          "old_line_content": "    // replace existing peers.dat, if any, with new peers.dat.XXXX",
          "new_line_content": "        return error(\"%s : Rename-into-place failed\", __func__);",
          "content_same": false
        },
        {
          "line": 1472,
          "old_api": null,
          "new_api": "CNode::IsBanned(addrConnect)",
          "old_text": null,
          "new_text": "CNode::IsBanned(addrConnect)",
          "old_line_content": "    if (!pszDest) {",
          "new_line_content": "            FindNode((CNetAddr)addrConnect) || CNode::IsBanned(addrConnect) ||",
          "content_same": false
        },
        {
          "line": 1989,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "pathAddr.string().c_str()",
          "old_line_content": "{",
          "new_line_content": "    FILE *file = fopen(pathAddr.string().c_str(), \"rb\");",
          "content_same": false
        },
        {
          "line": 1478,
          "old_api": null,
          "new_api": "ConnectNode",
          "old_text": null,
          "new_text": "ConnectNode(addrConnect, pszDest)",
          "old_line_content": "        return false;",
          "new_line_content": "    CNode* pnode = ConnectNode(addrConnect, pszDest);",
          "content_same": false
        },
        {
          "line": 1479,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "",
          "new_line_content": "    boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 1990,
          "old_api": null,
          "new_api": "CAutoFile",
          "old_text": null,
          "new_text": "CAutoFile(file, SER_DISK, CLIENT_VERSION)",
          "old_line_content": "    // open input file, and associate with CAutoFile",
          "new_line_content": "    CAutoFile filein = CAutoFile(file, SER_DISK, CLIENT_VERSION);",
          "content_same": false
        },
        {
          "line": 1995,
          "old_api": null,
          "new_api": "boost::filesystem::file_size(pathAddr)",
          "old_text": null,
          "new_text": "boost::filesystem::file_size(pathAddr)",
          "old_line_content": "",
          "new_line_content": "    int fileSize = boost::filesystem::file_size(pathAddr);",
          "content_same": false
        },
        {
          "line": 1484,
          "old_api": null,
          "new_api": "MoveTo",
          "old_text": null,
          "new_text": "grantOutbound->MoveTo(pnode->grantOutbound)",
          "old_line_content": "        return false;",
          "new_line_content": "        grantOutbound->MoveTo(pnode->grantOutbound);",
          "content_same": false
        },
        {
          "line": 2001,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "vchData.resize(dataSize)",
          "old_line_content": "        dataSize = 0;",
          "new_line_content": "    vchData.resize(dataSize);",
          "content_same": false
        },
        {
          "line": 2006,
          "old_api": null,
          "new_api": "read",
          "old_text": null,
          "new_text": "filein.read((char *)&vchData[0], dataSize)",
          "old_line_content": "    // read data and checksum from file",
          "new_line_content": "        filein.read((char *)&vchData[0], dataSize);",
          "content_same": false
        },
        {
          "line": 2010,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "        return error(\"%s : Deserialize or I/O error - %s\", __func__, e.what());",
          "content_same": false
        },
        {
          "line": 1503,
          "old_api": null,
          "new_api": "GetHeight",
          "old_text": null,
          "new_text": "g_signals.GetHeight().get_value_or(0)",
          "old_line_content": "    int64_t nBestScore = 0;",
          "new_line_content": "    int nBestHeight = g_signals.GetHeight().get_value_or(0);",
          "content_same": false
        },
        {
          "line": 2017,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "ssPeers.end()",
          "old_line_content": "",
          "new_line_content": "    uint256 hashTmp = Hash(ssPeers.begin(), ssPeers.end());",
          "content_same": false
        },
        {
          "line": 2024,
          "old_api": null,
          "new_api": "FLATDATA",
          "old_text": null,
          "new_text": "FLATDATA(pchMsgTmp)",
          "old_line_content": "    try {",
          "new_line_content": "        ssPeers >> FLATDATA(pchMsgTmp);",
          "content_same": false
        },
        {
          "line": 1513,
          "old_api": null,
          "new_api": "NodeSyncScore",
          "old_text": null,
          "new_text": "NodeSyncScore(pnode)",
          "old_line_content": "            (pnode->nVersion < NOBLKS_VERSION_START || pnode->nVersion >= NOBLKS_VERSION_END)) {",
          "new_line_content": "            int64_t nScore = NodeSyncScore(pnode);",
          "content_same": false
        },
        {
          "line": 2027,
          "old_api": null,
          "new_api": "MessageStart",
          "old_text": null,
          "new_text": "Params().MessageStart()",
          "old_line_content": "",
          "new_line_content": "        if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))",
          "content_same": false
        },
        {
          "line": 2028,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"%s : Invalid network magic number\", __func__)",
          "old_line_content": "        // ... verify the network matches ours",
          "new_line_content": "            return error(\"%s : Invalid network magic number\", __func__);",
          "content_same": false
        },
        {
          "line": 2034,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "        return error(\"%s : Deserialize or I/O error - %s\", __func__, e.what());",
          "content_same": false
        },
        {
          "line": 2040,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-maxreceivebuffer\", 5*1000)",
          "old_line_content": "}",
          "new_line_content": "unsigned int ReceiveFloodSize() { return 1000*GetArg(\"-maxreceivebuffer\", 5*1000); }",
          "content_same": false
        },
        {
          "line": 1529,
          "old_api": null,
          "new_api": "SetThreadPriority",
          "old_text": null,
          "new_text": "SetThreadPriority(THREAD_PRIORITY_BELOW_NORMAL)",
          "old_line_content": "void ThreadMessageHandler()",
          "new_line_content": "    SetThreadPriority(THREAD_PRIORITY_BELOW_NORMAL);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1538,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_vNodes)",
          "new_text": null,
          "old_line_content": "            LOCK(cs_vNodes);",
          "new_line_content": "            BOOST_FOREACH(CNode* pnode, vNodesCopy) {",
          "content_same": false
        },
        {
          "line": 1541,
          "old_api": "AddRef",
          "new_api": null,
          "old_text": "pnode->AddRef()",
          "new_text": null,
          "old_line_content": "                pnode->AddRef();",
          "new_line_content": "                    fHaveSyncNode = true;",
          "content_same": false
        },
        {
          "line": 2056,
          "old_api": "ToStringIPPort",
          "new_api": null,
          "old_text": "addr.ToStringIPPort()",
          "new_text": null,
          "old_line_content": "    addrName = addrNameIn == \"\" ? addr.ToStringIPPort() : addrNameIn;",
          "new_line_content": "    strSubVer = \"\";",
          "content_same": false
        },
        {
          "line": 1548,
          "old_api": "StartSync",
          "new_api": null,
          "old_text": "StartSync(vNodesCopy)",
          "new_text": null,
          "old_line_content": "            StartSync(vNodesCopy);",
          "new_line_content": "        // Poll the connected nodes for messages",
          "content_same": false
        },
        {
          "line": 1552,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vNodesCopy.empty()",
          "new_text": null,
          "old_line_content": "        if (!vNodesCopy.empty())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1553,
          "old_api": "size",
          "new_api": null,
          "old_text": "vNodesCopy.size()",
          "new_text": null,
          "old_line_content": "            pnodeTrickle = vNodesCopy[GetRand(vNodesCopy.size())];",
          "new_line_content": "        bool fSleep = true;",
          "content_same": false
        },
        {
          "line": 2076,
          "old_api": "SendBufferSize",
          "new_api": null,
          "old_text": "SendBufferSize()",
          "new_text": null,
          "old_line_content": "    setInventoryKnown.max_size(SendBufferSize() / 1000);",
          "new_line_content": "    nPingNonceSent = 0;",
          "content_same": false
        },
        {
          "line": 1564,
          "old_api": "TRY_LOCK",
          "new_api": null,
          "old_text": "TRY_LOCK(pnode->cs_vRecvMsg, lockRecv)",
          "new_text": null,
          "old_line_content": "                TRY_LOCK(pnode->cs_vRecvMsg, lockRecv);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 1567,
          "old_api": "ProcessMessages",
          "new_api": null,
          "old_text": "g_signals.ProcessMessages(pnode)",
          "new_text": null,
          "old_line_content": "                    if (!g_signals.ProcessMessages(pnode))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2084,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_nLastNodeId)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_nLastNodeId);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1572,
          "old_api": "complete",
          "new_api": null,
          "old_text": "pnode->vRecvMsg[0].complete()",
          "new_text": null,
          "old_line_content": "                        if (!pnode->vRecvGetData.empty() || (!pnode->vRecvMsg.empty() && pnode->vRecvMsg[0].complete()))",
          "new_line_content": "                            fSleep = false;",
          "content_same": false
        },
        {
          "line": 2043,
          "old_api": "GetArg",
          "new_api": null,
          "old_text": "GetArg(\"-maxsendbuffer\", 1*1000)",
          "new_text": null,
          "old_line_content": "unsigned int SendBufferSize() { return 1000*GetArg(\"-maxsendbuffer\", 1*1000); }",
          "new_line_content": "CNode::CNode(SOCKET hSocketIn, CAddress addrIn, std::string addrNameIn, bool fInboundIn) : ssSend(SER_NETWORK, INIT_PROTO_VERSION), setAddrKnown(5000)",
          "content_same": false
        },
        {
          "line": 2091,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Added connection peer=%d\\n\", id)",
          "new_text": null,
          "old_line_content": "        LogPrint(\"net\", \"Added connection peer=%d\\n\", id);",
          "new_line_content": "    // Be shy and don't send version until we hear",
          "content_same": false
        },
        {
          "line": 1579,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "            boost::this_thread::interruption_point();",
          "new_line_content": "            // Send messages",
          "content_same": false
        },
        {
          "line": 2097,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "GetId()",
          "new_text": null,
          "old_line_content": "    GetNodeSignals().InitializeNode(GetId(), this);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1587,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "            boost::this_thread::interruption_point();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2102,
          "old_api": "CloseSocket",
          "new_api": null,
          "old_text": "CloseSocket(hSocket)",
          "new_text": null,
          "old_line_content": "    CloseSocket(hSocket);",
          "new_line_content": "    if (pfilter)",
          "content_same": false
        },
        {
          "line": 1593,
          "old_api": "Release",
          "new_api": null,
          "old_text": "pnode->Release()",
          "new_text": null,
          "old_line_content": "                pnode->Release();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2107,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "GetId()",
          "new_text": null,
          "old_line_content": "    GetNodeSignals().FinalizeNode(GetId());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1084,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(10)",
          "new_text": null,
          "old_line_content": "        MilliSleep(10);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1597,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(100)",
          "new_text": null,
          "old_line_content": "            MilliSleep(100);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2115,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapAlreadyAskedFor.find(inv)",
          "new_text": null,
          "old_line_content": "    limitedmap<CInv, int64_t>::const_iterator it = mapAlreadyAskedFor.find(inv);",
          "new_line_content": "        nRequestTime = it->second;",
          "content_same": false
        },
        {
          "line": 2116,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapAlreadyAskedFor.end()",
          "new_text": null,
          "old_line_content": "    if (it != mapAlreadyAskedFor.end())",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 2120,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "DateTimeStrFormat(\"%H:%M:%S\", nRequestTime/1000000).c_str()",
          "new_text": null,
          "old_line_content": "    LogPrint(\"net\", \"askfor %s  %d (%s) peer=%d\\n\", inv.ToString(), nRequestTime, DateTimeStrFormat(\"%H:%M:%S\", nRequestTime/1000000).c_str(), id);",
          "new_line_content": "    // Make sure not to reuse time indexes to keep things in the same order",
          "content_same": false
        },
        {
          "line": 2123,
          "old_api": "GetTimeMicros",
          "new_api": null,
          "old_text": "GetTimeMicros()",
          "new_text": null,
          "old_line_content": "    int64_t nNow = GetTimeMicros() - 1000000;",
          "new_line_content": "    ++nLastTime;",
          "content_same": false
        },
        {
          "line": 1099,
          "old_api": "GetListenPort",
          "new_api": null,
          "old_text": "GetListenPort()",
          "new_text": null,
          "old_line_content": "    std::string port = strprintf(\"%u\", GetListenPort());",
          "new_line_content": "    const char * minissdpdpath = 0;",
          "content_same": false
        },
        {
          "line": 2126,
          "old_api": "std::max(nNow, nLastTime)",
          "new_api": null,
          "old_text": "std::max(nNow, nLastTime)",
          "new_text": null,
          "old_line_content": "    nNow = std::max(nNow, nLastTime);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1616,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "addrBind.ToString()",
          "new_text": null,
          "old_line_content": "        strError = strprintf(\"Error: Bind address family for %s not supported\", addrBind.ToString());",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 1617,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s\\n\", strError)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2131,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapAlreadyAskedFor.end()",
          "new_text": null,
          "old_line_content": "    if (it != mapAlreadyAskedFor.end())",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 1107,
          "old_api": "upnpDiscover",
          "new_api": null,
          "old_text": "upnpDiscover(2000, multicastif, minissdpdpath, 0)",
          "new_text": null,
          "old_line_content": "    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0);",
          "new_line_content": "    /* miniupnpc 1.6 */",
          "content_same": false
        },
        {
          "line": 1621,
          "old_api": "socket",
          "new_api": null,
          "old_text": "socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, IPPROTO_TCP)",
          "new_text": null,
          "old_line_content": "    SOCKET hListenSocket = socket(((struct sockaddr*)&sockaddr)->sa_family, SOCK_STREAM, IPPROTO_TCP);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 2134,
          "old_api": "std::make_pair(inv, nRequestTime)",
          "new_api": null,
          "old_text": "std::make_pair(inv, nRequestTime)",
          "new_text": null,
          "old_line_content": "        mapAlreadyAskedFor.insert(std::make_pair(inv, nRequestTime));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2135,
          "old_api": "std::make_pair(nRequestTime, inv)",
          "new_api": null,
          "old_text": "std::make_pair(nRequestTime, inv)",
          "new_text": null,
          "old_line_content": "    mapAskFor.insert(std::make_pair(nRequestTime, inv));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1111,
          "old_api": "upnpDiscover",
          "new_api": null,
          "old_text": "upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, &error)",
          "new_text": null,
          "old_line_content": "    devlist = upnpDiscover(2000, multicastif, minissdpdpath, 0, 0, &error);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1624,
          "old_api": "WSAGetLastError",
          "new_api": null,
          "old_text": "WSAGetLastError()",
          "new_text": null,
          "old_line_content": "        strError = strprintf(\"Error: Couldn't open socket for incoming connections (socket returned error %s)\", NetworkErrorString(WSAGetLastError()));",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 1625,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s\\n\", strError)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2142,
          "old_api": "CMessageHeader",
          "new_api": null,
          "old_text": "CMessageHeader(pszCommand, 0)",
          "new_text": null,
          "old_line_content": "    ssSend << CMessageHeader(pszCommand, 0);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2143,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"sending: %s \", pszCommand)",
          "new_text": null,
          "old_line_content": "    LogPrint(\"net\", \"sending: %s \", pszCommand);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1118,
          "old_api": "UPNP_GetValidIGD",
          "new_api": null,
          "old_text": "UPNP_GetValidIGD(devlist, &urls, &data, lanaddr, sizeof(lanaddr))",
          "new_text": null,
          "old_line_content": "    r = UPNP_GetValidIGD(devlist, &urls, &data, lanaddr, sizeof(lanaddr));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1632,
          "old_api": "setsockopt",
          "new_api": null,
          "old_text": "setsockopt(hListenSocket, SOL_SOCKET, SO_NOSIGPIPE, (void*)&nOne, sizeof(int))",
          "new_text": null,
          "old_line_content": "    setsockopt(hListenSocket, SOL_SOCKET, SO_NOSIGPIPE, (void*)&nOne, sizeof(int));",
          "new_line_content": "    // Allow binding if the port is still in TIME_WAIT state after",
          "content_same": false
        },
        {
          "line": 1636,
          "old_api": "setsockopt",
          "new_api": null,
          "old_text": "setsockopt(hListenSocket, SOL_SOCKET, SO_REUSEADDR, (void*)&nOne, sizeof(int))",
          "new_text": null,
          "old_line_content": "    setsockopt(hListenSocket, SOL_SOCKET, SO_REUSEADDR, (void*)&nOne, sizeof(int));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1125,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"UPnP: GetExternalIPAddress() returned %d\\n\", r)",
          "new_text": null,
          "old_line_content": "                LogPrintf(\"UPnP: GetExternalIPAddress() returned %d\\n\", r);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 2152,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"(aborted)\\n\")",
          "new_text": null,
          "old_line_content": "    LogPrint(\"net\", \"(aborted)\\n\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1641,
          "old_api": "WSAGetLastError",
          "new_api": null,
          "old_text": "WSAGetLastError()",
          "new_text": null,
          "old_line_content": "        strError = strprintf(\"BindListenPort: Setting listening socket to non-blocking failed, error %s\\n\", NetworkErrorString(WSAGetLastError()));",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 1130,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"UPnP: ExternalIPAddress = %s\\n\", externalIPAddress)",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"UPnP: ExternalIPAddress = %s\\n\", externalIPAddress);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1131,
          "old_api": "CNetAddr",
          "new_api": null,
          "old_text": "CNetAddr(externalIPAddress)",
          "new_text": null,
          "old_line_content": "                    AddLocal(CNetAddr(externalIPAddress), LOCAL_UPNP);",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 1642,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s\\n\", strError)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1134,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"UPnP: GetExternalIPAddress failed.\\n\")",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"UPnP: GetExternalIPAddress failed.\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1648,
          "old_api": "IsIPv6",
          "new_api": null,
          "old_text": "addrBind.IsIPv6()",
          "new_text": null,
          "old_line_content": "    if (addrBind.IsIPv6()) {",
          "new_line_content": "#ifdef WIN32",
          "content_same": false
        },
        {
          "line": 2162,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"dropmessages DROPPING SEND MESSAGE\\n\")",
          "new_text": null,
          "old_line_content": "        LogPrint(\"net\", \"dropmessages DROPPING SEND MESSAGE\\n\");",
          "new_line_content": "        return;",
          "content_same": false
        },
        {
          "line": 2163,
          "old_api": "AbortMessage",
          "new_api": null,
          "old_text": "AbortMessage()",
          "new_text": null,
          "old_line_content": "        AbortMessage();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1138,
          "old_api": "FormatFullVersion",
          "new_api": null,
          "old_text": "FormatFullVersion()",
          "new_text": null,
          "old_line_content": "        string strDesc = \"Bitcoin \" + FormatFullVersion();",
          "new_line_content": "        try {",
          "content_same": false
        },
        {
          "line": 1653,
          "old_api": "setsockopt",
          "new_api": null,
          "old_text": "setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_V6ONLY, (void*)&nOne, sizeof(int))",
          "new_text": null,
          "old_line_content": "        setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_V6ONLY, (void*)&nOne, sizeof(int));",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 2166,
          "old_api": "count",
          "new_api": null,
          "old_text": "mapArgs.count(\"-fuzzmessagestest\")",
          "new_text": null,
          "old_line_content": "    if (mapArgs.count(\"-fuzzmessagestest\"))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1144,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0)",
          "new_text": null,
          "old_line_content": "                r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 1145,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "strDesc.c_str()",
          "new_text": null,
          "old_line_content": "                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0);",
          "new_line_content": "                /* miniupnpc 1.6 */",
          "content_same": false
        },
        {
          "line": 2169,
          "old_api": "size",
          "new_api": null,
          "old_text": "ssSend.size()",
          "new_text": null,
          "old_line_content": "    if (ssSend.size() == 0)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1658,
          "old_api": "setsockopt",
          "new_api": null,
          "old_text": "setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_PROTECTION_LEVEL, (const char*)&nProtLevel, sizeof(int))",
          "new_text": null,
          "old_line_content": "        setsockopt(hListenSocket, IPPROTO_IPV6, IPV6_PROTECTION_LEVEL, (const char*)&nProtLevel, sizeof(int));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1148,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,\n                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\")",
          "new_text": null,
          "old_line_content": "                r = UPNP_AddPortMapping(urls.controlURL, data.first.servicetype,",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1149,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "strDesc.c_str()",
          "new_text": null,
          "old_line_content": "                                    port.c_str(), port.c_str(), lanaddr, strDesc.c_str(), \"TCP\", 0, \"0\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2173,
          "old_api": "size",
          "new_api": null,
          "old_text": "ssSend.size()",
          "new_text": null,
          "old_line_content": "    unsigned int nSize = ssSend.size() - CMessageHeader::HEADER_SIZE;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2174,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy((char*)&ssSend[CMessageHeader::MESSAGE_SIZE_OFFSET], &nSize, sizeof(nSize))",
          "new_text": null,
          "old_line_content": "    memcpy((char*)&ssSend[CMessageHeader::MESSAGE_SIZE_OFFSET], &nSize, sizeof(nSize));",
          "new_line_content": "    // Set the checksum",
          "content_same": false
        },
        {
          "line": 1153,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\",\n                        port, port, lanaddr, r, strupnperror(r))",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"AddPortMapping(%s, %s, %s) failed with code %d (%s)\\n\",",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 2180,
          "old_api": "ssSend.size ()",
          "new_api": null,
          "old_text": "ssSend.size ()",
          "new_text": null,
          "old_line_content": "    assert(ssSend.size () >= CMessageHeader::CHECKSUM_OFFSET + sizeof(nChecksum));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1669,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s\\n\", strError)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 1158,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(20*60*1000)",
          "new_text": null,
          "old_line_content": "                MilliSleep(20*60*1000); // Refresh every 20 minutes",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1670,
          "old_api": "CloseSocket",
          "new_api": null,
          "old_text": "CloseSocket(hListenSocket)",
          "new_text": null,
          "old_line_content": "        CloseSocket(hListenSocket);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1673,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "addrBind.ToString()",
          "new_text": null,
          "old_line_content": "    LogPrintf(\"Bound to %s\\n\", addrBind.ToString());",
          "new_line_content": "    // Listen for incoming connections",
          "content_same": false
        },
        {
          "line": 2186,
          "old_api": "GetAndClear",
          "new_api": null,
          "old_text": "ssSend.GetAndClear(*it)",
          "new_text": null,
          "old_line_content": "    ssSend.GetAndClear(*it);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2187,
          "old_api": "size",
          "new_api": null,
          "old_text": "*it).size()",
          "new_text": null,
          "old_line_content": "    nSendSize += (*it).size();",
          "new_line_content": "    // If write queue empty, attempt \"optimistic write\"",
          "content_same": false
        },
        {
          "line": 1165,
          "old_api": "freeUPNPDevlist",
          "new_api": null,
          "old_text": "freeUPNPDevlist(devlist)",
          "new_text": null,
          "old_line_content": "            freeUPNPDevlist(devlist); devlist = 0;",
          "new_line_content": "            throw;",
          "content_same": false
        },
        {
          "line": 2190,
          "old_api": "begin",
          "new_api": null,
          "old_text": "vSendMsg.begin()",
          "new_text": null,
          "old_line_content": "    if (it == vSendMsg.begin())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1166,
          "old_api": "FreeUPNPUrls",
          "new_api": null,
          "old_text": "FreeUPNPUrls(&urls)",
          "new_text": null,
          "old_line_content": "            FreeUPNPUrls(&urls);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1679,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s\\n\", strError)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s\\n\", strError);",
          "new_line_content": "        return false;",
          "content_same": false
        },
        {
          "line": 2193,
          "old_api": "LEAVE_CRITICAL_SECTION",
          "new_api": null,
          "old_text": "LEAVE_CRITICAL_SECTION(cs_vSend)",
          "new_text": null,
          "old_line_content": "    LEAVE_CRITICAL_SECTION(cs_vSend);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1170,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"No valid UPnP IGDs found\\n\")",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"No valid UPnP IGDs found\\n\");",
          "new_line_content": "        if (r != 0)",
          "content_same": false
        },
        {
          "line": 1680,
          "old_api": "CloseSocket",
          "new_api": null,
          "old_text": "CloseSocket(hListenSocket)",
          "new_text": null,
          "old_line_content": "        CloseSocket(hListenSocket);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1173,
          "old_api": "FreeUPNPUrls",
          "new_api": null,
          "old_text": "FreeUPNPUrls(&urls)",
          "new_text": null,
          "old_line_content": "            FreeUPNPUrls(&urls);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1686,
          "old_api": "IsRoutable",
          "new_api": null,
          "old_text": "addrBind.IsRoutable()",
          "new_text": null,
          "old_line_content": "    if (addrBind.IsRoutable() && fDiscover && !fWhitelisted)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1687,
          "old_api": "AddLocal",
          "new_api": null,
          "old_text": "AddLocal(addrBind, LOCAL_BIND)",
          "new_text": null,
          "old_line_content": "        AddLocal(addrBind, LOCAL_BIND);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 1184,
          "old_api": "interrupt",
          "new_api": null,
          "old_text": "upnp_thread->interrupt()",
          "new_text": null,
          "old_line_content": "            upnp_thread->interrupt();",
          "new_line_content": "            delete upnp_thread;",
          "content_same": false
        },
        {
          "line": 1185,
          "old_api": "join",
          "new_api": null,
          "old_text": "upnp_thread->join()",
          "new_text": null,
          "old_line_content": "            upnp_thread->join();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1188,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort)",
          "new_text": null,
          "old_line_content": "        upnp_thread = new boost::thread(boost::bind(&TraceThread<void (*)()>, \"upnp\", &ThreadMapPort));",
          "new_line_content": "    else if (upnp_thread) {",
          "content_same": false
        },
        {
          "line": 1700,
          "old_api": "gethostname",
          "new_api": null,
          "old_text": "gethostname(pszHostName, sizeof(pszHostName))",
          "new_text": null,
          "old_line_content": "    if (gethostname(pszHostName, sizeof(pszHostName)) != SOCKET_ERROR)",
          "new_line_content": "        vector<CNetAddr> vaddr;",
          "content_same": false
        },
        {
          "line": 1191,
          "old_api": "interrupt",
          "new_api": null,
          "old_text": "upnp_thread->interrupt()",
          "new_text": null,
          "old_line_content": "        upnp_thread->interrupt();",
          "new_line_content": "        delete upnp_thread;",
          "content_same": false
        },
        {
          "line": 1192,
          "old_api": "join",
          "new_api": null,
          "old_text": "upnp_thread->join()",
          "new_text": null,
          "old_line_content": "        upnp_thread->join();",
          "new_line_content": "        upnp_thread = NULL;",
          "content_same": false
        },
        {
          "line": 1703,
          "old_api": "LookupHost",
          "new_api": null,
          "old_text": "LookupHost(pszHostName, vaddr)",
          "new_text": null,
          "old_line_content": "        if (LookupHost(pszHostName, vaddr))",
          "new_line_content": "            BOOST_FOREACH (const CNetAddr &addr, vaddr)",
          "content_same": false
        },
        {
          "line": 1707,
          "old_api": "AddLocal",
          "new_api": null,
          "old_text": "AddLocal(addr, LOCAL_IF)",
          "new_text": null,
          "old_line_content": "                AddLocal(addr, LOCAL_IF);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1714,
          "old_api": "getifaddrs",
          "new_api": null,
          "old_text": "getifaddrs(&myaddrs)",
          "new_text": null,
          "old_line_content": "    if (getifaddrs(&myaddrs) == 0)",
          "new_line_content": "        for (struct ifaddrs* ifa = myaddrs; ifa != NULL; ifa = ifa->ifa_next)",
          "content_same": false
        },
        {
          "line": 1720,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ifa->ifa_name, \"lo\")",
          "new_text": null,
          "old_line_content": "            if (strcmp(ifa->ifa_name, \"lo\") == 0) continue;",
          "new_line_content": "            if (ifa->ifa_addr->sa_family == AF_INET)",
          "content_same": false
        },
        {
          "line": 1721,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ifa->ifa_name, \"lo0\")",
          "new_text": null,
          "old_line_content": "            if (strcmp(ifa->ifa_name, \"lo0\") == 0) continue;",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1214,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-forcednsseed\", false)",
          "new_text": null,
          "old_line_content": "        (!GetBoolArg(\"-forcednsseed\", false))) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1726,
          "old_api": "AddLocal",
          "new_api": null,
          "old_text": "AddLocal(addr, LOCAL_IF)",
          "new_text": null,
          "old_line_content": "                if (AddLocal(addr, LOCAL_IF))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1727,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "addr.ToString()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"IPv4 %s: %s\\n\", ifa->ifa_name, addr.ToString());",
          "new_line_content": "            else if (ifa->ifa_addr->sa_family == AF_INET6)",
          "content_same": false
        },
        {
          "line": 1218,
          "old_api": "size",
          "new_api": null,
          "old_text": "vNodes.size()",
          "new_text": null,
          "old_line_content": "        if (vNodes.size() >= 2) {",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1219,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"P2P peers available. Skipped DNS seeding.\\n\")",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"P2P peers available. Skipped DNS seeding.\\n\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1733,
          "old_api": "AddLocal",
          "new_api": null,
          "old_text": "AddLocal(addr, LOCAL_IF)",
          "new_text": null,
          "old_line_content": "                if (AddLocal(addr, LOCAL_IF))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1734,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "addr.ToString()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"IPv6 %s: %s\\n\", ifa->ifa_name, addr.ToString());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1224,
          "old_api": "DNSSeeds",
          "new_api": null,
          "old_text": "Params().DNSSeeds()",
          "new_text": null,
          "old_line_content": "    const vector<CDNSSeedData> &vSeeds = Params().DNSSeeds();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1737,
          "old_api": "freeifaddrs",
          "new_api": null,
          "old_text": "freeifaddrs(myaddrs)",
          "new_text": null,
          "old_line_content": "        freeifaddrs(myaddrs);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 1227,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"Loading addresses from DNS seeds (could take a while)\\n\")",
          "new_text": null,
          "old_line_content": "    LogPrintf(\"Loading addresses from DNS seeds (could take a while)\\n\");",
          "new_line_content": "    BOOST_FOREACH(const CDNSSeedData &seed, vSeeds) {",
          "content_same": false
        },
        {
          "line": 1230,
          "old_api": "HaveNameProxy",
          "new_api": null,
          "old_text": "HaveNameProxy()",
          "new_text": null,
          "old_line_content": "        if (HaveNameProxy()) {",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 1231,
          "old_api": "AddOneShot",
          "new_api": null,
          "old_text": "AddOneShot(seed.host)",
          "new_text": null,
          "old_line_content": "            AddOneShot(seed.host);",
          "new_line_content": "            vector<CNetAddr> vIPs;",
          "content_same": false
        },
        {
          "line": 1742,
          "old_api": "IsLimited",
          "new_api": null,
          "old_text": "IsLimited(NET_IPV4)",
          "new_text": null,
          "old_line_content": "    if (!IsLimited(NET_IPV4))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1743,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"ext-ip\", &ThreadGetMyExternalIP)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"ext-ip\", &ThreadGetMyExternalIP)",
          "new_text": null,
          "old_line_content": "        threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"ext-ip\", &ThreadGetMyExternalIP));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1235,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "seed.host.c_str()",
          "new_text": null,
          "old_line_content": "            if (LookupHost(seed.host.c_str(), vIPs))",
          "new_line_content": "                BOOST_FOREACH(CNetAddr& ip, vIPs)",
          "content_same": false
        },
        {
          "line": 1750,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(MAX_OUTBOUND_CONNECTIONS, nMaxConnections)",
          "new_text": null,
          "old_line_content": "        int nMaxOutbound = min(MAX_OUTBOUND_CONNECTIONS, nMaxConnections);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1241,
          "old_api": "GetRand",
          "new_api": null,
          "old_text": "GetRand(4*nOneDay)",
          "new_text": null,
          "old_line_content": "                    addr.nTime = GetTime() - 3*nOneDay - GetRand(4*nOneDay); // use a random age between 3 and 7 days old",
          "new_line_content": "                    found++;",
          "content_same": false
        },
        {
          "line": 1242,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vAdd.push_back(addr)",
          "new_text": null,
          "old_line_content": "                    vAdd.push_back(addr);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1757,
          "old_api": "Discover",
          "new_api": null,
          "old_text": "Discover(threadGroup)",
          "new_text": null,
          "old_line_content": "    Discover(threadGroup);",
          "new_line_content": "    //",
          "content_same": false
        },
        {
          "line": 1246,
          "old_api": "CNetAddr",
          "new_api": null,
          "old_text": "CNetAddr(seed.name, true)",
          "new_text": null,
          "old_line_content": "            addrman.Add(vAdd, CNetAddr(seed.name, true));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1250,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%d addresses found from DNS seeds\\n\", found)",
          "new_text": null,
          "old_line_content": "    LogPrintf(\"%d addresses found from DNS seeds\\n\", found);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1763,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-dnsseed\", true)",
          "new_text": null,
          "old_line_content": "    if (!GetBoolArg(\"-dnsseed\", true))",
          "new_line_content": "    else",
          "content_same": false
        },
        {
          "line": 1766,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed)",
          "new_text": null,
          "old_line_content": "        threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"dnsseed\", &ThreadDNSAddressSeed));",
          "new_line_content": "    // Map ports with UPnP",
          "content_same": false
        },
        {
          "line": 1769,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-upnp\", DEFAULT_UPNP)",
          "new_text": null,
          "old_line_content": "    MapPort(GetBoolArg(\"-upnp\", DEFAULT_UPNP));",
          "new_line_content": "    // Send and receive from sockets, accept connections",
          "content_same": false
        },
        {
          "line": 1772,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler)",
          "new_text": null,
          "old_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"net\", &ThreadSocketHandler));",
          "new_line_content": "    // Initiate outbound connections from -addnode",
          "content_same": false
        },
        {
          "line": 1775,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"addcon\", &ThreadOpenAddedConnections)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"addcon\", &ThreadOpenAddedConnections)",
          "new_text": null,
          "old_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"addcon\", &ThreadOpenAddedConnections));",
          "new_line_content": "    // Initiate outbound connections",
          "content_same": false
        },
        {
          "line": 1266,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "    int64_t nStart = GetTimeMillis();",
          "new_line_content": "    CAddrDB adb;",
          "content_same": false
        },
        {
          "line": 1778,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"opencon\", &ThreadOpenConnections)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"opencon\", &ThreadOpenConnections)",
          "new_text": null,
          "old_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"opencon\", &ThreadOpenConnections));",
          "new_line_content": "    // Process messages",
          "content_same": false
        },
        {
          "line": 1781,
          "old_api": "boost::bind(&TraceThread<void (*)()>, \"msghand\", &ThreadMessageHandler)",
          "new_api": null,
          "old_text": "boost::bind(&TraceThread<void (*)()>, \"msghand\", &ThreadMessageHandler)",
          "new_text": null,
          "old_line_content": "    threadGroup.create_thread(boost::bind(&TraceThread<void (*)()>, \"msghand\", &ThreadMessageHandler));",
          "new_line_content": "    // Dump network addresses",
          "content_same": false
        },
        {
          "line": 1271,
          "old_api": "size",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Flushed %d addresses to peers.dat  %dms\\n\",\n           addrman.size(), GetTimeMillis() - nStart)",
          "new_text": null,
          "old_line_content": "    LogPrint(\"net\", \"Flushed %d addresses to peers.dat  %dms\\n\",",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1272,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "           addrman.size(), GetTimeMillis() - nStart);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1784,
          "old_api": "boost::bind(&LoopForever<void (*)()>, \"dumpaddr\", &DumpAddresses, DUMP_ADDRESSES_INTERVAL * 1000)",
          "new_api": null,
          "old_text": "boost::bind(&LoopForever<void (*)()>, \"dumpaddr\", &DumpAddresses, DUMP_ADDRESSES_INTERVAL * 1000)",
          "new_text": null,
          "old_line_content": "    threadGroup.create_thread(boost::bind(&LoopForever<void (*)()>, \"dumpaddr\", &DumpAddresses, DUMP_ADDRESSES_INTERVAL * 1000));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1789,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"StopNode()\\n\")",
          "new_text": null,
          "old_line_content": "    LogPrintf(\"StopNode()\\n\");",
          "new_line_content": "    if (semOutbound)",
          "content_same": false
        },
        {
          "line": 1790,
          "old_api": "MapPort",
          "new_api": null,
          "old_text": "MapPort(false)",
          "new_text": null,
          "old_line_content": "    MapPort(false);",
          "new_line_content": "        for (int i=0; i<MAX_OUTBOUND_CONNECTIONS; i++)",
          "content_same": false
        },
        {
          "line": 1279,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_vOneShots)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_vOneShots);",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 1282,
          "old_api": "front",
          "new_api": null,
          "old_text": "vOneShots.front()",
          "new_text": null,
          "old_line_content": "        strDest = vOneShots.front();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1283,
          "old_api": "pop_front",
          "new_api": null,
          "old_text": "vOneShots.pop_front()",
          "new_text": null,
          "old_line_content": "        vOneShots.pop_front();",
          "new_line_content": "    CAddress addr;",
          "content_same": false
        },
        {
          "line": 1794,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(50)",
          "new_text": null,
          "old_line_content": "    MilliSleep(50);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1795,
          "old_api": "DumpAddresses",
          "new_api": null,
          "old_text": "DumpAddresses()",
          "new_text": null,
          "old_line_content": "    DumpAddresses();",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 1288,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "strDest.c_str()",
          "new_text": null,
          "old_line_content": "        if (!OpenNetworkConnection(addr, &grant, strDest.c_str(), true))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1289,
          "old_api": "AddOneShot",
          "new_api": null,
          "old_text": "AddOneShot(strDest)",
          "new_text": null,
          "old_line_content": "            AddOneShot(strDest);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1296,
          "old_api": "size",
          "new_api": null,
          "old_text": "mapMultiArgs[\"-connect\"].size()",
          "new_text": null,
          "old_line_content": "    if (mapArgs.count(\"-connect\") && mapMultiArgs[\"-connect\"].size() > 0)",
          "new_line_content": "        for (int64_t nLoop = 0;; nLoop++)",
          "content_same": false
        },
        {
          "line": 1810,
          "old_api": "CloseSocket",
          "new_api": null,
          "old_text": "CloseSocket(pnode->hSocket)",
          "new_text": null,
          "old_line_content": "                CloseSocket(pnode->hSocket);",
          "new_line_content": "            if (hListenSocket.socket != INVALID_SOCKET)",
          "content_same": false
        },
        {
          "line": 1300,
          "old_api": "ProcessOneShot",
          "new_api": null,
          "old_text": "ProcessOneShot()",
          "new_text": null,
          "old_line_content": "            ProcessOneShot();",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 1813,
          "old_api": "CloseSocket",
          "new_api": null,
          "old_text": "CloseSocket(hListenSocket.socket)",
          "new_text": null,
          "old_line_content": "                if (!CloseSocket(hListenSocket.socket))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1814,
          "old_api": "WSAGetLastError",
          "new_api": null,
          "old_text": "WSAGetLastError()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"CloseSocket(hListenSocket) failed with error %s\\n\", NetworkErrorString(WSAGetLastError()));",
          "new_line_content": "        // clean up some globals (to help leak detection)",
          "content_same": false
        },
        {
          "line": 1304,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "strAddr.c_str()",
          "new_text": null,
          "old_line_content": "                OpenNetworkConnection(addr, NULL, strAddr.c_str());",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 1307,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(500)",
          "new_text": null,
          "old_line_content": "                    MilliSleep(500);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1310,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(500)",
          "new_text": null,
          "old_line_content": "            MilliSleep(500);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1822,
          "old_api": "clear",
          "new_api": null,
          "old_text": "vNodesDisconnected.clear()",
          "new_text": null,
          "old_line_content": "        vNodesDisconnected.clear();",
          "new_line_content": "        delete semOutbound;",
          "content_same": false
        },
        {
          "line": 1823,
          "old_api": "clear",
          "new_api": null,
          "old_text": "vhListenSocket.clear()",
          "new_text": null,
          "old_line_content": "        vhListenSocket.clear();",
          "new_line_content": "        semOutbound = NULL;",
          "content_same": false
        },
        {
          "line": 1315,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "    int64_t nStart = GetTime();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1831,
          "old_api": "WSACleanup",
          "new_api": null,
          "old_text": "WSACleanup()",
          "new_text": null,
          "old_line_content": "        WSACleanup();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1320,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(500)",
          "new_text": null,
          "old_line_content": "        MilliSleep(500);",
          "new_line_content": "        CSemaphoreGrant grant(*semOutbound);",
          "content_same": false
        },
        {
          "line": 1323,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "        boost::this_thread::interruption_point();",
          "new_line_content": "        // Add seed nodes if DNS seeds are all down (an infrastructure attack?).",
          "content_same": false
        },
        {
          "line": 1326,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "        if (addrman.size() == 0 && (GetTime() - nStart > 60)) {",
          "new_line_content": "            if (!done) {",
          "content_same": false
        },
        {
          "line": 1329,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\")",
          "new_text": null,
          "old_line_content": "                LogPrintf(\"Adding fixed seed nodes as DNS doesn't seem to be available.\\n\");",
          "new_line_content": "                done = true;",
          "content_same": false
        },
        {
          "line": 1330,
          "old_api": "CNetAddr",
          "new_api": null,
          "old_text": "CNetAddr(\"127.0.0.1\")",
          "new_text": null,
          "old_line_content": "                addrman.Add(Params().FixedSeeds(), CNetAddr(\"127.0.0.1\"));",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1848,
          "old_api": "RelayTransaction",
          "new_api": null,
          "old_text": "RelayTransaction(tx, ss)",
          "new_text": null,
          "old_line_content": "    RelayTransaction(tx, ss);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1345,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_vNodes)",
          "new_text": null,
          "old_line_content": "            LOCK(cs_vNodes);",
          "new_line_content": "                if (!pnode->fInbound) {",
          "content_same": false
        },
        {
          "line": 1859,
          "old_api": "front",
          "new_api": null,
          "old_text": "vRelayExpiration.front()",
          "new_text": null,
          "old_line_content": "            mapRelay.erase(vRelayExpiration.front().second);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1348,
          "old_api": "GetGroup",
          "new_api": null,
          "old_text": "pnode->addr.GetGroup()",
          "new_text": null,
          "old_line_content": "                    setConnected.insert(pnode->addr.GetGroup());",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 1860,
          "old_api": "pop_front",
          "new_api": null,
          "old_text": "vRelayExpiration.pop_front()",
          "new_text": null,
          "old_line_content": "            vRelayExpiration.pop_front();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1864,
          "old_api": "std::make_pair(inv, ss)",
          "new_api": null,
          "old_text": "std::make_pair(inv, ss)",
          "new_text": null,
          "old_line_content": "        mapRelay.insert(std::make_pair(inv, ss));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1354,
          "old_api": "GetAdjustedTime",
          "new_api": null,
          "old_text": "GetAdjustedTime()",
          "new_text": null,
          "old_line_content": "        int64_t nANow = GetAdjustedTime();",
          "new_line_content": "        int nTries = 0;",
          "content_same": false
        },
        {
          "line": 1867,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_vNodes)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_vNodes);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 1360,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(nOutbound,8)",
          "new_text": null,
          "old_line_content": "            CAddress addr = addrman.Select(10 + min(nOutbound,8)*10);",
          "new_line_content": "            // if we selected an invalid address, restart",
          "content_same": false
        },
        {
          "line": 1872,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(pnode->cs_filter)",
          "new_text": null,
          "old_line_content": "        LOCK(pnode->cs_filter);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 1363,
          "old_api": "IsLocal",
          "new_api": null,
          "old_text": "IsLocal(addr)",
          "new_text": null,
          "old_line_content": "            if (!addr.IsValid() || setConnected.count(addr.GetGroup()) || IsLocal(addr))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1875,
          "old_api": "IsRelevantAndUpdate",
          "new_api": null,
          "old_text": "pnode->pfilter->IsRelevantAndUpdate(tx)",
          "new_text": null,
          "old_line_content": "            if (pnode->pfilter->IsRelevantAndUpdate(tx))",
          "new_line_content": "        } else",
          "content_same": false
        },
        {
          "line": 1878,
          "old_api": "PushInventory",
          "new_api": null,
          "old_text": "pnode->PushInventory(inv)",
          "new_text": null,
          "old_line_content": "            pnode->PushInventory(inv);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1884,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_totalBytesRecv)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_totalBytesRecv);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1373,
          "old_api": "IsLimited",
          "new_api": null,
          "old_text": "IsLimited(addr)",
          "new_text": null,
          "old_line_content": "            if (IsLimited(addr))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1890,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_totalBytesSent)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_totalBytesSent);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1381,
          "old_api": "GetDefaultPort",
          "new_api": null,
          "old_text": "Params().GetDefaultPort()",
          "new_text": null,
          "old_line_content": "            if (addr.GetPort() != Params().GetDefaultPort() && nTries < 50)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1896,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_totalBytesRecv)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_totalBytesRecv);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1388,
          "old_api": "IsValid",
          "new_api": null,
          "old_text": "addrConnect.IsValid()",
          "new_text": null,
          "old_line_content": "        if (addrConnect.IsValid())",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1389,
          "old_api": "OpenNetworkConnection",
          "new_api": null,
          "old_text": "OpenNetworkConnection(addrConnect, &grant)",
          "new_text": null,
          "old_line_content": "            OpenNetworkConnection(addrConnect, &grant);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1902,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_totalBytesSent)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_totalBytesSent);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1396,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_vAddedNodes)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_vAddedNodes);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1911,
          "old_api": "GetRand",
          "new_api": null,
          "old_text": "GetRand(3)",
          "new_text": null,
          "old_line_content": "    switch (GetRand(3))",
          "new_line_content": "    case 0:",
          "content_same": false
        },
        {
          "line": 1400,
          "old_api": "HaveNameProxy",
          "new_api": null,
          "old_text": "HaveNameProxy()",
          "new_text": null,
          "old_line_content": "    if (HaveNameProxy()) {",
          "new_line_content": "            list<string> lAddresses(0);",
          "content_same": false
        },
        {
          "line": 1916,
          "old_api": "size",
          "new_api": null,
          "old_text": "ssSend.size()",
          "new_text": null,
          "old_line_content": "            CDataStream::size_type pos = GetRand(ssSend.size());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1917,
          "old_api": "GetRand",
          "new_api": null,
          "old_text": "GetRand(256)",
          "new_text": null,
          "old_line_content": "            ssSend[pos] ^= (unsigned char)(GetRand(256));",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1406,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "lAddresses.push_back(strAddNode)",
          "new_text": null,
          "old_line_content": "                    lAddresses.push_back(strAddNode);",
          "new_line_content": "            BOOST_FOREACH(string& strAddNode, lAddresses) {",
          "content_same": false
        },
        {
          "line": 1411,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "strAddNode.c_str()",
          "new_text": null,
          "old_line_content": "                OpenNetworkConnection(addr, &grant, strAddNode.c_str());",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1923,
          "old_api": "size",
          "new_api": null,
          "old_text": "ssSend.size()",
          "new_text": null,
          "old_line_content": "            CDataStream::size_type pos = GetRand(ssSend.size());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1924,
          "old_api": "begin",
          "new_api": null,
          "old_text": "ssSend.begin()",
          "new_text": null,
          "old_line_content": "            ssSend.erase(ssSend.begin()+pos);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1414,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(120000)",
          "new_text": null,
          "old_line_content": "            MilliSleep(120000); // Retry every 2 minutes",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 1931,
          "old_api": "GetRand",
          "new_api": null,
          "old_text": "GetRand(256)",
          "new_text": null,
          "old_line_content": "            char ch = (char)GetRand(256);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1932,
          "old_api": "begin",
          "new_api": null,
          "old_text": "ssSend.begin()",
          "new_text": null,
          "old_line_content": "            ssSend.insert(ssSend.begin()+pos, ch);",
          "new_line_content": "        break;",
          "content_same": false
        },
        {
          "line": 1424,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "lAddresses.push_back(strAddNode)",
          "new_text": null,
          "old_line_content": "                lAddresses.push_back(strAddNode);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1938,
          "old_api": "Fuzz",
          "new_api": null,
          "old_text": "Fuzz(2)",
          "new_text": null,
          "old_line_content": "    Fuzz(2);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1947,
          "old_api": "GetDataDir",
          "new_api": null,
          "old_text": "GetDataDir()",
          "new_text": null,
          "old_line_content": "    pathAddr = GetDataDir() / \"peers.dat\";",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1437,
          "old_api": "insert",
          "new_api": null,
          "old_text": "setservAddNodeAddresses.insert(serv)",
          "new_text": null,
          "old_line_content": "                        setservAddNodeAddresses.insert(serv);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 1954,
          "old_api": "GetRandBytes",
          "new_api": null,
          "old_text": "GetRandBytes((unsigned char*)&randv, sizeof(randv))",
          "new_text": null,
          "old_line_content": "    GetRandBytes((unsigned char*)&randv, sizeof(randv));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1955,
          "old_api": "strprintf",
          "new_api": null,
          "old_text": "strprintf(\"peers.dat.%04x\", randv)",
          "new_text": null,
          "old_line_content": "    std::string tmpfn = strprintf(\"peers.dat.%04x\", randv);",
          "new_line_content": "    // serialize addresses, checksum data up to that point, then append csum",
          "content_same": false
        },
        {
          "line": 1446,
          "old_api": "end",
          "new_api": null,
          "old_text": "lservAddressesToAdd.end()",
          "new_text": null,
          "old_line_content": "                for (list<vector<CService> >::iterator it = lservAddressesToAdd.begin(); it != lservAddressesToAdd.end(); it++)",
          "new_line_content": "                        if (pnode->addr == addrNode)",
          "content_same": false
        },
        {
          "line": 1447,
          "old_api": "BOOST_FOREACH",
          "new_api": null,
          "old_text": "BOOST_FOREACH(CService& addrNode, *(it))",
          "new_text": null,
          "old_line_content": "                    BOOST_FOREACH(CService& addrNode, *(it))",
          "new_line_content": "                        {",
          "content_same": false
        },
        {
          "line": 1961,
          "old_api": "end",
          "new_api": null,
          "old_text": "ssPeers.end()",
          "new_text": null,
          "old_line_content": "    uint256 hash = Hash(ssPeers.begin(), ssPeers.end());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1450,
          "old_api": "erase",
          "new_api": null,
          "old_text": "lservAddressesToAdd.erase(it)",
          "new_text": null,
          "old_line_content": "                            it = lservAddressesToAdd.erase(it);",
          "new_line_content": "                            break;",
          "content_same": false
        },
        {
          "line": 1966,
          "old_api": "string",
          "new_api": null,
          "old_text": "pathTmp.string().c_str()",
          "new_text": null,
          "old_line_content": "    FILE *file = fopen(pathTmp.string().c_str(), \"wb\");",
          "new_line_content": "    if (!fileout)",
          "content_same": false
        },
        {
          "line": 1969,
          "old_api": "string",
          "new_api": null,
          "old_text": "pathTmp.string()",
          "new_text": null,
          "old_line_content": "        return error(\"%s : Failed to open file %s\", __func__, pathTmp.string());",
          "new_line_content": "    // Write and commit header, data",
          "content_same": false
        },
        {
          "line": 1458,
          "old_api": "size",
          "new_api": null,
          "old_text": "vserv.size()",
          "new_text": null,
          "old_line_content": "            OpenNetworkConnection(CAddress(vserv[i % vserv.size()]), &grant);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 1461,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(120000)",
          "new_text": null,
          "old_line_content": "        MilliSleep(120000); // Retry every 2 minutes",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1978,
          "old_api": "FileCommit",
          "new_api": null,
          "old_text": "FileCommit(fileout)",
          "new_text": null,
          "old_line_content": "    FileCommit(fileout);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1979,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "fileout.fclose()",
          "new_text": null,
          "old_line_content": "    fileout.fclose();",
          "new_line_content": "    // replace existing peers.dat, if any, with new peers.dat.XXXX",
          "content_same": false
        },
        {
          "line": 1982,
          "old_api": "RenameOver",
          "new_api": null,
          "old_text": "RenameOver(pathTmp, pathAddr)",
          "new_text": null,
          "old_line_content": "    if (!RenameOver(pathTmp, pathAddr))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1983,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s : Rename-into-place failed\", __func__)",
          "new_text": null,
          "old_line_content": "        return error(\"%s : Rename-into-place failed\", __func__);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 1474,
          "old_api": "CNode::IsBanned(addrConnect)",
          "new_api": null,
          "old_text": "CNode::IsBanned(addrConnect)",
          "new_text": null,
          "old_line_content": "            FindNode((CNetAddr)addrConnect) || CNode::IsBanned(addrConnect) ||",
          "new_line_content": "            return false;",
          "content_same": false
        },
        {
          "line": 1477,
          "old_api": "FindNode",
          "new_api": null,
          "old_text": "FindNode(pszDest)",
          "new_text": null,
          "old_line_content": "    } else if (FindNode(pszDest))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1991,
          "old_api": "string",
          "new_api": null,
          "old_text": "pathAddr.string().c_str()",
          "new_text": null,
          "old_line_content": "    FILE *file = fopen(pathAddr.string().c_str(), \"rb\");",
          "new_line_content": "    if (!filein)",
          "content_same": false
        },
        {
          "line": 1480,
          "old_api": "ConnectNode",
          "new_api": null,
          "old_text": "ConnectNode(addrConnect, pszDest)",
          "new_text": null,
          "old_line_content": "    CNode* pnode = ConnectNode(addrConnect, pszDest);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1481,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "    boost::this_thread::interruption_point();",
          "new_line_content": "    if (!pnode)",
          "content_same": false
        },
        {
          "line": 1994,
          "old_api": "string",
          "new_api": null,
          "old_text": "pathAddr.string()",
          "new_text": null,
          "old_line_content": "        return error(\"%s : Failed to open file %s\", __func__, pathAddr.string());",
          "new_line_content": "    // use file size to size memory buffer",
          "content_same": false
        },
        {
          "line": 1997,
          "old_api": "boost::filesystem::file_size(pathAddr)",
          "new_api": null,
          "old_text": "boost::filesystem::file_size(pathAddr)",
          "new_text": null,
          "old_line_content": "    int fileSize = boost::filesystem::file_size(pathAddr);",
          "new_line_content": "    // Don't try to resize to a negative number if file is small",
          "content_same": false
        },
        {
          "line": 1486,
          "old_api": "MoveTo",
          "new_api": null,
          "old_text": "grantOutbound->MoveTo(pnode->grantOutbound)",
          "new_text": null,
          "old_line_content": "        grantOutbound->MoveTo(pnode->grantOutbound);",
          "new_line_content": "    if (fOneShot)",
          "content_same": false
        },
        {
          "line": 2003,
          "old_api": "resize",
          "new_api": null,
          "old_text": "vchData.resize(dataSize)",
          "new_text": null,
          "old_line_content": "    vchData.resize(dataSize);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2008,
          "old_api": "read",
          "new_api": null,
          "old_text": "filein.read((char *)&vchData[0], dataSize)",
          "new_text": null,
          "old_line_content": "        filein.read((char *)&vchData[0], dataSize);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2014,
          "old_api": "fclose",
          "new_api": null,
          "old_text": "filein.fclose()",
          "new_text": null,
          "old_line_content": "    filein.fclose();",
          "new_line_content": "    CDataStream ssPeers(vchData, SER_DISK, CLIENT_VERSION);",
          "content_same": false
        },
        {
          "line": 1505,
          "old_api": "GetHeight",
          "new_api": null,
          "old_text": "g_signals.GetHeight().get_value_or(0)",
          "new_text": null,
          "old_line_content": "    int nBestHeight = g_signals.GetHeight().get_value_or(0);",
          "new_line_content": "    // Iterate over all nodes",
          "content_same": false
        },
        {
          "line": 2021,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s : Checksum mismatch, data corrupted\", __func__)",
          "new_text": null,
          "old_line_content": "        return error(\"%s : Checksum mismatch, data corrupted\", __func__);",
          "new_line_content": "    unsigned char pchMsgTmp[4];",
          "content_same": false
        },
        {
          "line": 2026,
          "old_api": "FLATDATA",
          "new_api": null,
          "old_text": "FLATDATA(pchMsgTmp)",
          "new_text": null,
          "old_line_content": "        ssPeers >> FLATDATA(pchMsgTmp);",
          "new_line_content": "        // ... verify the network matches ours",
          "content_same": false
        },
        {
          "line": 1515,
          "old_api": "NodeSyncScore",
          "new_api": null,
          "old_text": "NodeSyncScore(pnode)",
          "new_text": null,
          "old_line_content": "            int64_t nScore = NodeSyncScore(pnode);",
          "new_line_content": "                pnodeNewSync = pnode;",
          "content_same": false
        },
        {
          "line": 2029,
          "old_api": "MessageStart",
          "new_api": null,
          "old_text": "Params().MessageStart()",
          "new_text": null,
          "old_line_content": "        if (memcmp(pchMsgTmp, Params().MessageStart(), sizeof(pchMsgTmp)))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2030,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"%s : Invalid network magic number\", __func__)",
          "new_text": null,
          "old_line_content": "            return error(\"%s : Invalid network magic number\", __func__);",
          "new_line_content": "        // de-serialize address data into one CAddrMan object",
          "content_same": false
        },
        {
          "line": 2036,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "        return error(\"%s : Deserialize or I/O error - %s\", __func__, e.what());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2042,
          "old_api": "GetArg",
          "new_api": null,
          "old_text": "GetArg(\"-maxreceivebuffer\", 5*1000)",
          "new_text": null,
          "old_line_content": "unsigned int ReceiveFloodSize() { return 1000*GetArg(\"-maxreceivebuffer\", 5*1000); }",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1531,
          "old_api": "SetThreadPriority",
          "new_api": null,
          "old_text": "SetThreadPriority(THREAD_PRIORITY_BELOW_NORMAL)",
          "new_text": null,
          "old_line_content": "    SetThreadPriority(THREAD_PRIORITY_BELOW_NORMAL);",
          "new_line_content": "    {",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 69,
      "total_additions": 220,
      "total_deletions": 221,
      "total_api_changes": 510
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 510,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          1083
        ]
      }
    },
    "api_calls_before": 711,
    "api_calls_after": 710,
    "diff_info": {
      "added_lines": 0,
      "removed_lines": 2,
      "total_diff_lines": 14
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/32ebde46123046d5dd41789b40578d2d43f1e7ef",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/32ebde46123046d5dd41789b40578d2d43f1e7ef/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/32ebde46123046d5dd41789b40578d2d43f1e7ef/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/32ebde46123046d5dd41789b40578d2d43f1e7ef/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 2943,
          "old_api": "printf",
          "new_api": "SetThreadPriority",
          "old_text": "printf(\"BitcoinMiner started\\n\")",
          "new_text": "SetThreadPriority(THREAD_PRIORITY_LOWEST)",
          "old_line_content": "    printf(\"BitcoinMiner started\\n\");",
          "new_line_content": "    SetThreadPriority(THREAD_PRIORITY_LOWEST);",
          "content_same": false
        },
        {
          "line": 2983,
          "old_api": "alignup<16>(pmidstatebuf)",
          "new_api": "alignup<16>(pdatabuf)",
          "old_text": "alignup<16>(pmidstatebuf)",
          "new_text": "alignup<16>(pdatabuf)",
          "old_line_content": "        char pmidstatebuf[32+16]; char* pmidstate = alignup<16>(pmidstatebuf);",
          "new_line_content": "        char pdatabuf[128+16];    char* pdata     = alignup<16>(pdatabuf);",
          "content_same": false
        },
        {
          "line": 2984,
          "old_api": "alignup<16>(pdatabuf)",
          "new_api": "alignup<16>(phash1buf)",
          "old_text": "alignup<16>(pdatabuf)",
          "new_text": "alignup<16>(phash1buf)",
          "old_line_content": "        char pdatabuf[128+16];    char* pdata     = alignup<16>(pdatabuf);",
          "new_line_content": "        char phash1buf[64+16];    char* phash1    = alignup<16>(phash1buf);",
          "content_same": false
        },
        {
          "line": 2996,
          "old_api": "GetTime",
          "new_api": "SetCompact",
          "old_text": "GetTime()",
          "new_text": "CBigNum().SetCompact(pblock->nBits).getuint256()",
          "old_line_content": "        int64 nStart = GetTime();",
          "new_line_content": "        uint256 hashTarget = CBigNum().SetCompact(pblock->nBits).getuint256();",
          "content_same": false
        },
        {
          "line": 3018,
          "old_api": "ByteReverse",
          "new_api": "GetHash",
          "old_text": "ByteReverse(nNonceFound)",
          "new_text": "pblock->GetHash()",
          "old_line_content": "                    pblock->nNonce = ByteReverse(nNonceFound);",
          "new_line_content": "                    assert(hash == pblock->GetHash());",
          "content_same": false
        },
        {
          "line": 3021,
          "old_api": "SetThreadPriority",
          "new_api": "get",
          "old_text": "SetThreadPriority(THREAD_PRIORITY_NORMAL)",
          "new_text": "pblock.get()",
          "old_line_content": "                    SetThreadPriority(THREAD_PRIORITY_NORMAL);",
          "new_line_content": "                    CheckWork(pblock.get(), *pwalletMain, reservekey);",
          "content_same": false
        },
        {
          "line": 3022,
          "old_api": "get",
          "new_api": "SetThreadPriority",
          "old_text": "pblock.get()",
          "new_text": "SetThreadPriority(THREAD_PRIORITY_LOWEST)",
          "old_line_content": "                    CheckWork(pblock.get(), *pwalletMain, reservekey);",
          "new_line_content": "                    SetThreadPriority(THREAD_PRIORITY_LOWEST);",
          "content_same": false
        },
        {
          "line": 3047,
          "old_api": "strprintf",
          "new_api": "boost::bind(CalledSetStatusBar, strStatus, 0)",
          "old_text": "strprintf(\"    %.0f khash/s\", dHashesPerSec/1000.0)",
          "new_text": "boost::bind(CalledSetStatusBar, strStatus, 0)",
          "old_line_content": "                        string strStatus = strprintf(\"    %.0f khash/s\", dHashesPerSec/1000.0);",
          "new_line_content": "                        UIThreadCall(boost::bind(CalledSetStatusBar, strStatus, 0));",
          "content_same": false
        },
        {
          "line": 3053,
          "old_api": "GetTime",
          "new_api": "printf",
          "old_text": "GetTime()",
          "new_text": "printf(\"hashmeter %3d CPUs %6.0f khash/s\\n\", vnThreadsRunning[3], dHashesPerSec/1000.0)",
          "old_line_content": "                            printf(\"%s \", DateTimeStrFormat(\"%x %H:%M\", GetTime()).c_str());",
          "new_line_content": "                            printf(\"hashmeter %3d CPUs %6.0f khash/s\\n\", vnThreadsRunning[3], dHashesPerSec/1000.0);",
          "content_same": false
        },
        {
          "line": 3077,
          "old_api": "GetAdjustedTime",
          "new_api": "ByteReverse",
          "old_text": "GetAdjustedTime()",
          "new_text": "ByteReverse(pblock->nTime)",
          "old_line_content": "            pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());",
          "new_line_content": "            nBlockTime = ByteReverse(pblock->nTime);",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "WriteSetting",
          "new_api": "MainFrameRepaint",
          "old_text": "WriteSetting(\"fGenerateBitcoins\", fGenerateBitcoins)",
          "new_text": "MainFrameRepaint()",
          "old_line_content": "        WriteSetting(\"fGenerateBitcoins\", fGenerateBitcoins);",
          "new_line_content": "        MainFrameRepaint();",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "boost::thread::hardware_concurrency()",
          "new_api": "printf",
          "old_text": "boost::thread::hardware_concurrency()",
          "new_text": "printf(\"%d processors\\n\", nProcessors)",
          "old_line_content": "        int nProcessors = boost::thread::hardware_concurrency();",
          "new_line_content": "        printf(\"%d processors\\n\", nProcessors);",
          "content_same": false
        },
        {
          "line": 3127,
          "old_api": "CreateThread",
          "new_api": "printf",
          "old_text": "CreateThread(ThreadBitcoinMiner, pwallet)",
          "new_text": "printf(\"Error: CreateThread(ThreadBitcoinMiner) failed\\n\")",
          "old_line_content": "            if (!CreateThread(ThreadBitcoinMiner, pwallet))",
          "new_line_content": "                printf(\"Error: CreateThread(ThreadBitcoinMiner) failed\\n\");",
          "content_same": false
        },
        {
          "line": 3128,
          "old_api": "printf",
          "new_api": "Sleep",
          "old_text": "printf(\"Error: CreateThread(ThreadBitcoinMiner) failed\\n\")",
          "new_text": "Sleep(10)",
          "old_line_content": "                printf(\"Error: CreateThread(ThreadBitcoinMiner) failed\\n\");",
          "new_line_content": "            Sleep(10);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3076,
          "old_api": null,
          "new_api": "GetAdjustedTime",
          "old_text": null,
          "new_text": "GetAdjustedTime()",
          "old_line_content": "            // Update nTime every few seconds",
          "new_line_content": "            pblock->nTime = max(pindexPrev->GetMedianTimePast()+1, GetAdjustedTime());",
          "content_same": false
        },
        {
          "line": 2951,
          "old_api": null,
          "new_api": "AffinityBugWorkaround",
          "old_text": null,
          "new_text": "AffinityBugWorkaround(ThreadBitcoinMiner)",
          "old_line_content": "    {",
          "new_line_content": "        if (AffinityBugWorkaround(ThreadBitcoinMiner))",
          "content_same": false
        },
        {
          "line": 2955,
          "old_api": null,
          "new_api": "IsInitialBlockDownload",
          "old_text": null,
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "            return;",
          "new_line_content": "        while (vNodes.empty() || IsInitialBlockDownload())",
          "content_same": false
        },
        {
          "line": 2957,
          "old_api": null,
          "new_api": "Sleep",
          "old_text": null,
          "new_text": "Sleep(1000)",
          "old_line_content": "        {",
          "new_line_content": "            Sleep(1000);",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": null,
          "new_api": "BitcoinMiner",
          "old_text": null,
          "new_text": "BitcoinMiner(pwallet)",
          "old_line_content": "        vnThreadsRunning[3]++;",
          "new_line_content": "        BitcoinMiner(pwallet);",
          "content_same": false
        },
        {
          "line": 3093,
          "old_api": null,
          "new_api": "PrintException",
          "old_text": null,
          "new_text": "PrintException(&e, \"ThreadBitcoinMiner()\")",
          "old_line_content": "        vnThreadsRunning[3]--;",
          "new_line_content": "        PrintException(&e, \"ThreadBitcoinMiner()\");",
          "content_same": false
        },
        {
          "line": 3096,
          "old_api": null,
          "new_api": "PrintException",
          "old_text": null,
          "new_text": "PrintException(NULL, \"ThreadBitcoinMiner()\")",
          "old_line_content": "        vnThreadsRunning[3]--;",
          "new_line_content": "        PrintException(NULL, \"ThreadBitcoinMiner()\");",
          "content_same": false
        },
        {
          "line": 3098,
          "old_api": null,
          "new_api": "boost::bind(CalledSetStatusBar, \"\", 0)",
          "old_text": null,
          "new_text": "boost::bind(CalledSetStatusBar, \"\", 0)",
          "old_line_content": "    }",
          "new_line_content": "    UIThreadCall(boost::bind(CalledSetStatusBar, \"\", 0));",
          "content_same": false
        },
        {
          "line": 2972,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "pblock.get()",
          "old_line_content": "        auto_ptr<CBlock> pblock(CreateNewBlock(reservekey));",
          "new_line_content": "        if (!pblock.get())",
          "content_same": false
        },
        {
          "line": 2974,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "pblock.get()",
          "old_line_content": "            return;",
          "new_line_content": "        IncrementExtraNonce(pblock.get(), pindexPrev, nExtraNonce);",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"ThreadBitcoinMiner exiting, %d threads remaining\\n\", vnThreadsRunning[3])",
          "old_line_content": "        dHashesPerSec = 0;",
          "new_line_content": "    printf(\"ThreadBitcoinMiner exiting, %d threads remaining\\n\", vnThreadsRunning[3]);",
          "content_same": false
        },
        {
          "line": 2976,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "pblock->vtx.size()",
          "old_line_content": "",
          "new_line_content": "        printf(\"Running BitcoinMiner with %d transactions in block\\n\", pblock->vtx.size());",
          "content_same": false
        },
        {
          "line": 2982,
          "old_api": null,
          "new_api": "alignup<16>(pmidstatebuf)",
          "old_text": null,
          "new_text": "alignup<16>(pmidstatebuf)",
          "old_line_content": "        //",
          "new_line_content": "        char pmidstatebuf[32+16]; char* pmidstate = alignup<16>(pmidstatebuf);",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": null,
          "new_api": "WriteSetting",
          "old_text": null,
          "new_text": "WriteSetting(\"fGenerateBitcoins\", fGenerateBitcoins)",
          "old_line_content": "        fGenerateBitcoins = fGenerate;",
          "new_line_content": "        WriteSetting(\"fGenerateBitcoins\", fGenerateBitcoins);",
          "content_same": false
        },
        {
          "line": 2986,
          "old_api": null,
          "new_api": "get",
          "old_text": null,
          "new_text": "pblock.get()",
          "old_line_content": "",
          "new_line_content": "        FormatHashBuffers(pblock.get(), pmidstate, pdata, phash1);",
          "content_same": false
        },
        {
          "line": 3116,
          "old_api": null,
          "new_api": "boost::thread::hardware_concurrency()",
          "old_text": null,
          "new_text": "boost::thread::hardware_concurrency()",
          "old_line_content": "    {",
          "new_line_content": "        int nProcessors = boost::thread::hardware_concurrency();",
          "content_same": false
        },
        {
          "line": 2995,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "        //",
          "new_line_content": "        int64 nStart = GetTime();",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"Starting %d BitcoinMiner threads\\n\", nAddThreads)",
          "old_line_content": "        int nAddThreads = nProcessors - vnThreadsRunning[3];",
          "new_line_content": "        printf(\"Starting %d BitcoinMiner threads\\n\", nAddThreads);",
          "content_same": false
        },
        {
          "line": 2998,
          "old_api": null,
          "new_api": "alignup<16>(hashbuf)",
          "old_text": null,
          "new_text": "alignup<16>(hashbuf)",
          "old_line_content": "        uint256 hashbuf[2];",
          "new_line_content": "        uint256& hash = *alignup<16>(hashbuf);",
          "content_same": false
        },
        {
          "line": 3126,
          "old_api": null,
          "new_api": "CreateThread",
          "old_text": null,
          "new_text": "CreateThread(ThreadBitcoinMiner, pwallet)",
          "old_line_content": "        {",
          "new_line_content": "            if (!CreateThread(ThreadBitcoinMiner, pwallet))",
          "content_same": false
        },
        {
          "line": 3005,
          "old_api": null,
          "new_api": "ScanHash_CryptoPP",
          "old_text": null,
          "new_text": "ScanHash_CryptoPP(pmidstate, pdata + 64, phash1,\n                                            (char*)&hash, nHashesDone)",
          "old_line_content": "            // Crypto++ SHA-256",
          "new_line_content": "            nNonceFound = ScanHash_CryptoPP(pmidstate, pdata + 64, phash1,",
          "content_same": false
        },
        {
          "line": 3012,
          "old_api": null,
          "new_api": "ByteReverse",
          "old_text": null,
          "new_text": "ByteReverse(((unsigned int*)&hash)[i])",
          "old_line_content": "                for (int i = 0; i < sizeof(hash)/4; i++)",
          "new_line_content": "                    ((unsigned int*)&hash)[i] = ByteReverse(((unsigned int*)&hash)[i]);",
          "content_same": false
        },
        {
          "line": 3017,
          "old_api": null,
          "new_api": "ByteReverse",
          "old_text": null,
          "new_text": "ByteReverse(nNonceFound)",
          "old_line_content": "                    // Found a solution",
          "new_line_content": "                    pblock->nNonce = ByteReverse(nNonceFound);",
          "content_same": false
        },
        {
          "line": 3020,
          "old_api": null,
          "new_api": "SetThreadPriority",
          "old_text": null,
          "new_text": "SetThreadPriority(THREAD_PRIORITY_NORMAL)",
          "old_line_content": "",
          "new_line_content": "                    SetThreadPriority(THREAD_PRIORITY_NORMAL);",
          "content_same": false
        },
        {
          "line": 3070,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "                break;",
          "new_line_content": "            if (nTransactionsUpdated != nTransactionsUpdatedLast && GetTime() - nStart > 60)",
          "content_same": false
        },
        {
          "line": 3031,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "            {",
          "new_line_content": "                nHPSTimerStart = GetTimeMillis();",
          "content_same": false
        },
        {
          "line": 3036,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "                nHashCounter += nHashesDone;",
          "new_line_content": "            if (GetTimeMillis() - nHPSTimerStart > 4000)",
          "content_same": false
        },
        {
          "line": 3041,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "                {",
          "new_line_content": "                    if (GetTimeMillis() - nHPSTimerStart > 4000)",
          "content_same": false
        },
        {
          "line": 3043,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "                    {",
          "new_line_content": "                        dHashesPerSec = 1000.0 * nHashCounter / (GetTimeMillis() - nHPSTimerStart);",
          "content_same": false
        },
        {
          "line": 3046,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"    %.0f khash/s\", dHashesPerSec/1000.0)",
          "old_line_content": "                        nHashCounter = 0;",
          "new_line_content": "                        string strStatus = strprintf(\"    %.0f khash/s\", dHashesPerSec/1000.0);",
          "content_same": false
        },
        {
          "line": 3049,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "                        static int64 nLogTime;",
          "new_line_content": "                        if (GetTime() - nLogTime > 30 * 60)",
          "content_same": false
        },
        {
          "line": 3051,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "                        {",
          "new_line_content": "                            nLogTime = GetTime();",
          "content_same": false
        },
        {
          "line": 3066,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vNodes.empty()",
          "old_line_content": "                return;",
          "new_line_content": "            if (vNodes.empty())",
          "content_same": false
        },
        {
          "line": 2942,
          "old_api": null,
          "new_api": "printf",
          "old_text": null,
          "new_text": "printf(\"BitcoinMiner started\\n\")",
          "old_line_content": "{",
          "new_line_content": "    printf(\"BitcoinMiner started\\n\");",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 2944,
          "old_api": "SetThreadPriority",
          "new_api": null,
          "old_text": "SetThreadPriority(THREAD_PRIORITY_LOWEST)",
          "new_text": null,
          "old_line_content": "    SetThreadPriority(THREAD_PRIORITY_LOWEST);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3078,
          "old_api": "ByteReverse",
          "new_api": null,
          "old_text": "ByteReverse(pblock->nTime)",
          "new_text": null,
          "old_line_content": "            nBlockTime = ByteReverse(pblock->nTime);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 2952,
          "old_api": "AffinityBugWorkaround",
          "new_api": null,
          "old_text": "AffinityBugWorkaround(ThreadBitcoinMiner)",
          "new_text": null,
          "old_line_content": "        if (AffinityBugWorkaround(ThreadBitcoinMiner))",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2956,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "        while (vNodes.empty() || IsInitialBlockDownload())",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 2958,
          "old_api": "Sleep",
          "new_api": null,
          "old_text": "Sleep(1000)",
          "new_text": null,
          "old_line_content": "            Sleep(1000);",
          "new_line_content": "            if (fShutdown)",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": "BitcoinMiner",
          "new_api": null,
          "old_text": "BitcoinMiner(pwallet)",
          "new_text": null,
          "old_line_content": "        BitcoinMiner(pwallet);",
          "new_line_content": "        vnThreadsRunning[3]--;",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "PrintException",
          "new_api": null,
          "old_text": "PrintException(&e, \"ThreadBitcoinMiner()\")",
          "new_text": null,
          "old_line_content": "        PrintException(&e, \"ThreadBitcoinMiner()\");",
          "new_line_content": "    } catch (...) {",
          "content_same": false
        },
        {
          "line": 3097,
          "old_api": "PrintException",
          "new_api": null,
          "old_text": "PrintException(NULL, \"ThreadBitcoinMiner()\")",
          "new_text": null,
          "old_line_content": "        PrintException(NULL, \"ThreadBitcoinMiner()\");",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "boost::bind(CalledSetStatusBar, \"\", 0)",
          "new_api": null,
          "old_text": "boost::bind(CalledSetStatusBar, \"\", 0)",
          "new_text": null,
          "old_line_content": "    UIThreadCall(boost::bind(CalledSetStatusBar, \"\", 0));",
          "new_line_content": "    nHPSTimerStart = 0;",
          "content_same": false
        },
        {
          "line": 2973,
          "old_api": "get",
          "new_api": null,
          "old_text": "pblock.get()",
          "new_text": null,
          "old_line_content": "        if (!pblock.get())",
          "new_line_content": "            return;",
          "content_same": false
        },
        {
          "line": 2975,
          "old_api": "get",
          "new_api": null,
          "old_text": "pblock.get()",
          "new_text": null,
          "old_line_content": "        IncrementExtraNonce(pblock.get(), pindexPrev, nExtraNonce);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3103,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"ThreadBitcoinMiner exiting, %d threads remaining\\n\", vnThreadsRunning[3])",
          "new_text": null,
          "old_line_content": "    printf(\"ThreadBitcoinMiner exiting, %d threads remaining\\n\", vnThreadsRunning[3]);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 2977,
          "old_api": "size",
          "new_api": null,
          "old_text": "pblock->vtx.size()",
          "new_text": null,
          "old_line_content": "        printf(\"Running BitcoinMiner with %d transactions in block\\n\", pblock->vtx.size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 2985,
          "old_api": "alignup<16>(phash1buf)",
          "new_api": null,
          "old_text": "alignup<16>(phash1buf)",
          "new_text": null,
          "old_line_content": "        char phash1buf[64+16];    char* phash1    = alignup<16>(phash1buf);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3113,
          "old_api": "MainFrameRepaint",
          "new_api": null,
          "old_text": "MainFrameRepaint()",
          "new_text": null,
          "old_line_content": "        MainFrameRepaint();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 2987,
          "old_api": "get",
          "new_api": null,
          "old_text": "pblock.get()",
          "new_text": null,
          "old_line_content": "        FormatHashBuffers(pblock.get(), pmidstate, pdata, phash1);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"%d processors\\n\", nProcessors)",
          "new_text": null,
          "old_line_content": "        printf(\"%d processors\\n\", nProcessors);",
          "new_line_content": "        if (nProcessors < 1)",
          "content_same": false
        },
        {
          "line": 3124,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"Starting %d BitcoinMiner threads\\n\", nAddThreads)",
          "new_text": null,
          "old_line_content": "        printf(\"Starting %d BitcoinMiner threads\\n\", nAddThreads);",
          "new_line_content": "        for (int i = 0; i < nAddThreads; i++)",
          "content_same": false
        },
        {
          "line": 2997,
          "old_api": "SetCompact",
          "new_api": null,
          "old_text": "CBigNum().SetCompact(pblock->nBits).getuint256()",
          "new_text": null,
          "old_line_content": "        uint256 hashTarget = CBigNum().SetCompact(pblock->nBits).getuint256();",
          "new_line_content": "        uint256 hashbuf[2];",
          "content_same": false
        },
        {
          "line": 2999,
          "old_api": "alignup<16>(hashbuf)",
          "new_api": null,
          "old_text": "alignup<16>(hashbuf)",
          "new_text": null,
          "old_line_content": "        uint256& hash = *alignup<16>(hashbuf);",
          "new_line_content": "        loop",
          "content_same": false
        },
        {
          "line": 3129,
          "old_api": "Sleep",
          "new_api": null,
          "old_text": "Sleep(10)",
          "new_text": null,
          "old_line_content": "            Sleep(10);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3006,
          "old_api": "ScanHash_CryptoPP",
          "new_api": null,
          "old_text": "ScanHash_CryptoPP(pmidstate, pdata + 64, phash1,\n                                            (char*)&hash, nHashesDone)",
          "new_text": null,
          "old_line_content": "            nNonceFound = ScanHash_CryptoPP(pmidstate, pdata + 64, phash1,",
          "new_line_content": "                                            (char*)&hash, nHashesDone);",
          "content_same": false
        },
        {
          "line": 3013,
          "old_api": "ByteReverse",
          "new_api": null,
          "old_text": "ByteReverse(((unsigned int*)&hash)[i])",
          "new_text": null,
          "old_line_content": "                    ((unsigned int*)&hash)[i] = ByteReverse(((unsigned int*)&hash)[i]);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3019,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "pblock->GetHash()",
          "new_text": null,
          "old_line_content": "                    assert(hash == pblock->GetHash());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3023,
          "old_api": "SetThreadPriority",
          "new_api": null,
          "old_text": "SetThreadPriority(THREAD_PRIORITY_LOWEST)",
          "new_text": null,
          "old_line_content": "                    SetThreadPriority(THREAD_PRIORITY_LOWEST);",
          "new_line_content": "                    break;",
          "content_same": false
        },
        {
          "line": 3032,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "                nHPSTimerStart = GetTimeMillis();",
          "new_line_content": "                nHashCounter = 0;",
          "content_same": false
        },
        {
          "line": 3037,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "            if (GetTimeMillis() - nHPSTimerStart > 4000)",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 3042,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "                    if (GetTimeMillis() - nHPSTimerStart > 4000)",
          "new_line_content": "                    {",
          "content_same": false
        },
        {
          "line": 3045,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "                        nHPSTimerStart = GetTimeMillis();",
          "new_line_content": "                        nHashCounter = 0;",
          "content_same": false
        },
        {
          "line": 3048,
          "old_api": "boost::bind(CalledSetStatusBar, strStatus, 0)",
          "new_api": null,
          "old_text": "boost::bind(CalledSetStatusBar, strStatus, 0)",
          "new_text": null,
          "old_line_content": "                        UIThreadCall(boost::bind(CalledSetStatusBar, strStatus, 0));",
          "new_line_content": "                        static int64 nLogTime;",
          "content_same": false
        },
        {
          "line": 3050,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "                        if (GetTime() - nLogTime > 30 * 60)",
          "new_line_content": "                        {",
          "content_same": false
        },
        {
          "line": 3054,
          "old_api": "printf",
          "new_api": null,
          "old_text": "printf(\"hashmeter %3d CPUs %6.0f khash/s\\n\", vnThreadsRunning[3], dHashesPerSec/1000.0)",
          "new_text": null,
          "old_line_content": "                            printf(\"hashmeter %3d CPUs %6.0f khash/s\\n\", vnThreadsRunning[3], dHashesPerSec/1000.0);",
          "new_line_content": "                        }",
          "content_same": false
        },
        {
          "line": 2935,
          "old_api": "Sleep",
          "new_api": null,
          "old_text": "Sleep(2000)",
          "new_text": null,
          "old_line_content": "    Sleep(2000);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 3067,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vNodes.empty()",
          "new_text": null,
          "old_line_content": "            if (vNodes.empty())",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 3071,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "            if (nTransactionsUpdated != nTransactionsUpdatedLast && GetTime() - nStart > 60)",
          "new_line_content": "                break;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 14,
      "total_additions": 34,
      "total_deletions": 35,
      "total_api_changes": 83
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 1,
        "api_related_lines": 83,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          2938
        ]
      }
    },
    "api_calls_before": 1134,
    "api_calls_after": 1133,
    "diff_info": {
      "added_lines": 1,
      "removed_lines": 2,
      "total_diff_lines": 21
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/ed79e4f497a9a7747b006a5cb04d4173a6bbc1c5",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/ed79e4f497a9a7747b006a5cb04d4173a6bbc1c5/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/ed79e4f497a9a7747b006a5cb04d4173a6bbc1c5/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/ed79e4f497a9a7747b006a5cb04d4173a6bbc1c5/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 3085,
          "old_api": "IsValid",
          "new_api": "std::max(oldest_internal, oldest_external)",
          "old_text": "keypool.vchPubKey.IsValid()",
          "new_text": "std::max(oldest_internal, oldest_external)",
          "old_line_content": "    assert(keypool.vchPubKey.IsValid());",
          "new_line_content": "        return std::max(oldest_internal, oldest_external);",
          "content_same": false
        },
        {
          "line": 3105,
          "old_api": "GetDepthInMainChain",
          "new_api": "IsTrusted",
          "old_text": "pcoin->GetDepthInMainChain()",
          "new_text": "pcoin->IsTrusted()",
          "old_line_content": "            int nDepth = pcoin->GetDepthInMainChain();",
          "new_line_content": "            if (!pcoin->IsTrusted())",
          "content_same": false
        },
        {
          "line": 3112,
          "old_api": "IsMine",
          "new_api": "IsFromMe",
          "old_text": "IsMine(pcoin->tx->vout[i])",
          "new_text": "pcoin->IsFromMe(ISMINE_ALL)",
          "old_line_content": "                if (!IsMine(pcoin->tx->vout[i]))",
          "new_line_content": "            if (nDepth < (pcoin->IsFromMe(ISMINE_ALL) ? 0 : 1))",
          "content_same": false
        },
        {
          "line": 3169,
          "old_api": "clear",
          "new_api": "insert",
          "old_text": "grouping.clear()",
          "new_text": "grouping.insert(txoutAddr)",
          "old_line_content": "                grouping.clear();",
          "new_line_content": "                       grouping.insert(txoutAddr);",
          "content_same": false
        },
        {
          "line": 3174,
          "old_api": "size",
          "new_api": "insert",
          "old_text": "pcoin->tx->vout.size()",
          "new_text": "groupings.insert(grouping)",
          "old_line_content": "        for (unsigned int i = 0; i < pcoin->tx->vout.size(); i++)",
          "new_line_content": "                groupings.insert(grouping);",
          "content_same": false
        },
        {
          "line": 3175,
          "old_api": "IsMine",
          "new_api": "clear",
          "old_text": "IsMine(pcoin->tx->vout[i])",
          "new_text": "grouping.clear()",
          "old_line_content": "            if (IsMine(pcoin->tx->vout[i]))",
          "new_line_content": "                grouping.clear();",
          "content_same": false
        },
        {
          "line": 3180,
          "old_api": "insert",
          "new_api": "size",
          "old_text": "grouping.insert(address)",
          "new_text": "pcoin->tx->vout.size()",
          "old_line_content": "                grouping.insert(address);",
          "new_line_content": "        for (unsigned int i = 0; i < pcoin->tx->vout.size(); i++)",
          "content_same": false
        },
        {
          "line": 3181,
          "old_api": "insert",
          "new_api": "IsMine",
          "old_text": "groupings.insert(grouping)",
          "new_text": "IsMine(pcoin->tx->vout[i])",
          "old_line_content": "                groupings.insert(grouping);",
          "new_line_content": "            if (IsMine(pcoin->tx->vout[i]))",
          "content_same": false
        },
        {
          "line": 3201,
          "old_api": "end",
          "new_api": "insert",
          "old_text": "hit->end()",
          "new_text": "hits.insert((*it).second)",
          "old_line_content": "            merged->insert(hit->begin(), hit->end());",
          "new_line_content": "                hits.insert((*it).second);",
          "content_same": false
        },
        {
          "line": 3248,
          "old_api": "GetAccountCreditDebit",
          "new_api": "GetDepthInMainChain",
          "old_text": "walletdb.GetAccountCreditDebit(strAccount)",
          "new_text": "wtx.GetDepthInMainChain()",
          "old_line_content": "    nBalance += walletdb.GetAccountCreditDebit(strAccount);",
          "new_line_content": "        if (nReceived != 0 && wtx.GetDepthInMainChain() >= nMinDepth)",
          "content_same": false
        },
        {
          "line": 3295,
          "old_api": "ReturnKey",
          "new_api": "CPubKey",
          "old_text": "pwallet->ReturnKey(nIndex)",
          "new_text": "CPubKey()",
          "old_line_content": "        pwallet->ReturnKey(nIndex);",
          "new_line_content": "    vchPubKey = CPubKey();",
          "content_same": false
        },
        {
          "line": 3312,
          "old_api": "IsValid",
          "new_api": "LOCK2",
          "old_text": "keypool.vchPubKey.IsValid()",
          "new_text": "LOCK2(cs_main, cs_wallet)",
          "old_line_content": "        assert(keypool.vchPubKey.IsValid());",
          "new_line_content": "    LOCK2(cs_main, cs_wallet);",
          "content_same": false
        },
        {
          "line": 3316,
          "old_api": "insert",
          "new_api": "ReadPool",
          "old_text": "setAddress.insert(keyID)",
          "new_text": "walletdb.ReadPool(id, keypool)",
          "old_line_content": "        setAddress.insert(keyID);",
          "new_line_content": "        if (!walletdb.ReadPool(id, keypool))",
          "content_same": false
        },
        {
          "line": 3345,
          "old_api": "insert",
          "new_api": "ToByteVector",
          "old_text": "setLockedCoins.insert(output)",
          "new_text": "ToByteVector(pubkey)",
          "old_line_content": "    setLockedCoins.insert(output);",
          "new_line_content": "    script->reserveScript = CScript() << ToByteVector(pubkey) << OP_CHECKSIG;",
          "content_same": false
        },
        {
          "line": 3351,
          "old_api": "erase",
          "new_api": "insert",
          "old_text": "setLockedCoins.erase(output)",
          "new_text": "setLockedCoins.insert(output)",
          "old_line_content": "    setLockedCoins.erase(output);",
          "new_line_content": "    setLockedCoins.insert(output);",
          "content_same": false
        },
        {
          "line": 3357,
          "old_api": "clear",
          "new_api": "erase",
          "old_text": "setLockedCoins.clear()",
          "new_text": "setLockedCoins.erase(output)",
          "old_line_content": "    setLockedCoins.clear();",
          "new_line_content": "    setLockedCoins.erase(output);",
          "content_same": false
        },
        {
          "line": 3371,
          "old_api": "begin",
          "new_api": "count",
          "old_text": "setLockedCoins.begin()",
          "new_text": "setLockedCoins.count(outpt)",
          "old_line_content": "    for (std::set<COutPoint>::iterator it = setLockedCoins.begin();",
          "new_line_content": "    return (setLockedCoins.count(outpt) > 0);",
          "content_same": false
        },
        {
          "line": 3400,
          "old_api": "push_back",
          "new_api": "boost::apply_visitor(*this, dest)",
          "old_text": "vKeys.push_back(keyId)",
          "new_text": "boost::apply_visitor(*this, dest)",
          "old_line_content": "            vKeys.push_back(keyId);",
          "new_line_content": "                boost::apply_visitor(*this, dest);",
          "content_same": false
        },
        {
          "line": 3405,
          "old_api": "GetCScript",
          "new_api": "HaveKey",
          "old_text": "keystore.GetCScript(scriptId, script)",
          "new_text": "keystore.HaveKey(keyId)",
          "old_line_content": "        if (keystore.GetCScript(scriptId, script))",
          "new_line_content": "        if (keystore.HaveKey(keyId))",
          "content_same": false
        },
        {
          "line": 3406,
          "old_api": "Process",
          "new_api": "push_back",
          "old_text": "Process(script)",
          "new_text": "vKeys.push_back(keyId)",
          "old_line_content": "            Process(script);",
          "new_line_content": "            vKeys.push_back(keyId);",
          "content_same": false
        },
        {
          "line": 3435,
          "old_api": "empty",
          "new_api": "count",
          "old_text": "mapKeyFirstBlock.empty()",
          "new_text": "mapKeyBirth.count(keyid)",
          "old_line_content": "    if (mapKeyFirstBlock.empty())",
          "new_line_content": "        if (mapKeyBirth.count(keyid) == 0)",
          "content_same": false
        },
        {
          "line": 3449,
          "old_api": "Process",
          "new_api": "find",
          "old_text": "CAffectedKeysVisitor(*this, vAffected).Process(txout.scriptPubKey)",
          "new_text": "mapBlockIndex.find(wtx.hashBlock)",
          "old_line_content": "                CAffectedKeysVisitor(*this, vAffected).Process(txout.scriptPubKey);",
          "new_line_content": "        BlockMap::const_iterator blit = mapBlockIndex.find(wtx.hashBlock);",
          "content_same": false
        },
        {
          "line": 3462,
          "old_api": "end",
          "new_api": "clear",
          "old_text": "mapKeyFirstBlock.end()",
          "new_text": "vAffected.clear()",
          "old_line_content": "    for (std::map<CKeyID, CBlockIndex*>::const_iterator it = mapKeyFirstBlock.begin(); it != mapKeyFirstBlock.end(); it++)",
          "new_line_content": "                vAffected.clear();",
          "content_same": false
        },
        {
          "line": 3539,
          "old_api": "ToString",
          "new_api": "boost::get<CNoDestination>(&dest)",
          "old_text": "CBitcoinAddress(dest).ToString()",
          "new_text": "boost::get<CNoDestination>(&dest)",
          "old_line_content": "    return CWalletDB(strWalletFile).WriteDestData(CBitcoinAddress(dest).ToString(), key, value);",
          "new_line_content": "    if (boost::get<CNoDestination>(&dest))",
          "content_same": false
        },
        {
          "line": 3559,
          "old_api": "find",
          "new_api": "std::make_pair(key, value)",
          "old_text": "mapAddressBook.find(dest)",
          "new_text": "std::make_pair(key, value)",
          "old_line_content": "    std::map<CTxDestination, CAddressBookData>::const_iterator i = mapAddressBook.find(dest);",
          "new_line_content": "    mapAddressBook[dest].destdata.insert(std::make_pair(key, value));",
          "content_same": false
        },
        {
          "line": 3581,
          "old_api": "FormatMoney",
          "new_api": "_",
          "old_text": "FormatMoney(DEFAULT_TRANSACTION_MINFEE)",
          "new_text": "_(\"Wallet options:\")",
          "old_line_content": "                                                            CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MINFEE)));",
          "new_line_content": "    std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));",
          "content_same": false
        },
        {
          "line": 3583,
          "old_api": "GetFeePerK",
          "new_api": "_",
          "old_text": "payTxFee.GetFeePerK()",
          "new_text": "_(\"Set key pool size to <n> (default: %u)\")",
          "old_line_content": "                                                            CURRENCY_UNIT, FormatMoney(payTxFee.GetFeePerK())));",
          "new_line_content": "    strUsage += HelpMessageOpt(\"-keypool=<n>\", strprintf(_(\"Set key pool size to <n> (default: %u)\"), DEFAULT_KEYPOOL_SIZE));",
          "content_same": false
        },
        {
          "line": 3585,
          "old_api": "_",
          "new_api": "FormatMoney",
          "old_text": "_(\"Attempt to recover private keys from a corrupt wallet on startup\")",
          "new_text": "FormatMoney(DEFAULT_FALLBACK_FEE)",
          "old_line_content": "    strUsage += HelpMessageOpt(\"-salvagewallet\", _(\"Attempt to recover private keys from a corrupt wallet on startup\"));",
          "new_line_content": "                                                               CURRENCY_UNIT, FormatMoney(DEFAULT_FALLBACK_FEE)));",
          "content_same": false
        },
        {
          "line": 3587,
          "old_api": "_",
          "new_api": "FormatMoney",
          "old_text": "_(\"If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)\")",
          "new_text": "FormatMoney(DEFAULT_TRANSACTION_MINFEE)",
          "old_line_content": "    strUsage += HelpMessageOpt(\"-txconfirmtarget=<n>\", strprintf(_(\"If paytxfee is not set, include enough fee so transactions begin confirmation on average within n blocks (default: %u)\"), DEFAULT_TX_CONFIRM_TARGET));",
          "new_line_content": "                                                            CURRENCY_UNIT, FormatMoney(DEFAULT_TRANSACTION_MINFEE)));",
          "content_same": false
        },
        {
          "line": 3589,
          "old_api": "_",
          "new_api": "GetFeePerK",
          "old_text": "_(\"Send transactions with full-RBF opt-in enabled (default: %u)\")",
          "new_text": "payTxFee.GetFeePerK()",
          "old_line_content": "    strUsage += HelpMessageOpt(\"-walletrbf\", strprintf(_(\"Send transactions with full-RBF opt-in enabled (default: %u)\"), DEFAULT_WALLET_RBF));",
          "new_line_content": "                                                            CURRENCY_UNIT, FormatMoney(payTxFee.GetFeePerK())));",
          "content_same": false
        },
        {
          "line": 3601,
          "old_api": "strprintf",
          "new_api": "_",
          "old_text": "strprintf(\"Flush wallet database activity from memory to disk log every <n> megabytes (default: %u)\", DEFAULT_WALLET_DBLOGSIZE)",
          "new_text": "_(\"(1 = keep tx meta data e.g. account owner and payment request information, 2 = drop tx meta data)\")",
          "old_line_content": "        strUsage += HelpMessageOpt(\"-dblogsize=<n>\", strprintf(\"Flush wallet database activity from memory to disk log every <n> megabytes (default: %u)\", DEFAULT_WALLET_DBLOGSIZE));",
          "new_line_content": "                               \" \" + _(\"(1 = keep tx meta data e.g. account owner and payment request information, 2 = drop tx meta data)\"));",
          "content_same": false
        },
        {
          "line": 3621,
          "old_api": "_",
          "new_api": "GetBoolArg",
          "old_text": "_(\"Error loading %s: Wallet corrupted\")",
          "new_text": "GetBoolArg(\"-zapwallettxes\", false)",
          "old_line_content": "            InitError(strprintf(_(\"Error loading %s: Wallet corrupted\"), walletFile));",
          "new_line_content": "    if (GetBoolArg(\"-zapwallettxes\", false)) {",
          "content_same": false
        },
        {
          "line": 3673,
          "old_api": "GetVersion",
          "new_api": "LogPrintf",
          "old_text": "walletInstance->GetVersion()",
          "new_text": "LogPrintf(\"Performing wallet upgrade to %i\\n\", FEATURE_LATEST)",
          "old_line_content": "        if (nMaxVersion < walletInstance->GetVersion())",
          "new_line_content": "            LogPrintf(\"Performing wallet upgrade to %i\\n\", FEATURE_LATEST);",
          "content_same": false
        },
        {
          "line": 3675,
          "old_api": "_",
          "new_api": "SetMinVersion",
          "old_text": "_(\"Cannot downgrade wallet\")",
          "new_text": "walletInstance->SetMinVersion(FEATURE_LATEST)",
          "old_line_content": "            InitError(_(\"Cannot downgrade wallet\"));",
          "new_line_content": "            walletInstance->SetMinVersion(FEATURE_LATEST); // permanently upgrade the wallet immediately",
          "content_same": false
        },
        {
          "line": 3678,
          "old_api": "SetMaxVersion",
          "new_api": "LogPrintf",
          "old_text": "walletInstance->SetMaxVersion(nMaxVersion)",
          "new_text": "LogPrintf(\"Allowing wallet upgrade up to %i\\n\", nMaxVersion)",
          "old_line_content": "        walletInstance->SetMaxVersion(nMaxVersion);",
          "new_line_content": "            LogPrintf(\"Allowing wallet upgrade up to %i\\n\", nMaxVersion);",
          "content_same": false
        },
        {
          "line": 3684,
          "old_api": "IsHDEnabled",
          "new_api": "SetMaxVersion",
          "old_text": "walletInstance->IsHDEnabled()",
          "new_text": "walletInstance->SetMaxVersion(nMaxVersion)",
          "old_line_content": "        if (GetBoolArg(\"-usehd\", DEFAULT_USE_HD_WALLET) && !walletInstance->IsHDEnabled()) {",
          "new_line_content": "        walletInstance->SetMaxVersion(nMaxVersion);",
          "content_same": false
        },
        {
          "line": 3690,
          "old_api": "GenerateNewHDMasterKey",
          "new_api": "IsHDEnabled",
          "old_text": "walletInstance->GenerateNewHDMasterKey()",
          "new_text": "walletInstance->IsHDEnabled()",
          "old_line_content": "            CPubKey masterPubKey = walletInstance->GenerateNewHDMasterKey();",
          "new_line_content": "        if (GetBoolArg(\"-usehd\", DEFAULT_USE_HD_WALLET) && !walletInstance->IsHDEnabled()) {",
          "content_same": false
        },
        {
          "line": 3696,
          "old_api": "SetDefaultKey",
          "new_api": "GenerateNewHDMasterKey",
          "old_text": "walletInstance->SetDefaultKey(newDefaultKey)",
          "new_text": "walletInstance->GenerateNewHDMasterKey()",
          "old_line_content": "            walletInstance->SetDefaultKey(newDefaultKey);",
          "new_line_content": "            CPubKey masterPubKey = walletInstance->GenerateNewHDMasterKey();",
          "content_same": false
        },
        {
          "line": 3697,
          "old_api": "GetID",
          "new_api": "SetHDMasterKey",
          "old_text": "walletInstance->vchDefaultKey.GetID()",
          "new_text": "walletInstance->SetHDMasterKey(masterPubKey)",
          "old_line_content": "            if (!walletInstance->SetAddressBook(walletInstance->vchDefaultKey.GetID(), \"\", \"receive\")) {",
          "new_line_content": "            if (!walletInstance->SetHDMasterKey(masterPubKey))",
          "content_same": false
        },
        {
          "line": 3698,
          "old_api": "_",
          "new_api": "std::string(__func__)",
          "old_text": "_(\"Cannot write default address\")",
          "new_text": "std::string(__func__)",
          "old_line_content": "                InitError(_(\"Cannot write default address\") += \"\\n\");",
          "new_line_content": "                throw std::runtime_error(std::string(__func__) + \": Storing master key failed\");",
          "content_same": false
        },
        {
          "line": 3703,
          "old_api": "GetLocator",
          "new_api": "GetID",
          "old_text": "chainActive.GetLocator()",
          "new_text": "walletInstance->vchDefaultKey.GetID()",
          "old_line_content": "        walletInstance->SetBestChain(chainActive.GetLocator());",
          "new_line_content": "            if (!walletInstance->SetAddressBook(walletInstance->vchDefaultKey.GetID(), \"\", \"receive\")) {",
          "content_same": false
        },
        {
          "line": 3711,
          "old_api": "IsHDEnabled",
          "new_api": "IsArgSet",
          "old_text": "walletInstance->IsHDEnabled()",
          "new_text": "IsArgSet(\"-usehd\")",
          "old_line_content": "        if (!walletInstance->IsHDEnabled() && useHD) {",
          "new_line_content": "    else if (IsArgSet(\"-usehd\")) {",
          "content_same": false
        },
        {
          "line": 3712,
          "old_api": "_",
          "new_api": "GetBoolArg",
          "old_text": "_(\"Error loading %s: You can't enable HD on a already existing non-HD wallet\")",
          "new_text": "GetBoolArg(\"-usehd\", DEFAULT_USE_HD_WALLET)",
          "old_line_content": "            InitError(strprintf(_(\"Error loading %s: You can't enable HD on a already existing non-HD wallet\"), walletFile));",
          "new_line_content": "        bool useHD = GetBoolArg(\"-usehd\", DEFAULT_USE_HD_WALLET);",
          "content_same": false
        },
        {
          "line": 3717,
          "old_api": "GetTimeMillis",
          "new_api": "IsHDEnabled",
          "old_text": "GetTimeMillis()",
          "new_text": "walletInstance->IsHDEnabled()",
          "old_line_content": "    LogPrintf(\" wallet      %15dms\\n\", GetTimeMillis() - nStart);",
          "new_line_content": "        if (!walletInstance->IsHDEnabled() && useHD) {",
          "content_same": false
        },
        {
          "line": 3727,
          "old_api": "FindForkInGlobalIndex",
          "new_api": "Genesis",
          "old_text": "FindForkInGlobalIndex(chainActive, locator)",
          "new_text": "chainActive.Genesis()",
          "old_line_content": "            pindexRescan = FindForkInGlobalIndex(chainActive, locator);",
          "new_line_content": "    CBlockIndex *pindexRescan = chainActive.Genesis();",
          "content_same": false
        },
        {
          "line": 3747,
          "old_api": "Height",
          "new_api": "_",
          "old_text": "chainActive.Height()",
          "new_text": "_(\"Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\")",
          "old_line_content": "        LogPrintf(\"Rescanning last %i blocks (from block %i)...\\n\", chainActive.Height() - pindexRescan->nHeight, pindexRescan->nHeight);",
          "new_line_content": "                InitError(_(\"Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\"));",
          "content_same": false
        },
        {
          "line": 3752,
          "old_api": "CWalletDB::IncrementUpdateCounter()",
          "new_api": "_",
          "old_text": "CWalletDB::IncrementUpdateCounter()",
          "new_text": "_(\"Rescanning...\")",
          "old_line_content": "        CWalletDB::IncrementUpdateCounter();",
          "new_line_content": "        uiInterface.InitMessage(_(\"Rescanning...\"));",
          "content_same": false
        },
        {
          "line": 3755,
          "old_api": "GetArg",
          "new_api": "ScanForWalletTransactions",
          "old_text": "GetArg(\"-zapwallettxes\", \"1\")",
          "new_text": "walletInstance->ScanForWalletTransactions(pindexRescan, true)",
          "old_line_content": "        if (GetBoolArg(\"-zapwallettxes\", false) && GetArg(\"-zapwallettxes\", \"1\") != \"2\")",
          "new_line_content": "        walletInstance->ScanForWalletTransactions(pindexRescan, true);",
          "content_same": false
        },
        {
          "line": 3761,
          "old_api": "GetHash",
          "new_api": "GetArg",
          "old_text": "wtxOld.GetHash()",
          "new_text": "GetArg(\"-zapwallettxes\", \"1\")",
          "old_line_content": "                uint256 hash = wtxOld.GetHash();",
          "new_line_content": "        if (GetBoolArg(\"-zapwallettxes\", false) && GetArg(\"-zapwallettxes\", \"1\") != \"2\")",
          "content_same": false
        },
        {
          "line": 3785,
          "old_api": "size",
          "new_api": "GetBoolArg",
          "old_text": "walletInstance->mapAddressBook.size()",
          "new_text": "GetBoolArg(\"-walletbroadcast\", DEFAULT_WALLETBROADCAST)",
          "old_line_content": "        LogPrintf(\"mapAddressBook.size() = %u\\n\",  walletInstance->mapAddressBook.size());",
          "new_line_content": "    walletInstance->SetBroadcastTransactions(GetBoolArg(\"-walletbroadcast\", DEFAULT_WALLETBROADCAST));",
          "content_same": false
        },
        {
          "line": 3799,
          "old_api": "GetArg",
          "new_api": "GetBoolArg",
          "old_text": "GetArg(\"-wallet\", DEFAULT_WALLET_DAT)",
          "new_text": "GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)",
          "old_line_content": "    std::string walletFile = GetArg(\"-wallet\", DEFAULT_WALLET_DAT);",
          "new_line_content": "    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)) {",
          "content_same": false
        },
        {
          "line": 3801,
          "old_api": "find_first_of",
          "new_api": "LogPrintf",
          "old_text": "walletFile.find_first_of(\"/\\\\\")",
          "new_text": "LogPrintf(\"Wallet disabled!\\n\")",
          "old_line_content": "    if (walletFile.find_first_of(\"/\\\\\") != std::string::npos) {",
          "new_line_content": "        LogPrintf(\"Wallet disabled!\\n\");",
          "content_same": false
        },
        {
          "line": 3807,
          "old_api": "CreateWalletFromFile",
          "new_api": "find_first_of",
          "old_text": "CreateWalletFromFile(walletFile)",
          "new_text": "walletFile.find_first_of(\"/\\\\\")",
          "old_line_content": "    CWallet * const pwallet = CreateWalletFromFile(walletFile);",
          "new_line_content": "    if (walletFile.find_first_of(\"/\\\\\") != std::string::npos) {",
          "content_same": false
        },
        {
          "line": 3832,
          "old_api": "GetBoolArg",
          "new_api": "scheduleEvery",
          "old_text": "GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)",
          "new_text": "scheduler.scheduleEvery(MaybeCompactWalletDB, 500)",
          "old_line_content": "    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET))",
          "new_line_content": "        scheduler.scheduleEvery(MaybeCompactWalletDB, 500);",
          "content_same": false
        },
        {
          "line": 3841,
          "old_api": "LogPrintf",
          "new_api": "SoftSetBoolArg",
          "old_text": "LogPrintf(\"%s: parameter interaction: -salvagewallet=1 -> setting -rescan=1\\n\", __func__)",
          "new_text": "SoftSetBoolArg(\"-walletbroadcast\", false)",
          "old_line_content": "        LogPrintf(\"%s: parameter interaction: -salvagewallet=1 -> setting -rescan=1\\n\", __func__);",
          "new_line_content": "    if (GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY) && SoftSetBoolArg(\"-walletbroadcast\", false)) {",
          "content_same": false
        },
        {
          "line": 3851,
          "old_api": "GetBoolArg",
          "new_api": "SoftSetBoolArg",
          "old_text": "GetBoolArg(\"-rescan\", false)",
          "new_text": "SoftSetBoolArg(\"-rescan\", true)",
          "old_line_content": "    if (GetArg(\"-prune\", 0) && GetBoolArg(\"-rescan\", false))",
          "new_line_content": "    if (GetBoolArg(\"-zapwallettxes\", false) && SoftSetBoolArg(\"-rescan\", true)) {",
          "content_same": false
        },
        {
          "line": 3852,
          "old_api": "_",
          "new_api": "LogPrintf",
          "old_text": "_(\"Rescans are not possible in pruned mode. You will need to use -reindex which will download the whole blockchain again.\")",
          "new_text": "LogPrintf(\"%s: parameter interaction: -zapwallettxes=<mode> -> setting -rescan=1\\n\", __func__)",
          "old_line_content": "        return InitError(_(\"Rescans are not possible in pruned mode. You will need to use -reindex which will download the whole blockchain again.\"));",
          "new_line_content": "        LogPrintf(\"%s: parameter interaction: -zapwallettxes=<mode> -> setting -rescan=1\\n\", __func__);",
          "content_same": false
        },
        {
          "line": 3855,
          "old_api": "AmountHighWarn",
          "new_api": "GetBoolArg",
          "old_text": "AmountHighWarn(\"-minrelaytxfee\")",
          "new_text": "GetBoolArg(\"-sysperms\", false)",
          "old_line_content": "        InitWarning(AmountHighWarn(\"-minrelaytxfee\") + \" \" +",
          "new_line_content": "    if (GetBoolArg(\"-sysperms\", false))",
          "content_same": false
        },
        {
          "line": 3856,
          "old_api": "_",
          "new_api": "InitError",
          "old_text": "_(\"The wallet will avoid paying less than the minimum relay fee.\")",
          "new_text": "InitError(\"-sysperms is not allowed in combination with enabled wallet functionality\")",
          "old_line_content": "                    _(\"The wallet will avoid paying less than the minimum relay fee.\"));",
          "new_line_content": "        return InitError(\"-sysperms is not allowed in combination with enabled wallet functionality\");",
          "content_same": false
        },
        {
          "line": 3858,
          "old_api": "IsArgSet",
          "new_api": "_",
          "old_text": "IsArgSet(\"-mintxfee\")",
          "new_text": "_(\"Rescans are not possible in pruned mode. You will need to use -reindex which will download the whole blockchain again.\")",
          "old_line_content": "    if (IsArgSet(\"-mintxfee\"))",
          "new_line_content": "        return InitError(_(\"Rescans are not possible in pruned mode. You will need to use -reindex which will download the whole blockchain again.\"));",
          "content_same": false
        },
        {
          "line": 3861,
          "old_api": "GetArg",
          "new_api": "AmountHighWarn",
          "old_text": "GetArg(\"-mintxfee\", \"\")",
          "new_text": "AmountHighWarn(\"-minrelaytxfee\")",
          "old_line_content": "        if (!ParseMoney(GetArg(\"-mintxfee\", \"\"), n) || 0 == n)",
          "new_line_content": "        InitWarning(AmountHighWarn(\"-minrelaytxfee\") + \" \" +",
          "content_same": false
        },
        {
          "line": 3862,
          "old_api": "GetArg",
          "new_api": "_",
          "old_text": "GetArg(\"-mintxfee\", \"\")",
          "new_text": "_(\"The wallet will avoid paying less than the minimum relay fee.\")",
          "old_line_content": "            return InitError(AmountErrMsg(\"mintxfee\", GetArg(\"-mintxfee\", \"\")));",
          "new_line_content": "                    _(\"The wallet will avoid paying less than the minimum relay fee.\"));",
          "content_same": false
        },
        {
          "line": 3864,
          "old_api": "AmountHighWarn",
          "new_api": "IsArgSet",
          "old_text": "AmountHighWarn(\"-mintxfee\")",
          "new_text": "IsArgSet(\"-mintxfee\")",
          "old_line_content": "            InitWarning(AmountHighWarn(\"-mintxfee\") + \" \" +",
          "new_line_content": "    if (IsArgSet(\"-mintxfee\"))",
          "content_same": false
        },
        {
          "line": 3868,
          "old_api": "IsArgSet",
          "new_api": "GetArg",
          "old_text": "IsArgSet(\"-fallbackfee\")",
          "new_text": "GetArg(\"-mintxfee\", \"\")",
          "old_line_content": "    if (IsArgSet(\"-fallbackfee\"))",
          "new_line_content": "            return InitError(AmountErrMsg(\"mintxfee\", GetArg(\"-mintxfee\", \"\")));",
          "content_same": false
        },
        {
          "line": 3871,
          "old_api": "GetArg",
          "new_api": "_",
          "old_text": "GetArg(\"-fallbackfee\", \"\")",
          "new_text": "_(\"This is the minimum transaction fee you pay on every transaction.\")",
          "old_line_content": "        if (!ParseMoney(GetArg(\"-fallbackfee\", \"\"), nFeePerK))",
          "new_line_content": "                        _(\"This is the minimum transaction fee you pay on every transaction.\"));",
          "content_same": false
        },
        {
          "line": 3872,
          "old_api": "GetArg",
          "new_api": "CFeeRate",
          "old_text": "GetArg(\"-fallbackfee\", \"\")",
          "new_text": "CFeeRate(n)",
          "old_line_content": "            return InitError(strprintf(_(\"Invalid amount for -fallbackfee=<amount>: '%s'\"), GetArg(\"-fallbackfee\", \"\")));",
          "new_line_content": "        CWallet::minTxFee = CFeeRate(n);",
          "content_same": false
        },
        {
          "line": 3874,
          "old_api": "AmountHighWarn",
          "new_api": "IsArgSet",
          "old_text": "AmountHighWarn(\"-fallbackfee\")",
          "new_text": "IsArgSet(\"-fallbackfee\")",
          "old_line_content": "            InitWarning(AmountHighWarn(\"-fallbackfee\") + \" \" +",
          "new_line_content": "    if (IsArgSet(\"-fallbackfee\"))",
          "content_same": false
        },
        {
          "line": 3878,
          "old_api": "IsArgSet",
          "new_api": "GetArg",
          "old_text": "IsArgSet(\"-paytxfee\")",
          "new_text": "GetArg(\"-fallbackfee\", \"\")",
          "old_line_content": "    if (IsArgSet(\"-paytxfee\"))",
          "new_line_content": "            return InitError(strprintf(_(\"Invalid amount for -fallbackfee=<amount>: '%s'\"), GetArg(\"-fallbackfee\", \"\")));",
          "content_same": false
        },
        {
          "line": 3881,
          "old_api": "GetArg",
          "new_api": "_",
          "old_text": "GetArg(\"-paytxfee\", \"\")",
          "new_text": "_(\"This is the transaction fee you may pay when fee estimates are not available.\")",
          "old_line_content": "        if (!ParseMoney(GetArg(\"-paytxfee\", \"\"), nFeePerK))",
          "new_line_content": "                        _(\"This is the transaction fee you may pay when fee estimates are not available.\"));",
          "content_same": false
        },
        {
          "line": 3882,
          "old_api": "GetArg",
          "new_api": "CFeeRate",
          "old_text": "GetArg(\"-paytxfee\", \"\")",
          "new_text": "CFeeRate(nFeePerK)",
          "old_line_content": "            return InitError(AmountErrMsg(\"paytxfee\", GetArg(\"-paytxfee\", \"\")));",
          "new_line_content": "        CWallet::fallbackFee = CFeeRate(nFeePerK);",
          "content_same": false
        },
        {
          "line": 3884,
          "old_api": "AmountHighWarn",
          "new_api": "IsArgSet",
          "old_text": "AmountHighWarn(\"-paytxfee\")",
          "new_text": "IsArgSet(\"-paytxfee\")",
          "old_line_content": "            InitWarning(AmountHighWarn(\"-paytxfee\") + \" \" +",
          "new_line_content": "    if (IsArgSet(\"-paytxfee\"))",
          "content_same": false
        },
        {
          "line": 3887,
          "old_api": "CFeeRate",
          "new_api": "GetArg",
          "old_text": "CFeeRate(nFeePerK, 1000)",
          "new_text": "GetArg(\"-paytxfee\", \"\")",
          "old_line_content": "        payTxFee = CFeeRate(nFeePerK, 1000);",
          "new_line_content": "        if (!ParseMoney(GetArg(\"-paytxfee\", \"\"), nFeePerK))",
          "content_same": false
        },
        {
          "line": 3890,
          "old_api": "_",
          "new_api": "AmountHighWarn",
          "old_text": "_(\"Invalid amount for -paytxfee=<amount>: '%s' (must be at least %s)\")",
          "new_text": "AmountHighWarn(\"-paytxfee\")",
          "old_line_content": "            return InitError(strprintf(_(\"Invalid amount for -paytxfee=<amount>: '%s' (must be at least %s)\"),",
          "new_line_content": "            InitWarning(AmountHighWarn(\"-paytxfee\") + \" \" +",
          "content_same": false
        },
        {
          "line": 3891,
          "old_api": "ToString",
          "new_api": "_",
          "old_text": "::minRelayTxFee.ToString()",
          "new_text": "_(\"This is the transaction fee you will pay if you send a transaction.\")",
          "old_line_content": "                                       GetArg(\"-paytxfee\", \"\"), ::minRelayTxFee.ToString()));",
          "new_line_content": "                        _(\"This is the transaction fee you will pay if you send a transaction.\"));",
          "content_same": false
        },
        {
          "line": 3897,
          "old_api": "GetArg",
          "new_api": "ToString",
          "old_text": "GetArg(\"-maxtxfee\", \"\")",
          "new_text": "::minRelayTxFee.ToString()",
          "old_line_content": "        if (!ParseMoney(GetArg(\"-maxtxfee\", \"\"), nMaxFee))",
          "new_line_content": "                                       GetArg(\"-paytxfee\", \"\"), ::minRelayTxFee.ToString()));",
          "content_same": false
        },
        {
          "line": 3900,
          "old_api": "_",
          "new_api": "IsArgSet",
          "old_text": "_(\"-maxtxfee is set very high! Fees this large could be paid on a single transaction.\")",
          "new_text": "IsArgSet(\"-maxtxfee\")",
          "old_line_content": "            InitWarning(_(\"-maxtxfee is set very high! Fees this large could be paid on a single transaction.\"));",
          "new_line_content": "    if (IsArgSet(\"-maxtxfee\"))",
          "content_same": false
        },
        {
          "line": 3904,
          "old_api": "_",
          "new_api": "GetArg",
          "old_text": "_(\"Invalid amount for -maxtxfee=<amount>: '%s' (must be at least the minrelay fee of %s to prevent stuck transactions)\")",
          "new_text": "GetArg(\"-maxtxfee\", \"\")",
          "old_line_content": "            return InitError(strprintf(_(\"Invalid amount for -maxtxfee=<amount>: '%s' (must be at least the minrelay fee of %s to prevent stuck transactions)\"),",
          "new_line_content": "            return InitError(AmountErrMsg(\"maxtxfee\", GetArg(\"-maxtxfee\", \"\")));",
          "content_same": false
        },
        {
          "line": 3908,
          "old_api": "GetArg",
          "new_api": "CFeeRate",
          "old_text": "GetArg(\"-txconfirmtarget\", DEFAULT_TX_CONFIRM_TARGET)",
          "new_text": "CFeeRate(maxTxFee, 1000)",
          "old_line_content": "    nTxConfirmTarget = GetArg(\"-txconfirmtarget\", DEFAULT_TX_CONFIRM_TARGET);",
          "new_line_content": "        if (CFeeRate(maxTxFee, 1000) < ::minRelayTxFee)",
          "content_same": false
        },
        {
          "line": 3910,
          "old_api": "GetBoolArg",
          "new_api": "_",
          "old_text": "GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF)",
          "new_text": "_(\"Invalid amount for -maxtxfee=<amount>: '%s' (must be at least the minrelay fee of %s to prevent stuck transactions)\")",
          "old_line_content": "    fWalletRbf = GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);",
          "new_line_content": "            return InitError(strprintf(_(\"Invalid amount for -maxtxfee=<amount>: '%s' (must be at least the minrelay fee of %s to prevent stuck transactions)\"),",
          "content_same": false
        },
        {
          "line": 3928,
          "old_api": "erase",
          "new_api": "LOCK",
          "old_text": "bitdb.mapFileUseCount.erase(strWalletFile)",
          "new_text": "LOCK(bitdb.cs_db)",
          "old_line_content": "                bitdb.mapFileUseCount.erase(strWalletFile);",
          "new_line_content": "            LOCK(bitdb.cs_db);",
          "content_same": false
        },
        {
          "line": 3933,
          "old_api": "boost::filesystem::is_directory(pathDest)",
          "new_api": "CheckpointLSN",
          "old_text": "boost::filesystem::is_directory(pathDest)",
          "new_text": "bitdb.CheckpointLSN(strWalletFile)",
          "old_line_content": "                if (boost::filesystem::is_directory(pathDest))",
          "new_line_content": "                bitdb.CheckpointLSN(strWalletFile);",
          "content_same": false
        },
        {
          "line": 3937,
          "old_api": "boost::filesystem::copy_file(pathSrc, pathDest, boost::filesystem::copy_option::overwrite_if_exists)",
          "new_api": "GetDataDir",
          "old_text": "boost::filesystem::copy_file(pathSrc, pathDest, boost::filesystem::copy_option::overwrite_if_exists)",
          "new_text": "GetDataDir()",
          "old_line_content": "                    boost::filesystem::copy_file(pathSrc, pathDest, boost::filesystem::copy_option::overwrite_if_exists);",
          "new_line_content": "                boost::filesystem::path pathSrc = GetDataDir() / strWalletFile;",
          "content_same": false
        },
        {
          "line": 3987,
          "old_api": "find",
          "new_api": "hashUnset",
          "old_text": "mapBlockIndex.find(hashBlock)",
          "new_text": "hashUnset()",
          "old_line_content": "    BlockMap::iterator mi = mapBlockIndex.find(hashBlock);",
          "new_line_content": "    if (hashUnset())",
          "content_same": false
        },
        {
          "line": 4008,
          "old_api": "::AcceptToMemoryPool(mempool, state, tx, true, NULL, NULL, false, nAbsurdFee)",
          "new_api": "GetDepthInMainChain",
          "old_text": "::AcceptToMemoryPool(mempool, state, tx, true, NULL, NULL, false, nAbsurdFee)",
          "new_text": "GetDepthInMainChain()",
          "old_line_content": "    return ::AcceptToMemoryPool(mempool, state, tx, true, NULL, NULL, false, nAbsurdFee);",
          "new_line_content": "    return std::max(0, (COINBASE_MATURITY+1) - GetDepthInMainChain());",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 3596,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Upgrade wallet to latest format on startup\")",
          "old_line_content": "",
          "new_line_content": "    strUsage += HelpMessageOpt(\"-upgradewallet\", _(\"Upgrade wallet to latest format on startup\"));",
          "content_same": false
        },
        {
          "line": 3597,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"(default: %s)\")",
          "old_line_content": "    if (showDebug)",
          "new_line_content": "    strUsage += HelpMessageOpt(\"-wallet=<file>\", _(\"Specify wallet file (within data directory)\") + \" \" + strprintf(_(\"(default: %s)\"), DEFAULT_WALLET_DAT));",
          "content_same": false
        },
        {
          "line": 3598,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"(default: %u)\")",
          "old_line_content": "    {",
          "new_line_content": "    strUsage += HelpMessageOpt(\"-walletbroadcast\", _(\"Make the wallet broadcast transactions\") + \" \" + strprintf(_(\"(default: %u)\"), DEFAULT_WALLETBROADCAST));",
          "content_same": false
        },
        {
          "line": 3088,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "setKeyPool.begin()",
          "old_line_content": "",
          "new_line_content": "    int64_t nIndex = *(setKeyPool.begin());",
          "content_same": false
        },
        {
          "line": 3089,
          "old_api": null,
          "new_api": "ReadPool",
          "old_text": null,
          "new_text": "walletdb.ReadPool(nIndex, keypool)",
          "old_line_content": "std::map<CTxDestination, CAmount> CWallet::GetAddressBalances()",
          "new_line_content": "    if (!walletdb.ReadPool(nIndex, keypool))",
          "content_same": false
        },
        {
          "line": 3090,
          "old_api": null,
          "new_api": "std::string(__func__)",
          "old_text": null,
          "new_text": "std::string(__func__)",
          "old_line_content": "{",
          "new_line_content": "        throw std::runtime_error(std::string(__func__) + \": read oldest key in keypool failed\");",
          "content_same": false
        },
        {
          "line": 3091,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "keypool.vchPubKey.IsValid()",
          "old_line_content": "    std::map<CTxDestination, CAmount> balances;",
          "new_line_content": "    assert(keypool.vchPubKey.IsValid());",
          "content_same": false
        },
        {
          "line": 3600,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Delete all wallet transactions and only recover those parts of the blockchain through -rescan on startup\")",
          "old_line_content": "",
          "new_line_content": "    strUsage += HelpMessageOpt(\"-zapwallettxes=<mode>\", _(\"Delete all wallet transactions and only recover those parts of the blockchain through -rescan on startup\") +",
          "content_same": false
        },
        {
          "line": 3605,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Wallet debugging/testing options:\")",
          "old_line_content": "    }",
          "new_line_content": "        strUsage += HelpMessageGroup(_(\"Wallet debugging/testing options:\"));",
          "content_same": false
        },
        {
          "line": 3607,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"Flush wallet database activity from memory to disk log every <n> megabytes (default: %u)\", DEFAULT_WALLET_DBLOGSIZE)",
          "old_line_content": "    return strUsage;",
          "new_line_content": "        strUsage += HelpMessageOpt(\"-dblogsize=<n>\", strprintf(\"Flush wallet database activity from memory to disk log every <n> megabytes (default: %u)\", DEFAULT_WALLET_DBLOGSIZE));",
          "content_same": false
        },
        {
          "line": 3608,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"Run a thread to flush wallet periodically (default: %u)\", DEFAULT_FLUSHWALLET)",
          "old_line_content": "}",
          "new_line_content": "        strUsage += HelpMessageOpt(\"-flushwallet\", strprintf(\"Run a thread to flush wallet periodically (default: %u)\", DEFAULT_FLUSHWALLET));",
          "content_same": false
        },
        {
          "line": 3609,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"Sets the DB_PRIVATE flag in the wallet db environment (default: %u)\", DEFAULT_WALLET_PRIVDB)",
          "old_line_content": "",
          "new_line_content": "        strUsage += HelpMessageOpt(\"-privdb\", strprintf(\"Sets the DB_PRIVATE flag in the wallet db environment (default: %u)\", DEFAULT_WALLET_PRIVDB));",
          "content_same": false
        },
        {
          "line": 3610,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Wallet will not create transactions that violate mempool chain limits (default: %u)\")",
          "old_line_content": "CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)",
          "new_line_content": "        strUsage += HelpMessageOpt(\"-walletrejectlongchains\", strprintf(_(\"Wallet will not create transactions that violate mempool chain limits (default: %u)\"), DEFAULT_WALLET_REJECT_LONG_CHAINS));",
          "content_same": false
        },
        {
          "line": 3100,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_wallet)",
          "old_line_content": "                continue;",
          "new_line_content": "        LOCK(cs_wallet);",
          "content_same": false
        },
        {
          "line": 3101,
          "old_api": null,
          "new_api": "PAIRTYPE",
          "old_text": null,
          "new_text": "PAIRTYPE(uint256, CWalletTx)",
          "old_line_content": "",
          "new_line_content": "        BOOST_FOREACH(PAIRTYPE(uint256, CWalletTx) walletEntry, mapWallet)",
          "content_same": false
        },
        {
          "line": 3108,
          "old_api": null,
          "new_api": "GetBlocksToMaturity",
          "old_text": null,
          "new_text": "pcoin->GetBlocksToMaturity()",
          "old_line_content": "",
          "new_line_content": "            if (pcoin->IsCoinBase() && pcoin->GetBlocksToMaturity() > 0)",
          "content_same": false
        },
        {
          "line": 3622,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Zapping all transactions from wallet...\")",
          "old_line_content": "            return NULL;",
          "new_line_content": "        uiInterface.InitMessage(_(\"Zapping all transactions from wallet...\"));",
          "content_same": false
        },
        {
          "line": 3111,
          "old_api": null,
          "new_api": "GetDepthInMainChain",
          "old_text": null,
          "new_text": "pcoin->GetDepthInMainChain()",
          "old_line_content": "                CTxDestination addr;",
          "new_line_content": "            int nDepth = pcoin->GetDepthInMainChain();",
          "content_same": false
        },
        {
          "line": 3625,
          "old_api": null,
          "new_api": "ZapWalletTx",
          "old_text": null,
          "new_text": "tempWallet->ZapWalletTx(vWtx)",
          "old_line_content": "        delete tempWallet;",
          "new_line_content": "        DBErrors nZapWalletRet = tempWallet->ZapWalletTx(vWtx);",
          "content_same": false
        },
        {
          "line": 3115,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "pcoin->tx->vout.size()",
          "old_line_content": "                    continue;",
          "new_line_content": "            for (unsigned int i = 0; i < pcoin->tx->vout.size(); i++)",
          "content_same": false
        },
        {
          "line": 3627,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Error loading %s: Wallet corrupted\")",
          "old_line_content": "    }",
          "new_line_content": "            InitError(strprintf(_(\"Error loading %s: Wallet corrupted\"), walletFile));",
          "content_same": false
        },
        {
          "line": 3118,
          "old_api": null,
          "new_api": "IsMine",
          "old_text": null,
          "new_text": "IsMine(pcoin->tx->vout[i])",
          "old_line_content": "",
          "new_line_content": "                if (!IsMine(pcoin->tx->vout[i]))",
          "content_same": false
        },
        {
          "line": 3120,
          "old_api": null,
          "new_api": "ExtractDestination",
          "old_text": null,
          "new_text": "ExtractDestination(pcoin->tx->vout[i].scriptPubKey, addr)",
          "old_line_content": "                    balances[addr] = 0;",
          "new_line_content": "                if(!ExtractDestination(pcoin->tx->vout[i].scriptPubKey, addr))",
          "content_same": false
        },
        {
          "line": 3123,
          "old_api": null,
          "new_api": "IsSpent",
          "old_text": null,
          "new_text": "IsSpent(walletEntry.first, i)",
          "old_line_content": "        }",
          "new_line_content": "                CAmount n = IsSpent(walletEntry.first, i) ? 0 : pcoin->tx->vout[i].nValue;",
          "content_same": false
        },
        {
          "line": 3635,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Loading wallet...\")",
          "old_line_content": "    if (nLoadWalletRet != DB_LOAD_OK)",
          "new_line_content": "    uiInterface.InitMessage(_(\"Loading wallet...\"));",
          "content_same": false
        },
        {
          "line": 3125,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "balances.count(addr)",
          "old_line_content": "",
          "new_line_content": "                if (!balances.count(addr))",
          "content_same": false
        },
        {
          "line": 3637,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "        if (nLoadWalletRet == DB_CORRUPT) {",
          "new_line_content": "    int64_t nStart = GetTimeMillis();",
          "content_same": false
        },
        {
          "line": 3640,
          "old_api": null,
          "new_api": "LoadWallet",
          "old_text": null,
          "new_text": "walletInstance->LoadWallet(fFirstRun)",
          "old_line_content": "        }",
          "new_line_content": "    DBErrors nLoadWalletRet = walletInstance->LoadWallet(fFirstRun);",
          "content_same": false
        },
        {
          "line": 3644,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Error loading %s: Wallet corrupted\")",
          "old_line_content": "                                         \" or address book entries might be missing or incorrect.\"),",
          "new_line_content": "            InitError(strprintf(_(\"Error loading %s: Wallet corrupted\"), walletFile));",
          "content_same": false
        },
        {
          "line": 3137,
          "old_api": null,
          "new_api": "AssertLockHeld",
          "old_text": null,
          "new_text": "AssertLockHeld(cs_wallet)",
          "old_line_content": "        CWalletTx *pcoin = &walletEntry.second;",
          "new_line_content": "    AssertLockHeld(cs_wallet); // mapWallet",
          "content_same": false
        },
        {
          "line": 3649,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Error reading %s! All keys read correctly, but transaction data\"\n                                         \" or address book entries might be missing or incorrect.\")",
          "old_line_content": "            return NULL;",
          "new_line_content": "            InitWarning(strprintf(_(\"Error reading %s! All keys read correctly, but transaction data\"",
          "content_same": false
        },
        {
          "line": 3141,
          "old_api": null,
          "new_api": "PAIRTYPE",
          "old_text": null,
          "new_text": "PAIRTYPE(uint256, CWalletTx)",
          "old_line_content": "            bool any_mine = false;",
          "new_line_content": "    BOOST_FOREACH(PAIRTYPE(uint256, CWalletTx) walletEntry, mapWallet)",
          "content_same": false
        },
        {
          "line": 3654,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(PACKAGE_NAME)",
          "old_line_content": "            return NULL;",
          "new_line_content": "            InitError(strprintf(_(\"Error loading %s: Wallet requires newer version of %s\"), walletFile, _(PACKAGE_NAME)));",
          "content_same": false
        },
        {
          "line": 3145,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "pcoin->tx->vin.size()",
          "old_line_content": "                CTxDestination address;",
          "new_line_content": "        if (pcoin->tx->vin.size() > 0)",
          "content_same": false
        },
        {
          "line": 3659,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(PACKAGE_NAME)",
          "old_line_content": "        }",
          "new_line_content": "            InitError(strprintf(_(\"Wallet needed to be rewritten: restart %s to complete\"), _(PACKAGE_NAME)));",
          "content_same": false
        },
        {
          "line": 3663,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Error loading %s\")",
          "old_line_content": "    {",
          "new_line_content": "            InitError(strprintf(_(\"Error loading %s\"), walletFile));",
          "content_same": false
        },
        {
          "line": 3152,
          "old_api": null,
          "new_api": "IsMine",
          "old_text": null,
          "new_text": "IsMine(txin)",
          "old_line_content": "            }",
          "new_line_content": "                if(!IsMine(txin)) /* If this input isn't mine, ignore it */",
          "content_same": false
        },
        {
          "line": 3154,
          "old_api": null,
          "new_api": "ExtractDestination",
          "old_text": null,
          "new_text": "ExtractDestination(mapWallet[txin.prevout.hash].tx->vout[txin.prevout.n].scriptPubKey, address)",
          "old_line_content": "            // group change with input addresses",
          "new_line_content": "                if(!ExtractDestination(mapWallet[txin.prevout.hash].tx->vout[txin.prevout.n].scriptPubKey, address))",
          "content_same": false
        },
        {
          "line": 3156,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "grouping.insert(address)",
          "old_line_content": "            {",
          "new_line_content": "                grouping.insert(address);",
          "content_same": false
        },
        {
          "line": 3668,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-upgradewallet\", fFirstRun)",
          "old_line_content": "            nMaxVersion = CLIENT_VERSION;",
          "new_line_content": "    if (GetBoolArg(\"-upgradewallet\", fFirstRun))",
          "content_same": false
        },
        {
          "line": 3670,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-upgradewallet\", 0)",
          "old_line_content": "        }",
          "new_line_content": "        int nMaxVersion = GetArg(\"-upgradewallet\", 0);",
          "content_same": false
        },
        {
          "line": 3167,
          "old_api": null,
          "new_api": "ExtractDestination",
          "old_text": null,
          "new_text": "ExtractDestination(txout.scriptPubKey, txoutAddr)",
          "old_line_content": "            {",
          "new_line_content": "                       if(!ExtractDestination(txout.scriptPubKey, txoutAddr))",
          "content_same": false
        },
        {
          "line": 3679,
          "old_api": null,
          "new_api": "GetVersion",
          "old_text": null,
          "new_text": "walletInstance->GetVersion()",
          "old_line_content": "    }",
          "new_line_content": "        if (nMaxVersion < walletInstance->GetVersion())",
          "content_same": false
        },
        {
          "line": 3681,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Cannot downgrade wallet\")",
          "old_line_content": "    if (fFirstRun)",
          "new_line_content": "            InitError(_(\"Cannot downgrade wallet\"));",
          "content_same": false
        },
        {
          "line": 3172,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "grouping.size()",
          "old_line_content": "",
          "new_line_content": "            if (grouping.size() > 0)",
          "content_same": false
        },
        {
          "line": 3693,
          "old_api": null,
          "new_api": "SetMinVersion",
          "old_text": null,
          "new_text": "walletInstance->SetMinVersion(FEATURE_HD_SPLIT)",
          "old_line_content": "        }",
          "new_line_content": "            walletInstance->SetMinVersion(FEATURE_HD_SPLIT);",
          "content_same": false
        },
        {
          "line": 3184,
          "old_api": null,
          "new_api": "ExtractDestination",
          "old_text": null,
          "new_text": "ExtractDestination(pcoin->tx->vout[i].scriptPubKey, address)",
          "old_line_content": "    }",
          "new_line_content": "                if(!ExtractDestination(pcoin->tx->vout[i].scriptPubKey, address))",
          "content_same": false
        },
        {
          "line": 3186,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "grouping.insert(address)",
          "old_line_content": "    std::set< std::set<CTxDestination>* > uniqueGroupings; // a set of pointers to groups of addresses",
          "new_line_content": "                grouping.insert(address);",
          "content_same": false
        },
        {
          "line": 3187,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "groupings.insert(grouping)",
          "old_line_content": "    std::map< CTxDestination, std::set<CTxDestination>* > setmap;  // map addresses to the unique group containing it",
          "new_line_content": "                groupings.insert(grouping);",
          "content_same": false
        },
        {
          "line": 3188,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "grouping.clear()",
          "old_line_content": "    BOOST_FOREACH(std::set<CTxDestination> _grouping, groupings)",
          "new_line_content": "                grouping.clear();",
          "content_same": false
        },
        {
          "line": 3701,
          "old_api": null,
          "new_api": "GetKeyFromPool",
          "old_text": null,
          "new_text": "walletInstance->GetKeyFromPool(newDefaultKey, false)",
          "old_line_content": "        }",
          "new_line_content": "        if (walletInstance->GetKeyFromPool(newDefaultKey, false)) {",
          "content_same": false
        },
        {
          "line": 3702,
          "old_api": null,
          "new_api": "SetDefaultKey",
          "old_text": null,
          "new_text": "walletInstance->SetDefaultKey(newDefaultKey)",
          "old_line_content": "",
          "new_line_content": "            walletInstance->SetDefaultKey(newDefaultKey);",
          "content_same": false
        },
        {
          "line": 3704,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Cannot write default address\")",
          "old_line_content": "    }",
          "new_line_content": "                InitError(_(\"Cannot write default address\") += \"\\n\");",
          "content_same": false
        },
        {
          "line": 3709,
          "old_api": null,
          "new_api": "GetLocator",
          "old_text": null,
          "new_text": "chainActive.GetLocator()",
          "old_line_content": "            return NULL;",
          "new_line_content": "        walletInstance->SetBestChain(chainActive.GetLocator());",
          "content_same": false
        },
        {
          "line": 3200,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "setmap.end()",
          "old_line_content": "        {",
          "new_line_content": "            if ((it = setmap.find(address)) != setmap.end())",
          "content_same": false
        },
        {
          "line": 3713,
          "old_api": null,
          "new_api": "IsHDEnabled",
          "old_text": null,
          "new_text": "walletInstance->IsHDEnabled()",
          "old_line_content": "            return NULL;",
          "new_line_content": "        if (walletInstance->IsHDEnabled() && !useHD) {",
          "content_same": false
        },
        {
          "line": 3714,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Error loading %s: You can't disable HD on a already existing HD wallet\")",
          "old_line_content": "        }",
          "new_line_content": "            InitError(strprintf(_(\"Error loading %s: You can't disable HD on a already existing HD wallet\"), walletFile));",
          "content_same": false
        },
        {
          "line": 3718,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Error loading %s: You can't enable HD on a already existing non-HD wallet\")",
          "old_line_content": "",
          "new_line_content": "            InitError(strprintf(_(\"Error loading %s: You can't enable HD on a already existing non-HD wallet\"), walletFile));",
          "content_same": false
        },
        {
          "line": 3207,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "hit->end()",
          "old_line_content": "        // update setmap",
          "new_line_content": "            merged->insert(hit->begin(), hit->end());",
          "content_same": false
        },
        {
          "line": 3208,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "uniqueGroupings.erase(hit)",
          "old_line_content": "        BOOST_FOREACH(CTxDestination element, *merged)",
          "new_line_content": "            uniqueGroupings.erase(hit);",
          "content_same": false
        },
        {
          "line": 3211,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "uniqueGroupings.insert(merged)",
          "old_line_content": "",
          "new_line_content": "        uniqueGroupings.insert(merged);",
          "content_same": false
        },
        {
          "line": 3723,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "    {",
          "new_line_content": "    LogPrintf(\" wallet      %15dms\\n\", GetTimeMillis() - nStart);",
          "content_same": false
        },
        {
          "line": 3725,
          "old_api": null,
          "new_api": "RegisterValidationInterface",
          "old_text": null,
          "new_text": "RegisterValidationInterface(walletInstance)",
          "old_line_content": "        CBlockLocator locator;",
          "new_line_content": "    RegisterValidationInterface(walletInstance);",
          "content_same": false
        },
        {
          "line": 3728,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-rescan\", false)",
          "old_line_content": "    }",
          "new_line_content": "    if (!GetBoolArg(\"-rescan\", false))",
          "content_same": false
        },
        {
          "line": 3732,
          "old_api": null,
          "new_api": "ReadBestBlock",
          "old_text": null,
          "new_text": "walletdb.ReadBestBlock(locator)",
          "old_line_content": "        //this might happen if a user uses a old wallet within a pruned node",
          "new_line_content": "        if (walletdb.ReadBestBlock(locator))",
          "content_same": false
        },
        {
          "line": 3221,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "ret.insert(*uniqueGrouping)",
          "old_line_content": "",
          "new_line_content": "        ret.insert(*uniqueGrouping);",
          "content_same": false
        },
        {
          "line": 3733,
          "old_api": null,
          "new_api": "FindForkInGlobalIndex",
          "old_text": null,
          "new_text": "FindForkInGlobalIndex(chainActive, locator)",
          "old_line_content": "        // or if he ran -disablewallet for a longer time, then decided to re-enable",
          "new_line_content": "            pindexRescan = FindForkInGlobalIndex(chainActive, locator);",
          "content_same": false
        },
        {
          "line": 3735,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()",
          "old_line_content": "        {",
          "new_line_content": "    if (chainActive.Tip() && chainActive.Tip() != pindexRescan)",
          "content_same": false
        },
        {
          "line": 3742,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()",
          "old_line_content": "                return NULL;",
          "new_line_content": "            CBlockIndex *block = chainActive.Tip();",
          "content_same": false
        },
        {
          "line": 3231,
          "old_api": null,
          "new_api": "GetAccountBalance",
          "old_text": null,
          "new_text": "GetAccountBalance(walletdb, strAccount, nMinDepth, filter)",
          "old_line_content": "",
          "new_line_content": "    return GetAccountBalance(walletdb, strAccount, nMinDepth, filter);",
          "content_same": false
        },
        {
          "line": 3239,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapWallet.end()",
          "old_line_content": "        CAmount nReceived, nSent, nFee;",
          "new_line_content": "    for (std::map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)",
          "content_same": false
        },
        {
          "line": 3753,
          "old_api": null,
          "new_api": "Height",
          "old_text": null,
          "new_text": "chainActive.Height()",
          "old_line_content": "",
          "new_line_content": "        LogPrintf(\"Rescanning last %i blocks (from block %i)...\\n\", chainActive.Height() - pindexRescan->nHeight, pindexRescan->nHeight);",
          "content_same": false
        },
        {
          "line": 3754,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "        // Restore wallet transaction metadata after -zapwallettxes=1",
          "new_line_content": "        nStart = GetTimeMillis();",
          "content_same": false
        },
        {
          "line": 3756,
          "old_api": null,
          "new_api": "GetTimeMillis",
          "old_text": null,
          "new_text": "GetTimeMillis()",
          "old_line_content": "        {",
          "new_line_content": "        LogPrintf(\" rescan      %15dms\\n\", GetTimeMillis() - nStart);",
          "content_same": false
        },
        {
          "line": 3757,
          "old_api": null,
          "new_api": "GetLocator",
          "old_text": null,
          "new_text": "chainActive.GetLocator()",
          "old_line_content": "            CWalletDB walletdb(walletFile);",
          "new_line_content": "        walletInstance->SetBestChain(chainActive.GetLocator());",
          "content_same": false
        },
        {
          "line": 3246,
          "old_api": null,
          "new_api": "GetAccountAmounts",
          "old_text": null,
          "new_text": "wtx.GetAccountAmounts(strAccount, nReceived, nSent, nFee, filter)",
          "old_line_content": "",
          "new_line_content": "        wtx.GetAccountAmounts(strAccount, nReceived, nSent, nFee, filter);",
          "content_same": false
        },
        {
          "line": 3758,
          "old_api": null,
          "new_api": "CWalletDB::IncrementUpdateCounter()",
          "old_text": null,
          "new_text": "CWalletDB::IncrementUpdateCounter()",
          "old_line_content": "",
          "new_line_content": "        CWalletDB::IncrementUpdateCounter();",
          "content_same": false
        },
        {
          "line": 3254,
          "old_api": null,
          "new_api": "GetAccountCreditDebit",
          "old_text": null,
          "new_text": "walletdb.GetAccountCreditDebit(strAccount)",
          "old_line_content": "{",
          "new_line_content": "    nBalance += walletdb.GetAccountCreditDebit(strAccount);",
          "content_same": false
        },
        {
          "line": 3767,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "wtxOld.GetHash()",
          "old_line_content": "                    copyTo->mapValue = copyFrom->mapValue;",
          "new_line_content": "                uint256 hash = wtxOld.GetHash();",
          "content_same": false
        },
        {
          "line": 3768,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "walletInstance->mapWallet.find(hash)",
          "old_line_content": "                    copyTo->vOrderForm = copyFrom->vOrderForm;",
          "new_line_content": "                std::map<uint256, CWalletTx>::iterator mi = walletInstance->mapWallet.find(hash);",
          "content_same": false
        },
        {
          "line": 3769,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "walletInstance->mapWallet.end()",
          "old_line_content": "                    copyTo->nTimeReceived = copyFrom->nTimeReceived;",
          "new_line_content": "                if (mi != walletInstance->mapWallet.end())",
          "content_same": false
        },
        {
          "line": 3261,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_wallet)",
          "old_line_content": "        if (strName == strAccount)",
          "new_line_content": "    LOCK(cs_wallet);",
          "content_same": false
        },
        {
          "line": 3268,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "result.insert(address)",
          "old_line_content": "{",
          "new_line_content": "            result.insert(address);",
          "content_same": false
        },
        {
          "line": 3780,
          "old_api": null,
          "new_api": "WriteTx",
          "old_text": null,
          "new_text": "walletdb.WriteTx(*copyTo)",
          "old_line_content": "",
          "new_line_content": "                    walletdb.WriteTx(*copyTo);",
          "content_same": false
        },
        {
          "line": 3788,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(walletInstance->cs_wallet)",
          "old_line_content": "    return walletInstance;",
          "new_line_content": "        LOCK(walletInstance->cs_wallet);",
          "content_same": false
        },
        {
          "line": 3789,
          "old_api": null,
          "new_api": "GetKeyPoolSize",
          "old_text": null,
          "new_text": "walletInstance->GetKeyPoolSize()",
          "old_line_content": "}",
          "new_line_content": "        LogPrintf(\"setKeyPool.size() = %u\\n\",      walletInstance->GetKeyPoolSize());",
          "content_same": false
        },
        {
          "line": 3278,
          "old_api": null,
          "new_api": "ReserveKeyFromKeyPool",
          "old_text": null,
          "new_text": "pwallet->ReserveKeyFromKeyPool(nIndex, keypool, internal)",
          "old_line_content": "    }",
          "new_line_content": "        pwallet->ReserveKeyFromKeyPool(nIndex, keypool, internal);",
          "content_same": false
        },
        {
          "line": 3790,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "walletInstance->mapWallet.size()",
          "old_line_content": "",
          "new_line_content": "        LogPrintf(\"mapWallet.size() = %u\\n\",       walletInstance->mapWallet.size());",
          "content_same": false
        },
        {
          "line": 3791,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "walletInstance->mapAddressBook.size()",
          "old_line_content": "bool CWallet::InitLoadWallet()",
          "new_line_content": "        LogPrintf(\"mapAddressBook.size() = %u\\n\",  walletInstance->mapAddressBook.size());",
          "content_same": false
        },
        {
          "line": 3285,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "vchPubKey.IsValid()",
          "old_line_content": "{",
          "new_line_content": "    assert(vchPubKey.IsValid());",
          "content_same": false
        },
        {
          "line": 3293,
          "old_api": null,
          "new_api": "KeepKey",
          "old_text": null,
          "new_text": "pwallet->KeepKey(nIndex)",
          "old_line_content": "{",
          "new_line_content": "        pwallet->KeepKey(nIndex);",
          "content_same": false
        },
        {
          "line": 3805,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-wallet\", DEFAULT_WALLET_DAT)",
          "old_line_content": "    }",
          "new_line_content": "    std::string walletFile = GetArg(\"-wallet\", DEFAULT_WALLET_DAT);",
          "content_same": false
        },
        {
          "line": 3808,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"-wallet parameter must only specify a filename (not a path)\")",
          "old_line_content": "    if (!pwallet) {",
          "new_line_content": "        return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));",
          "content_same": false
        },
        {
          "line": 3809,
          "old_api": null,
          "new_api": "SanitizeString",
          "old_text": null,
          "new_text": "SanitizeString(walletFile, SAFE_CHARS_FILENAME)",
          "old_line_content": "        return false;",
          "new_line_content": "    } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {",
          "content_same": false
        },
        {
          "line": 3810,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Invalid characters in -wallet filename\")",
          "old_line_content": "    }",
          "new_line_content": "        return InitError(_(\"Invalid characters in -wallet filename\"));",
          "content_same": false
        },
        {
          "line": 3301,
          "old_api": null,
          "new_api": "ReturnKey",
          "old_text": null,
          "new_text": "pwallet->ReturnKey(nIndex)",
          "old_line_content": "{",
          "new_line_content": "        pwallet->ReturnKey(nIndex);",
          "content_same": false
        },
        {
          "line": 3813,
          "old_api": null,
          "new_api": "CreateWalletFromFile",
          "old_text": null,
          "new_text": "CreateWalletFromFile(walletFile)",
          "old_line_content": "    return true;",
          "new_line_content": "    CWallet * const pwallet = CreateWalletFromFile(walletFile);",
          "content_same": false
        },
        {
          "line": 3303,
          "old_api": null,
          "new_api": "CPubKey",
          "old_text": null,
          "new_text": "CPubKey()",
          "old_line_content": "",
          "new_line_content": "    vchPubKey = CPubKey();",
          "content_same": false
        },
        {
          "line": 3308,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "setAddress.clear()",
          "old_line_content": "    {",
          "new_line_content": "    setAddress.clear();",
          "content_same": false
        },
        {
          "line": 3828,
          "old_api": null,
          "new_api": "ReacceptWalletTransactions",
          "old_text": null,
          "new_text": "ReacceptWalletTransactions()",
          "old_line_content": "}",
          "new_line_content": "    ReacceptWalletTransactions();",
          "content_same": false
        },
        {
          "line": 3317,
          "old_api": null,
          "new_api": "std::string(__func__)",
          "old_text": null,
          "new_text": "std::string(__func__)",
          "old_line_content": "    }",
          "new_line_content": "            throw std::runtime_error(std::string(__func__) + \": read failed\");",
          "content_same": false
        },
        {
          "line": 3318,
          "old_api": null,
          "new_api": "IsValid",
          "old_text": null,
          "new_text": "keypool.vchPubKey.IsValid()",
          "old_line_content": "}",
          "new_line_content": "        assert(keypool.vchPubKey.IsValid());",
          "content_same": false
        },
        {
          "line": 3319,
          "old_api": null,
          "new_api": "GetID",
          "old_text": null,
          "new_text": "keypool.vchPubKey.GetID()",
          "old_line_content": "",
          "new_line_content": "        CKeyID keyID = keypool.vchPubKey.GetID();",
          "content_same": false
        },
        {
          "line": 3320,
          "old_api": null,
          "new_api": "HaveKey",
          "old_text": null,
          "new_text": "HaveKey(keyID)",
          "old_line_content": "void CWallet::UpdatedTransaction(const uint256 &hashTx)",
          "new_line_content": "        if (!HaveKey(keyID))",
          "content_same": false
        },
        {
          "line": 3321,
          "old_api": null,
          "new_api": "std::string(__func__)",
          "old_text": null,
          "new_text": "std::string(__func__)",
          "old_line_content": "{",
          "new_line_content": "            throw std::runtime_error(std::string(__func__) + \": unknown key in key pool\");",
          "content_same": false
        },
        {
          "line": 3322,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "setAddress.insert(keyID)",
          "old_line_content": "    {",
          "new_line_content": "        setAddress.insert(keyID);",
          "content_same": false
        },
        {
          "line": 3831,
          "old_api": null,
          "new_api": "exchange",
          "old_text": null,
          "new_text": "CWallet::fFlushScheduled.exchange(true)",
          "old_line_content": "{",
          "new_line_content": "    if (!CWallet::fFlushScheduled.exchange(true)) {",
          "content_same": false
        },
        {
          "line": 3838,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)",
          "old_line_content": "",
          "new_line_content": "    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET))",
          "content_same": false
        },
        {
          "line": 3329,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_wallet)",
          "old_line_content": "}",
          "new_line_content": "        LOCK(cs_wallet);",
          "content_same": false
        },
        {
          "line": 3842,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=0\\n\", __func__)",
          "old_line_content": "    }",
          "new_line_content": "        LogPrintf(\"%s: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=0\\n\", __func__);",
          "content_same": false
        },
        {
          "line": 3331,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapWallet.find(hashTx)",
          "old_line_content": "void CWallet::GetScriptForMining(boost::shared_ptr<CReserveScript> &script)",
          "new_line_content": "        std::map<uint256, CWalletTx>::const_iterator mi = mapWallet.find(hashTx);",
          "content_same": false
        },
        {
          "line": 3332,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapWallet.end()",
          "old_line_content": "{",
          "new_line_content": "        if (mi != mapWallet.end())",
          "content_same": false
        },
        {
          "line": 3333,
          "old_api": null,
          "new_api": "NotifyTransactionChanged",
          "old_text": null,
          "new_text": "NotifyTransactionChanged(this, hashTx, CT_UPDATED)",
          "old_line_content": "    boost::shared_ptr<CReserveKey> rKey(new CReserveKey(this));",
          "new_line_content": "            NotifyTransactionChanged(this, hashTx, CT_UPDATED);",
          "content_same": false
        },
        {
          "line": 3847,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s: parameter interaction: -salvagewallet=1 -> setting -rescan=1\\n\", __func__)",
          "old_line_content": "    }",
          "new_line_content": "        LogPrintf(\"%s: parameter interaction: -salvagewallet=1 -> setting -rescan=1\\n\", __func__);",
          "content_same": false
        },
        {
          "line": 3341,
          "old_api": null,
          "new_api": "GetReservedKey",
          "old_text": null,
          "new_text": "rKey->GetReservedKey(pubkey)",
          "old_line_content": "",
          "new_line_content": "    if (!rKey->GetReservedKey(pubkey))",
          "content_same": false
        },
        {
          "line": 3857,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-rescan\", false)",
          "old_line_content": "",
          "new_line_content": "    if (GetArg(\"-prune\", 0) && GetBoolArg(\"-rescan\", false))",
          "content_same": false
        },
        {
          "line": 3860,
          "old_api": null,
          "new_api": "GetFeePerK",
          "old_text": null,
          "new_text": "::minRelayTxFee.GetFeePerK()",
          "old_line_content": "        CAmount n = 0;",
          "new_line_content": "    if (::minRelayTxFee.GetFeePerK() > HIGH_TX_FEE_PER_KB)",
          "content_same": false
        },
        {
          "line": 3867,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-mintxfee\", \"\")",
          "old_line_content": "    }",
          "new_line_content": "        if (!ParseMoney(GetArg(\"-mintxfee\", \"\"), n) || 0 == n)",
          "content_same": false
        },
        {
          "line": 3870,
          "old_api": null,
          "new_api": "AmountHighWarn",
          "old_text": null,
          "new_text": "AmountHighWarn(\"-mintxfee\")",
          "old_line_content": "        CAmount nFeePerK = 0;",
          "new_line_content": "            InitWarning(AmountHighWarn(\"-mintxfee\") + \" \" +",
          "content_same": false
        },
        {
          "line": 3363,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "setLockedCoins.clear()",
          "old_line_content": "    COutPoint outpt(hash, n);",
          "new_line_content": "    setLockedCoins.clear();",
          "content_same": false
        },
        {
          "line": 3877,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-fallbackfee\", \"\")",
          "old_line_content": "    }",
          "new_line_content": "        if (!ParseMoney(GetArg(\"-fallbackfee\", \"\"), nFeePerK))",
          "content_same": false
        },
        {
          "line": 3368,
          "old_api": null,
          "new_api": "AssertLockHeld",
          "old_text": null,
          "new_text": "AssertLockHeld(cs_wallet)",
          "old_line_content": "void CWallet::ListLockedCoins(std::vector<COutPoint>& vOutpts)",
          "new_line_content": "    AssertLockHeld(cs_wallet); // setLockedCoins",
          "content_same": false
        },
        {
          "line": 3880,
          "old_api": null,
          "new_api": "AmountHighWarn",
          "old_text": null,
          "new_text": "AmountHighWarn(\"-fallbackfee\")",
          "old_line_content": "        CAmount nFeePerK = 0;",
          "new_line_content": "            InitWarning(AmountHighWarn(\"-fallbackfee\") + \" \" +",
          "content_same": false
        },
        {
          "line": 3376,
          "old_api": null,
          "new_api": "AssertLockHeld",
          "old_text": null,
          "new_text": "AssertLockHeld(cs_wallet)",
          "old_line_content": "}",
          "new_line_content": "    AssertLockHeld(cs_wallet); // setLockedCoins",
          "content_same": false
        },
        {
          "line": 3377,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "setLockedCoins.begin()",
          "old_line_content": "",
          "new_line_content": "    for (std::set<COutPoint>::iterator it = setLockedCoins.begin();",
          "content_same": false
        },
        {
          "line": 3378,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "setLockedCoins.end()",
          "old_line_content": "/** @} */ // end of Actions",
          "new_line_content": "         it != setLockedCoins.end(); it++) {",
          "content_same": false
        },
        {
          "line": 3888,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-paytxfee\", \"\")",
          "old_line_content": "        if (payTxFee < ::minRelayTxFee)",
          "new_line_content": "            return InitError(AmountErrMsg(\"paytxfee\", GetArg(\"-paytxfee\", \"\")));",
          "content_same": false
        },
        {
          "line": 3380,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vOutpts.push_back(outpt)",
          "old_line_content": "class CAffectedKeysVisitor : public boost::static_visitor<void> {",
          "new_line_content": "        vOutpts.push_back(outpt);",
          "content_same": false
        },
        {
          "line": 3893,
          "old_api": null,
          "new_api": "CFeeRate",
          "old_text": null,
          "new_text": "CFeeRate(nFeePerK, 1000)",
          "old_line_content": "    }",
          "new_line_content": "        payTxFee = CFeeRate(nFeePerK, 1000);",
          "content_same": false
        },
        {
          "line": 3896,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"Invalid amount for -paytxfee=<amount>: '%s' (must be at least %s)\")",
          "old_line_content": "        CAmount nMaxFee = 0;",
          "new_line_content": "            return InitError(strprintf(_(\"Invalid amount for -paytxfee=<amount>: '%s' (must be at least %s)\"),",
          "content_same": false
        },
        {
          "line": 3903,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-maxtxfee\", \"\")",
          "old_line_content": "        {",
          "new_line_content": "        if (!ParseMoney(GetArg(\"-maxtxfee\", \"\"), nMaxFee))",
          "content_same": false
        },
        {
          "line": 3906,
          "old_api": null,
          "new_api": "_",
          "old_text": null,
          "new_text": "_(\"-maxtxfee is set very high! Fees this large could be paid on a single transaction.\")",
          "old_line_content": "        }",
          "new_line_content": "            InitWarning(_(\"-maxtxfee is set very high! Fees this large could be paid on a single transaction.\"));",
          "content_same": false
        },
        {
          "line": 3398,
          "old_api": null,
          "new_api": "ExtractDestinations",
          "old_text": null,
          "new_text": "ExtractDestinations(script, type, vDest, nRequired)",
          "old_line_content": "    void operator()(const CKeyID &keyId) {",
          "new_line_content": "        if (ExtractDestinations(script, type, vDest, nRequired)) {",
          "content_same": false
        },
        {
          "line": 3911,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "::minRelayTxFee.ToString()",
          "old_line_content": "",
          "new_line_content": "                                       GetArg(\"-maxtxfee\", \"\"), ::minRelayTxFee.ToString()));",
          "content_same": false
        },
        {
          "line": 3914,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-txconfirmtarget\", DEFAULT_TX_CONFIRM_TARGET)",
          "old_line_content": "",
          "new_line_content": "    nTxConfirmTarget = GetArg(\"-txconfirmtarget\", DEFAULT_TX_CONFIRM_TARGET);",
          "content_same": false
        },
        {
          "line": 3915,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE)",
          "old_line_content": "bool CWallet::BackupWallet(const std::string& strDest)",
          "new_line_content": "    bSpendZeroConfChange = GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);",
          "content_same": false
        },
        {
          "line": 3916,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF)",
          "old_line_content": "{",
          "new_line_content": "    fWalletRbf = GetBoolArg(\"-walletrbf\", DEFAULT_WALLET_RBF);",
          "content_same": false
        },
        {
          "line": 3411,
          "old_api": null,
          "new_api": "GetCScript",
          "old_text": null,
          "new_text": "keystore.GetCScript(scriptId, script)",
          "old_line_content": "",
          "new_line_content": "        if (keystore.GetCScript(scriptId, script))",
          "content_same": false
        },
        {
          "line": 3412,
          "old_api": null,
          "new_api": "Process",
          "old_text": null,
          "new_text": "Process(script)",
          "old_line_content": "void CWallet::GetKeyBirthTimes(std::map<CTxDestination, int64_t> &mapKeyBirth) const {",
          "new_line_content": "            Process(script);",
          "content_same": false
        },
        {
          "line": 3929,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "bitdb.mapFileUseCount.count(strWalletFile)",
          "old_line_content": "",
          "new_line_content": "            if (!bitdb.mapFileUseCount.count(strWalletFile) || bitdb.mapFileUseCount[strWalletFile] == 0)",
          "content_same": false
        },
        {
          "line": 3419,
          "old_api": null,
          "new_api": "AssertLockHeld",
          "old_text": null,
          "new_text": "AssertLockHeld(cs_wallet)",
          "old_line_content": "            mapKeyBirth[entry.first] = entry.second.nCreateTime;",
          "new_line_content": "    AssertLockHeld(cs_wallet); // mapKeyMetadata",
          "content_same": false
        },
        {
          "line": 3420,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "mapKeyBirth.clear()",
          "old_line_content": "        }",
          "new_line_content": "    mapKeyBirth.clear();",
          "content_same": false
        },
        {
          "line": 3932,
          "old_api": null,
          "new_api": "CloseDb",
          "old_text": null,
          "new_text": "bitdb.CloseDb(strWalletFile)",
          "old_line_content": "                boost::filesystem::path pathDest(strDest);",
          "new_line_content": "                bitdb.CloseDb(strWalletFile);",
          "content_same": false
        },
        {
          "line": 3934,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "bitdb.mapFileUseCount.erase(strWalletFile)",
          "old_line_content": "                    pathDest /= strWalletFile;",
          "new_line_content": "                bitdb.mapFileUseCount.erase(strWalletFile);",
          "content_same": false
        },
        {
          "line": 3939,
          "old_api": null,
          "new_api": "boost::filesystem::is_directory(pathDest)",
          "old_text": null,
          "new_text": "boost::filesystem::is_directory(pathDest)",
          "old_line_content": "                    return true;",
          "new_line_content": "                if (boost::filesystem::is_directory(pathDest))",
          "content_same": false
        },
        {
          "line": 3430,
          "old_api": null,
          "new_api": "Height",
          "old_text": null,
          "new_text": "chainActive.Height()",
          "old_line_content": "            mapKeyFirstBlock[keyid] = pindexMax;",
          "new_line_content": "    CBlockIndex *pindexMax = chainActive[std::max(0, chainActive.Height() - 144)]; // the tip can be reorganized; use a 144-block safety margin",
          "content_same": false
        },
        {
          "line": 3943,
          "old_api": null,
          "new_api": "boost::filesystem::copy_file(pathSrc, pathDest, boost::filesystem::copy_option::overwrite_if_exists)",
          "old_text": null,
          "new_text": "boost::filesystem::copy_file(pathSrc, pathDest, boost::filesystem::copy_option::overwrite_if_exists)",
          "old_line_content": "                }",
          "new_line_content": "                    boost::filesystem::copy_file(pathSrc, pathDest, boost::filesystem::copy_option::overwrite_if_exists);",
          "content_same": false
        },
        {
          "line": 3944,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "pathDest.string()",
          "old_line_content": "            }",
          "new_line_content": "                    LogPrintf(\"copied %s to %s\\n\", strWalletFile, pathDest.string());",
          "content_same": false
        },
        {
          "line": 3433,
          "old_api": null,
          "new_api": "GetKeys",
          "old_text": null,
          "new_text": "GetKeys(setKeys)",
          "old_line_content": "",
          "new_line_content": "    GetKeys(setKeys);",
          "content_same": false
        },
        {
          "line": 3947,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "    }",
          "new_line_content": "                    LogPrintf(\"error copying %s to %s - %s\\n\", strWalletFile, pathDest.string(), e.what());",
          "content_same": false
        },
        {
          "line": 3438,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "setKeys.clear()",
          "old_line_content": "    // find first block that affects those keys, if there are any left",
          "new_line_content": "    setKeys.clear();",
          "content_same": false
        },
        {
          "line": 3952,
          "old_api": null,
          "new_api": "MilliSleep",
          "old_text": null,
          "new_text": "MilliSleep(100)",
          "old_line_content": "{",
          "new_line_content": "        MilliSleep(100);",
          "content_same": false
        },
        {
          "line": 3441,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "mapKeyFirstBlock.empty()",
          "old_line_content": "        // iterate over all wallet transactions...",
          "new_line_content": "    if (mapKeyFirstBlock.empty())",
          "content_same": false
        },
        {
          "line": 3446,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapWallet.end()",
          "old_line_content": "            int nHeight = blit->second->nHeight;",
          "new_line_content": "    for (std::map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); it++) {",
          "content_same": false
        },
        {
          "line": 3450,
          "old_api": null,
          "new_api": "Contains",
          "old_text": null,
          "new_text": "chainActive.Contains(blit->second)",
          "old_line_content": "                BOOST_FOREACH(const CKeyID &keyid, vAffected) {",
          "new_line_content": "        if (blit != mapBlockIndex.end() && chainActive.Contains(blit->second)) {",
          "content_same": false
        },
        {
          "line": 3965,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "{",
          "new_line_content": "    nTime = GetTime();",
          "content_same": false
        },
        {
          "line": 3455,
          "old_api": null,
          "new_api": "Process",
          "old_text": null,
          "new_text": "CAffectedKeysVisitor(*this, vAffected).Process(txout.scriptPubKey)",
          "old_line_content": "                }",
          "new_line_content": "                CAffectedKeysVisitor(*this, vAffected).Process(txout.scriptPubKey);",
          "content_same": false
        },
        {
          "line": 3458,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapKeyFirstBlock.find(keyid)",
          "old_line_content": "        }",
          "new_line_content": "                    std::map<CKeyID, CBlockIndex*>::iterator rit = mapKeyFirstBlock.find(keyid);",
          "content_same": false
        },
        {
          "line": 3459,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapKeyFirstBlock.end()",
          "old_line_content": "    }",
          "new_line_content": "                    if (rit != mapKeyFirstBlock.end() && nHeight < rit->second->nHeight)",
          "content_same": false
        },
        {
          "line": 3972,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "    // Update the tx's hashBlock",
          "new_line_content": "    nTimeCreated = (nExpires ? GetTime() : 0);",
          "content_same": false
        },
        {
          "line": 3979,
          "old_api": null,
          "new_api": "GetBlockHash",
          "old_text": null,
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "int CMerkleTx::GetDepthInMainChain(const CBlockIndex* &pindexRet) const",
          "new_line_content": "    hashBlock = pindex->GetBlockHash();",
          "content_same": false
        },
        {
          "line": 3468,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapKeyFirstBlock.end()",
          "old_line_content": " *",
          "new_line_content": "    for (std::map<CKeyID, CBlockIndex*>::const_iterator it = mapKeyFirstBlock.begin(); it != mapKeyFirstBlock.end(); it++)",
          "content_same": false
        },
        {
          "line": 3469,
          "old_api": null,
          "new_api": "GetBlockTime",
          "old_text": null,
          "new_text": "it->second->GetBlockTime()",
          "old_line_content": " * Logic:",
          "new_line_content": "        mapKeyBirth[it->first] = it->second->GetBlockTime() - TIMESTAMP_WINDOW; // block times can be 2h off",
          "content_same": false
        },
        {
          "line": 3990,
          "old_api": null,
          "new_api": "AssertLockHeld",
          "old_text": null,
          "new_text": "AssertLockHeld(cs_main)",
          "old_line_content": "    CBlockIndex* pindex = (*mi).second;",
          "new_line_content": "    AssertLockHeld(cs_main);",
          "content_same": false
        },
        {
          "line": 3993,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapBlockIndex.find(hashBlock)",
          "old_line_content": "",
          "new_line_content": "    BlockMap::iterator mi = mapBlockIndex.find(hashBlock);",
          "content_same": false
        },
        {
          "line": 3994,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapBlockIndex.end()",
          "old_line_content": "    pindexRet = pindex;",
          "new_line_content": "    if (mi == mapBlockIndex.end())",
          "content_same": false
        },
        {
          "line": 3997,
          "old_api": null,
          "new_api": "Contains",
          "old_text": null,
          "new_text": "chainActive.Contains(pindex)",
          "old_line_content": "",
          "new_line_content": "    if (!pindex || !chainActive.Contains(pindex))",
          "content_same": false
        },
        {
          "line": 4001,
          "old_api": null,
          "new_api": "Height",
          "old_text": null,
          "new_text": "chainActive.Height()",
          "old_line_content": "        return 0;",
          "new_line_content": "    return ((nIndex == -1) ? (-1) : 1) * (chainActive.Height() - pindex->nHeight + 1);",
          "content_same": false
        },
        {
          "line": 4006,
          "old_api": null,
          "new_api": "IsCoinBase",
          "old_text": null,
          "new_text": "IsCoinBase()",
          "old_line_content": "bool CMerkleTx::AcceptToMemoryPool(const CAmount& nAbsurdFee, CValidationState& state)",
          "new_line_content": "    if (!IsCoinBase())",
          "content_same": false
        },
        {
          "line": 3496,
          "old_api": null,
          "new_api": "hashUnset",
          "old_text": null,
          "new_text": "wtx.hashUnset()",
          "old_line_content": "            int64_t latestTolerated = latestNow + 300;",
          "new_line_content": "    if (!wtx.hashUnset()) {",
          "content_same": false
        },
        {
          "line": 3497,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "mapBlockIndex.count(wtx.hashBlock)",
          "old_line_content": "            const TxItems& txOrdered = wtxOrdered;",
          "new_line_content": "        if (mapBlockIndex.count(wtx.hashBlock)) {",
          "content_same": false
        },
        {
          "line": 4014,
          "old_api": null,
          "new_api": "::AcceptToMemoryPool(mempool, state, tx, true, NULL, NULL, false, nAbsurdFee)",
          "old_text": null,
          "new_text": "::AcceptToMemoryPool(mempool, state, tx, true, NULL, NULL, false, nAbsurdFee)",
          "old_line_content": "",
          "new_line_content": "    return ::AcceptToMemoryPool(mempool, state, tx, true, NULL, NULL, false, nAbsurdFee);",
          "content_same": false
        },
        {
          "line": 3504,
          "old_api": null,
          "new_api": "rend",
          "old_text": null,
          "new_text": "txOrdered.rend()",
          "old_line_content": "                int64_t nSmartTime;",
          "new_line_content": "            for (auto it = txOrdered.rbegin(); it != txOrdered.rend(); ++it) {",
          "content_same": false
        },
        {
          "line": 3528,
          "old_api": null,
          "new_api": "GetBlockTime",
          "old_text": null,
          "new_text": "mapBlockIndex[wtx.hashBlock]->GetBlockTime()",
          "old_line_content": "    return nTimeSmart;",
          "new_line_content": "            int64_t blocktime = mapBlockIndex[wtx.hashBlock]->GetBlockTime();",
          "content_same": false
        },
        {
          "line": 3529,
          "old_api": null,
          "new_api": "std::min(blocktime, latestNow)",
          "old_text": null,
          "new_text": "std::min(blocktime, latestNow)",
          "old_line_content": "}",
          "new_line_content": "            nTimeSmart = std::max(latestEntry, std::min(blocktime, latestNow));",
          "content_same": false
        },
        {
          "line": 3531,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "wtx.hashBlock.ToString()",
          "old_line_content": "bool CWallet::AddDestData(const CTxDestination &dest, const std::string &key, const std::string &value)",
          "new_line_content": "            LogPrintf(\"%s: found %s in block %s not in index\\n\", __func__, wtx.GetHash().ToString(), wtx.hashBlock.ToString());",
          "content_same": false
        },
        {
          "line": 3542,
          "old_api": null,
          "new_api": "std::make_pair(key, value)",
          "old_text": null,
          "new_text": "std::make_pair(key, value)",
          "old_line_content": "bool CWallet::EraseDestData(const CTxDestination &dest, const std::string &key)",
          "new_line_content": "    mapAddressBook[dest].destdata.insert(std::make_pair(key, value));",
          "content_same": false
        },
        {
          "line": 3545,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "CBitcoinAddress(dest).ToString()",
          "old_line_content": "        return false;",
          "new_line_content": "    return CWalletDB(strWalletFile).WriteDestData(CBitcoinAddress(dest).ToString(), key, value);",
          "content_same": false
        },
        {
          "line": 3550,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "mapAddressBook[dest].destdata.erase(key)",
          "old_line_content": "",
          "new_line_content": "    if (!mapAddressBook[dest].destdata.erase(key))",
          "content_same": false
        },
        {
          "line": 3554,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "CBitcoinAddress(dest).ToString()",
          "old_line_content": "    return true;",
          "new_line_content": "    return CWalletDB(strWalletFile).EraseDestData(CBitcoinAddress(dest).ToString(), key);",
          "content_same": false
        },
        {
          "line": 3565,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapAddressBook.find(dest)",
          "old_line_content": "            if(value)",
          "new_line_content": "    std::map<CTxDestination, CAddressBookData>::const_iterator i = mapAddressBook.find(dest);",
          "content_same": false
        },
        {
          "line": 3566,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapAddressBook.end()",
          "old_line_content": "                *value = j->second;",
          "new_line_content": "    if(i != mapAddressBook.end())",
          "content_same": false
        },
        {
          "line": 3568,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "i->second.destdata.find(key)",
          "old_line_content": "        }",
          "new_line_content": "        CAddressBookData::StringMap::const_iterator j = i->second.destdata.find(key);",
          "content_same": false
        },
        {
          "line": 3569,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "i->second.destdata.end()",
          "old_line_content": "    }",
          "new_line_content": "        if(j != i->second.destdata.end())",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 3079,
          "old_api": "std::max(oldest_internal, oldest_external)",
          "new_api": null,
          "old_text": "std::max(oldest_internal, oldest_external)",
          "new_text": null,
          "old_line_content": "        return std::max(oldest_internal, oldest_external);",
          "new_line_content": "                oldest_external = keypool.nTime;",
          "content_same": false
        },
        {
          "line": 3082,
          "old_api": "begin",
          "new_api": null,
          "old_text": "setKeyPool.begin()",
          "new_text": null,
          "old_line_content": "    int64_t nIndex = *(setKeyPool.begin());",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 3083,
          "old_api": "ReadPool",
          "new_api": null,
          "old_text": "walletdb.ReadPool(nIndex, keypool)",
          "new_text": null,
          "old_line_content": "    if (!walletdb.ReadPool(nIndex, keypool))",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3084,
          "old_api": "std::string(__func__)",
          "new_api": null,
          "old_text": "std::string(__func__)",
          "new_text": null,
          "old_line_content": "        throw std::runtime_error(std::string(__func__) + \": read oldest key in keypool failed\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3602,
          "old_api": "strprintf",
          "new_api": null,
          "old_text": "strprintf(\"Run a thread to flush wallet periodically (default: %u)\", DEFAULT_FLUSHWALLET)",
          "new_text": null,
          "old_line_content": "        strUsage += HelpMessageOpt(\"-flushwallet\", strprintf(\"Run a thread to flush wallet periodically (default: %u)\", DEFAULT_FLUSHWALLET));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3603,
          "old_api": "strprintf",
          "new_api": null,
          "old_text": "strprintf(\"Sets the DB_PRIVATE flag in the wallet db environment (default: %u)\", DEFAULT_WALLET_PRIVDB)",
          "new_text": null,
          "old_line_content": "        strUsage += HelpMessageOpt(\"-privdb\", strprintf(\"Sets the DB_PRIVATE flag in the wallet db environment (default: %u)\", DEFAULT_WALLET_PRIVDB));",
          "new_line_content": "    if (showDebug)",
          "content_same": false
        },
        {
          "line": 3604,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Wallet will not create transactions that violate mempool chain limits (default: %u)\")",
          "new_text": null,
          "old_line_content": "        strUsage += HelpMessageOpt(\"-walletrejectlongchains\", strprintf(_(\"Wallet will not create transactions that violate mempool chain limits (default: %u)\"), DEFAULT_WALLET_REJECT_LONG_CHAINS));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3094,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_wallet)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_wallet);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3095,
          "old_api": "PAIRTYPE",
          "new_api": null,
          "old_text": "PAIRTYPE(uint256, CWalletTx)",
          "new_text": null,
          "old_line_content": "        BOOST_FOREACH(PAIRTYPE(uint256, CWalletTx) walletEntry, mapWallet)",
          "new_line_content": "std::map<CTxDestination, CAmount> CWallet::GetAddressBalances()",
          "content_same": false
        },
        {
          "line": 3099,
          "old_api": "IsTrusted",
          "new_api": null,
          "old_text": "pcoin->IsTrusted()",
          "new_text": null,
          "old_line_content": "            if (!pcoin->IsTrusted())",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3102,
          "old_api": "GetBlocksToMaturity",
          "new_api": null,
          "old_text": "pcoin->GetBlocksToMaturity()",
          "new_text": null,
          "old_line_content": "            if (pcoin->IsCoinBase() && pcoin->GetBlocksToMaturity() > 0)",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3615,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-zapwallettxes\", false)",
          "new_text": null,
          "old_line_content": "    if (GetBoolArg(\"-zapwallettxes\", false)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3616,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Zapping all transactions from wallet...\")",
          "new_text": null,
          "old_line_content": "        uiInterface.InitMessage(_(\"Zapping all transactions from wallet...\"));",
          "new_line_content": "CWallet* CWallet::CreateWalletFromFile(const std::string walletFile)",
          "content_same": false
        },
        {
          "line": 3106,
          "old_api": "IsFromMe",
          "new_api": null,
          "old_text": "pcoin->IsFromMe(ISMINE_ALL)",
          "new_text": null,
          "old_line_content": "            if (nDepth < (pcoin->IsFromMe(ISMINE_ALL) ? 0 : 1))",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 3619,
          "old_api": "ZapWalletTx",
          "new_api": null,
          "old_text": "tempWallet->ZapWalletTx(vWtx)",
          "new_text": null,
          "old_line_content": "        DBErrors nZapWalletRet = tempWallet->ZapWalletTx(vWtx);",
          "new_line_content": "    std::vector<CWalletTx> vWtx;",
          "content_same": false
        },
        {
          "line": 3109,
          "old_api": "size",
          "new_api": null,
          "old_text": "pcoin->tx->vout.size()",
          "new_text": null,
          "old_line_content": "            for (unsigned int i = 0; i < pcoin->tx->vout.size(); i++)",
          "new_line_content": "                continue;",
          "content_same": false
        },
        {
          "line": 3114,
          "old_api": "ExtractDestination",
          "new_api": null,
          "old_text": "ExtractDestination(pcoin->tx->vout[i].scriptPubKey, addr)",
          "new_text": null,
          "old_line_content": "                if(!ExtractDestination(pcoin->tx->vout[i].scriptPubKey, addr))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3117,
          "old_api": "IsSpent",
          "new_api": null,
          "old_text": "IsSpent(walletEntry.first, i)",
          "new_text": null,
          "old_line_content": "                CAmount n = IsSpent(walletEntry.first, i) ? 0 : pcoin->tx->vout[i].nValue;",
          "new_line_content": "                CTxDestination addr;",
          "content_same": false
        },
        {
          "line": 3629,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Loading wallet...\")",
          "new_text": null,
          "old_line_content": "    uiInterface.InitMessage(_(\"Loading wallet...\"));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3119,
          "old_api": "count",
          "new_api": null,
          "old_text": "balances.count(addr)",
          "new_text": null,
          "old_line_content": "                if (!balances.count(addr))",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 3631,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "    int64_t nStart = GetTimeMillis();",
          "new_line_content": "        delete tempWallet;",
          "content_same": false
        },
        {
          "line": 3634,
          "old_api": "LoadWallet",
          "new_api": null,
          "old_text": "walletInstance->LoadWallet(fFirstRun)",
          "new_text": null,
          "old_line_content": "    DBErrors nLoadWalletRet = walletInstance->LoadWallet(fFirstRun);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3638,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Error loading %s: Wallet corrupted\")",
          "new_text": null,
          "old_line_content": "            InitError(strprintf(_(\"Error loading %s: Wallet corrupted\"), walletFile));",
          "new_line_content": "    bool fFirstRun = true;",
          "content_same": false
        },
        {
          "line": 3131,
          "old_api": "AssertLockHeld",
          "new_api": null,
          "old_text": "AssertLockHeld(cs_wallet)",
          "new_text": null,
          "old_line_content": "    AssertLockHeld(cs_wallet); // mapWallet",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3643,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Error reading %s! All keys read correctly, but transaction data\"\n                                         \" or address book entries might be missing or incorrect.\")",
          "new_text": null,
          "old_line_content": "            InitWarning(strprintf(_(\"Error reading %s! All keys read correctly, but transaction data\"",
          "new_line_content": "        if (nLoadWalletRet == DB_CORRUPT) {",
          "content_same": false
        },
        {
          "line": 3135,
          "old_api": "PAIRTYPE",
          "new_api": null,
          "old_text": "PAIRTYPE(uint256, CWalletTx)",
          "new_text": null,
          "old_line_content": "    BOOST_FOREACH(PAIRTYPE(uint256, CWalletTx) walletEntry, mapWallet)",
          "new_line_content": "std::set< std::set<CTxDestination> > CWallet::GetAddressGroupings()",
          "content_same": false
        },
        {
          "line": 3648,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(PACKAGE_NAME)",
          "new_text": null,
          "old_line_content": "            InitError(strprintf(_(\"Error loading %s: Wallet requires newer version of %s\"), walletFile, _(PACKAGE_NAME)));",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3139,
          "old_api": "size",
          "new_api": null,
          "old_text": "pcoin->tx->vin.size()",
          "new_text": null,
          "old_line_content": "        if (pcoin->tx->vin.size() > 0)",
          "new_line_content": "    std::set<CTxDestination> grouping;",
          "content_same": false
        },
        {
          "line": 3653,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(PACKAGE_NAME)",
          "new_text": null,
          "old_line_content": "            InitError(strprintf(_(\"Wallet needed to be rewritten: restart %s to complete\"), _(PACKAGE_NAME)));",
          "new_line_content": "        else if (nLoadWalletRet == DB_TOO_NEW) {",
          "content_same": false
        },
        {
          "line": 3657,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Error loading %s\")",
          "new_text": null,
          "old_line_content": "            InitError(strprintf(_(\"Error loading %s\"), walletFile));",
          "new_line_content": "        else if (nLoadWalletRet == DB_NEED_REWRITE)",
          "content_same": false
        },
        {
          "line": 3146,
          "old_api": "IsMine",
          "new_api": null,
          "old_text": "IsMine(txin)",
          "new_text": null,
          "old_line_content": "                if(!IsMine(txin)) /* If this input isn't mine, ignore it */",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3148,
          "old_api": "ExtractDestination",
          "new_api": null,
          "old_text": "ExtractDestination(mapWallet[txin.prevout.hash].tx->vout[txin.prevout.n].scriptPubKey, address)",
          "new_text": null,
          "old_line_content": "                if(!ExtractDestination(mapWallet[txin.prevout.hash].tx->vout[txin.prevout.n].scriptPubKey, address))",
          "new_line_content": "            // group all input addresses with each other",
          "content_same": false
        },
        {
          "line": 3150,
          "old_api": "insert",
          "new_api": null,
          "old_text": "grouping.insert(address)",
          "new_text": null,
          "old_line_content": "                grouping.insert(address);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 3662,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-upgradewallet\", fFirstRun)",
          "new_text": null,
          "old_line_content": "    if (GetBoolArg(\"-upgradewallet\", fFirstRun))",
          "new_line_content": "        else {",
          "content_same": false
        },
        {
          "line": 3664,
          "old_api": "GetArg",
          "new_api": null,
          "old_text": "GetArg(\"-upgradewallet\", 0)",
          "new_text": null,
          "old_line_content": "        int nMaxVersion = GetArg(\"-upgradewallet\", 0);",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 3667,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"Performing wallet upgrade to %i\\n\", FEATURE_LATEST)",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"Performing wallet upgrade to %i\\n\", FEATURE_LATEST);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3669,
          "old_api": "SetMinVersion",
          "new_api": null,
          "old_text": "walletInstance->SetMinVersion(FEATURE_LATEST)",
          "new_text": null,
          "old_line_content": "            walletInstance->SetMinVersion(FEATURE_LATEST); // permanently upgrade the wallet immediately",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3672,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"Allowing wallet upgrade up to %i\\n\", nMaxVersion)",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"Allowing wallet upgrade up to %i\\n\", nMaxVersion);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3161,
          "old_api": "ExtractDestination",
          "new_api": null,
          "old_text": "ExtractDestination(txout.scriptPubKey, txoutAddr)",
          "new_text": null,
          "old_line_content": "                       if(!ExtractDestination(txout.scriptPubKey, txoutAddr))",
          "new_line_content": "            if (any_mine)",
          "content_same": false
        },
        {
          "line": 3163,
          "old_api": "insert",
          "new_api": null,
          "old_text": "grouping.insert(txoutAddr)",
          "new_text": null,
          "old_line_content": "                       grouping.insert(txoutAddr);",
          "new_line_content": "               BOOST_FOREACH(CTxOut txout, pcoin->tx->vout)",
          "content_same": false
        },
        {
          "line": 3166,
          "old_api": "size",
          "new_api": null,
          "old_text": "grouping.size()",
          "new_text": null,
          "old_line_content": "            if (grouping.size() > 0)",
          "new_line_content": "                       CTxDestination txoutAddr;",
          "content_same": false
        },
        {
          "line": 3168,
          "old_api": "insert",
          "new_api": null,
          "old_text": "groupings.insert(grouping)",
          "new_text": null,
          "old_line_content": "                groupings.insert(grouping);",
          "new_line_content": "                           continue;",
          "content_same": false
        },
        {
          "line": 3687,
          "old_api": "SetMinVersion",
          "new_api": null,
          "old_text": "walletInstance->SetMinVersion(FEATURE_HD_SPLIT)",
          "new_text": null,
          "old_line_content": "            walletInstance->SetMinVersion(FEATURE_HD_SPLIT);",
          "new_line_content": "    if (fFirstRun)",
          "content_same": false
        },
        {
          "line": 3178,
          "old_api": "ExtractDestination",
          "new_api": null,
          "old_text": "ExtractDestination(pcoin->tx->vout[i].scriptPubKey, address)",
          "new_text": null,
          "old_line_content": "                if(!ExtractDestination(pcoin->tx->vout[i].scriptPubKey, address))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3691,
          "old_api": "SetHDMasterKey",
          "new_api": null,
          "old_text": "walletInstance->SetHDMasterKey(masterPubKey)",
          "new_text": null,
          "old_line_content": "            if (!walletInstance->SetHDMasterKey(masterPubKey))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3692,
          "old_api": "std::string(__func__)",
          "new_api": null,
          "old_text": "std::string(__func__)",
          "new_text": null,
          "old_line_content": "                throw std::runtime_error(std::string(__func__) + \": Storing master key failed\");",
          "new_line_content": "            // ensure this wallet.dat can only be opened by clients supporting HD with chain split",
          "content_same": false
        },
        {
          "line": 3182,
          "old_api": "clear",
          "new_api": null,
          "old_text": "grouping.clear()",
          "new_text": null,
          "old_line_content": "                grouping.clear();",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 3695,
          "old_api": "GetKeyFromPool",
          "new_api": null,
          "old_text": "walletInstance->GetKeyFromPool(newDefaultKey, false)",
          "new_text": null,
          "old_line_content": "        if (walletInstance->GetKeyFromPool(newDefaultKey, false)) {",
          "new_line_content": "            // generate a new master key",
          "content_same": false
        },
        {
          "line": 3705,
          "old_api": "IsArgSet",
          "new_api": null,
          "old_text": "IsArgSet(\"-usehd\")",
          "new_text": null,
          "old_line_content": "    else if (IsArgSet(\"-usehd\")) {",
          "new_line_content": "                return NULL;",
          "content_same": false
        },
        {
          "line": 3194,
          "old_api": "end",
          "new_api": null,
          "old_text": "setmap.end()",
          "new_text": null,
          "old_line_content": "            if ((it = setmap.find(address)) != setmap.end())",
          "new_line_content": "    BOOST_FOREACH(std::set<CTxDestination> _grouping, groupings)",
          "content_same": false
        },
        {
          "line": 3195,
          "old_api": "insert",
          "new_api": null,
          "old_text": "hits.insert((*it).second)",
          "new_text": null,
          "old_line_content": "                hits.insert((*it).second);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3706,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-usehd\", DEFAULT_USE_HD_WALLET)",
          "new_text": null,
          "old_line_content": "        bool useHD = GetBoolArg(\"-usehd\", DEFAULT_USE_HD_WALLET);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3707,
          "old_api": "IsHDEnabled",
          "new_api": null,
          "old_text": "walletInstance->IsHDEnabled()",
          "new_text": null,
          "old_line_content": "        if (walletInstance->IsHDEnabled() && !useHD) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3708,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Error loading %s: You can't disable HD on a already existing HD wallet\")",
          "new_text": null,
          "old_line_content": "            InitError(strprintf(_(\"Error loading %s: You can't disable HD on a already existing HD wallet\"), walletFile));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3202,
          "old_api": "erase",
          "new_api": null,
          "old_text": "uniqueGroupings.erase(hit)",
          "new_text": null,
          "old_line_content": "            uniqueGroupings.erase(hit);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3205,
          "old_api": "insert",
          "new_api": null,
          "old_text": "uniqueGroupings.insert(merged)",
          "new_text": null,
          "old_line_content": "        uniqueGroupings.insert(merged);",
          "new_line_content": "        BOOST_FOREACH(std::set<CTxDestination>* hit, hits)",
          "content_same": false
        },
        {
          "line": 3719,
          "old_api": "RegisterValidationInterface",
          "new_api": null,
          "old_text": "RegisterValidationInterface(walletInstance)",
          "new_text": null,
          "old_line_content": "    RegisterValidationInterface(walletInstance);",
          "new_line_content": "            return NULL;",
          "content_same": false
        },
        {
          "line": 3721,
          "old_api": "Genesis",
          "new_api": null,
          "old_text": "chainActive.Genesis()",
          "new_text": null,
          "old_line_content": "    CBlockIndex *pindexRescan = chainActive.Genesis();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3722,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-rescan\", false)",
          "new_text": null,
          "old_line_content": "    if (!GetBoolArg(\"-rescan\", false))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3726,
          "old_api": "ReadBestBlock",
          "new_api": null,
          "old_text": "walletdb.ReadBestBlock(locator)",
          "new_text": null,
          "old_line_content": "        if (walletdb.ReadBestBlock(locator))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3215,
          "old_api": "insert",
          "new_api": null,
          "old_text": "ret.insert(*uniqueGrouping)",
          "new_text": null,
          "old_line_content": "        ret.insert(*uniqueGrouping);",
          "new_line_content": "            setmap[element] = merged;",
          "content_same": false
        },
        {
          "line": 3729,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "    if (chainActive.Tip() && chainActive.Tip() != pindexRescan)",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3736,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "            CBlockIndex *block = chainActive.Tip();",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3225,
          "old_api": "GetAccountBalance",
          "new_api": null,
          "old_text": "GetAccountBalance(walletdb, strAccount, nMinDepth, filter)",
          "new_text": null,
          "old_line_content": "    return GetAccountBalance(walletdb, strAccount, nMinDepth, filter);",
          "new_line_content": "    return ret;",
          "content_same": false
        },
        {
          "line": 3741,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\")",
          "new_text": null,
          "old_line_content": "                InitError(_(\"Prune: last wallet synchronisation goes beyond pruned data. You need to -reindex (download the whole blockchain again in case of pruned node)\"));",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3233,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapWallet.end()",
          "new_text": null,
          "old_line_content": "    for (std::map<uint256, CWalletTx>::iterator it = mapWallet.begin(); it != mapWallet.end(); ++it)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3746,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Rescanning...\")",
          "new_text": null,
          "old_line_content": "        uiInterface.InitMessage(_(\"Rescanning...\"));",
          "new_line_content": "            if (pindexRescan != block) {",
          "content_same": false
        },
        {
          "line": 3236,
          "old_api": "GetDepthInMainChain",
          "new_api": null,
          "old_text": "wtx.GetDepthInMainChain()",
          "new_text": null,
          "old_line_content": "        if (!CheckFinalTx(wtx) || wtx.GetBlocksToMaturity() > 0 || wtx.GetDepthInMainChain() < 0)",
          "new_line_content": "    CAmount nBalance = 0;",
          "content_same": false
        },
        {
          "line": 3748,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "        nStart = GetTimeMillis();",
          "new_line_content": "                return NULL;",
          "content_same": false
        },
        {
          "line": 3749,
          "old_api": "ScanForWalletTransactions",
          "new_api": null,
          "old_text": "walletInstance->ScanForWalletTransactions(pindexRescan, true)",
          "new_text": null,
          "old_line_content": "        walletInstance->ScanForWalletTransactions(pindexRescan, true);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3750,
          "old_api": "GetTimeMillis",
          "new_api": null,
          "old_text": "GetTimeMillis()",
          "new_text": null,
          "old_line_content": "        LogPrintf(\" rescan      %15dms\\n\", GetTimeMillis() - nStart);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3240,
          "old_api": "GetAccountAmounts",
          "new_api": null,
          "old_text": "wtx.GetAccountAmounts(strAccount, nReceived, nSent, nFee, filter)",
          "new_text": null,
          "old_line_content": "        wtx.GetAccountAmounts(strAccount, nReceived, nSent, nFee, filter);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3751,
          "old_api": "GetLocator",
          "new_api": null,
          "old_text": "chainActive.GetLocator()",
          "new_text": null,
          "old_line_content": "        walletInstance->SetBestChain(chainActive.GetLocator());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3762,
          "old_api": "find",
          "new_api": null,
          "old_text": "walletInstance->mapWallet.find(hash)",
          "new_text": null,
          "old_line_content": "                std::map<uint256, CWalletTx>::iterator mi = walletInstance->mapWallet.find(hash);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3763,
          "old_api": "end",
          "new_api": null,
          "old_text": "walletInstance->mapWallet.end()",
          "new_text": null,
          "old_line_content": "                if (mi != walletInstance->mapWallet.end())",
          "new_line_content": "            CWalletDB walletdb(walletFile);",
          "content_same": false
        },
        {
          "line": 3255,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_wallet)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_wallet);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3262,
          "old_api": "insert",
          "new_api": null,
          "old_text": "result.insert(address)",
          "new_text": null,
          "old_line_content": "            result.insert(address);",
          "new_line_content": "    std::set<CTxDestination> result;",
          "content_same": false
        },
        {
          "line": 3774,
          "old_api": "WriteTx",
          "new_api": null,
          "old_text": "walletdb.WriteTx(*copyTo)",
          "new_text": null,
          "old_line_content": "                    walletdb.WriteTx(*copyTo);",
          "new_line_content": "                    copyTo->vOrderForm = copyFrom->vOrderForm;",
          "content_same": false
        },
        {
          "line": 3779,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-walletbroadcast\", DEFAULT_WALLETBROADCAST)",
          "new_text": null,
          "old_line_content": "    walletInstance->SetBroadcastTransactions(GetBoolArg(\"-walletbroadcast\", DEFAULT_WALLETBROADCAST));",
          "new_line_content": "                    copyTo->nOrderPos = copyFrom->nOrderPos;",
          "content_same": false
        },
        {
          "line": 3782,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(walletInstance->cs_wallet)",
          "new_text": null,
          "old_line_content": "        LOCK(walletInstance->cs_wallet);",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3783,
          "old_api": "GetKeyPoolSize",
          "new_api": null,
          "old_text": "walletInstance->GetKeyPoolSize()",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"setKeyPool.size() = %u\\n\",      walletInstance->GetKeyPoolSize());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3272,
          "old_api": "ReserveKeyFromKeyPool",
          "new_api": null,
          "old_text": "pwallet->ReserveKeyFromKeyPool(nIndex, keypool, internal)",
          "new_text": null,
          "old_line_content": "        pwallet->ReserveKeyFromKeyPool(nIndex, keypool, internal);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3784,
          "old_api": "size",
          "new_api": null,
          "old_text": "walletInstance->mapWallet.size()",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"mapWallet.size() = %u\\n\",       walletInstance->mapWallet.size());",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3279,
          "old_api": "IsValid",
          "new_api": null,
          "old_text": "vchPubKey.IsValid()",
          "new_text": null,
          "old_line_content": "    assert(vchPubKey.IsValid());",
          "new_line_content": "        if (nIndex != -1)",
          "content_same": false
        },
        {
          "line": 3793,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)",
          "new_text": null,
          "old_line_content": "    if (GetBoolArg(\"-disablewallet\", DEFAULT_DISABLE_WALLET)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3795,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"Wallet disabled!\\n\")",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"Wallet disabled!\\n\");",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3287,
          "old_api": "KeepKey",
          "new_api": null,
          "old_text": "pwallet->KeepKey(nIndex)",
          "new_text": null,
          "old_line_content": "        pwallet->KeepKey(nIndex);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 3289,
          "old_api": "CPubKey",
          "new_api": null,
          "old_text": "CPubKey()",
          "new_text": null,
          "old_line_content": "    vchPubKey = CPubKey();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3802,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"-wallet parameter must only specify a filename (not a path)\")",
          "new_text": null,
          "old_line_content": "        return InitError(_(\"-wallet parameter must only specify a filename (not a path)\"));",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 3803,
          "old_api": "SanitizeString",
          "new_api": null,
          "old_text": "SanitizeString(walletFile, SAFE_CHARS_FILENAME)",
          "new_text": null,
          "old_line_content": "    } else if (SanitizeString(walletFile, SAFE_CHARS_FILENAME) != walletFile) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3804,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Invalid characters in -wallet filename\")",
          "new_text": null,
          "old_line_content": "        return InitError(_(\"Invalid characters in -wallet filename\"));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3297,
          "old_api": "CPubKey",
          "new_api": null,
          "old_text": "CPubKey()",
          "new_text": null,
          "old_line_content": "    vchPubKey = CPubKey();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3302,
          "old_api": "clear",
          "new_api": null,
          "old_text": "setAddress.clear()",
          "new_text": null,
          "old_line_content": "    setAddress.clear();",
          "new_line_content": "    nIndex = -1;",
          "content_same": false
        },
        {
          "line": 3306,
          "old_api": "LOCK2",
          "new_api": null,
          "old_text": "LOCK2(cs_main, cs_wallet)",
          "new_text": null,
          "old_line_content": "    LOCK2(cs_main, cs_wallet);",
          "new_line_content": "void CWallet::GetAllReserveKeys(std::set<CKeyID>& setAddress) const",
          "content_same": false
        },
        {
          "line": 3310,
          "old_api": "ReadPool",
          "new_api": null,
          "old_text": "walletdb.ReadPool(id, keypool)",
          "new_text": null,
          "old_line_content": "        if (!walletdb.ReadPool(id, keypool))",
          "new_line_content": "    CWalletDB walletdb(strWalletFile);",
          "content_same": false
        },
        {
          "line": 3311,
          "old_api": "std::string(__func__)",
          "new_api": null,
          "old_text": "std::string(__func__)",
          "new_text": null,
          "old_line_content": "            throw std::runtime_error(std::string(__func__) + \": read failed\");",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3822,
          "old_api": "ReacceptWalletTransactions",
          "new_api": null,
          "old_text": "ReacceptWalletTransactions()",
          "new_text": null,
          "old_line_content": "    ReacceptWalletTransactions();",
          "new_line_content": "std::atomic<bool> CWallet::fFlushScheduled(false);",
          "content_same": false
        },
        {
          "line": 3313,
          "old_api": "GetID",
          "new_api": null,
          "old_text": "keypool.vchPubKey.GetID()",
          "new_text": null,
          "old_line_content": "        CKeyID keyID = keypool.vchPubKey.GetID();",
          "new_line_content": "    BOOST_FOREACH(const int64_t& id, setKeyPool)",
          "content_same": false
        },
        {
          "line": 3314,
          "old_api": "HaveKey",
          "new_api": null,
          "old_text": "HaveKey(keyID)",
          "new_text": null,
          "old_line_content": "        if (!HaveKey(keyID))",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3315,
          "old_api": "std::string(__func__)",
          "new_api": null,
          "old_text": "std::string(__func__)",
          "new_text": null,
          "old_line_content": "            throw std::runtime_error(std::string(__func__) + \": unknown key in key pool\");",
          "new_line_content": "        CKeyPool keypool;",
          "content_same": false
        },
        {
          "line": 3825,
          "old_api": "exchange",
          "new_api": null,
          "old_text": "CWallet::fFlushScheduled.exchange(true)",
          "new_text": null,
          "old_line_content": "    if (!CWallet::fFlushScheduled.exchange(true)) {",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3826,
          "old_api": "scheduleEvery",
          "new_api": null,
          "old_text": "scheduler.scheduleEvery(MaybeCompactWalletDB, 500)",
          "new_text": null,
          "old_line_content": "        scheduler.scheduleEvery(MaybeCompactWalletDB, 500);",
          "new_line_content": "    // Add wallet transactions that aren't already in a block to mempool",
          "content_same": false
        },
        {
          "line": 3323,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_wallet)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_wallet);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3835,
          "old_api": "SoftSetBoolArg",
          "new_api": null,
          "old_text": "SoftSetBoolArg(\"-walletbroadcast\", false)",
          "new_text": null,
          "old_line_content": "    if (GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY) && SoftSetBoolArg(\"-walletbroadcast\", false)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3325,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapWallet.find(hashTx)",
          "new_text": null,
          "old_line_content": "        std::map<uint256, CWalletTx>::const_iterator mi = mapWallet.find(hashTx);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3326,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapWallet.end()",
          "new_text": null,
          "old_line_content": "        if (mi != mapWallet.end())",
          "new_line_content": "void CWallet::UpdatedTransaction(const uint256 &hashTx)",
          "content_same": false
        },
        {
          "line": 3327,
          "old_api": "NotifyTransactionChanged",
          "new_api": null,
          "old_text": "NotifyTransactionChanged(this, hashTx, CT_UPDATED)",
          "new_text": null,
          "old_line_content": "            NotifyTransactionChanged(this, hashTx, CT_UPDATED);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3836,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=0\\n\", __func__)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s: parameter interaction: -blocksonly=1 -> setting -walletbroadcast=0\\n\", __func__);",
          "new_line_content": "bool CWallet::ParameterInteraction()",
          "content_same": false
        },
        {
          "line": 3839,
          "old_api": "SoftSetBoolArg",
          "new_api": null,
          "old_text": "SoftSetBoolArg(\"-rescan\", true)",
          "new_text": null,
          "old_line_content": "    if (GetBoolArg(\"-salvagewallet\", false) && SoftSetBoolArg(\"-rescan\", true)) {",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 3846,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s: parameter interaction: -zapwallettxes=<mode> -> setting -rescan=1\\n\", __func__)",
          "new_text": null,
          "old_line_content": "        LogPrintf(\"%s: parameter interaction: -zapwallettxes=<mode> -> setting -rescan=1\\n\", __func__);",
          "new_line_content": "        // Rewrite just private keys: rescan to find transactions",
          "content_same": false
        },
        {
          "line": 3335,
          "old_api": "GetReservedKey",
          "new_api": null,
          "old_text": "rKey->GetReservedKey(pubkey)",
          "new_text": null,
          "old_line_content": "    if (!rKey->GetReservedKey(pubkey))",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3849,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-sysperms\", false)",
          "new_text": null,
          "old_line_content": "    if (GetBoolArg(\"-sysperms\", false))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3850,
          "old_api": "InitError",
          "new_api": null,
          "old_text": "InitError(\"-sysperms is not allowed in combination with enabled wallet functionality\")",
          "new_text": null,
          "old_line_content": "        return InitError(\"-sysperms is not allowed in combination with enabled wallet functionality\");",
          "new_line_content": "    // -zapwallettx implies a rescan",
          "content_same": false
        },
        {
          "line": 3339,
          "old_api": "ToByteVector",
          "new_api": null,
          "old_text": "ToByteVector(pubkey)",
          "new_text": null,
          "old_line_content": "    script->reserveScript = CScript() << ToByteVector(pubkey) << OP_CHECKSIG;",
          "new_line_content": "    boost::shared_ptr<CReserveKey> rKey(new CReserveKey(this));",
          "content_same": false
        },
        {
          "line": 3854,
          "old_api": "GetFeePerK",
          "new_api": null,
          "old_text": "::minRelayTxFee.GetFeePerK()",
          "new_text": null,
          "old_line_content": "    if (::minRelayTxFee.GetFeePerK() > HIGH_TX_FEE_PER_KB)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3344,
          "old_api": "AssertLockHeld",
          "new_api": null,
          "old_text": "AssertLockHeld(cs_wallet)",
          "new_text": null,
          "old_line_content": "    AssertLockHeld(cs_wallet); // setLockedCoins",
          "new_line_content": "    script = rKey;",
          "content_same": false
        },
        {
          "line": 3865,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"This is the minimum transaction fee you pay on every transaction.\")",
          "new_text": null,
          "old_line_content": "                        _(\"This is the minimum transaction fee you pay on every transaction.\"));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3866,
          "old_api": "CFeeRate",
          "new_api": null,
          "old_text": "CFeeRate(n)",
          "new_text": null,
          "old_line_content": "        CWallet::minTxFee = CFeeRate(n);",
          "new_line_content": "        CAmount n = 0;",
          "content_same": false
        },
        {
          "line": 3875,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"This is the transaction fee you may pay when fee estimates are not available.\")",
          "new_text": null,
          "old_line_content": "                        _(\"This is the transaction fee you may pay when fee estimates are not available.\"));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3876,
          "old_api": "CFeeRate",
          "new_api": null,
          "old_text": "CFeeRate(nFeePerK)",
          "new_text": null,
          "old_line_content": "        CWallet::fallbackFee = CFeeRate(nFeePerK);",
          "new_line_content": "        CAmount nFeePerK = 0;",
          "content_same": false
        },
        {
          "line": 3365,
          "old_api": "count",
          "new_api": null,
          "old_text": "setLockedCoins.count(outpt)",
          "new_text": null,
          "old_line_content": "    return (setLockedCoins.count(outpt) > 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3370,
          "old_api": "AssertLockHeld",
          "new_api": null,
          "old_text": "AssertLockHeld(cs_wallet)",
          "new_text": null,
          "old_line_content": "    AssertLockHeld(cs_wallet); // setLockedCoins",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3372,
          "old_api": "end",
          "new_api": null,
          "old_text": "setLockedCoins.end()",
          "new_text": null,
          "old_line_content": "         it != setLockedCoins.end(); it++) {",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3885,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"This is the transaction fee you will pay if you send a transaction.\")",
          "new_text": null,
          "old_line_content": "                        _(\"This is the transaction fee you will pay if you send a transaction.\"));",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3374,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vOutpts.push_back(outpt)",
          "new_text": null,
          "old_line_content": "        vOutpts.push_back(outpt);",
          "new_line_content": "void CWallet::ListLockedCoins(std::vector<COutPoint>& vOutpts)",
          "content_same": false
        },
        {
          "line": 3894,
          "old_api": "IsArgSet",
          "new_api": null,
          "old_text": "IsArgSet(\"-maxtxfee\")",
          "new_text": null,
          "old_line_content": "    if (IsArgSet(\"-maxtxfee\"))",
          "new_line_content": "        if (payTxFee < ::minRelayTxFee)",
          "content_same": false
        },
        {
          "line": 3898,
          "old_api": "GetArg",
          "new_api": null,
          "old_text": "GetArg(\"-maxtxfee\", \"\")",
          "new_text": null,
          "old_line_content": "            return InitError(AmountErrMsg(\"maxtxfee\", GetArg(\"-maxtxfee\", \"\")));",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 3902,
          "old_api": "CFeeRate",
          "new_api": null,
          "old_text": "CFeeRate(maxTxFee, 1000)",
          "new_text": null,
          "old_line_content": "        if (CFeeRate(maxTxFee, 1000) < ::minRelayTxFee)",
          "new_line_content": "        CAmount nMaxFee = 0;",
          "content_same": false
        },
        {
          "line": 3392,
          "old_api": "ExtractDestinations",
          "new_api": null,
          "old_text": "ExtractDestinations(script, type, vDest, nRequired)",
          "new_text": null,
          "old_line_content": "        if (ExtractDestinations(script, type, vDest, nRequired)) {",
          "new_line_content": "    CAffectedKeysVisitor(const CKeyStore &keystoreIn, std::vector<CKeyID> &vKeysIn) : keystore(keystoreIn), vKeys(vKeysIn) {}",
          "content_same": false
        },
        {
          "line": 3905,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "::minRelayTxFee.ToString()",
          "new_text": null,
          "old_line_content": "                                       GetArg(\"-maxtxfee\", \"\"), ::minRelayTxFee.ToString()));",
          "new_line_content": "        if (nMaxFee > HIGH_MAX_TX_FEE)",
          "content_same": false
        },
        {
          "line": 3394,
          "old_api": "boost::apply_visitor(*this, dest)",
          "new_api": null,
          "old_text": "boost::apply_visitor(*this, dest)",
          "new_text": null,
          "old_line_content": "                boost::apply_visitor(*this, dest);",
          "new_line_content": "    void Process(const CScript &script) {",
          "content_same": false
        },
        {
          "line": 3909,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE)",
          "new_text": null,
          "old_line_content": "    bSpendZeroConfChange = GetBoolArg(\"-spendzeroconfchange\", DEFAULT_SPEND_ZEROCONF_CHANGE);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3399,
          "old_api": "HaveKey",
          "new_api": null,
          "old_text": "keystore.HaveKey(keyId)",
          "new_text": null,
          "old_line_content": "        if (keystore.HaveKey(keyId))",
          "new_line_content": "            BOOST_FOREACH(const CTxDestination &dest, vDest)",
          "content_same": false
        },
        {
          "line": 3922,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(bitdb.cs_db)",
          "new_text": null,
          "old_line_content": "            LOCK(bitdb.cs_db);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 3923,
          "old_api": "count",
          "new_api": null,
          "old_text": "bitdb.mapFileUseCount.count(strWalletFile)",
          "new_text": null,
          "old_line_content": "            if (!bitdb.mapFileUseCount.count(strWalletFile) || bitdb.mapFileUseCount[strWalletFile] == 0)",
          "new_line_content": "    if (!fFileBacked)",
          "content_same": false
        },
        {
          "line": 3413,
          "old_api": "AssertLockHeld",
          "new_api": null,
          "old_text": "AssertLockHeld(cs_wallet)",
          "new_text": null,
          "old_line_content": "    AssertLockHeld(cs_wallet); // mapKeyMetadata",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3414,
          "old_api": "clear",
          "new_api": null,
          "old_text": "mapKeyBirth.clear()",
          "new_text": null,
          "old_line_content": "    mapKeyBirth.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3926,
          "old_api": "CloseDb",
          "new_api": null,
          "old_text": "bitdb.CloseDb(strWalletFile)",
          "new_text": null,
          "old_line_content": "                bitdb.CloseDb(strWalletFile);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 3927,
          "old_api": "CheckpointLSN",
          "new_api": null,
          "old_text": "bitdb.CheckpointLSN(strWalletFile)",
          "new_text": null,
          "old_line_content": "                bitdb.CheckpointLSN(strWalletFile);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 3931,
          "old_api": "GetDataDir",
          "new_api": null,
          "old_text": "GetDataDir()",
          "new_text": null,
          "old_line_content": "                boost::filesystem::path pathSrc = GetDataDir() / strWalletFile;",
          "new_line_content": "                // Flush log data to the dat file",
          "content_same": false
        },
        {
          "line": 3424,
          "old_api": "Height",
          "new_api": null,
          "old_text": "chainActive.Height()",
          "new_text": null,
          "old_line_content": "    CBlockIndex *pindexMax = chainActive[std::max(0, chainActive.Height() - 144)]; // the tip can be reorganized; use a 144-block safety margin",
          "new_line_content": "        if (entry.second.nCreateTime) {",
          "content_same": false
        },
        {
          "line": 3938,
          "old_api": "string",
          "new_api": null,
          "old_text": "pathDest.string()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"copied %s to %s\\n\", strWalletFile, pathDest.string());",
          "new_line_content": "                boost::filesystem::path pathDest(strDest);",
          "content_same": false
        },
        {
          "line": 3427,
          "old_api": "GetKeys",
          "new_api": null,
          "old_text": "GetKeys(setKeys)",
          "new_text": null,
          "old_line_content": "    GetKeys(setKeys);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3429,
          "old_api": "count",
          "new_api": null,
          "old_text": "mapKeyBirth.count(keyid)",
          "new_text": null,
          "old_line_content": "        if (mapKeyBirth.count(keyid) == 0)",
          "new_line_content": "    // map in which we'll infer heights of other keys",
          "content_same": false
        },
        {
          "line": 3941,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"error copying %s to %s - %s\\n\", strWalletFile, pathDest.string(), e.what());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3432,
          "old_api": "clear",
          "new_api": null,
          "old_text": "setKeys.clear()",
          "new_text": null,
          "old_line_content": "    setKeys.clear();",
          "new_line_content": "    std::set<CKeyID> setKeys;",
          "content_same": false
        },
        {
          "line": 3946,
          "old_api": "MilliSleep",
          "new_api": null,
          "old_text": "MilliSleep(100)",
          "new_text": null,
          "old_line_content": "        MilliSleep(100);",
          "new_line_content": "                } catch (const boost::filesystem::filesystem_error& e) {",
          "content_same": false
        },
        {
          "line": 3440,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapWallet.end()",
          "new_text": null,
          "old_line_content": "    for (std::map<uint256, CWalletTx>::const_iterator it = mapWallet.begin(); it != mapWallet.end(); it++) {",
          "new_line_content": "    // if there are no such keys, we're done",
          "content_same": false
        },
        {
          "line": 3953,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "    nTime = GetTime();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3443,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapBlockIndex.find(wtx.hashBlock)",
          "new_text": null,
          "old_line_content": "        BlockMap::const_iterator blit = mapBlockIndex.find(wtx.hashBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3444,
          "old_api": "Contains",
          "new_api": null,
          "old_text": "chainActive.Contains(blit->second)",
          "new_text": null,
          "old_line_content": "        if (blit != mapBlockIndex.end() && chainActive.Contains(blit->second)) {",
          "new_line_content": "    // find first block that affects those keys, if there are any left",
          "content_same": false
        },
        {
          "line": 3452,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapKeyFirstBlock.find(keyid)",
          "new_text": null,
          "old_line_content": "                    std::map<CKeyID, CBlockIndex*>::iterator rit = mapKeyFirstBlock.find(keyid);",
          "new_line_content": "            int nHeight = blit->second->nHeight;",
          "content_same": false
        },
        {
          "line": 3453,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapKeyFirstBlock.end()",
          "new_text": null,
          "old_line_content": "                    if (rit != mapKeyFirstBlock.end() && nHeight < rit->second->nHeight)",
          "new_line_content": "            BOOST_FOREACH(const CTxOut &txout, wtx.tx->vout) {",
          "content_same": false
        },
        {
          "line": 3966,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "    nTimeCreated = (nExpires ? GetTime() : 0);",
          "new_line_content": "    vchPubKey = vchPubKeyIn;",
          "content_same": false
        },
        {
          "line": 3456,
          "old_api": "clear",
          "new_api": null,
          "old_text": "vAffected.clear()",
          "new_text": null,
          "old_line_content": "                vAffected.clear();",
          "new_line_content": "                BOOST_FOREACH(const CKeyID &keyid, vAffected) {",
          "content_same": false
        },
        {
          "line": 3973,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindex->GetBlockHash()",
          "new_text": null,
          "old_line_content": "    hashBlock = pindex->GetBlockHash();",
          "new_line_content": "    nTimeExpires = nExpires;",
          "content_same": false
        },
        {
          "line": 3463,
          "old_api": "GetBlockTime",
          "new_api": null,
          "old_text": "it->second->GetBlockTime()",
          "new_text": null,
          "old_line_content": "        mapKeyBirth[it->first] = it->second->GetBlockTime() - TIMESTAMP_WINDOW; // block times can be 2h off",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 3981,
          "old_api": "hashUnset",
          "new_api": null,
          "old_text": "hashUnset()",
          "new_text": null,
          "old_line_content": "    if (hashUnset())",
          "new_line_content": "    // set the position of the transaction in the block",
          "content_same": false
        },
        {
          "line": 3984,
          "old_api": "AssertLockHeld",
          "new_api": null,
          "old_text": "AssertLockHeld(cs_main)",
          "new_text": null,
          "old_line_content": "    AssertLockHeld(cs_main);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3988,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapBlockIndex.end()",
          "new_text": null,
          "old_line_content": "    if (mi == mapBlockIndex.end())",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 3991,
          "old_api": "Contains",
          "new_api": null,
          "old_text": "chainActive.Contains(pindex)",
          "new_text": null,
          "old_line_content": "    if (!pindex || !chainActive.Contains(pindex))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3995,
          "old_api": "Height",
          "new_api": null,
          "old_text": "chainActive.Height()",
          "new_text": null,
          "old_line_content": "    return ((nIndex == -1) ? (-1) : 1) * (chainActive.Height() - pindex->nHeight + 1);",
          "new_line_content": "        return 0;",
          "content_same": false
        },
        {
          "line": 4000,
          "old_api": "IsCoinBase",
          "new_api": null,
          "old_text": "IsCoinBase()",
          "new_text": null,
          "old_line_content": "    if (!IsCoinBase())",
          "new_line_content": "    pindexRet = pindex;",
          "content_same": false
        },
        {
          "line": 3490,
          "old_api": "hashUnset",
          "new_api": null,
          "old_text": "wtx.hashUnset()",
          "new_text": null,
          "old_line_content": "    if (!wtx.hashUnset()) {",
          "new_line_content": " * https://bitcointalk.org/?topic=54527, or",
          "content_same": false
        },
        {
          "line": 3491,
          "old_api": "count",
          "new_api": null,
          "old_text": "mapBlockIndex.count(wtx.hashBlock)",
          "new_text": null,
          "old_line_content": "        if (mapBlockIndex.count(wtx.hashBlock)) {",
          "new_line_content": " * https://github.com/bitcoin/bitcoin/pull/1393.",
          "content_same": false
        },
        {
          "line": 4002,
          "old_api": "GetDepthInMainChain",
          "new_api": null,
          "old_text": "GetDepthInMainChain()",
          "new_text": null,
          "old_line_content": "    return std::max(0, (COINBASE_MATURITY+1) - GetDepthInMainChain());",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3498,
          "old_api": "rend",
          "new_api": null,
          "old_text": "txOrdered.rend()",
          "new_text": null,
          "old_line_content": "            for (auto it = txOrdered.rbegin(); it != txOrdered.rend(); ++it) {",
          "new_line_content": "            int64_t latestNow = wtx.nTimeReceived;",
          "content_same": false
        },
        {
          "line": 3522,
          "old_api": "GetBlockTime",
          "new_api": null,
          "old_text": "mapBlockIndex[wtx.hashBlock]->GetBlockTime()",
          "new_text": null,
          "old_line_content": "            int64_t blocktime = mapBlockIndex[wtx.hashBlock]->GetBlockTime();",
          "new_line_content": "                        latestNow = nSmartTime;",
          "content_same": false
        },
        {
          "line": 3523,
          "old_api": "std::min(blocktime, latestNow)",
          "new_api": null,
          "old_text": "std::min(blocktime, latestNow)",
          "new_text": null,
          "old_line_content": "            nTimeSmart = std::max(latestEntry, std::min(blocktime, latestNow));",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 3525,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "wtx.hashBlock.ToString()",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"%s: found %s in block %s not in index\\n\", __func__, wtx.GetHash().ToString(), wtx.hashBlock.ToString());",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 3533,
          "old_api": "boost::get<CNoDestination>(&dest)",
          "new_api": null,
          "old_text": "boost::get<CNoDestination>(&dest)",
          "new_text": null,
          "old_line_content": "    if (boost::get<CNoDestination>(&dest))",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3536,
          "old_api": "std::make_pair(key, value)",
          "new_api": null,
          "old_text": "std::make_pair(key, value)",
          "new_text": null,
          "old_line_content": "    mapAddressBook[dest].destdata.insert(std::make_pair(key, value));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3544,
          "old_api": "erase",
          "new_api": null,
          "old_text": "mapAddressBook[dest].destdata.erase(key)",
          "new_text": null,
          "old_line_content": "    if (!mapAddressBook[dest].destdata.erase(key))",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 3548,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "CBitcoinAddress(dest).ToString()",
          "new_text": null,
          "old_line_content": "    return CWalletDB(strWalletFile).EraseDestData(CBitcoinAddress(dest).ToString(), key);",
          "new_line_content": "bool CWallet::EraseDestData(const CTxDestination &dest, const std::string &key)",
          "content_same": false
        },
        {
          "line": 3553,
          "old_api": "std::make_pair(key, value)",
          "new_api": null,
          "old_text": "std::make_pair(key, value)",
          "new_text": null,
          "old_line_content": "    mapAddressBook[dest].destdata.insert(std::make_pair(key, value));",
          "new_line_content": "        return true;",
          "content_same": false
        },
        {
          "line": 3560,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapAddressBook.end()",
          "new_text": null,
          "old_line_content": "    if(i != mapAddressBook.end())",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 3562,
          "old_api": "find",
          "new_api": null,
          "old_text": "i->second.destdata.find(key)",
          "new_text": null,
          "old_line_content": "        CAddressBookData::StringMap::const_iterator j = i->second.destdata.find(key);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3563,
          "old_api": "end",
          "new_api": null,
          "old_text": "i->second.destdata.end()",
          "new_text": null,
          "old_line_content": "        if(j != i->second.destdata.end())",
          "new_line_content": "bool CWallet::GetDestData(const CTxDestination &dest, const std::string &key, std::string *value) const",
          "content_same": false
        },
        {
          "line": 3575,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Wallet options:\")",
          "new_text": null,
          "old_line_content": "    std::string strUsage = HelpMessageGroup(_(\"Wallet options:\"));",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 3576,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Do not load the wallet and disable wallet RPC calls\")",
          "new_text": null,
          "old_line_content": "    strUsage += HelpMessageOpt(\"-disablewallet\", _(\"Do not load the wallet and disable wallet RPC calls\"));",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 3577,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Set key pool size to <n> (default: %u)\")",
          "new_text": null,
          "old_line_content": "    strUsage += HelpMessageOpt(\"-keypool=<n>\", strprintf(_(\"Set key pool size to <n> (default: %u)\"), DEFAULT_KEYPOOL_SIZE));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 3578,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"A fee rate (in %s/kB) that will be used when fee estimation has insufficient data (default: %s)\")",
          "new_text": null,
          "old_line_content": "    strUsage += HelpMessageOpt(\"-fallbackfee=<amt>\", strprintf(_(\"A fee rate (in %s/kB) that will be used when fee estimation has insufficient data (default: %s)\"),",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 3579,
          "old_api": "FormatMoney",
          "new_api": null,
          "old_text": "FormatMoney(DEFAULT_FALLBACK_FEE)",
          "new_text": null,
          "old_line_content": "                                                               CURRENCY_UNIT, FormatMoney(DEFAULT_FALLBACK_FEE)));",
          "new_line_content": "std::string CWallet::GetWalletHelpString(bool showDebug)",
          "content_same": false
        },
        {
          "line": 3580,
          "old_api": "_",
          "new_api": null,
          "old_text": "_(\"Fees (in %s/kB) smaller than this are considered zero fee for transaction creation (default: %s)\")",
          "new_text": null,
          "old_line_content": "    strUsage += HelpMessageOpt(\"-mintxfee=<amt>\", strprintf(_(\"Fees (in %s/kB) smaller than this are considered zero fee for transaction creation (default: %s)\"),",
          "new_line_content": "{",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 84,
      "total_additions": 184,
      "total_deletions": 184,
      "total_api_changes": 452
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 10,
        "api_related_lines": 452,
        "non_api_lines": 8,
        "non_api_line_numbers": [
          3072,
          3074,
          3075,
          3076,
          3077,
          3078,
          3080,
          3081
        ]
      }
    },
    "api_calls_before": 1368,
    "api_calls_after": 1368,
    "diff_info": {
      "added_lines": 9,
      "removed_lines": 3,
      "total_diff_lines": 27
    }
  }
}
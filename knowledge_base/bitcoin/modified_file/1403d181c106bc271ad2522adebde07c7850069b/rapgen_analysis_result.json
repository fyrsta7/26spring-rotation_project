{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/1403d181c106bc271ad2522adebde07c7850069b",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/1403d181c106bc271ad2522adebde07c7850069b/before.h",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/1403d181c106bc271ad2522adebde07c7850069b/after.h",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/1403d181c106bc271ad2522adebde07c7850069b/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 1057,
          "old_api": "::UnserializeMany(s, args...)",
          "new_api": "::SerializeMany(s, args...)",
          "old_text": "::UnserializeMany(s, args...)",
          "new_text": "::SerializeMany(s, args...)",
          "old_line_content": "    ::UnserializeMany(s, args...);",
          "new_line_content": "    ::SerializeMany(s, args...);",
          "content_same": false
        },
        {
          "line": 1063,
          "old_api": "::SerializeMany(s, args...)",
          "new_api": "::UnserializeMany(s, args...)",
          "old_text": "::SerializeMany(s, args...)",
          "new_text": "::UnserializeMany(s, args...)",
          "old_line_content": "    ::SerializeMany(s, args...);",
          "new_line_content": "    ::UnserializeMany(s, args...);",
          "content_same": false
        },
        {
          "line": 1102,
          "old_api": "GetSizeOfCompactSize",
          "new_api": "size",
          "old_text": "GetSizeOfCompactSize(nSize)",
          "new_text": "CSizeComputer(nVersion) << t).size()",
          "old_line_content": "    s.seek(GetSizeOfCompactSize(nSize));",
          "new_line_content": "    return (CSizeComputer(nVersion) << t).size();",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 1091,
          "old_api": null,
          "new_api": "GetSizeOfVarInt<I>(n)",
          "old_text": null,
          "new_text": "GetSizeOfVarInt<I>(n)",
          "old_line_content": "{",
          "new_line_content": "    s.seek(GetSizeOfVarInt<I>(n));",
          "content_same": false
        },
        {
          "line": 1096,
          "old_api": null,
          "new_api": "GetSizeOfCompactSize",
          "old_text": null,
          "new_text": "GetSizeOfCompactSize(nSize)",
          "old_line_content": "{",
          "new_line_content": "    s.seek(GetSizeOfCompactSize(nSize));",
          "content_same": false
        },
        {
          "line": 1074,
          "old_api": null,
          "new_api": "std::forward<Type>(obj)",
          "old_text": null,
          "new_text": "std::forward<Type>(obj)",
          "old_line_content": "{",
          "new_line_content": "    fn(s, std::forward<Type>(obj));",
          "content_same": false
        },
        {
          "line": 1109,
          "old_api": null,
          "new_api": "SerializeMany",
          "old_text": null,
          "new_text": "SerializeMany(sc, t...)",
          "old_line_content": "}",
          "new_line_content": "    SerializeMany(sc, t...);",
          "content_same": false
        },
        {
          "line": 1110,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "sc.size()",
          "old_line_content": "",
          "new_line_content": "    return sc.size();",
          "content_same": false
        },
        {
          "line": 1051,
          "old_api": null,
          "new_api": "::Unserialize(s, args)",
          "old_text": null,
          "new_text": "::Unserialize(s, args)",
          "old_line_content": "}",
          "new_line_content": "    (::Unserialize(s, args), ...);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 1056,
          "old_api": "::Unserialize(s, arg)",
          "new_api": null,
          "old_text": "::Unserialize(s, arg)",
          "new_text": null,
          "old_line_content": "    ::Unserialize(s, arg);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 1097,
          "old_api": "GetSizeOfVarInt<I>(n)",
          "new_api": null,
          "old_text": "GetSizeOfVarInt<I>(n)",
          "new_text": null,
          "old_line_content": "    s.seek(GetSizeOfVarInt<I>(n));",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1069,
          "old_api": "::UnserializeMany(s, args...)",
          "new_api": null,
          "old_text": "::UnserializeMany(s, args...)",
          "new_text": null,
          "old_line_content": "    ::UnserializeMany(s, args...);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 1108,
          "old_api": "size",
          "new_api": null,
          "old_text": "CSizeComputer(nVersion) << t).size()",
          "new_text": null,
          "old_line_content": "    return (CSizeComputer(nVersion) << t).size();",
          "new_line_content": "    CSizeComputer sc(nVersion);",
          "content_same": false
        },
        {
          "line": 1115,
          "old_api": "SerializeMany",
          "new_api": null,
          "old_text": "SerializeMany(sc, t...)",
          "new_text": null,
          "old_line_content": "    SerializeMany(sc, t...);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1116,
          "old_api": "size",
          "new_api": null,
          "old_text": "sc.size()",
          "new_text": null,
          "old_line_content": "    return sc.size();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 1086,
          "old_api": "std::forward<Type>(obj)",
          "new_api": null,
          "old_text": "std::forward<Type>(obj)",
          "new_text": null,
          "old_line_content": "    fn(s, std::forward<Type>(obj));",
          "new_line_content": "}",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 3,
      "total_additions": 6,
      "total_deletions": 7,
      "total_api_changes": 16
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 9,
        "api_related_lines": 16,
        "non_api_lines": 6,
        "non_api_line_numbers": [
          1048,
          1049,
          1050,
          1052,
          1053,
          1054
        ]
      }
    },
    "api_calls_before": 263,
    "api_calls_after": 262,
    "diff_info": {
      "added_lines": 3,
      "removed_lines": 9,
      "total_diff_lines": 25
    }
  }
}
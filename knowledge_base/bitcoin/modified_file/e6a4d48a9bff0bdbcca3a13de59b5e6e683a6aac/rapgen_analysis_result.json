{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/e6a4d48a9bff0bdbcca3a13de59b5e6e683a6aac",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/e6a4d48a9bff0bdbcca3a13de59b5e6e683a6aac/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/e6a4d48a9bff0bdbcca3a13de59b5e6e683a6aac/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/e6a4d48a9bff0bdbcca3a13de59b5e6e683a6aac/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 4349,
          "old_api": "count",
          "new_api": "contains",
          "old_text": "mapOrphanTransactions.count(inv.hash)",
          "new_text": "recentRejects->contains(inv.hash)",
          "old_line_content": "                   mapOrphanTransactions.count(inv.hash) ||",
          "new_line_content": "            return recentRejects->contains(inv.hash) ||",
          "content_same": false
        },
        {
          "line": 4350,
          "old_api": "HaveCoins",
          "new_api": "exists",
          "old_text": "pcoinsTip->HaveCoins(inv.hash)",
          "new_text": "mempool.exists(inv.hash)",
          "old_line_content": "                   pcoinsTip->HaveCoins(inv.hash);",
          "new_line_content": "                   mempool.exists(inv.hash) ||",
          "content_same": false
        },
        {
          "line": 4367,
          "old_api": "end",
          "new_api": "LOCK",
          "old_text": "pfrom->vRecvGetData.end()",
          "new_text": "LOCK(cs_main)",
          "old_line_content": "    while (it != pfrom->vRecvGetData.end()) {",
          "new_line_content": "    LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4369,
          "old_api": "SendBufferSize",
          "new_api": "end",
          "old_text": "SendBufferSize()",
          "new_text": "pfrom->vRecvGetData.end()",
          "old_line_content": "        if (pfrom->nSendSize >= SendBufferSize())",
          "new_line_content": "    while (it != pfrom->vRecvGetData.end()) {",
          "content_same": false
        },
        {
          "line": 4383,
          "old_api": "Contains",
          "new_api": "end",
          "old_text": "chainActive.Contains(mi->second)",
          "new_text": "mapBlockIndex.end()",
          "old_line_content": "                    if (chainActive.Contains(mi->second)) {",
          "new_line_content": "                if (mi != mapBlockIndex.end())",
          "content_same": false
        },
        {
          "line": 4392,
          "old_api": "GetBlockProofEquivalentTime",
          "new_api": "IsValid",
          "old_text": "GetBlockProofEquivalentTime(*pindexBestHeader, *mi->second, *pindexBestHeader, consensusParams)",
          "new_text": "mi->second->IsValid(BLOCK_VALID_SCRIPTS)",
          "old_line_content": "                            (GetBlockProofEquivalentTime(*pindexBestHeader, *mi->second, *pindexBestHeader, consensusParams) < nOneMonth);",
          "new_line_content": "                        send = mi->second->IsValid(BLOCK_VALID_SCRIPTS) && (pindexBestHeader != NULL) &&",
          "content_same": false
        },
        {
          "line": 4394,
          "old_api": "GetId",
          "new_api": "GetBlockProofEquivalentTime",
          "old_text": "pfrom->GetId()",
          "new_text": "GetBlockProofEquivalentTime(*pindexBestHeader, *mi->second, *pindexBestHeader, consensusParams)",
          "old_line_content": "                            LogPrintf(\"%s: ignoring request from peer=%i for old block that isn't in the main chain\\n\", __func__, pfrom->GetId());",
          "new_line_content": "                            (GetBlockProofEquivalentTime(*pindexBestHeader, *mi->second, *pindexBestHeader, consensusParams) < nOneMonth);",
          "content_same": false
        },
        {
          "line": 4403,
          "old_api": "GetId",
          "new_api": "GetBlockTime",
          "old_text": "pfrom->GetId()",
          "new_text": "mi->second->GetBlockTime()",
          "old_line_content": "                    LogPrint(\"net\", \"historical block serving limit reached, disconnect peer=%d\\n\", pfrom->GetId());",
          "new_line_content": "                if (send && CNode::OutboundTargetReached(true) && ( ((pindexBestHeader != NULL) && (pindexBestHeader->GetBlockTime() - mi->second->GetBlockTime() > nOneWeek)) || inv.type == MSG_FILTERED_BLOCK) && !pfrom->fWhitelisted)",
          "content_same": false
        },
        {
          "line": 4418,
          "old_api": "PushMessage",
          "new_api": "assert",
          "old_text": "pfrom->PushMessage(NetMsgType::BLOCK, block)",
          "new_text": "assert(!\"cannot load block from disk\")",
          "old_line_content": "                        pfrom->PushMessage(NetMsgType::BLOCK, block);",
          "new_line_content": "                        assert(!\"cannot load block from disk\");",
          "content_same": false
        },
        {
          "line": 4449,
          "old_api": "SetNull",
          "new_api": "Tip",
          "old_text": "pfrom->hashContinue.SetNull()",
          "new_text": "chainActive.Tip()->GetBlockHash()",
          "old_line_content": "                        pfrom->hashContinue.SetNull();",
          "new_line_content": "                        vInv.push_back(CInv(MSG_BLOCK, chainActive.Tip()->GetBlockHash()));",
          "content_same": false
        },
        {
          "line": 4460,
          "old_api": "end",
          "new_api": "LOCK",
          "old_text": "mapRelay.end()",
          "new_text": "LOCK(cs_mapRelay)",
          "old_line_content": "                    if (mi != mapRelay.end()) {",
          "new_line_content": "                    LOCK(cs_mapRelay);",
          "content_same": false
        },
        {
          "line": 4461,
          "old_api": "GetCommand",
          "new_api": "find",
          "old_text": "inv.GetCommand()",
          "new_text": "mapRelay.find(inv)",
          "old_line_content": "                        pfrom->PushMessage(inv.GetCommand(), (*mi).second);",
          "new_line_content": "                    map<CInv, CDataStream>::iterator mi = mapRelay.find(inv);",
          "content_same": false
        },
        {
          "line": 4469,
          "old_api": "reserve",
          "new_api": "lookup",
          "old_text": "ss.reserve(1000)",
          "new_text": "mempool.lookup(inv.hash, tx)",
          "old_line_content": "                        ss.reserve(1000);",
          "new_line_content": "                    if (mempool.lookup(inv.hash, tx)) {",
          "content_same": false
        },
        {
          "line": 4471,
          "old_api": "PushMessage",
          "new_api": "reserve",
          "old_text": "pfrom->PushMessage(NetMsgType::TX, ss)",
          "new_text": "ss.reserve(1000)",
          "old_line_content": "                        pfrom->PushMessage(NetMsgType::TX, ss);",
          "new_line_content": "                        ss.reserve(1000);",
          "content_same": false
        },
        {
          "line": 4490,
          "old_api": "empty",
          "new_api": "begin",
          "old_text": "vNotFound.empty()",
          "new_text": "pfrom->vRecvGetData.begin()",
          "old_line_content": "    if (!vNotFound.empty()) {",
          "new_line_content": "    pfrom->vRecvGetData.erase(pfrom->vRecvGetData.begin(), it);",
          "content_same": false
        },
        {
          "line": 4506,
          "old_api": "atoi",
          "new_api": "RandAddSeedPerfmon",
          "old_text": "atoi(mapArgs[\"-dropmessagestest\"])",
          "new_text": "RandAddSeedPerfmon()",
          "old_line_content": "    if (mapArgs.count(\"-dropmessagestest\") && GetRand(atoi(mapArgs[\"-dropmessagestest\"])) == 0)",
          "new_line_content": "    RandAddSeedPerfmon();",
          "content_same": false
        },
        {
          "line": 4508,
          "old_api": "LogPrintf",
          "new_api": "atoi",
          "old_text": "LogPrintf(\"dropmessagestest DROPPING RECV MESSAGE\\n\")",
          "new_text": "atoi(mapArgs[\"-dropmessagestest\"])",
          "old_line_content": "        LogPrintf(\"dropmessagestest DROPPING RECV MESSAGE\\n\");",
          "new_line_content": "    if (mapArgs.count(\"-dropmessagestest\") && GetRand(atoi(mapArgs[\"-dropmessagestest\"])) == 0)",
          "content_same": false
        },
        {
          "line": 4548,
          "old_api": "strprintf",
          "new_api": "LogPrintf",
          "old_text": "strprintf(\"Version must be %d or greater\", MIN_PEER_PROTO_VERSION)",
          "new_text": "LogPrintf(\"peer=%d using obsolete version %i; disconnecting\\n\", pfrom->id, pfrom->nVersion)",
          "old_line_content": "                               strprintf(\"Version must be %d or greater\", MIN_PEER_PROTO_VERSION));",
          "new_line_content": "            LogPrintf(\"peer=%d using obsolete version %i; disconnecting\\n\", pfrom->id, pfrom->nVersion);",
          "content_same": false
        },
        {
          "line": 4559,
          "old_api": "SanitizeString",
          "new_api": "empty",
          "old_text": "SanitizeString(pfrom->strSubVer)",
          "new_text": "vRecv.empty()",
          "old_line_content": "            pfrom->cleanSubVer = SanitizeString(pfrom->strSubVer);",
          "new_line_content": "        if (!vRecv.empty()) {",
          "content_same": false
        },
        {
          "line": 4561,
          "old_api": "empty",
          "new_api": "SanitizeString",
          "old_text": "vRecv.empty()",
          "new_text": "SanitizeString(pfrom->strSubVer)",
          "old_line_content": "        if (!vRecv.empty())",
          "new_line_content": "            pfrom->cleanSubVer = SanitizeString(pfrom->strSubVer);",
          "content_same": false
        },
        {
          "line": 4579,
          "old_api": "SeenLocal",
          "new_api": "IsRoutable",
          "old_text": "SeenLocal(addrMe)",
          "new_text": "addrMe.IsRoutable()",
          "old_line_content": "            SeenLocal(addrMe);",
          "new_line_content": "        if (pfrom->fInbound && addrMe.IsRoutable())",
          "content_same": false
        },
        {
          "line": 4600,
          "old_api": "GetLocalAddress",
          "new_api": "IsInitialBlockDownload",
          "old_text": "GetLocalAddress(&pfrom->addr)",
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "                CAddress addr = GetLocalAddress(&pfrom->addr);",
          "new_line_content": "            if (fListen && !IsInitialBlockDownload())",
          "content_same": false
        },
        {
          "line": 4603,
          "old_api": "ToString",
          "new_api": "IsRoutable",
          "old_text": "addr.ToString()",
          "new_text": "addr.IsRoutable()",
          "old_line_content": "                    LogPrintf(\"ProcessMessages: advertising address %s\\n\", addr.ToString());",
          "new_line_content": "                if (addr.IsRoutable())",
          "content_same": false
        },
        {
          "line": 4605,
          "old_api": "IsPeerAddrLocalGood",
          "new_api": "ToString",
          "old_text": "IsPeerAddrLocalGood(pfrom)",
          "new_text": "addr.ToString()",
          "old_line_content": "                } else if (IsPeerAddrLocalGood(pfrom)) {",
          "new_line_content": "                    LogPrintf(\"ProcessMessages: advertising address %s\\n\", addr.ToString());",
          "content_same": false
        },
        {
          "line": 4606,
          "old_api": "SetIP",
          "new_api": "PushAddress",
          "old_text": "addr.SetIP(pfrom->addrLocal)",
          "new_text": "pfrom->PushAddress(addr)",
          "old_line_content": "                    addr.SetIP(pfrom->addrLocal);",
          "new_line_content": "                    pfrom->PushAddress(addr);",
          "content_same": false
        },
        {
          "line": 4607,
          "old_api": "ToString",
          "new_api": "IsPeerAddrLocalGood",
          "old_text": "addr.ToString()",
          "new_text": "IsPeerAddrLocalGood(pfrom)",
          "old_line_content": "                    LogPrintf(\"ProcessMessages: advertising address %s\\n\", addr.ToString());",
          "new_line_content": "                } else if (IsPeerAddrLocalGood(pfrom)) {",
          "content_same": false
        },
        {
          "line": 4608,
          "old_api": "PushAddress",
          "new_api": "SetIP",
          "old_text": "pfrom->PushAddress(addr)",
          "new_text": "addr.SetIP(pfrom->addrLocal)",
          "old_line_content": "                    pfrom->PushAddress(addr);",
          "new_line_content": "                    addr.SetIP(pfrom->addrLocal);",
          "content_same": false
        },
        {
          "line": 4615,
          "old_api": "PushMessage",
          "new_api": "size",
          "old_text": "pfrom->PushMessage(NetMsgType::GETADDR)",
          "new_text": "addrman.size()",
          "old_line_content": "                pfrom->PushMessage(NetMsgType::GETADDR);",
          "new_line_content": "            if (pfrom->fOneShot || pfrom->nVersion >= CADDR_TIME_VERSION || addrman.size() < 1000)",
          "content_same": false
        },
        {
          "line": 4640,
          "old_api": "AddTimeData",
          "new_api": "GetTime",
          "old_text": "AddTimeData(pfrom->addr, nTimeOffset)",
          "new_text": "GetTime()",
          "old_line_content": "        AddTimeData(pfrom->addr, nTimeOffset);",
          "new_line_content": "        int64_t nTimeOffset = nTime - GetTime();",
          "content_same": false
        },
        {
          "line": 4682,
          "old_api": "GetId",
          "new_api": "size",
          "old_text": "pfrom->GetId()",
          "new_text": "vAddr.size()",
          "old_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "new_line_content": "        if (vAddr.size() > 1000)",
          "content_same": false
        },
        {
          "line": 4698,
          "old_api": "IsRoutable",
          "new_api": "AddAddressKnown",
          "old_text": "addr.IsRoutable()",
          "new_text": "pfrom->AddAddressKnown(addr)",
          "old_line_content": "            if (addr.nTime > nSince && !pfrom->fGetAddr && vAddr.size() <= 10 && addr.IsRoutable())",
          "new_line_content": "            pfrom->AddAddressKnown(addr);",
          "content_same": false
        },
        {
          "line": 4708,
          "old_api": "GetHash",
          "new_api": "IsNull",
          "old_text": "addr.GetHash()",
          "new_text": "hashSalt.IsNull()",
          "old_line_content": "                    uint64_t hashAddr = addr.GetHash();",
          "new_line_content": "                    if (hashSalt.IsNull())",
          "content_same": false
        },
        {
          "line": 4709,
          "old_api": "GetTime",
          "new_api": "GetRandHash",
          "old_text": "GetTime()",
          "new_text": "GetRandHash()",
          "old_line_content": "                    uint256 hashRand = ArithToUint256(UintToArith256(hashSalt) ^ (hashAddr<<32) ^ ((GetTime()+hashAddr)/(24*60*60)));",
          "new_line_content": "                        hashSalt = GetRandHash();",
          "content_same": false
        },
        {
          "line": 4710,
          "old_api": "END",
          "new_api": "GetHash",
          "old_text": "END(hashRand)",
          "new_text": "addr.GetHash()",
          "old_line_content": "                    hashRand = Hash(BEGIN(hashRand), END(hashRand));",
          "new_line_content": "                    uint64_t hashAddr = addr.GetHash();",
          "content_same": false
        },
        {
          "line": 4719,
          "old_api": "END",
          "new_api": "memcpy",
          "old_text": "END(hashKey)",
          "new_text": "memcpy(&nPointer, &pnode, sizeof(nPointer))",
          "old_line_content": "                        hashKey = Hash(BEGIN(hashKey), END(hashKey));",
          "new_line_content": "                        memcpy(&nPointer, &pnode, sizeof(nPointer));",
          "content_same": false
        },
        {
          "line": 4720,
          "old_api": "make_pair",
          "new_api": "UintToArith256",
          "old_text": "make_pair(hashKey, pnode)",
          "new_text": "UintToArith256(hashRand)",
          "old_line_content": "                        mapMix.insert(make_pair(hashKey, pnode));",
          "new_line_content": "                        uint256 hashKey = ArithToUint256(UintToArith256(hashRand) ^ nPointer);",
          "content_same": false
        },
        {
          "line": 4731,
          "old_api": "Add",
          "new_api": "push_back",
          "old_text": "addrman.Add(vAddrOk, pfrom->addr, 2 * 60 * 60)",
          "new_text": "vAddrOk.push_back(addr)",
          "old_line_content": "        addrman.Add(vAddrOk, pfrom->addr, 2 * 60 * 60);",
          "new_line_content": "                vAddrOk.push_back(addr);",
          "content_same": false
        },
        {
          "line": 4751,
          "old_api": "GetId",
          "new_api": "size",
          "old_text": "pfrom->GetId()",
          "new_text": "vInv.size()",
          "old_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "new_line_content": "        if (vInv.size() > MAX_INV_SZ)",
          "content_same": false
        },
        {
          "line": 4772,
          "old_api": "AlreadyHave",
          "new_api": "AddInventoryKnown",
          "old_text": "AlreadyHave(inv)",
          "new_text": "pfrom->AddInventoryKnown(inv)",
          "old_line_content": "            bool fAlreadyHave = AlreadyHave(inv);",
          "new_line_content": "            pfrom->AddInventoryKnown(inv);",
          "content_same": false
        },
        {
          "line": 4788,
          "old_api": "GetConsensus",
          "new_api": "GetLocator",
          "old_text": "chainparams.GetConsensus()",
          "new_text": "chainActive.GetLocator(pindexBestHeader)",
          "old_line_content": "                    if (CanDirectFetch(chainparams.GetConsensus()) &&",
          "new_line_content": "                    pfrom->PushMessage(NetMsgType::GETHEADERS, chainActive.GetLocator(pindexBestHeader), inv.hash);",
          "content_same": false
        },
        {
          "line": 4790,
          "old_api": "push_back",
          "new_api": "GetConsensus",
          "old_text": "vToFetch.push_back(inv)",
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "                        vToFetch.push_back(inv);",
          "new_line_content": "                    if (CanDirectFetch(chainparams.GetConsensus()) &&",
          "content_same": false
        },
        {
          "line": 4795,
          "old_api": "ToString",
          "new_api": "GetConsensus",
          "old_text": "inv.hash.ToString()",
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "                    LogPrint(\"net\", \"getheaders (%d) %s to peer=%d\\n\", pindexBestHeader->nHeight, inv.hash.ToString(), pfrom->id);",
          "new_line_content": "                        MarkBlockAsInFlight(pfrom->GetId(), inv.hash, chainparams.GetConsensus());",
          "content_same": false
        },
        {
          "line": 4803,
          "old_api": "AskFor",
          "new_api": "ToString",
          "old_text": "pfrom->AskFor(inv)",
          "new_text": "inv.hash.ToString()",
          "old_line_content": "                    pfrom->AskFor(inv);",
          "new_line_content": "                    LogPrint(\"net\", \"transaction (%s) inv sent in violation of protocol peer=%d\\n\", inv.hash.ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 4809,
          "old_api": "SendBufferSize",
          "new_api": "Inventory",
          "old_text": "SendBufferSize()",
          "new_text": "GetMainSignals().Inventory(inv.hash)",
          "old_line_content": "            if (pfrom->nSendSize > (SendBufferSize() * 2)) {",
          "new_line_content": "            GetMainSignals().Inventory(inv.hash);",
          "content_same": false
        },
        {
          "line": 4811,
          "old_api": "error",
          "new_api": "SendBufferSize",
          "old_text": "error(\"send buffer size() = %u\", pfrom->nSendSize)",
          "new_text": "SendBufferSize()",
          "old_line_content": "                return error(\"send buffer size() = %u\", pfrom->nSendSize);",
          "new_line_content": "            if (pfrom->nSendSize > (SendBufferSize() * 2)) {",
          "content_same": false
        },
        {
          "line": 4826,
          "old_api": "GetId",
          "new_api": "size",
          "old_text": "pfrom->GetId()",
          "new_text": "vInv.size()",
          "old_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "new_line_content": "        if (vInv.size() > MAX_INV_SZ)",
          "content_same": false
        },
        {
          "line": 4836,
          "old_api": "end",
          "new_api": "ToString",
          "old_text": "vInv.end()",
          "new_text": "vInv[0].ToString()",
          "old_line_content": "        pfrom->vRecvGetData.insert(pfrom->vRecvGetData.end(), vInv.begin(), vInv.end());",
          "new_line_content": "            LogPrint(\"net\", \"received getdata for: %s peer=%d\\n\", vInv[0].ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 4856,
          "old_api": "ToString",
          "new_api": "Next",
          "old_text": "hashStop.ToString()",
          "new_text": "chainActive.Next(pindex)",
          "old_line_content": "        LogPrint(\"net\", \"getblocks %d to %s limit %d from peer=%d\\n\", (pindex ? pindex->nHeight : -1), hashStop.IsNull() ? \"end\" : hashStop.ToString(), nLimit, pfrom->id);",
          "new_line_content": "            pindex = chainActive.Next(pindex);",
          "content_same": false
        },
        {
          "line": 4859,
          "old_api": "GetBlockHash",
          "new_api": "Next",
          "old_text": "pindex->GetBlockHash()",
          "new_text": "chainActive.Next(pindex)",
          "old_line_content": "            if (pindex->GetBlockHash() == hashStop)",
          "new_line_content": "        for (; pindex; pindex = chainActive.Next(pindex))",
          "content_same": false
        },
        {
          "line": 4861,
          "old_api": "ToString",
          "new_api": "GetBlockHash",
          "old_text": "pindex->GetBlockHash().ToString()",
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "                LogPrint(\"net\", \"  getblocks stopping at %d %s\\n\", pindex->nHeight, pindex->GetBlockHash().ToString());",
          "new_line_content": "            if (pindex->GetBlockHash() == hashStop)",
          "content_same": false
        },
        {
          "line": 4869,
          "old_api": "ToString",
          "new_api": "Tip",
          "old_text": "pindex->GetBlockHash().ToString()",
          "new_text": "chainActive.Tip()",
          "old_line_content": "                LogPrint(\"net\", \" getblocks stopping, pruned or too old block at %d %s\\n\", pindex->nHeight, pindex->GetBlockHash().ToString());",
          "new_line_content": "            if (fPruneMode && (!(pindex->nStatus & BLOCK_HAVE_DATA) || pindex->nHeight <= chainActive.Tip()->nHeight - nPrunedBlocksLikelyToHave))",
          "content_same": false
        },
        {
          "line": 4893,
          "old_api": "LogPrint",
          "new_api": "LOCK",
          "old_text": "LogPrint(\"net\", \"Ignoring getheaders from peer=%d because node is in initial block download\\n\", pfrom->id)",
          "new_text": "LOCK(cs_main)",
          "old_line_content": "            LogPrint(\"net\", \"Ignoring getheaders from peer=%d because node is in initial block download\\n\", pfrom->id);",
          "new_line_content": "        LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4899,
          "old_api": "IsNull",
          "new_api": "GetId",
          "old_text": "locator.IsNull()",
          "new_text": "pfrom->GetId()",
          "old_line_content": "        if (locator.IsNull())",
          "new_line_content": "        CNodeState *nodestate = State(pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 4912,
          "old_api": "Next",
          "new_api": "FindForkInGlobalIndex",
          "old_text": "chainActive.Next(pindex)",
          "new_text": "FindForkInGlobalIndex(chainActive, locator)",
          "old_line_content": "                pindex = chainActive.Next(pindex);",
          "new_line_content": "            pindex = FindForkInGlobalIndex(chainActive, locator);",
          "content_same": false
        },
        {
          "line": 4921,
          "old_api": "GetBlockHeader",
          "new_api": "Next",
          "old_text": "pindex->GetBlockHeader()",
          "new_text": "chainActive.Next(pindex)",
          "old_line_content": "            vHeaders.push_back(pindex->GetBlockHeader());",
          "new_line_content": "        for (; pindex; pindex = chainActive.Next(pindex))",
          "content_same": false
        },
        {
          "line": 4940,
          "old_api": "LogPrint",
          "new_api": "GetBoolArg",
          "old_text": "LogPrint(\"net\", \"transaction sent in violation of protocol peer=%d\\n\", pfrom->id)",
          "new_text": "GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)",
          "old_line_content": "            LogPrint(\"net\", \"transaction sent in violation of protocol peer=%d\\n\", pfrom->id);",
          "new_line_content": "        if (GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY) && (!pfrom->fWhitelisted || !GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)))",
          "content_same": false
        },
        {
          "line": 4952,
          "old_api": "LOCK",
          "new_api": "AddInventoryKnown",
          "old_text": "LOCK(cs_main)",
          "new_text": "pfrom->AddInventoryKnown(inv)",
          "old_line_content": "        LOCK(cs_main);",
          "new_line_content": "        pfrom->AddInventoryKnown(inv);",
          "content_same": false
        },
        {
          "line": 4960,
          "old_api": "CFeeRate",
          "new_api": "erase",
          "old_text": "CFeeRate(0)",
          "new_text": "mapAlreadyAskedFor.erase(inv.hash)",
          "old_line_content": "        CFeeRate txFeeRate = CFeeRate(0);",
          "new_line_content": "        mapAlreadyAskedFor.erase(inv.hash);",
          "content_same": false
        },
        {
          "line": 4962,
          "old_api": "check",
          "new_api": "CFeeRate",
          "old_text": "mempool.check(pcoinsTip)",
          "new_text": "CFeeRate(0)",
          "old_line_content": "            mempool.check(pcoinsTip);",
          "new_line_content": "        CFeeRate txFeeRate = CFeeRate(0);",
          "content_same": false
        },
        {
          "line": 4963,
          "old_api": "RelayTransaction",
          "new_api": "AcceptToMemoryPool",
          "old_text": "RelayTransaction(tx, txFeeRate)",
          "new_text": "AcceptToMemoryPool(mempool, state, tx, true, &fMissingInputs, &txFeeRate)",
          "old_line_content": "            RelayTransaction(tx, txFeeRate);",
          "new_line_content": "        if (!AlreadyHave(inv) && AcceptToMemoryPool(mempool, state, tx, true, &fMissingInputs, &txFeeRate)) {",
          "content_same": false
        },
        {
          "line": 4964,
          "old_api": "push_back",
          "new_api": "check",
          "old_text": "vWorkQueue.push_back(inv.hash)",
          "new_text": "mempool.check(pcoinsTip)",
          "old_line_content": "            vWorkQueue.push_back(inv.hash);",
          "new_line_content": "            mempool.check(pcoinsTip);",
          "content_same": false
        },
        {
          "line": 4966,
          "old_api": "GetHash",
          "new_api": "push_back",
          "old_text": "LogPrint(\"mempool\", \"AcceptToMemoryPool: peer=%d: accepted %s (poolsz %u txn, %u kB)\\n\",\n                pfrom->id,\n                tx.GetHash().ToString(),\n                mempool.size(), mempool.DynamicMemoryUsage() / 1000)",
          "new_text": "vWorkQueue.push_back(inv.hash)",
          "old_line_content": "            LogPrint(\"mempool\", \"AcceptToMemoryPool: peer=%d: accepted %s (poolsz %u txn, %u kB)\\n\",",
          "new_line_content": "            vWorkQueue.push_back(inv.hash);",
          "content_same": false
        },
        {
          "line": 4975,
          "old_api": "find",
          "new_api": "size",
          "old_text": "mapOrphanTransactionsByPrev.find(vWorkQueue[i])",
          "new_text": "vWorkQueue.size()",
          "old_line_content": "                map<uint256, set<uint256> >::iterator itByPrev = mapOrphanTransactionsByPrev.find(vWorkQueue[i]);",
          "new_line_content": "            for (unsigned int i = 0; i < vWorkQueue.size(); i++)",
          "content_same": false
        },
        {
          "line": 4978,
          "old_api": "begin",
          "new_api": "end",
          "old_text": "itByPrev->second.begin()",
          "new_text": "mapOrphanTransactionsByPrev.end()",
          "old_line_content": "                for (set<uint256>::iterator mi = itByPrev->second.begin();",
          "new_line_content": "                if (itByPrev == mapOrphanTransactionsByPrev.end())",
          "content_same": false
        },
        {
          "line": 4994,
          "old_api": "CFeeRate",
          "new_api": "count",
          "old_text": "CFeeRate(0)",
          "new_text": "setMisbehaving.count(fromPeer)",
          "old_line_content": "                    CFeeRate orphanFeeRate = CFeeRate(0);",
          "new_line_content": "                    if (setMisbehaving.count(fromPeer))",
          "content_same": false
        },
        {
          "line": 4996,
          "old_api": "ToString",
          "new_api": "CFeeRate",
          "old_text": "orphanHash.ToString()",
          "new_text": "CFeeRate(0)",
          "old_line_content": "                        LogPrint(\"mempool\", \"   accepted orphan tx %s\\n\", orphanHash.ToString());",
          "new_line_content": "                    CFeeRate orphanFeeRate = CFeeRate(0);",
          "content_same": false
        },
        {
          "line": 4997,
          "old_api": "RelayTransaction",
          "new_api": "AcceptToMemoryPool",
          "old_text": "RelayTransaction(orphanTx, orphanFeeRate)",
          "new_text": "AcceptToMemoryPool(mempool, stateDummy, orphanTx, true, &fMissingInputs2, &orphanFeeRate)",
          "old_line_content": "                        RelayTransaction(orphanTx, orphanFeeRate);",
          "new_line_content": "                    if (AcceptToMemoryPool(mempool, stateDummy, orphanTx, true, &fMissingInputs2, &orphanFeeRate)) {",
          "content_same": false
        },
        {
          "line": 4998,
          "old_api": "push_back",
          "new_api": "ToString",
          "old_text": "vWorkQueue.push_back(orphanHash)",
          "new_text": "orphanHash.ToString()",
          "old_line_content": "                        vWorkQueue.push_back(orphanHash);",
          "new_line_content": "                        LogPrint(\"mempool\", \"   accepted orphan tx %s\\n\", orphanHash.ToString());",
          "content_same": false
        },
        {
          "line": 4999,
          "old_api": "push_back",
          "new_api": "RelayTransaction",
          "old_text": "vEraseQueue.push_back(orphanHash)",
          "new_text": "RelayTransaction(orphanTx, orphanFeeRate)",
          "old_line_content": "                        vEraseQueue.push_back(orphanHash);",
          "new_line_content": "                        RelayTransaction(orphanTx, orphanFeeRate);",
          "content_same": false
        },
        {
          "line": 5009,
          "old_api": "ToString",
          "new_api": "Misbehaving",
          "old_text": "orphanHash.ToString()",
          "new_text": "Misbehaving(fromPeer, nDos)",
          "old_line_content": "                            LogPrint(\"mempool\", \"   invalid orphan tx %s\\n\", orphanHash.ToString());",
          "new_line_content": "                            Misbehaving(fromPeer, nDos);",
          "content_same": false
        },
        {
          "line": 5015,
          "old_api": "assert",
          "new_api": "ToString",
          "old_text": "assert(recentRejects)",
          "new_text": "orphanHash.ToString()",
          "old_line_content": "                        assert(recentRejects);",
          "new_line_content": "                        LogPrint(\"mempool\", \"   removed orphan tx %s\\n\", orphanHash.ToString());",
          "content_same": false
        },
        {
          "line": 5016,
          "old_api": "insert",
          "new_api": "push_back",
          "old_text": "recentRejects->insert(orphanHash)",
          "new_text": "vEraseQueue.push_back(orphanHash)",
          "old_line_content": "                        recentRejects->insert(orphanHash);",
          "new_line_content": "                        vEraseQueue.push_back(orphanHash);",
          "content_same": false
        },
        {
          "line": 5018,
          "old_api": "check",
          "new_api": "insert",
          "old_text": "mempool.check(pcoinsTip)",
          "new_text": "recentRejects->insert(orphanHash)",
          "old_line_content": "                    mempool.check(pcoinsTip);",
          "new_line_content": "                        recentRejects->insert(orphanHash);",
          "content_same": false
        },
        {
          "line": 5033,
          "old_api": "LogPrint",
          "new_api": "LimitOrphanTxSize",
          "old_text": "LogPrint(\"mempool\", \"mapOrphan overflow, removed %u tx\\n\", nEvicted)",
          "new_text": "LimitOrphanTxSize(nMaxOrphanTx)",
          "old_line_content": "                LogPrint(\"mempool\", \"mapOrphan overflow, removed %u tx\\n\", nEvicted);",
          "new_line_content": "            unsigned int nEvicted = LimitOrphanTxSize(nMaxOrphanTx);",
          "content_same": false
        },
        {
          "line": 5035,
          "old_api": "assert",
          "new_api": "LogPrint",
          "old_text": "assert(recentRejects)",
          "new_text": "LogPrint(\"mempool\", \"mapOrphan overflow, removed %u tx\\n\", nEvicted)",
          "old_line_content": "            assert(recentRejects);",
          "new_line_content": "                LogPrint(\"mempool\", \"mapOrphan overflow, removed %u tx\\n\", nEvicted);",
          "content_same": false
        },
        {
          "line": 5038,
          "old_api": "GetBoolArg",
          "new_api": "GetHash",
          "old_text": "GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY)",
          "new_text": "tx.GetHash()",
          "old_line_content": "            if (pfrom->fWhitelisted && GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY)) {",
          "new_line_content": "            recentRejects->insert(tx.GetHash());",
          "content_same": false
        },
        {
          "line": 5050,
          "old_api": "RelayTransaction",
          "new_api": "IsInvalid",
          "old_text": "RelayTransaction(tx, txFeeRate)",
          "new_text": "state.IsInvalid(nDoS)",
          "old_line_content": "                    RelayTransaction(tx, txFeeRate);",
          "new_line_content": "                if (!state.IsInvalid(nDoS) || nDoS == 0) {",
          "content_same": false
        },
        {
          "line": 5052,
          "old_api": "FormatStateMessage",
          "new_api": "RelayTransaction",
          "old_text": "FormatStateMessage(state)",
          "new_text": "RelayTransaction(tx, txFeeRate)",
          "old_line_content": "                    LogPrintf(\"Not relaying invalid transaction %s from whitelisted peer=%d (%s)\\n\", tx.GetHash().ToString(), pfrom->id, FormatStateMessage(state));",
          "new_line_content": "                    RelayTransaction(tx, txFeeRate);",
          "content_same": false
        },
        {
          "line": 5059,
          "old_api": "GetHash",
          "new_api": "IsInvalid",
          "old_text": "tx.GetHash().ToString()",
          "new_text": "state.IsInvalid(nDoS)",
          "old_line_content": "            LogPrint(\"mempoolrej\", \"%s from peer=%d was not accepted: %s\\n\", tx.GetHash().ToString(),",
          "new_line_content": "        if (state.IsInvalid(nDoS))",
          "content_same": false
        },
        {
          "line": 5061,
          "old_api": "FormatStateMessage",
          "new_api": "GetHash",
          "old_text": "FormatStateMessage(state)",
          "new_text": "tx.GetHash().ToString()",
          "old_line_content": "                FormatStateMessage(state));",
          "new_line_content": "            LogPrint(\"mempoolrej\", \"%s from peer=%d was not accepted: %s\\n\", tx.GetHash().ToString(),",
          "content_same": false
        },
        {
          "line": 5063,
          "old_api": "GetRejectCode",
          "new_api": "FormatStateMessage",
          "old_text": "state.GetRejectCode()",
          "new_text": "FormatStateMessage(state)",
          "old_line_content": "                pfrom->PushMessage(NetMsgType::REJECT, strCommand, (unsigned char)state.GetRejectCode(),",
          "new_line_content": "                FormatStateMessage(state));",
          "content_same": false
        },
        {
          "line": 5064,
          "old_api": "GetRejectReason",
          "new_api": "GetRejectCode",
          "old_text": "state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH)",
          "new_text": "state.GetRejectCode()",
          "old_line_content": "                                   state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH), inv.hash);",
          "new_line_content": "            if (state.GetRejectCode() < REJECT_INTERNAL) // Never send AcceptToMemoryPool's internal codes over P2P",
          "content_same": false
        },
        {
          "line": 5066,
          "old_api": "GetId",
          "new_api": "GetRejectReason",
          "old_text": "pfrom->GetId()",
          "new_text": "state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH)",
          "old_line_content": "                Misbehaving(pfrom->GetId(), nDoS);",
          "new_line_content": "                                   state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH), inv.hash);",
          "content_same": false
        },
        {
          "line": 5068,
          "old_api": "FlushStateToDisk",
          "new_api": "GetId",
          "old_text": "FlushStateToDisk(state, FLUSH_STATE_PERIODIC)",
          "new_text": "pfrom->GetId()",
          "old_line_content": "        FlushStateToDisk(state, FLUSH_STATE_PERIODIC);",
          "new_line_content": "                Misbehaving(pfrom->GetId(), nDoS);",
          "content_same": false
        },
        {
          "line": 5079,
          "old_api": "GetId",
          "new_api": "ReadCompactSize",
          "old_text": "pfrom->GetId()",
          "new_text": "ReadCompactSize(vRecv)",
          "old_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "new_line_content": "        unsigned int nCount = ReadCompactSize(vRecv);",
          "content_same": false
        },
        {
          "line": 5082,
          "old_api": "resize",
          "new_api": "error",
          "old_text": "headers.resize(nCount)",
          "new_text": "error(\"headers message size = %u\", nCount)",
          "old_line_content": "        headers.resize(nCount);",
          "new_line_content": "            return error(\"headers message size = %u\", nCount);",
          "content_same": false
        },
        {
          "line": 5100,
          "old_api": "error",
          "new_api": "GetBlockHash",
          "old_text": "error(\"non-continuous headers sequence\")",
          "new_text": "pindexLast->GetBlockHash()",
          "old_line_content": "                return error(\"non-continuous headers sequence\");",
          "new_line_content": "            if (pindexLast != NULL && header.hashPrevBlock != pindexLast->GetBlockHash()) {",
          "content_same": false
        },
        {
          "line": 5102,
          "old_api": "AcceptBlockHeader",
          "new_api": "error",
          "old_text": "AcceptBlockHeader(header, state, chainparams, &pindexLast)",
          "new_text": "error(\"non-continuous headers sequence\")",
          "old_line_content": "            if (!AcceptBlockHeader(header, state, chainparams, &pindexLast)) {",
          "new_line_content": "                return error(\"non-continuous headers sequence\");",
          "content_same": false
        },
        {
          "line": 5104,
          "old_api": "IsInvalid",
          "new_api": "AcceptBlockHeader",
          "old_text": "state.IsInvalid(nDoS)",
          "new_text": "AcceptBlockHeader(header, state, chainparams, &pindexLast)",
          "old_line_content": "                if (state.IsInvalid(nDoS)) {",
          "new_line_content": "            if (!AcceptBlockHeader(header, state, chainparams, &pindexLast)) {",
          "content_same": false
        },
        {
          "line": 5106,
          "old_api": "GetId",
          "new_api": "IsInvalid",
          "old_text": "pfrom->GetId()",
          "new_text": "state.IsInvalid(nDoS)",
          "old_line_content": "                        Misbehaving(pfrom->GetId(), nDoS);",
          "new_line_content": "                if (state.IsInvalid(nDoS)) {",
          "content_same": false
        },
        {
          "line": 5133,
          "old_api": "GetBlockHash",
          "new_api": "size",
          "old_text": "pindexWalk->GetBlockHash()",
          "new_text": "vToFetch.size()",
          "old_line_content": "                        !mapBlocksInFlight.count(pindexWalk->GetBlockHash())) {",
          "new_line_content": "            while (pindexWalk && !chainActive.Contains(pindexWalk) && vToFetch.size() <= MAX_BLOCKS_IN_TRANSIT_PER_PEER) {",
          "content_same": false
        },
        {
          "line": 5135,
          "old_api": "push_back",
          "new_api": "GetBlockHash",
          "old_text": "vToFetch.push_back(pindexWalk)",
          "new_text": "pindexWalk->GetBlockHash()",
          "old_line_content": "                    vToFetch.push_back(pindexWalk);",
          "new_line_content": "                        !mapBlocksInFlight.count(pindexWalk->GetBlockHash())) {",
          "content_same": false
        },
        {
          "line": 5145,
          "old_api": "ToString",
          "new_api": "Contains",
          "old_text": "pindexLast->GetBlockHash().ToString()",
          "new_text": "chainActive.Contains(pindexWalk)",
          "old_line_content": "                        pindexLast->GetBlockHash().ToString(),",
          "new_line_content": "            if (!chainActive.Contains(pindexWalk)) {",
          "content_same": false
        },
        {
          "line": 5157,
          "old_api": "ToString",
          "new_api": "GetBlockHash",
          "old_text": "LogPrint(\"net\", \"Requesting block %s from  peer=%d\\n\",\n                            pindex->GetBlockHash().ToString(), pfrom->id)",
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "                    LogPrint(\"net\", \"Requesting block %s from  peer=%d\\n\",",
          "new_line_content": "                    vGetData.push_back(CInv(MSG_BLOCK, pindex->GetBlockHash()));",
          "content_same": false
        },
        {
          "line": 5158,
          "old_api": "ToString",
          "new_api": "GetConsensus",
          "old_text": "pindex->GetBlockHash().ToString()",
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "                            pindex->GetBlockHash().ToString(), pfrom->id);",
          "new_line_content": "                    MarkBlockAsInFlight(pfrom->GetId(), pindex->GetBlockHash(), chainparams.GetConsensus(), pindex);",
          "content_same": false
        },
        {
          "line": 5160,
          "old_api": "size",
          "new_api": "ToString",
          "old_text": "vGetData.size()",
          "new_text": "pindex->GetBlockHash().ToString()",
          "old_line_content": "                if (vGetData.size() > 1) {",
          "new_line_content": "                            pindex->GetBlockHash().ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5162,
          "old_api": "ToString",
          "new_api": "size",
          "old_text": "pindexLast->GetBlockHash().ToString()",
          "new_text": "vGetData.size()",
          "old_line_content": "                            pindexLast->GetBlockHash().ToString(), pindexLast->nHeight);",
          "new_line_content": "                if (vGetData.size() > 1) {",
          "content_same": false
        },
        {
          "line": 5164,
          "old_api": "size",
          "new_api": "ToString",
          "old_text": "vGetData.size()",
          "new_text": "pindexLast->GetBlockHash().ToString()",
          "old_line_content": "                if (vGetData.size() > 0) {",
          "new_line_content": "                            pindexLast->GetBlockHash().ToString(), pindexLast->nHeight);",
          "content_same": false
        },
        {
          "line": 5181,
          "old_api": "AddInventoryKnown",
          "new_api": "ToString",
          "old_text": "pfrom->AddInventoryKnown(inv)",
          "new_text": "inv.hash.ToString()",
          "old_line_content": "        pfrom->AddInventoryKnown(inv);",
          "new_line_content": "        LogPrint(\"net\", \"received block %s peer=%d\\n\", inv.hash.ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5191,
          "old_api": "IsInvalid",
          "new_api": "ProcessNewBlock",
          "old_text": "state.IsInvalid(nDoS)",
          "new_text": "ProcessNewBlock(state, chainparams, pfrom, &block, forceProcessing, NULL)",
          "old_line_content": "        if (state.IsInvalid(nDoS)) {",
          "new_line_content": "        ProcessNewBlock(state, chainparams, pfrom, &block, forceProcessing, NULL);",
          "content_same": false
        },
        {
          "line": 5193,
          "old_api": "GetRejectCode",
          "new_api": "IsInvalid",
          "old_text": "state.GetRejectCode()",
          "new_text": "state.IsInvalid(nDoS)",
          "old_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, (unsigned char)state.GetRejectCode(),",
          "new_line_content": "        if (state.IsInvalid(nDoS)) {",
          "content_same": false
        },
        {
          "line": 5194,
          "old_api": "GetRejectReason",
          "new_api": "GetRejectCode",
          "old_text": "state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH)",
          "new_text": "state.GetRejectCode()",
          "old_line_content": "                               state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH), inv.hash);",
          "new_line_content": "            assert (state.GetRejectCode() < REJECT_INTERNAL); // Blocks are never rejected with internal reject codes",
          "content_same": false
        },
        {
          "line": 5196,
          "old_api": "LOCK",
          "new_api": "GetRejectReason",
          "old_text": "LOCK(cs_main)",
          "new_text": "state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH)",
          "old_line_content": "                LOCK(cs_main);",
          "new_line_content": "                               state.GetRejectReason().substr(0, MAX_REJECT_MESSAGE_LENGTH), inv.hash);",
          "content_same": false
        },
        {
          "line": 5219,
          "old_api": "PushAddress",
          "new_api": "GetAddr",
          "old_text": "pfrom->PushAddress(addr)",
          "new_text": "addrman.GetAddr()",
          "old_line_content": "            pfrom->PushAddress(addr);",
          "new_line_content": "        vector<CAddress> vAddr = addrman.GetAddr();",
          "content_same": false
        },
        {
          "line": 5227,
          "old_api": "GetId",
          "new_api": "CNode::OutboundTargetReached(false)",
          "old_text": "pfrom->GetId()",
          "new_text": "CNode::OutboundTargetReached(false)",
          "old_line_content": "            LogPrint(\"net\", \"mempool request with bandwidth limit reached, disconnect peer=%d\\n\", pfrom->GetId());",
          "new_line_content": "        if (CNode::OutboundTargetReached(false) && !pfrom->fWhitelisted)",
          "content_same": false
        },
        {
          "line": 5242,
          "old_api": "IsRelevantAndUpdate",
          "new_api": "lookup",
          "old_text": "pfrom->pfilter->IsRelevantAndUpdate(tx)",
          "new_text": "mempool.lookup(hash, tx)",
          "old_line_content": "                if (!pfrom->pfilter->IsRelevantAndUpdate(tx)) continue;",
          "new_line_content": "                bool fInMemPool = mempool.lookup(hash, tx);",
          "content_same": false
        },
        {
          "line": 5248,
          "old_api": "GetFeePerK",
          "new_api": "lookupFeeRate",
          "old_text": "feeRate.GetFeePerK()",
          "new_text": "mempool.lookupFeeRate(hash, feeRate)",
          "old_line_content": "                if (feeRate.GetFeePerK() < pfrom->minFeeFilter)",
          "new_line_content": "                mempool.lookupFeeRate(hash, feeRate);",
          "content_same": false
        },
        {
          "line": 5253,
          "old_api": "PushMessage",
          "new_api": "push_back",
          "old_text": "pfrom->PushMessage(NetMsgType::INV, vInv)",
          "new_text": "vInv.push_back(inv)",
          "old_line_content": "                pfrom->PushMessage(NetMsgType::INV, vInv);",
          "new_line_content": "            vInv.push_back(inv);",
          "content_same": false
        },
        {
          "line": 5254,
          "old_api": "clear",
          "new_api": "size",
          "old_text": "vInv.clear()",
          "new_text": "vInv.size()",
          "old_line_content": "                vInv.clear();",
          "new_line_content": "            if (vInv.size() == MAX_INV_SZ) {",
          "content_same": false
        },
        {
          "line": 5348,
          "old_api": "GetId",
          "new_api": "IsWithinSizeConstraints",
          "old_text": "pfrom->GetId()",
          "new_text": "filter.IsWithinSizeConstraints()",
          "old_line_content": "            Misbehaving(pfrom->GetId(), 100);",
          "new_line_content": "        if (!filter.IsWithinSizeConstraints())",
          "content_same": false
        },
        {
          "line": 5369,
          "old_api": "GetId",
          "new_api": "size",
          "old_text": "pfrom->GetId()",
          "new_text": "vData.size()",
          "old_line_content": "            Misbehaving(pfrom->GetId(), 100);",
          "new_line_content": "        if (vData.size() > MAX_SCRIPT_ELEMENT_SIZE)",
          "content_same": false
        },
        {
          "line": 5371,
          "old_api": "LOCK",
          "new_api": "GetId",
          "old_text": "LOCK(pfrom->cs_filter)",
          "new_text": "pfrom->GetId()",
          "old_line_content": "            LOCK(pfrom->cs_filter);",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 100);",
          "content_same": false
        },
        {
          "line": 5373,
          "old_api": "insert",
          "new_api": "LOCK",
          "old_text": "pfrom->pfilter->insert(vData)",
          "new_text": "LOCK(pfrom->cs_filter)",
          "old_line_content": "                pfrom->pfilter->insert(vData);",
          "new_line_content": "            LOCK(pfrom->cs_filter);",
          "content_same": false
        },
        {
          "line": 5375,
          "old_api": "GetId",
          "new_api": "insert",
          "old_text": "pfrom->GetId()",
          "new_text": "pfrom->pfilter->insert(vData)",
          "old_line_content": "                Misbehaving(pfrom->GetId(), 100);",
          "new_line_content": "                pfrom->pfilter->insert(vData);",
          "content_same": false
        },
        {
          "line": 5405,
          "old_api": "str",
          "new_api": "ToString",
          "old_text": "ss.str()",
          "new_text": "hash.ToString()",
          "old_line_content": "                LogPrint(\"net\", \"Reject %s\\n\", SanitizeString(ss.str()));",
          "new_line_content": "                    ss << \": hash \" << hash.ToString();",
          "content_same": false
        },
        {
          "line": 5418,
          "old_api": "LOCK",
          "new_api": "MoneyRange",
          "old_text": "LOCK(pfrom->cs_feeFilter)",
          "new_text": "MoneyRange(newFeeFilter)",
          "old_line_content": "                LOCK(pfrom->cs_feeFilter);",
          "new_line_content": "        if (MoneyRange(newFeeFilter)) {",
          "content_same": false
        },
        {
          "line": 5458,
          "old_api": "begin",
          "new_api": "empty",
          "old_text": "pfrom->vRecvMsg.begin()",
          "new_text": "pfrom->vRecvGetData.empty()",
          "old_line_content": "    std::deque<CNetMessage>::iterator it = pfrom->vRecvMsg.begin();",
          "new_line_content": "    if (!pfrom->vRecvGetData.empty()) return fOk;",
          "content_same": false
        },
        {
          "line": 5461,
          "old_api": "SendBufferSize",
          "new_api": "end",
          "old_text": "SendBufferSize()",
          "new_text": "pfrom->vRecvMsg.end()",
          "old_line_content": "        if (pfrom->nSendSize >= SendBufferSize())",
          "new_line_content": "    while (!pfrom->fDisconnect && it != pfrom->vRecvMsg.end()) {",
          "content_same": false
        },
        {
          "line": 5490,
          "old_api": "GetCommand",
          "new_api": "MessageStart",
          "old_text": "hdr.GetCommand()",
          "new_text": "chainparams.MessageStart()",
          "old_line_content": "            LogPrintf(\"PROCESSMESSAGE: ERRORS IN HEADER %s peer=%d\\n\", SanitizeString(hdr.GetCommand()), pfrom->id);",
          "new_line_content": "        if (!hdr.IsValid(chainparams.MessageStart()))",
          "content_same": false
        },
        {
          "line": 5601,
          "old_api": "AdvertiseLocal",
          "new_api": "GetTimeMicros",
          "old_text": "AdvertiseLocal(pto)",
          "new_text": "GetTimeMicros()",
          "old_line_content": "            AdvertiseLocal(pto);",
          "new_line_content": "        int64_t nNow = GetTimeMicros();",
          "content_same": false
        },
        {
          "line": 5602,
          "old_api": "PoissonNextSend",
          "new_api": "IsInitialBlockDownload",
          "old_text": "PoissonNextSend(nNow, AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL)",
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "            pto->nNextLocalAddrSend = PoissonNextSend(nNow, AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL);",
          "new_line_content": "        if (!IsInitialBlockDownload() && pto->nNextLocalAddrSend < nNow) {",
          "content_same": false
        },
        {
          "line": 5611,
          "old_api": "size",
          "new_api": "PoissonNextSend",
          "old_text": "pto->vAddrToSend.size()",
          "new_text": "PoissonNextSend(nNow, AVG_ADDRESS_BROADCAST_INTERVAL)",
          "old_line_content": "            vAddr.reserve(pto->vAddrToSend.size());",
          "new_line_content": "            pto->nNextAddrSend = PoissonNextSend(nNow, AVG_ADDRESS_BROADCAST_INTERVAL);",
          "content_same": false
        },
        {
          "line": 5619,
          "old_api": "size",
          "new_api": "push_back",
          "old_text": "vAddr.size()",
          "new_text": "vAddr.push_back(addr)",
          "old_line_content": "                    if (vAddr.size() >= 1000)",
          "new_line_content": "                    vAddr.push_back(addr);",
          "content_same": false
        },
        {
          "line": 5621,
          "old_api": "PushMessage",
          "new_api": "size",
          "old_text": "pto->PushMessage(NetMsgType::ADDR, vAddr)",
          "new_text": "vAddr.size()",
          "old_line_content": "                        pto->PushMessage(NetMsgType::ADDR, vAddr);",
          "new_line_content": "                    if (vAddr.size() >= 1000)",
          "content_same": false
        },
        {
          "line": 5628,
          "old_api": "PushMessage",
          "new_api": "clear",
          "old_text": "pto->PushMessage(NetMsgType::ADDR, vAddr)",
          "new_text": "pto->vAddrToSend.clear()",
          "old_line_content": "                pto->PushMessage(NetMsgType::ADDR, vAddr);",
          "new_line_content": "            pto->vAddrToSend.clear();",
          "content_same": false
        },
        {
          "line": 5680,
          "old_api": "Broadcast",
          "new_api": "IsInitialBlockDownload",
          "old_text": "GetMainSignals().Broadcast(nTimeBestReceived)",
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "            GetMainSignals().Broadcast(nTimeBestReceived);",
          "new_line_content": "        if (!fReindex && !fImporting && !IsInitialBlockDownload())",
          "content_same": false
        },
        {
          "line": 5696,
          "old_api": "size",
          "new_api": "LOCK",
          "old_text": "pto->vBlockHashesToAnnounce.size()",
          "new_text": "LOCK(pto->cs_inventory)",
          "old_line_content": "            bool fRevertToInv = (!state.fPreferHeaders || pto->vBlockHashesToAnnounce.size() > MAX_BLOCKS_TO_ANNOUNCE);",
          "new_line_content": "            LOCK(pto->cs_inventory);",
          "content_same": false
        },
        {
          "line": 5698,
          "old_api": "ProcessBlockAvailability",
          "new_api": "size",
          "old_text": "ProcessBlockAvailability(pto->id)",
          "new_text": "pto->vBlockHashesToAnnounce.size()",
          "old_line_content": "            ProcessBlockAvailability(pto->id); // ensure pindexBestKnownBlock is up-to-date",
          "new_line_content": "            bool fRevertToInv = (!state.fPreferHeaders || pto->vBlockHashesToAnnounce.size() > MAX_BLOCKS_TO_ANNOUNCE);",
          "content_same": false
        },
        {
          "line": 5740,
          "old_api": "find",
          "new_api": "empty",
          "old_text": "mapBlockIndex.find(hashToAnnounce)",
          "new_text": "pto->vBlockHashesToAnnounce.empty()",
          "old_line_content": "                    BlockMap::iterator mi = mapBlockIndex.find(hashToAnnounce);",
          "new_line_content": "                if (!pto->vBlockHashesToAnnounce.empty()) {",
          "content_same": false
        },
        {
          "line": 5741,
          "old_api": "end",
          "new_api": "back",
          "old_text": "mapBlockIndex.end()",
          "new_text": "pto->vBlockHashesToAnnounce.back()",
          "old_line_content": "                    assert(mi != mapBlockIndex.end());",
          "new_line_content": "                    const uint256 &hashToAnnounce = pto->vBlockHashesToAnnounce.back();",
          "content_same": false
        },
        {
          "line": 5757,
          "old_api": "ToString",
          "new_api": "PeerHasHeader",
          "old_text": "LogPrint(\"net\", \"%s: sending inv peer=%d hash=%s\\n\", __func__,\n                            pto->id, hashToAnnounce.ToString())",
          "new_text": "PeerHasHeader(&state, pindex)",
          "old_line_content": "                        LogPrint(\"net\", \"%s: sending inv peer=%d hash=%s\\n\", __func__,",
          "new_line_content": "                    if (!PeerHasHeader(&state, pindex)) {",
          "content_same": false
        },
        {
          "line": 5758,
          "old_api": "ToString",
          "new_api": "CInv",
          "old_text": "hashToAnnounce.ToString()",
          "new_text": "CInv(MSG_BLOCK, hashToAnnounce)",
          "old_line_content": "                            pto->id, hashToAnnounce.ToString());",
          "new_line_content": "                        pto->PushInventory(CInv(MSG_BLOCK, hashToAnnounce));",
          "content_same": false
        },
        {
          "line": 5763,
          "old_api": "size",
          "new_api": "empty",
          "old_text": "LogPrint(\"net\", \"%s: %u headers, range (%s, %s), to peer=%d\\n\", __func__,\n                            vHeaders.size(),\n                            vHeaders.front().GetHash().ToString(),\n                            vHeaders.back().GetHash().ToString(), pto->id)",
          "new_text": "vHeaders.empty()",
          "old_line_content": "                    LogPrint(\"net\", \"%s: %u headers, range (%s, %s), to peer=%d\\n\", __func__,",
          "new_line_content": "            } else if (!vHeaders.empty()) {",
          "content_same": false
        },
        {
          "line": 5765,
          "old_api": "front",
          "new_api": "size",
          "old_text": "vHeaders.front().GetHash().ToString()",
          "new_text": "LogPrint(\"net\", \"%s: %u headers, range (%s, %s), to peer=%d\\n\", __func__,\n                            vHeaders.size(),\n                            vHeaders.front().GetHash().ToString(),\n                            vHeaders.back().GetHash().ToString(), pto->id)",
          "old_line_content": "                            vHeaders.front().GetHash().ToString(),",
          "new_line_content": "                    LogPrint(\"net\", \"%s: %u headers, range (%s, %s), to peer=%d\\n\", __func__,",
          "content_same": false
        },
        {
          "line": 5766,
          "old_api": "back",
          "new_api": "size",
          "old_text": "vHeaders.back().GetHash().ToString()",
          "new_text": "vHeaders.size()",
          "old_line_content": "                            vHeaders.back().GetHash().ToString(), pto->id);",
          "new_line_content": "                            vHeaders.size(),",
          "content_same": false
        },
        {
          "line": 5768,
          "old_api": "front",
          "new_api": "back",
          "old_text": "LogPrint(\"net\", \"%s: sending header %s to peer=%d\\n\", __func__,\n                            vHeaders.front().GetHash().ToString(), pto->id)",
          "new_text": "vHeaders.back().GetHash().ToString()",
          "old_line_content": "                    LogPrint(\"net\", \"%s: sending header %s to peer=%d\\n\", __func__,",
          "new_line_content": "                            vHeaders.back().GetHash().ToString(), pto->id);",
          "content_same": false
        },
        {
          "line": 5771,
          "old_api": "PushMessage",
          "new_api": "front",
          "old_text": "pto->PushMessage(NetMsgType::HEADERS, vHeaders)",
          "new_text": "vHeaders.front().GetHash().ToString()",
          "old_line_content": "                pto->PushMessage(NetMsgType::HEADERS, vHeaders);",
          "new_line_content": "                            vHeaders.front().GetHash().ToString(), pto->id);",
          "content_same": false
        },
        {
          "line": 5788,
          "old_api": "LOCK",
          "new_api": "PoissonNextSend",
          "old_text": "LOCK(pto->cs_inventory)",
          "new_text": "PoissonNextSend(nNow, AVG_INVENTORY_BROADCAST_INTERVAL)",
          "old_line_content": "            LOCK(pto->cs_inventory);",
          "new_line_content": "                pto->nNextInvSend = PoissonNextSend(nNow, AVG_INVENTORY_BROADCAST_INTERVAL);",
          "content_same": false
        },
        {
          "line": 5790,
          "old_api": "size",
          "new_api": "LOCK",
          "old_text": "pto->vInventoryToSend.size()",
          "new_text": "LOCK(pto->cs_inventory)",
          "old_line_content": "            vInvWait.reserve(pto->vInventoryToSend.size());",
          "new_line_content": "            LOCK(pto->cs_inventory);",
          "content_same": false
        },
        {
          "line": 5803,
          "old_api": "UintToArith256",
          "new_api": "IsNull",
          "old_text": "UintToArith256(hashSalt)",
          "new_text": "hashSalt.IsNull()",
          "old_line_content": "                    uint256 hashRand = ArithToUint256(UintToArith256(inv.hash) ^ UintToArith256(hashSalt));",
          "new_line_content": "                    if (hashSalt.IsNull())",
          "content_same": false
        },
        {
          "line": 5804,
          "old_api": "END",
          "new_api": "GetRandHash",
          "old_text": "END(hashRand)",
          "new_text": "GetRandHash()",
          "old_line_content": "                    hashRand = Hash(BEGIN(hashRand), END(hashRand));",
          "new_line_content": "                        hashSalt = GetRandHash();",
          "content_same": false
        },
        {
          "line": 5816,
          "old_api": "push_back",
          "new_api": "insert",
          "old_text": "vInv.push_back(inv)",
          "new_text": "pto->filterInventoryKnown.insert(inv.hash)",
          "old_line_content": "                vInv.push_back(inv);",
          "new_line_content": "                pto->filterInventoryKnown.insert(inv.hash);",
          "content_same": false
        },
        {
          "line": 5819,
          "old_api": "PushMessage",
          "new_api": "size",
          "old_text": "pto->PushMessage(NetMsgType::INV, vInv)",
          "new_text": "vInv.size()",
          "old_line_content": "                    pto->PushMessage(NetMsgType::INV, vInv);",
          "new_line_content": "                if (vInv.size() >= 1000)",
          "content_same": false
        },
        {
          "line": 5860,
          "old_api": "GetBlockHash",
          "new_api": "GetId",
          "old_text": "pindex->GetBlockHash()",
          "new_text": "pto->GetId()",
          "old_line_content": "                vGetData.push_back(CInv(MSG_BLOCK, pindex->GetBlockHash()));",
          "new_line_content": "            FindNextBlocksToDownload(pto->GetId(), MAX_BLOCKS_IN_TRANSIT_PER_PEER - state.nBlocksInFlight, vToDownload, staller);",
          "content_same": false
        },
        {
          "line": 5862,
          "old_api": "ToString",
          "new_api": "GetBlockHash",
          "old_text": "pindex->GetBlockHash().ToString()",
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "                LogPrint(\"net\", \"Requesting block %s (%d) peer=%d\\n\", pindex->GetBlockHash().ToString(),",
          "new_line_content": "                vGetData.push_back(CInv(MSG_BLOCK, pindex->GetBlockHash()));",
          "content_same": false
        },
        {
          "line": 5868,
          "old_api": "LogPrint",
          "new_api": "State",
          "old_text": "LogPrint(\"net\", \"Stall started peer=%d\\n\", staller)",
          "new_text": "State(staller)",
          "old_line_content": "                    LogPrint(\"net\", \"Stall started peer=%d\\n\", staller);",
          "new_line_content": "                if (State(staller)->nStallingSince == 0) {",
          "content_same": false
        },
        {
          "line": 5884,
          "old_api": "size",
          "new_api": "ToString",
          "old_text": "vGetData.size()",
          "new_text": "inv.ToString()",
          "old_line_content": "                if (vGetData.size() >= 1000)",
          "new_line_content": "                    LogPrint(\"net\", \"Requesting %s peer=%d\\n\", inv.ToString(), pto->id);",
          "content_same": false
        },
        {
          "line": 5886,
          "old_api": "PushMessage",
          "new_api": "size",
          "old_text": "pto->PushMessage(NetMsgType::GETDATA, vGetData)",
          "new_text": "vGetData.size()",
          "old_line_content": "                    pto->PushMessage(NetMsgType::GETDATA, vGetData);",
          "new_line_content": "                if (vGetData.size() >= 1000)",
          "content_same": false
        },
        {
          "line": 5893,
          "old_api": "begin",
          "new_api": "erase",
          "old_text": "pto->mapAskFor.begin()",
          "new_text": "pto->setAskFor.erase(inv.hash)",
          "old_line_content": "            pto->mapAskFor.erase(pto->mapAskFor.begin());",
          "new_line_content": "                pto->setAskFor.erase(inv.hash);",
          "content_same": false
        },
        {
          "line": 5895,
          "old_api": "empty",
          "new_api": "begin",
          "old_text": "vGetData.empty()",
          "new_text": "pto->mapAskFor.begin()",
          "old_line_content": "        if (!vGetData.empty())",
          "new_line_content": "            pto->mapAskFor.erase(pto->mapAskFor.begin());",
          "content_same": false
        },
        {
          "line": 5904,
          "old_api": "GetArg",
          "new_api": "GetBoolArg",
          "old_text": "GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE)",
          "new_text": "GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER)",
          "old_line_content": "            CAmount currentFilter = mempool.GetMinFee(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();",
          "new_line_content": "        if (pto->nVersion >= FEEFILTER_VERSION && GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER) &&",
          "content_same": false
        },
        {
          "line": 5905,
          "old_api": "GetTimeMicros",
          "new_api": "GetBoolArg",
          "old_text": "GetTimeMicros()",
          "new_text": "GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY)",
          "old_line_content": "            int64_t timeNow = GetTimeMicros();",
          "new_line_content": "            !(pto->fWhitelisted && GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY))) {",
          "content_same": false
        },
        {
          "line": 5907,
          "old_api": "round",
          "new_api": "GetTimeMicros",
          "old_text": "filterRounder.round(currentFilter)",
          "new_text": "GetTimeMicros()",
          "old_line_content": "                CAmount filterToSend = filterRounder.round(currentFilter);",
          "new_line_content": "            int64_t timeNow = GetTimeMicros();",
          "content_same": false
        },
        {
          "line": 5909,
          "old_api": "PushMessage",
          "new_api": "round",
          "old_text": "pto->PushMessage(NetMsgType::FEEFILTER, filterToSend)",
          "new_text": "filterRounder.round(currentFilter)",
          "old_line_content": "                    pto->PushMessage(NetMsgType::FEEFILTER, filterToSend);",
          "new_line_content": "                CAmount filterToSend = filterRounder.round(currentFilter);",
          "content_same": false
        },
        {
          "line": 5944,
          "old_api": "clear",
          "new_api": "end",
          "old_text": "mapBlockIndex.clear()",
          "new_text": "mapBlockIndex.end()",
          "old_line_content": "        mapBlockIndex.clear();",
          "new_line_content": "        for (; it1 != mapBlockIndex.end(); it1++)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 4351,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "mapOrphanTransactions.count(inv.hash)",
          "old_line_content": "        }",
          "new_line_content": "                   mapOrphanTransactions.count(inv.hash) ||",
          "content_same": false
        },
        {
          "line": 4352,
          "old_api": null,
          "new_api": "HaveCoinsInCache",
          "old_text": null,
          "new_text": "pcoinsTip->HaveCoinsInCache(inv.hash)",
          "old_line_content": "    case MSG_BLOCK:",
          "new_line_content": "                   pcoinsTip->HaveCoinsInCache(inv.hash);",
          "content_same": false
        },
        {
          "line": 4355,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "mapBlockIndex.count(inv.hash)",
          "old_line_content": "    // Don't know what it is, just say we already got one",
          "new_line_content": "        return mapBlockIndex.count(inv.hash);",
          "content_same": false
        },
        {
          "line": 4363,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "pfrom->vRecvGetData.begin()",
          "old_line_content": "    vector<CInv> vNotFound;",
          "new_line_content": "    std::deque<CInv>::iterator it = pfrom->vRecvGetData.begin();",
          "content_same": false
        },
        {
          "line": 4371,
          "old_api": null,
          "new_api": "SendBufferSize",
          "old_text": null,
          "new_text": "SendBufferSize()",
          "old_line_content": "",
          "new_line_content": "        if (pfrom->nSendSize >= SendBufferSize())",
          "content_same": false
        },
        {
          "line": 4376,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "",
          "new_line_content": "            boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 4382,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapBlockIndex.find(inv.hash)",
          "old_line_content": "                {",
          "new_line_content": "                BlockMap::iterator mi = mapBlockIndex.find(inv.hash);",
          "content_same": false
        },
        {
          "line": 4385,
          "old_api": null,
          "new_api": "Contains",
          "old_text": null,
          "new_text": "chainActive.Contains(mi->second)",
          "old_line_content": "                    } else {",
          "new_line_content": "                    if (chainActive.Contains(mi->second)) {",
          "content_same": false
        },
        {
          "line": 4393,
          "old_api": null,
          "new_api": "GetBlockTime",
          "old_text": null,
          "new_text": "mi->second->GetBlockTime()",
          "old_line_content": "                        if (!send) {",
          "new_line_content": "                            (pindexBestHeader->GetBlockTime() - mi->second->GetBlockTime() < nOneMonth) &&",
          "content_same": false
        },
        {
          "line": 4396,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "                    }",
          "new_line_content": "                            LogPrintf(\"%s: ignoring request from peer=%i for old block that isn't in the main chain\\n\", __func__, pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 4405,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "                    //disconnect node",
          "new_line_content": "                    LogPrint(\"net\", \"historical block serving limit reached, disconnect peer=%d\\n\", pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 4417,
          "old_api": null,
          "new_api": "ReadBlockFromDisk",
          "old_text": null,
          "new_text": "ReadBlockFromDisk(block, (*mi).second, consensusParams)",
          "old_line_content": "                    if (inv.type == MSG_BLOCK)",
          "new_line_content": "                    if (!ReadBlockFromDisk(block, (*mi).second, consensusParams))",
          "content_same": false
        },
        {
          "line": 4420,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::BLOCK, block)",
          "old_line_content": "                    {",
          "new_line_content": "                        pfrom->PushMessage(NetMsgType::BLOCK, block);",
          "content_same": false
        },
        {
          "line": 4423,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(pfrom->cs_filter)",
          "old_line_content": "                        {",
          "new_line_content": "                        LOCK(pfrom->cs_filter);",
          "content_same": false
        },
        {
          "line": 4427,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::MERKLEBLOCK, merkleBlock)",
          "old_line_content": "                            // This avoids hurting performance by pointlessly requiring a round-trip",
          "new_line_content": "                            pfrom->PushMessage(NetMsgType::MERKLEBLOCK, merkleBlock);",
          "content_same": false
        },
        {
          "line": 4435,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "BOOST_FOREACH(PairType& pair, merkleBlock.vMatchedTxn)\n                                pfrom->PushMessage(NetMsgType::TX, block.vtx[pair.first])",
          "old_line_content": "                        }",
          "new_line_content": "                            BOOST_FOREACH(PairType& pair, merkleBlock.vMatchedTxn)",
          "content_same": false
        },
        {
          "line": 4450,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::INV, vInv)",
          "old_line_content": "                    }",
          "new_line_content": "                        pfrom->PushMessage(NetMsgType::INV, vInv);",
          "content_same": false
        },
        {
          "line": 4451,
          "old_api": null,
          "new_api": "SetNull",
          "old_text": null,
          "new_text": "pfrom->hashContinue.SetNull()",
          "old_line_content": "                }",
          "new_line_content": "                        pfrom->hashContinue.SetNull();",
          "content_same": false
        },
        {
          "line": 4455,
          "old_api": null,
          "new_api": "IsKnownType",
          "old_text": null,
          "new_text": "inv.IsKnownType()",
          "old_line_content": "                // Send stream from relay memory",
          "new_line_content": "            else if (inv.IsKnownType())",
          "content_same": false
        },
        {
          "line": 4462,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapRelay.end()",
          "old_line_content": "                        pushed = true;",
          "new_line_content": "                    if (mi != mapRelay.end()) {",
          "content_same": false
        },
        {
          "line": 4463,
          "old_api": null,
          "new_api": "GetCommand",
          "old_text": null,
          "new_text": "inv.GetCommand()",
          "old_line_content": "                    }",
          "new_line_content": "                        pfrom->PushMessage(inv.GetCommand(), (*mi).second);",
          "content_same": false
        },
        {
          "line": 4473,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::TX, ss)",
          "old_line_content": "                    }",
          "new_line_content": "                        pfrom->PushMessage(NetMsgType::TX, ss);",
          "content_same": false
        },
        {
          "line": 4478,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vNotFound.push_back(inv)",
          "old_line_content": "            }",
          "new_line_content": "                    vNotFound.push_back(inv);",
          "content_same": false
        },
        {
          "line": 4483,
          "old_api": null,
          "new_api": "Inventory",
          "old_text": null,
          "new_text": "GetMainSignals().Inventory(inv.hash)",
          "old_line_content": "            if (inv.type == MSG_BLOCK || inv.type == MSG_FILTERED_BLOCK)",
          "new_line_content": "            GetMainSignals().Inventory(inv.hash);",
          "content_same": false
        },
        {
          "line": 4492,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vNotFound.empty()",
          "old_line_content": "        // have to wait around forever. Currently only SPV clients actually care",
          "new_line_content": "    if (!vNotFound.empty()) {",
          "content_same": false
        },
        {
          "line": 4500,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::NOTFOUND, vNotFound)",
          "old_line_content": "}",
          "new_line_content": "        pfrom->PushMessage(NetMsgType::NOTFOUND, vNotFound);",
          "content_same": false
        },
        {
          "line": 4507,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vRecv.size()",
          "old_line_content": "    {",
          "new_line_content": "    LogPrint(\"net\", \"received: %s (%u bytes) peer=%d\\n\", SanitizeString(strCommand), vRecv.size(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 4510,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"dropmessagestest DROPPING RECV MESSAGE\\n\")",
          "old_line_content": "    }",
          "new_line_content": "        LogPrintf(\"dropmessagestest DROPPING RECV MESSAGE\\n\");",
          "content_same": false
        },
        {
          "line": 4521,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        } else {",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 100);",
          "content_same": false
        },
        {
          "line": 4535,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "string(\"Duplicate version message\")",
          "old_line_content": "            return false;",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_DUPLICATE, string(\"Duplicate version message\"));",
          "content_same": false
        },
        {
          "line": 4536,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        }",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 1);",
          "content_same": false
        },
        {
          "line": 4549,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_OBSOLETE,\n                               strprintf(\"Version must be %d or greater\", MIN_PEER_PROTO_VERSION))",
          "old_line_content": "            pfrom->fDisconnect = true;",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_OBSOLETE,",
          "content_same": false
        },
        {
          "line": 4550,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"Version must be %d or greater\", MIN_PEER_PROTO_VERSION)",
          "old_line_content": "            return false;",
          "new_line_content": "                               strprintf(\"Version must be %d or greater\", MIN_PEER_PROTO_VERSION));",
          "content_same": false
        },
        {
          "line": 4560,
          "old_api": null,
          "new_api": "LIMITED_STRING",
          "old_text": null,
          "new_text": "LIMITED_STRING(pfrom->strSubVer, MAX_SUBVERSION_LENGTH)",
          "old_line_content": "        }",
          "new_line_content": "            vRecv >> LIMITED_STRING(pfrom->strSubVer, MAX_SUBVERSION_LENGTH);",
          "content_same": false
        },
        {
          "line": 4565,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vRecv.empty()",
          "old_line_content": "        else",
          "new_line_content": "        if (!vRecv.empty())",
          "content_same": false
        },
        {
          "line": 4573,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pfrom->addr.ToString()",
          "old_line_content": "            return true;",
          "new_line_content": "            LogPrintf(\"connected to self at %s, disconnecting\\n\", pfrom->addr.ToString());",
          "content_same": false
        },
        {
          "line": 4581,
          "old_api": null,
          "new_api": "SeenLocal",
          "old_text": null,
          "new_text": "SeenLocal(addrMe)",
          "old_line_content": "",
          "new_line_content": "            SeenLocal(addrMe);",
          "content_same": false
        },
        {
          "line": 4586,
          "old_api": null,
          "new_api": "PushVersion",
          "old_text": null,
          "new_text": "pfrom->PushVersion()",
          "old_line_content": "        pfrom->fClient = !(pfrom->nServices & NODE_NETWORK);",
          "new_line_content": "            pfrom->PushVersion();",
          "content_same": false
        },
        {
          "line": 4591,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        // Change version",
          "new_line_content": "        UpdatePreferredDownload(pfrom, State(pfrom->GetId()));",
          "content_same": false
        },
        {
          "line": 4594,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::VERACK)",
          "old_line_content": "",
          "new_line_content": "        pfrom->PushMessage(NetMsgType::VERACK);",
          "content_same": false
        },
        {
          "line": 4595,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(pfrom->nVersion, PROTOCOL_VERSION)",
          "old_line_content": "        if (!pfrom->fInbound)",
          "new_line_content": "        pfrom->ssSend.SetVersion(min(pfrom->nVersion, PROTOCOL_VERSION));",
          "content_same": false
        },
        {
          "line": 4602,
          "old_api": null,
          "new_api": "GetLocalAddress",
          "old_text": null,
          "new_text": "GetLocalAddress(&pfrom->addr)",
          "old_line_content": "                {",
          "new_line_content": "                CAddress addr = GetLocalAddress(&pfrom->addr);",
          "content_same": false
        },
        {
          "line": 4609,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "addr.ToString()",
          "old_line_content": "                }",
          "new_line_content": "                    LogPrintf(\"ProcessMessages: advertising address %s\\n\", addr.ToString());",
          "content_same": false
        },
        {
          "line": 4610,
          "old_api": null,
          "new_api": "PushAddress",
          "old_text": null,
          "new_text": "pfrom->PushAddress(addr)",
          "old_line_content": "            }",
          "new_line_content": "                    pfrom->PushAddress(addr);",
          "content_same": false
        },
        {
          "line": 4617,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::GETADDR)",
          "old_line_content": "            }",
          "new_line_content": "                pfrom->PushMessage(NetMsgType::GETADDR);",
          "content_same": false
        },
        {
          "line": 4620,
          "old_api": null,
          "new_api": "Good",
          "old_text": null,
          "new_text": "addrman.Good(pfrom->addr)",
          "old_line_content": "            if (((CNetAddr)pfrom->addr) == (CNetAddr)addrFrom)",
          "new_line_content": "            addrman.Good(pfrom->addr);",
          "content_same": false
        },
        {
          "line": 4624,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "addrman.Add(addrFrom, addrFrom)",
          "old_line_content": "            }",
          "new_line_content": "                addrman.Add(addrFrom, addrFrom);",
          "content_same": false
        },
        {
          "line": 4625,
          "old_api": null,
          "new_api": "Good",
          "old_text": null,
          "new_text": "addrman.Good(addrFrom)",
          "old_line_content": "        }",
          "new_line_content": "                addrman.Good(addrFrom);",
          "content_same": false
        },
        {
          "line": 4637,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "addrMe.ToString()",
          "old_line_content": "",
          "new_line_content": "                  pfrom->nStartingHeight, addrMe.ToString(), pfrom->id,",
          "content_same": false
        },
        {
          "line": 4642,
          "old_api": null,
          "new_api": "AddTimeData",
          "old_text": null,
          "new_text": "AddTimeData(pfrom->addr, nTimeOffset)",
          "old_line_content": "",
          "new_line_content": "        AddTimeData(pfrom->addr, nTimeOffset);",
          "content_same": false
        },
        {
          "line": 4649,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "    }",
          "new_line_content": "        Misbehaving(pfrom->GetId(), 1);",
          "content_same": false
        },
        {
          "line": 4656,
          "old_api": null,
          "new_api": "min",
          "old_text": null,
          "new_text": "min(pfrom->nVersion, PROTOCOL_VERSION)",
          "old_line_content": "        // Mark this node as currently connected, so we update its timestamp later.",
          "new_line_content": "        pfrom->SetRecvVersion(min(pfrom->nVersion, PROTOCOL_VERSION));",
          "content_same": false
        },
        {
          "line": 4660,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "        }",
          "new_line_content": "            LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4661,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "",
          "new_line_content": "            State(pfrom->GetId())->fCurrentlyConnected = true;",
          "content_same": false
        },
        {
          "line": 4669,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::SENDHEADERS)",
          "old_line_content": "    }",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::SENDHEADERS);",
          "content_same": false
        },
        {
          "line": 4684,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        }",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "content_same": false
        },
        {
          "line": 4685,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vAddr.size()",
          "old_line_content": "",
          "new_line_content": "            return error(\"message addr size() = %u\", vAddr.size());",
          "content_same": false
        },
        {
          "line": 4690,
          "old_api": null,
          "new_api": "GetAdjustedTime",
          "old_text": null,
          "new_text": "GetAdjustedTime()",
          "old_line_content": "        BOOST_FOREACH(CAddress& addr, vAddr)",
          "new_line_content": "        int64_t nNow = GetAdjustedTime();",
          "content_same": false
        },
        {
          "line": 4694,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "            if (addr.nTime <= 100000000 || addr.nTime > nNow + 10 * 60)",
          "new_line_content": "            boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 4699,
          "old_api": null,
          "new_api": "IsReachable",
          "old_text": null,
          "new_text": "IsReachable(addr)",
          "old_line_content": "            {",
          "new_line_content": "            bool fReachable = IsReachable(addr);",
          "content_same": false
        },
        {
          "line": 4700,
          "old_api": null,
          "new_api": "IsRoutable",
          "old_text": null,
          "new_text": "addr.IsRoutable()",
          "old_line_content": "                // Relay to a limited number of other nodes",
          "new_line_content": "            if (addr.nTime > nSince && !pfrom->fGetAddr && vAddr.size() <= 10 && addr.IsRoutable())",
          "content_same": false
        },
        {
          "line": 4704,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_vNodes)",
          "old_line_content": "                    // at a time so the addrKnowns of the chosen nodes prevent repeats",
          "new_line_content": "                    LOCK(cs_vNodes);",
          "content_same": false
        },
        {
          "line": 4711,
          "old_api": null,
          "new_api": "GetTime",
          "old_text": null,
          "new_text": "GetTime()",
          "old_line_content": "                    multimap<uint256, CNode*> mapMix;",
          "new_line_content": "                    uint256 hashRand = ArithToUint256(UintToArith256(hashSalt) ^ (hashAddr<<32) ^ ((GetTime()+hashAddr)/(24*60*60)));",
          "content_same": false
        },
        {
          "line": 4712,
          "old_api": null,
          "new_api": "END",
          "old_text": null,
          "new_text": "END(hashRand)",
          "old_line_content": "                    BOOST_FOREACH(CNode* pnode, vNodes)",
          "new_line_content": "                    hashRand = Hash(BEGIN(hashRand), END(hashRand));",
          "content_same": false
        },
        {
          "line": 4721,
          "old_api": null,
          "new_api": "END",
          "old_text": null,
          "new_text": "END(hashKey)",
          "old_line_content": "                    }",
          "new_line_content": "                        hashKey = Hash(BEGIN(hashKey), END(hashKey));",
          "content_same": false
        },
        {
          "line": 4722,
          "old_api": null,
          "new_api": "make_pair",
          "old_text": null,
          "new_text": "make_pair(hashKey, pnode)",
          "old_line_content": "                    int nRelayNodes = fReachable ? 2 : 1; // limited relaying of addresses outside our network(s)",
          "new_line_content": "                        mapMix.insert(make_pair(hashKey, pnode));",
          "content_same": false
        },
        {
          "line": 4725,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapMix.end()",
          "old_line_content": "                }",
          "new_line_content": "                    for (multimap<uint256, CNode*>::iterator mi = mapMix.begin(); mi != mapMix.end() && nRelayNodes-- > 0; ++mi)",
          "content_same": false
        },
        {
          "line": 4726,
          "old_api": null,
          "new_api": "PushAddress",
          "old_text": null,
          "new_text": "*mi).second)->PushAddress(addr)",
          "old_line_content": "            }",
          "new_line_content": "                        ((*mi).second)->PushAddress(addr);",
          "content_same": false
        },
        {
          "line": 4733,
          "old_api": null,
          "new_api": "Add",
          "old_text": null,
          "new_text": "addrman.Add(vAddrOk, pfrom->addr, 2 * 60 * 60)",
          "old_line_content": "            pfrom->fGetAddr = false;",
          "new_line_content": "        addrman.Add(vAddrOk, pfrom->addr, 2 * 60 * 60);",
          "content_same": false
        },
        {
          "line": 4734,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vAddr.size()",
          "old_line_content": "        if (pfrom->fOneShot)",
          "new_line_content": "        if (vAddr.size() < 1000)",
          "content_same": false
        },
        {
          "line": 4742,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "    }",
          "new_line_content": "        LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4743,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "",
          "new_line_content": "        State(pfrom->GetId())->fPreferHeaders = true;",
          "content_same": false
        },
        {
          "line": 4753,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        }",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "content_same": false
        },
        {
          "line": 4754,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vInv.size()",
          "old_line_content": "",
          "new_line_content": "            return error(\"message inv size() = %u\", vInv.size());",
          "content_same": false
        },
        {
          "line": 4757,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY)",
          "old_line_content": "        // Allow whitelisted peers to send data other than blocks in blocks only mode if whitelistrelay is true",
          "new_line_content": "        bool fBlocksOnly = GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);",
          "content_same": false
        },
        {
          "line": 4760,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)",
          "old_line_content": "",
          "new_line_content": "        if (pfrom->fWhitelisted && GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY))",
          "content_same": false
        },
        {
          "line": 4763,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "        std::vector<CInv> vToFetch;",
          "new_line_content": "        LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4767,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vInv.size()",
          "old_line_content": "            const CInv &inv = vInv[nInv];",
          "new_line_content": "        for (unsigned int nInv = 0; nInv < vInv.size(); nInv++)",
          "content_same": false
        },
        {
          "line": 4771,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "",
          "new_line_content": "            boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 4774,
          "old_api": null,
          "new_api": "AlreadyHave",
          "old_text": null,
          "new_text": "AlreadyHave(inv)",
          "old_line_content": "",
          "new_line_content": "            bool fAlreadyHave = AlreadyHave(inv);",
          "content_same": false
        },
        {
          "line": 4775,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "inv.ToString()",
          "old_line_content": "            if (inv.type == MSG_BLOCK) {",
          "new_line_content": "            LogPrint(\"net\", \"got inv: %s  %s peer=%d\\n\", inv.ToString(), fAlreadyHave ? \"have\" : \"new\", pfrom->id);",
          "content_same": false
        },
        {
          "line": 4778,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "                    // First request the headers preceding the announced block. In the normal fully-synced",
          "new_line_content": "                UpdateBlockAvailability(pfrom->GetId(), inv.hash);",
          "content_same": false
        },
        {
          "line": 4779,
          "old_api": null,
          "new_api": "count",
          "old_text": null,
          "new_text": "mapBlocksInFlight.count(inv.hash)",
          "old_line_content": "                    // case where a new block is announced that succeeds the current tip (no reorganization),",
          "new_line_content": "                if (!fAlreadyHave && !fImporting && !fReindex && !mapBlocksInFlight.count(inv.hash)) {",
          "content_same": false
        },
        {
          "line": 4789,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "                        nodestate->nBlocksInFlight < MAX_BLOCKS_IN_TRANSIT_PER_PEER) {",
          "new_line_content": "                    CNodeState *nodestate = State(pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 4792,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vToFetch.push_back(inv)",
          "old_line_content": "                        // later (within the same cs_main lock, though).",
          "new_line_content": "                        vToFetch.push_back(inv);",
          "content_same": false
        },
        {
          "line": 4797,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "inv.hash.ToString()",
          "old_line_content": "            }",
          "new_line_content": "                    LogPrint(\"net\", \"getheaders (%d) %s to peer=%d\\n\", pindexBestHeader->nHeight, inv.hash.ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 4804,
          "old_api": null,
          "new_api": "IsInitialBlockDownload",
          "old_text": null,
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "            }",
          "new_line_content": "                else if (!fAlreadyHave && !fImporting && !fReindex && !IsInitialBlockDownload())",
          "content_same": false
        },
        {
          "line": 4805,
          "old_api": null,
          "new_api": "AskFor",
          "old_text": null,
          "new_text": "pfrom->AskFor(inv)",
          "old_line_content": "",
          "new_line_content": "                    pfrom->AskFor(inv);",
          "content_same": false
        },
        {
          "line": 4812,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "            }",
          "new_line_content": "                Misbehaving(pfrom->GetId(), 50);",
          "content_same": false
        },
        {
          "line": 4813,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"send buffer size() = %u\", pfrom->nSendSize)",
          "old_line_content": "        }",
          "new_line_content": "                return error(\"send buffer size() = %u\", pfrom->nSendSize);",
          "content_same": false
        },
        {
          "line": 4817,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vToFetch.empty()",
          "old_line_content": "    }",
          "new_line_content": "        if (!vToFetch.empty())",
          "content_same": false
        },
        {
          "line": 4818,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::GETDATA, vToFetch)",
          "old_line_content": "",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::GETDATA, vToFetch);",
          "content_same": false
        },
        {
          "line": 4828,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        }",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "content_same": false
        },
        {
          "line": 4829,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vInv.size()",
          "old_line_content": "",
          "new_line_content": "            return error(\"message getdata size() = %u\", vInv.size());",
          "content_same": false
        },
        {
          "line": 4832,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vInv.size()",
          "old_line_content": "",
          "new_line_content": "        if (fDebug || (vInv.size() != 1))",
          "content_same": false
        },
        {
          "line": 4835,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vInv.size()",
          "old_line_content": "",
          "new_line_content": "        if ((fDebug && vInv.size() > 0) || (vInv.size() == 1))",
          "content_same": false
        },
        {
          "line": 4838,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "vInv.end()",
          "old_line_content": "    }",
          "new_line_content": "        pfrom->vRecvGetData.insert(pfrom->vRecvGetData.end(), vInv.begin(), vInv.end());",
          "content_same": false
        },
        {
          "line": 4839,
          "old_api": null,
          "new_api": "GetConsensus",
          "old_text": null,
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "",
          "new_line_content": "        ProcessGetData(pfrom, chainparams.GetConsensus());",
          "content_same": false
        },
        {
          "line": 4849,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "        // Find the last block the caller has in the main chain",
          "new_line_content": "        LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4852,
          "old_api": null,
          "new_api": "FindForkInGlobalIndex",
          "old_text": null,
          "new_text": "FindForkInGlobalIndex(chainActive, locator)",
          "old_line_content": "        // Send the rest of the chain",
          "new_line_content": "        CBlockIndex* pindex = FindForkInGlobalIndex(chainActive, locator);",
          "content_same": false
        },
        {
          "line": 4858,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "hashStop.ToString()",
          "old_line_content": "        {",
          "new_line_content": "        LogPrint(\"net\", \"getblocks %d to %s limit %d from peer=%d\\n\", (pindex ? pindex->nHeight : -1), hashStop.IsNull() ? \"end\" : hashStop.ToString(), nLimit, pfrom->id);",
          "content_same": false
        },
        {
          "line": 4863,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pindex->GetBlockHash().ToString()",
          "old_line_content": "            }",
          "new_line_content": "                LogPrint(\"net\", \"  getblocks stopping at %d %s\\n\", pindex->nHeight, pindex->GetBlockHash().ToString());",
          "content_same": false
        },
        {
          "line": 4868,
          "old_api": null,
          "new_api": "GetConsensus",
          "old_text": null,
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "            {",
          "new_line_content": "            const int nPrunedBlocksLikelyToHave = MIN_BLOCKS_TO_KEEP - 3600 / chainparams.GetConsensus().nPowTargetSpacing;",
          "content_same": false
        },
        {
          "line": 4871,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pindex->GetBlockHash().ToString()",
          "old_line_content": "            }",
          "new_line_content": "                LogPrint(\"net\", \" getblocks stopping, pruned or too old block at %d %s\\n\", pindex->nHeight, pindex->GetBlockHash().ToString());",
          "content_same": false
        },
        {
          "line": 4874,
          "old_api": null,
          "new_api": "GetBlockHash",
          "old_text": null,
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "            {",
          "new_line_content": "            pfrom->PushInventory(CInv(MSG_BLOCK, pindex->GetBlockHash()));",
          "content_same": false
        },
        {
          "line": 4879,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pindex->GetBlockHash().ToString()",
          "old_line_content": "                break;",
          "new_line_content": "                LogPrint(\"net\", \"  getblocks stopping at limit %d %s\\n\", pindex->nHeight, pindex->GetBlockHash().ToString());",
          "content_same": false
        },
        {
          "line": 4880,
          "old_api": null,
          "new_api": "GetBlockHash",
          "old_text": null,
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "            }",
          "new_line_content": "                pfrom->hashContinue = pindex->GetBlockHash();",
          "content_same": false
        },
        {
          "line": 4894,
          "old_api": null,
          "new_api": "IsInitialBlockDownload",
          "old_text": null,
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "            return true;",
          "new_line_content": "        if (IsInitialBlockDownload() && !pfrom->fWhitelisted) {",
          "content_same": false
        },
        {
          "line": 4895,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Ignoring getheaders from peer=%d because node is in initial block download\\n\", pfrom->id)",
          "old_line_content": "        }",
          "new_line_content": "            LogPrint(\"net\", \"Ignoring getheaders from peer=%d because node is in initial block download\\n\", pfrom->id);",
          "content_same": false
        },
        {
          "line": 4901,
          "old_api": null,
          "new_api": "IsNull",
          "old_text": null,
          "new_text": "locator.IsNull()",
          "old_line_content": "            // If locator is null, return the hashStop block",
          "new_line_content": "        if (locator.IsNull())",
          "content_same": false
        },
        {
          "line": 4904,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapBlockIndex.find(hashStop)",
          "old_line_content": "                return true;",
          "new_line_content": "            BlockMap::iterator mi = mapBlockIndex.find(hashStop);",
          "content_same": false
        },
        {
          "line": 4905,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapBlockIndex.end()",
          "old_line_content": "            pindex = (*mi).second;",
          "new_line_content": "            if (mi == mapBlockIndex.end())",
          "content_same": false
        },
        {
          "line": 4914,
          "old_api": null,
          "new_api": "Next",
          "old_text": null,
          "new_text": "chainActive.Next(pindex)",
          "old_line_content": "",
          "new_line_content": "                pindex = chainActive.Next(pindex);",
          "content_same": false
        },
        {
          "line": 4920,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "hashStop.ToString()",
          "old_line_content": "        {",
          "new_line_content": "        LogPrint(\"net\", \"getheaders %d to %s from peer=%d\\n\", (pindex ? pindex->nHeight : -1), hashStop.ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 4923,
          "old_api": null,
          "new_api": "GetBlockHeader",
          "old_text": null,
          "new_text": "pindex->GetBlockHeader()",
          "old_line_content": "                break;",
          "new_line_content": "            vHeaders.push_back(pindex->GetBlockHeader());",
          "content_same": false
        },
        {
          "line": 4924,
          "old_api": null,
          "new_api": "GetBlockHash",
          "old_text": null,
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "        }",
          "new_line_content": "            if (--nLimit <= 0 || pindex->GetBlockHash() == hashStop)",
          "content_same": false
        },
        {
          "line": 4931,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()",
          "old_line_content": "    }",
          "new_line_content": "        nodestate->pindexBestHeaderSent = pindex ? pindex : chainActive.Tip();",
          "content_same": false
        },
        {
          "line": 4932,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::HEADERS, vHeaders)",
          "old_line_content": "",
          "new_line_content": "        pfrom->PushMessage(NetMsgType::HEADERS, vHeaders);",
          "content_same": false
        },
        {
          "line": 4942,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"transaction sent in violation of protocol peer=%d\\n\", pfrom->id)",
          "old_line_content": "        }",
          "new_line_content": "            LogPrint(\"net\", \"transaction sent in violation of protocol peer=%d\\n\", pfrom->id);",
          "content_same": false
        },
        {
          "line": 4951,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "tx.GetHash()",
          "old_line_content": "",
          "new_line_content": "        CInv inv(MSG_TX, tx.GetHash());",
          "content_same": false
        },
        {
          "line": 4954,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "        bool fMissingInputs = false;",
          "new_line_content": "        LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 4959,
          "old_api": null,
          "new_api": "erase",
          "old_text": null,
          "new_text": "pfrom->setAskFor.erase(inv.hash)",
          "old_line_content": "",
          "new_line_content": "        pfrom->setAskFor.erase(inv.hash);",
          "content_same": false
        },
        {
          "line": 4965,
          "old_api": null,
          "new_api": "RelayTransaction",
          "old_text": null,
          "new_text": "RelayTransaction(tx, txFeeRate)",
          "old_line_content": "",
          "new_line_content": "            RelayTransaction(tx, txFeeRate);",
          "content_same": false
        },
        {
          "line": 4970,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "tx.GetHash().ToString()",
          "old_line_content": "",
          "new_line_content": "                tx.GetHash().ToString(),",
          "content_same": false
        },
        {
          "line": 4971,
          "old_api": null,
          "new_api": "DynamicMemoryUsage",
          "old_text": null,
          "new_text": "mempool.DynamicMemoryUsage()",
          "old_line_content": "            // Recursively process any orphan transactions that depended on this one",
          "new_line_content": "                mempool.size(), mempool.DynamicMemoryUsage() / 1000);",
          "content_same": false
        },
        {
          "line": 4977,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapOrphanTransactionsByPrev.find(vWorkQueue[i])",
          "old_line_content": "                    continue;",
          "new_line_content": "                map<uint256, set<uint256> >::iterator itByPrev = mapOrphanTransactionsByPrev.find(vWorkQueue[i]);",
          "content_same": false
        },
        {
          "line": 4980,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "itByPrev->second.begin()",
          "old_line_content": "                     ++mi)",
          "new_line_content": "                for (set<uint256>::iterator mi = itByPrev->second.begin();",
          "content_same": false
        },
        {
          "line": 4981,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "itByPrev->second.end()",
          "old_line_content": "                {",
          "new_line_content": "                     mi != itByPrev->second.end();",
          "content_same": false
        },
        {
          "line": 5000,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vWorkQueue.push_back(orphanHash)",
          "old_line_content": "                    }",
          "new_line_content": "                        vWorkQueue.push_back(orphanHash);",
          "content_same": false
        },
        {
          "line": 5001,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vEraseQueue.push_back(orphanHash)",
          "old_line_content": "                    else if (!fMissingInputs2)",
          "new_line_content": "                        vEraseQueue.push_back(orphanHash);",
          "content_same": false
        },
        {
          "line": 5006,
          "old_api": null,
          "new_api": "IsInvalid",
          "old_text": null,
          "new_text": "stateDummy.IsInvalid(nDos)",
          "old_line_content": "                            // Punish peer that gave us an invalid orphan tx",
          "new_line_content": "                        if (stateDummy.IsInvalid(nDos) && nDos > 0)",
          "content_same": false
        },
        {
          "line": 5010,
          "old_api": null,
          "new_api": "insert",
          "old_text": null,
          "new_text": "setMisbehaving.insert(fromPeer)",
          "old_line_content": "                        }",
          "new_line_content": "                            setMisbehaving.insert(fromPeer);",
          "content_same": false
        },
        {
          "line": 5011,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "orphanHash.ToString()",
          "old_line_content": "                        // Has inputs but not accepted to mempool",
          "new_line_content": "                            LogPrint(\"mempool\", \"   invalid orphan tx %s\\n\", orphanHash.ToString());",
          "content_same": false
        },
        {
          "line": 5017,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(recentRejects)",
          "old_line_content": "                    }",
          "new_line_content": "                        assert(recentRejects);",
          "content_same": false
        },
        {
          "line": 5020,
          "old_api": null,
          "new_api": "check",
          "old_text": null,
          "new_text": "mempool.check(pcoinsTip)",
          "old_line_content": "            }",
          "new_line_content": "                    mempool.check(pcoinsTip);",
          "content_same": false
        },
        {
          "line": 5025,
          "old_api": null,
          "new_api": "EraseOrphanTx",
          "old_text": null,
          "new_text": "EraseOrphanTx(hash)",
          "old_line_content": "        else if (fMissingInputs)",
          "new_line_content": "                EraseOrphanTx(hash);",
          "content_same": false
        },
        {
          "line": 5029,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "            // DoS prevention: do not allow mapOrphanTransactions to grow unbounded",
          "new_line_content": "            AddOrphanTx(tx, pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 5032,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-maxorphantx\", DEFAULT_MAX_ORPHAN_TRANSACTIONS)",
          "old_line_content": "            if (nEvicted > 0)",
          "new_line_content": "            unsigned int nMaxOrphanTx = (unsigned int)std::max((int64_t)0, GetArg(\"-maxorphantx\", DEFAULT_MAX_ORPHAN_TRANSACTIONS));",
          "content_same": false
        },
        {
          "line": 5037,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(recentRejects)",
          "old_line_content": "",
          "new_line_content": "            assert(recentRejects);",
          "content_same": false
        },
        {
          "line": 5040,
          "old_api": null,
          "new_api": "GetBoolArg",
          "old_text": null,
          "new_text": "GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY)",
          "old_line_content": "                // if they were already in the mempool or rejected from it due",
          "new_line_content": "            if (pfrom->fWhitelisted && GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY)) {",
          "content_same": false
        },
        {
          "line": 5051,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "tx.GetHash().ToString()",
          "old_line_content": "                } else {",
          "new_line_content": "                    LogPrintf(\"Force relaying tx %s from whitelisted peer=%d\\n\", tx.GetHash().ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5054,
          "old_api": null,
          "new_api": "FormatStateMessage",
          "old_text": null,
          "new_text": "FormatStateMessage(state)",
          "old_line_content": "            }",
          "new_line_content": "                    LogPrintf(\"Not relaying invalid transaction %s from whitelisted peer=%d (%s)\\n\", tx.GetHash().ToString(), pfrom->id, FormatStateMessage(state));",
          "content_same": false
        },
        {
          "line": 5065,
          "old_api": null,
          "new_api": "GetRejectCode",
          "old_text": null,
          "new_text": "state.GetRejectCode()",
          "old_line_content": "            if (nDoS > 0)",
          "new_line_content": "                pfrom->PushMessage(NetMsgType::REJECT, strCommand, (unsigned char)state.GetRejectCode(),",
          "content_same": false
        },
        {
          "line": 5070,
          "old_api": null,
          "new_api": "FlushStateToDisk",
          "old_text": null,
          "new_text": "FlushStateToDisk(state, FLUSH_STATE_PERIODIC)",
          "old_line_content": "",
          "new_line_content": "        FlushStateToDisk(state, FLUSH_STATE_PERIODIC);",
          "content_same": false
        },
        {
          "line": 5081,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        }",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 20);",
          "content_same": false
        },
        {
          "line": 5084,
          "old_api": null,
          "new_api": "resize",
          "old_text": null,
          "new_text": "headers.resize(nCount)",
          "old_line_content": "            vRecv >> headers[n];",
          "new_line_content": "        headers.resize(nCount);",
          "content_same": false
        },
        {
          "line": 5087,
          "old_api": null,
          "new_api": "ReadCompactSize",
          "old_text": null,
          "new_text": "ReadCompactSize(vRecv)",
          "old_line_content": "",
          "new_line_content": "            ReadCompactSize(vRecv); // ignore tx count; assume it is 0.",
          "content_same": false
        },
        {
          "line": 5090,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "        if (nCount == 0) {",
          "new_line_content": "        LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 5101,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "            }",
          "new_line_content": "                Misbehaving(pfrom->GetId(), 20);",
          "content_same": false
        },
        {
          "line": 5108,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "                }",
          "new_line_content": "                        Misbehaving(pfrom->GetId(), nDoS);",
          "content_same": false
        },
        {
          "line": 5109,
          "old_api": null,
          "new_api": "error",
          "old_text": null,
          "new_text": "error(\"invalid header received\")",
          "old_line_content": "            }",
          "new_line_content": "                    return error(\"invalid header received\");",
          "content_same": false
        },
        {
          "line": 5115,
          "old_api": null,
          "new_api": "GetBlockHash",
          "old_text": null,
          "new_text": "pindexLast->GetBlockHash()",
          "old_line_content": "        if (nCount == MAX_HEADERS_RESULTS && pindexLast) {",
          "new_line_content": "            UpdateBlockAvailability(pfrom->GetId(), pindexLast->GetBlockHash());",
          "content_same": false
        },
        {
          "line": 5121,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"more getheaders (%d) to end to peer=%d (startheight:%d)\\n\", pindexLast->nHeight, pfrom->id, pfrom->nStartingHeight)",
          "old_line_content": "        }",
          "new_line_content": "            LogPrint(\"net\", \"more getheaders (%d) to end to peer=%d (startheight:%d)\\n\", pindexLast->nHeight, pfrom->id, pfrom->nStartingHeight);",
          "content_same": false
        },
        {
          "line": 5122,
          "old_api": null,
          "new_api": "uint256",
          "old_text": null,
          "new_text": "uint256()",
          "old_line_content": "",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::GETHEADERS, chainActive.GetLocator(pindexLast), uint256());",
          "content_same": false
        },
        {
          "line": 5125,
          "old_api": null,
          "new_api": "GetConsensus",
          "old_text": null,
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "        // If this set of headers is valid and ends in a block with at least as",
          "new_line_content": "        bool fCanDirectFetch = CanDirectFetch(chainparams.GetConsensus());",
          "content_same": false
        },
        {
          "line": 5126,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        // much work as our tip, download as much as possible.",
          "new_line_content": "        CNodeState *nodestate = State(pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 5129,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()",
          "old_line_content": "            CBlockIndex *pindexWalk = pindexLast;",
          "new_line_content": "        if (fCanDirectFetch && pindexLast->IsValid(BLOCK_VALID_TREE) && chainActive.Tip()->nChainWork <= pindexLast->nChainWork) {",
          "content_same": false
        },
        {
          "line": 5137,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vToFetch.push_back(pindexWalk)",
          "old_line_content": "                pindexWalk = pindexWalk->pprev;",
          "new_line_content": "                    vToFetch.push_back(pindexWalk);",
          "content_same": false
        },
        {
          "line": 5146,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Large reorg, won't direct fetch to %s (%d)\\n\",\n                        pindexLast->GetBlockHash().ToString(),\n                        pindexLast->nHeight)",
          "old_line_content": "                        pindexLast->nHeight);",
          "new_line_content": "                LogPrint(\"net\", \"Large reorg, won't direct fetch to %s (%d)\\n\",",
          "content_same": false
        },
        {
          "line": 5147,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pindexLast->GetBlockHash().ToString()",
          "old_line_content": "            } else {",
          "new_line_content": "                        pindexLast->GetBlockHash().ToString(),",
          "content_same": false
        },
        {
          "line": 5159,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Requesting block %s from  peer=%d\\n\",\n                            pindex->GetBlockHash().ToString(), pfrom->id)",
          "old_line_content": "                }",
          "new_line_content": "                    LogPrint(\"net\", \"Requesting block %s from  peer=%d\\n\",",
          "content_same": false
        },
        {
          "line": 5163,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Downloading blocks toward %s (%d) via headers direct fetch\\n\",\n                            pindexLast->GetBlockHash().ToString(), pindexLast->nHeight)",
          "old_line_content": "                }",
          "new_line_content": "                    LogPrint(\"net\", \"Downloading blocks toward %s (%d) via headers direct fetch\\n\",",
          "content_same": false
        },
        {
          "line": 5166,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vGetData.size()",
          "old_line_content": "                }",
          "new_line_content": "                if (vGetData.size() > 0) {",
          "content_same": false
        },
        {
          "line": 5167,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::GETDATA, vGetData)",
          "old_line_content": "            }",
          "new_line_content": "                    pfrom->PushMessage(NetMsgType::GETDATA, vGetData);",
          "content_same": false
        },
        {
          "line": 5172,
          "old_api": null,
          "new_api": "GetConsensus",
          "old_text": null,
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "",
          "new_line_content": "        CheckBlockIndex(chainparams.GetConsensus());",
          "content_same": false
        },
        {
          "line": 5180,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "block.GetHash()",
          "old_line_content": "",
          "new_line_content": "        CInv inv(MSG_BLOCK, block.GetHash());",
          "content_same": false
        },
        {
          "line": 5183,
          "old_api": null,
          "new_api": "AddInventoryKnown",
          "old_text": null,
          "new_text": "pfrom->AddInventoryKnown(inv)",
          "old_line_content": "        CValidationState state;",
          "new_line_content": "        pfrom->AddInventoryKnown(inv);",
          "content_same": false
        },
        {
          "line": 5190,
          "old_api": null,
          "new_api": "IsInitialBlockDownload",
          "old_text": null,
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "        int nDoS;",
          "new_line_content": "        bool forceProcessing = pfrom->fWhitelisted && !IsInitialBlockDownload();",
          "content_same": false
        },
        {
          "line": 5195,
          "old_api": null,
          "new_api": "GetRejectCode",
          "old_text": null,
          "new_text": "state.GetRejectCode()",
          "old_line_content": "            if (nDoS > 0) {",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, (unsigned char)state.GetRejectCode(),",
          "content_same": false
        },
        {
          "line": 5198,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "            }",
          "new_line_content": "                LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 5199,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        }",
          "new_line_content": "                Misbehaving(pfrom->GetId(), nDoS);",
          "content_same": false
        },
        {
          "line": 5214,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Ignoring \\\"getaddr\\\" from outbound connection. peer=%d\\n\", pfrom->id)",
          "old_line_content": "        }",
          "new_line_content": "            LogPrint(\"net\", \"Ignoring \\\"getaddr\\\" from outbound connection. peer=%d\\n\", pfrom->id);",
          "content_same": false
        },
        {
          "line": 5218,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "pfrom->vAddrToSend.clear()",
          "old_line_content": "        BOOST_FOREACH(const CAddress &addr, vAddr)",
          "new_line_content": "        pfrom->vAddrToSend.clear();",
          "content_same": false
        },
        {
          "line": 5221,
          "old_api": null,
          "new_api": "PushAddress",
          "old_text": null,
          "new_text": "pfrom->PushAddress(addr)",
          "old_line_content": "",
          "new_line_content": "            pfrom->PushAddress(addr);",
          "content_same": false
        },
        {
          "line": 5229,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "            return true;",
          "new_line_content": "            LogPrint(\"net\", \"mempool request with bandwidth limit reached, disconnect peer=%d\\n\", pfrom->GetId());",
          "content_same": false
        },
        {
          "line": 5233,
          "old_api": null,
          "new_api": "LOCK2",
          "old_text": null,
          "new_text": "LOCK2(cs_main, pfrom->cs_filter)",
          "old_line_content": "        std::vector<uint256> vtxid;",
          "new_line_content": "        LOCK2(cs_main, pfrom->cs_filter);",
          "content_same": false
        },
        {
          "line": 5236,
          "old_api": null,
          "new_api": "queryHashes",
          "old_text": null,
          "new_text": "mempool.queryHashes(vtxid)",
          "old_line_content": "        BOOST_FOREACH(uint256& hash, vtxid) {",
          "new_line_content": "        mempool.queryHashes(vtxid);",
          "content_same": false
        },
        {
          "line": 5244,
          "old_api": null,
          "new_api": "IsRelevantAndUpdate",
          "old_text": null,
          "new_text": "pfrom->pfilter->IsRelevantAndUpdate(tx)",
          "old_line_content": "            if (pfrom->minFeeFilter) {",
          "new_line_content": "                if (!pfrom->pfilter->IsRelevantAndUpdate(tx)) continue;",
          "content_same": false
        },
        {
          "line": 5249,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(pfrom->cs_feeFilter)",
          "old_line_content": "                    continue;",
          "new_line_content": "                LOCK(pfrom->cs_feeFilter);",
          "content_same": false
        },
        {
          "line": 5250,
          "old_api": null,
          "new_api": "GetFeePerK",
          "old_text": null,
          "new_text": "feeRate.GetFeePerK()",
          "old_line_content": "            }",
          "new_line_content": "                if (feeRate.GetFeePerK() < pfrom->minFeeFilter)",
          "content_same": false
        },
        {
          "line": 5255,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::INV, vInv)",
          "old_line_content": "            }",
          "new_line_content": "                pfrom->PushMessage(NetMsgType::INV, vInv);",
          "content_same": false
        },
        {
          "line": 5256,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "vInv.clear()",
          "old_line_content": "        }",
          "new_line_content": "                vInv.clear();",
          "content_same": false
        },
        {
          "line": 5259,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vInv.size()",
          "old_line_content": "    }",
          "new_line_content": "        if (vInv.size() > 0)",
          "content_same": false
        },
        {
          "line": 5260,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::INV, vInv)",
          "old_line_content": "",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::INV, vInv);",
          "content_same": false
        },
        {
          "line": 5281,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pfrom->PushMessage(NetMsgType::PONG, nonce)",
          "old_line_content": "    }",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::PONG, nonce);",
          "content_same": false
        },
        {
          "line": 5290,
          "old_api": null,
          "new_api": "in_avail",
          "old_text": null,
          "new_text": "vRecv.in_avail()",
          "old_line_content": "        std::string sProblem;",
          "new_line_content": "        size_t nAvail = vRecv.in_avail();",
          "content_same": false
        },
        {
          "line": 5306,
          "old_api": null,
          "new_api": "std::min(pfrom->nMinPingUsecTime, pingUsecTime)",
          "old_text": null,
          "new_text": "std::min(pfrom->nMinPingUsecTime, pingUsecTime)",
          "old_line_content": "                        // This should never happen",
          "new_line_content": "                        pfrom->nMinPingUsecTime = std::min(pfrom->nMinPingUsecTime, pingUsecTime);",
          "content_same": false
        },
        {
          "line": 5329,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "sProblem.empty()",
          "old_line_content": "                pfrom->id,",
          "new_line_content": "        if (!(sProblem.empty())) {",
          "content_same": false
        },
        {
          "line": 5330,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"pong peer=%d: %s, %x expected, %x received, %u bytes\\n\",\n                pfrom->id,\n                sProblem,\n                pfrom->nPingNonceSent,\n                nonce,\n                nAvail)",
          "old_line_content": "                sProblem,",
          "new_line_content": "            LogPrint(\"net\", \"pong peer=%d: %s, %x expected, %x received, %u bytes\\n\",",
          "content_same": false
        },
        {
          "line": 5350,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "        {",
          "new_line_content": "            Misbehaving(pfrom->GetId(), 100);",
          "content_same": false
        },
        {
          "line": 5353,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(pfrom->cs_filter)",
          "old_line_content": "            pfrom->pfilter = new CBloomFilter(filter);",
          "new_line_content": "            LOCK(pfrom->cs_filter);",
          "content_same": false
        },
        {
          "line": 5356,
          "old_api": null,
          "new_api": "UpdateEmptyFull",
          "old_text": null,
          "new_text": "pfrom->pfilter->UpdateEmptyFull()",
          "old_line_content": "        pfrom->fRelayTxes = true;",
          "new_line_content": "            pfrom->pfilter->UpdateEmptyFull();",
          "content_same": false
        },
        {
          "line": 5377,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pfrom->GetId()",
          "old_line_content": "    }",
          "new_line_content": "                Misbehaving(pfrom->GetId(), 100);",
          "content_same": false
        },
        {
          "line": 5384,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(pfrom->cs_filter)",
          "old_line_content": "        pfrom->pfilter = new CBloomFilter();",
          "new_line_content": "        LOCK(pfrom->cs_filter);",
          "content_same": false
        },
        {
          "line": 5396,
          "old_api": null,
          "new_api": "LIMITED_STRING",
          "old_text": null,
          "new_text": "LIMITED_STRING(strReason, MAX_REJECT_MESSAGE_LENGTH)",
          "old_line_content": "                ostringstream ss;",
          "new_line_content": "                vRecv >> LIMITED_STRING(strMsg, CMessageHeader::COMMAND_SIZE) >> ccode >> LIMITED_STRING(strReason, MAX_REJECT_MESSAGE_LENGTH);",
          "content_same": false
        },
        {
          "line": 5399,
          "old_api": null,
          "new_api": "itostr",
          "old_text": null,
          "new_text": "itostr(ccode)",
          "old_line_content": "                if (strMsg == NetMsgType::BLOCK || strMsg == NetMsgType::TX)",
          "new_line_content": "                ss << strMsg << \" code \" << itostr(ccode) << \": \" << strReason;",
          "content_same": false
        },
        {
          "line": 5407,
          "old_api": null,
          "new_api": "str",
          "old_text": null,
          "new_text": "ss.str()",
          "old_line_content": "                // Avoid feedback loops by preventing reject messages from triggering a new reject message.",
          "new_line_content": "                LogPrint(\"net\", \"Reject %s\\n\", SanitizeString(ss.str()));",
          "content_same": false
        },
        {
          "line": 5410,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Unparseable reject message received\\n\")",
          "old_line_content": "        }",
          "new_line_content": "                LogPrint(\"net\", \"Unparseable reject message received\\n\");",
          "content_same": false
        },
        {
          "line": 5420,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(pfrom->cs_feeFilter)",
          "old_line_content": "            }",
          "new_line_content": "                LOCK(pfrom->cs_feeFilter);",
          "content_same": false
        },
        {
          "line": 5423,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "CFeeRate(newFeeFilter).ToString()",
          "old_line_content": "    }",
          "new_line_content": "            LogPrint(\"net\", \"received: feefilter of %s from peer=%d\\n\", CFeeRate(newFeeFilter).ToString(), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5429,
          "old_api": null,
          "new_api": "SanitizeString",
          "old_text": null,
          "new_text": "SanitizeString(strCommand)",
          "old_line_content": "",
          "new_line_content": "        LogPrint(\"net\", \"Unknown command \\\"%s\\\" from peer=%d\\n\", SanitizeString(strCommand), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5440,
          "old_api": null,
          "new_api": "Params",
          "old_text": null,
          "new_text": "Params()",
          "old_line_content": "    //    LogPrintf(\"%s(%u messages)\\n\", __func__, pfrom->vRecvMsg.size());",
          "new_line_content": "    const CChainParams& chainparams = Params();",
          "content_same": false
        },
        {
          "line": 5454,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "pfrom->vRecvGetData.empty()",
          "old_line_content": "",
          "new_line_content": "    if (!pfrom->vRecvGetData.empty())",
          "content_same": false
        },
        {
          "line": 5455,
          "old_api": null,
          "new_api": "GetConsensus",
          "old_text": null,
          "new_text": "chainparams.GetConsensus()",
          "old_line_content": "    // this maintains the order of responses",
          "new_line_content": "        ProcessGetData(pfrom, chainparams.GetConsensus());",
          "content_same": false
        },
        {
          "line": 5460,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "pfrom->vRecvMsg.begin()",
          "old_line_content": "        // Don't bother if send buffer is too full to respond anyway",
          "new_line_content": "    std::deque<CNetMessage>::iterator it = pfrom->vRecvMsg.begin();",
          "content_same": false
        },
        {
          "line": 5463,
          "old_api": null,
          "new_api": "SendBufferSize",
          "old_text": null,
          "new_text": "SendBufferSize()",
          "old_line_content": "",
          "new_line_content": "        if (pfrom->nSendSize >= SendBufferSize())",
          "content_same": false
        },
        {
          "line": 5475,
          "old_api": null,
          "new_api": "complete",
          "old_text": null,
          "new_text": "msg.complete()",
          "old_line_content": "",
          "new_line_content": "        if (!msg.complete())",
          "content_same": false
        },
        {
          "line": 5482,
          "old_api": null,
          "new_api": "MessageStart",
          "old_text": null,
          "new_text": "chainparams.MessageStart()",
          "old_line_content": "            fOk = false;",
          "new_line_content": "        if (memcmp(msg.hdr.pchMessageStart, chainparams.MessageStart(), MESSAGE_START_SIZE) != 0) {",
          "content_same": false
        },
        {
          "line": 5483,
          "old_api": null,
          "new_api": "GetCommand",
          "old_text": null,
          "new_text": "msg.hdr.GetCommand()",
          "old_line_content": "            break;",
          "new_line_content": "            LogPrintf(\"PROCESSMESSAGE: INVALID MESSAGESTART %s peer=%d\\n\", SanitizeString(msg.hdr.GetCommand()), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5492,
          "old_api": null,
          "new_api": "GetCommand",
          "old_text": null,
          "new_text": "hdr.GetCommand()",
          "old_line_content": "        }",
          "new_line_content": "            LogPrintf(\"PROCESSMESSAGE: ERRORS IN HEADER %s peer=%d\\n\", SanitizeString(hdr.GetCommand()), pfrom->id);",
          "content_same": false
        },
        {
          "line": 5495,
          "old_api": null,
          "new_api": "GetCommand",
          "old_text": null,
          "new_text": "hdr.GetCommand()",
          "old_line_content": "        // Message size",
          "new_line_content": "        string strCommand = hdr.GetCommand();",
          "content_same": false
        },
        {
          "line": 5502,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "vRecv.begin()",
          "old_line_content": "        if (nChecksum != hdr.nChecksum)",
          "new_line_content": "        uint256 hash = Hash(vRecv.begin(), vRecv.begin() + nMessageSize);",
          "content_same": false
        },
        {
          "line": 5503,
          "old_api": null,
          "new_api": "ReadLE32",
          "old_text": null,
          "new_text": "ReadLE32((unsigned char*)&hash)",
          "old_line_content": "        {",
          "new_line_content": "        unsigned int nChecksum = ReadLE32((unsigned char*)&hash);",
          "content_same": false
        },
        {
          "line": 5506,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"%s(%s, %u bytes): CHECKSUM ERROR nChecksum=%08x hdr.nChecksum=%08x\\n\", __func__,\n               SanitizeString(strCommand), nMessageSize, nChecksum, hdr.nChecksum)",
          "old_line_content": "            continue;",
          "new_line_content": "            LogPrintf(\"%s(%s, %u bytes): CHECKSUM ERROR nChecksum=%08x hdr.nChecksum=%08x\\n\", __func__,",
          "content_same": false
        },
        {
          "line": 5507,
          "old_api": null,
          "new_api": "SanitizeString",
          "old_text": null,
          "new_text": "SanitizeString(strCommand)",
          "old_line_content": "        }",
          "new_line_content": "               SanitizeString(strCommand), nMessageSize, nChecksum, hdr.nChecksum);",
          "content_same": false
        },
        {
          "line": 5515,
          "old_api": null,
          "new_api": "ProcessMessage",
          "old_text": null,
          "new_text": "ProcessMessage(pfrom, strCommand, vRecv, msg.nTime, chainparams)",
          "old_line_content": "        }",
          "new_line_content": "            fRet = ProcessMessage(pfrom, strCommand, vRecv, msg.nTime, chainparams);",
          "content_same": false
        },
        {
          "line": 5516,
          "old_api": null,
          "new_api": "boost::this_thread::interruption_point()",
          "old_text": null,
          "new_text": "boost::this_thread::interruption_point()",
          "old_line_content": "        catch (const std::ios_base::failure& e)",
          "new_line_content": "            boost::this_thread::interruption_point();",
          "content_same": false
        },
        {
          "line": 5520,
          "old_api": null,
          "new_api": "string",
          "old_text": null,
          "new_text": "string(\"error parsing message\")",
          "old_line_content": "            {",
          "new_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_MALFORMED, string(\"error parsing message\"));",
          "content_same": false
        },
        {
          "line": 5521,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "                // Allow exceptions from under-length message on vRecv",
          "new_line_content": "            if (strstr(e.what(), \"end of data\"))",
          "content_same": false
        },
        {
          "line": 5526,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "                // Allow exceptions from over-long size",
          "new_line_content": "            else if (strstr(e.what(), \"size too large\"))",
          "content_same": false
        },
        {
          "line": 5529,
          "old_api": null,
          "new_api": "what",
          "old_text": null,
          "new_text": "e.what()",
          "old_line_content": "            else",
          "new_line_content": "                LogPrintf(\"%s(%s, %u bytes): Exception '%s' caught\\n\", __func__, SanitizeString(strCommand), nMessageSize, e.what());",
          "content_same": false
        },
        {
          "line": 5533,
          "old_api": null,
          "new_api": "PrintExceptionContinue",
          "old_text": null,
          "new_text": "PrintExceptionContinue(&e, \"ProcessMessages()\")",
          "old_line_content": "        }",
          "new_line_content": "                PrintExceptionContinue(&e, \"ProcessMessages()\");",
          "content_same": false
        },
        {
          "line": 5542,
          "old_api": null,
          "new_api": "PrintExceptionContinue",
          "old_text": null,
          "new_text": "PrintExceptionContinue(NULL, \"ProcessMessages()\")",
          "old_line_content": "",
          "new_line_content": "            PrintExceptionContinue(NULL, \"ProcessMessages()\");",
          "content_same": false
        },
        {
          "line": 5546,
          "old_api": null,
          "new_api": "SanitizeString",
          "old_text": null,
          "new_text": "SanitizeString(strCommand)",
          "old_line_content": "        break;",
          "new_line_content": "            LogPrintf(\"%s(%s, %u bytes) FAILED peer=%d\\n\", __func__, SanitizeString(strCommand), nMessageSize, pfrom->id);",
          "content_same": false
        },
        {
          "line": 5553,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "pfrom->vRecvMsg.begin()",
          "old_line_content": "    return fOk;",
          "new_line_content": "        pfrom->vRecvMsg.erase(pfrom->vRecvMsg.begin(), it);",
          "content_same": false
        },
        {
          "line": 5561,
          "old_api": null,
          "new_api": "GetConsensus",
          "old_text": null,
          "new_text": "Params().GetConsensus()",
          "old_line_content": "        // Don't send anything until we get its version message",
          "new_line_content": "    const Consensus::Params& consensusParams = Params().GetConsensus();",
          "content_same": false
        },
        {
          "line": 5575,
          "old_api": null,
          "new_api": "GetTimeMicros",
          "old_text": null,
          "new_text": "GetTimeMicros()",
          "old_line_content": "            pingSend = true;",
          "new_line_content": "        if (pto->nPingNonceSent == 0 && pto->nPingUsecStart + PING_INTERVAL * 1000000 < GetTimeMicros()) {",
          "content_same": false
        },
        {
          "line": 5582,
          "old_api": null,
          "new_api": "GetRandBytes",
          "old_text": null,
          "new_text": "GetRandBytes((unsigned char*)&nonce, sizeof(nonce))",
          "old_line_content": "            pto->fPingQueued = false;",
          "new_line_content": "                GetRandBytes((unsigned char*)&nonce, sizeof(nonce));",
          "content_same": false
        },
        {
          "line": 5585,
          "old_api": null,
          "new_api": "GetTimeMicros",
          "old_text": null,
          "new_text": "GetTimeMicros()",
          "old_line_content": "                pto->nPingNonceSent = nonce;",
          "new_line_content": "            pto->nPingUsecStart = GetTimeMicros();",
          "content_same": false
        },
        {
          "line": 5588,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::PING, nonce)",
          "old_line_content": "                // Peer is too old to support ping command with nonce, pong will never arrive.",
          "new_line_content": "                pto->PushMessage(NetMsgType::PING, nonce);",
          "content_same": false
        },
        {
          "line": 5592,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::PING)",
          "old_line_content": "        }",
          "new_line_content": "                pto->PushMessage(NetMsgType::PING);",
          "content_same": false
        },
        {
          "line": 5596,
          "old_api": null,
          "new_api": "TRY_LOCK",
          "old_text": null,
          "new_text": "TRY_LOCK(cs_main, lockMain)",
          "old_line_content": "            return true;",
          "new_line_content": "        TRY_LOCK(cs_main, lockMain); // Acquire cs_main for IsInitialBlockDownload() and CNodeState()",
          "content_same": false
        },
        {
          "line": 5603,
          "old_api": null,
          "new_api": "AdvertiseLocal",
          "old_text": null,
          "new_text": "AdvertiseLocal(pto)",
          "old_line_content": "        }",
          "new_line_content": "            AdvertiseLocal(pto);",
          "content_same": false
        },
        {
          "line": 5604,
          "old_api": null,
          "new_api": "PoissonNextSend",
          "old_text": null,
          "new_text": "PoissonNextSend(nNow, AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL)",
          "old_line_content": "",
          "new_line_content": "            pto->nNextLocalAddrSend = PoissonNextSend(nNow, AVG_LOCAL_ADDRESS_BROADCAST_INTERVAL);",
          "content_same": false
        },
        {
          "line": 5613,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "pto->vAddrToSend.size()",
          "old_line_content": "            {",
          "new_line_content": "            vAddr.reserve(pto->vAddrToSend.size());",
          "content_same": false
        },
        {
          "line": 5618,
          "old_api": null,
          "new_api": "GetKey",
          "old_text": null,
          "new_text": "addr.GetKey()",
          "old_line_content": "                    // receiver rejects addr messages larger than 1000",
          "new_line_content": "                    pto->addrKnown.insert(addr.GetKey());",
          "content_same": false
        },
        {
          "line": 5623,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::ADDR, vAddr)",
          "old_line_content": "                    }",
          "new_line_content": "                        pto->PushMessage(NetMsgType::ADDR, vAddr);",
          "content_same": false
        },
        {
          "line": 5624,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "vAddr.clear()",
          "old_line_content": "                }",
          "new_line_content": "                        vAddr.clear();",
          "content_same": false
        },
        {
          "line": 5629,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vAddr.empty()",
          "old_line_content": "        }",
          "new_line_content": "            if (!vAddr.empty())",
          "content_same": false
        },
        {
          "line": 5630,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::ADDR, vAddr)",
          "old_line_content": "",
          "new_line_content": "                pto->PushMessage(NetMsgType::ADDR, vAddr);",
          "content_same": false
        },
        {
          "line": 5633,
          "old_api": null,
          "new_api": "GetId",
          "old_text": null,
          "new_text": "pto->GetId()",
          "old_line_content": "            if (pto->fWhitelisted)",
          "new_line_content": "        CNodeState &state = *State(pto->GetId());",
          "content_same": false
        },
        {
          "line": 5636,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pto->addr.ToString()",
          "old_line_content": "                pto->fDisconnect = true;",
          "new_line_content": "                LogPrintf(\"Warning: not punishing whitelisted peer %s!\\n\", pto->addr.ToString());",
          "content_same": false
        },
        {
          "line": 5639,
          "old_api": null,
          "new_api": "IsLocal",
          "old_text": null,
          "new_text": "pto->addr.IsLocal()",
          "old_line_content": "                else",
          "new_line_content": "                if (pto->addr.IsLocal())",
          "content_same": false
        },
        {
          "line": 5640,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pto->addr.ToString()",
          "old_line_content": "                {",
          "new_line_content": "                    LogPrintf(\"Warning: not banning local peer %s!\\n\", pto->addr.ToString());",
          "content_same": false
        },
        {
          "line": 5643,
          "old_api": null,
          "new_api": "CNode::Ban(pto->addr, BanReasonNodeMisbehaving)",
          "old_text": null,
          "new_text": "CNode::Ban(pto->addr, BanReasonNodeMisbehaving)",
          "old_line_content": "            }",
          "new_line_content": "                    CNode::Ban(pto->addr, BanReasonNodeMisbehaving);",
          "content_same": false
        },
        {
          "line": 5650,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::REJECT, (string)NetMsgType::BLOCK, reject.chRejectCode, reject.strRejectReason, reject.hashBlock)",
          "old_line_content": "",
          "new_line_content": "            pto->PushMessage(NetMsgType::REJECT, (string)NetMsgType::BLOCK, reject.chRejectCode, reject.strRejectReason, reject.hashBlock);",
          "content_same": false
        },
        {
          "line": 5651,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "state.rejects.clear()",
          "old_line_content": "        // Start block sync",
          "new_line_content": "        state.rejects.clear();",
          "content_same": false
        },
        {
          "line": 5655,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()",
          "old_line_content": "        if (!state.fSyncStarted && !pto->fClient && !fImporting && !fReindex) {",
          "new_line_content": "            pindexBestHeader = chainActive.Tip();",
          "content_same": false
        },
        {
          "line": 5659,
          "old_api": null,
          "new_api": "GetAdjustedTime",
          "old_text": null,
          "new_text": "GetAdjustedTime()",
          "old_line_content": "                nSyncStarted++;",
          "new_line_content": "            if ((nSyncStarted == 0 && fFetch) || pindexBestHeader->GetBlockTime() > GetAdjustedTime() - 24 * 60 * 60) {",
          "content_same": false
        },
        {
          "line": 5672,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"initial getheaders (%d) to peer=%d (startheight:%d)\\n\", pindexStart->nHeight, pto->id, pto->nStartingHeight)",
          "old_line_content": "            }",
          "new_line_content": "                LogPrint(\"net\", \"initial getheaders (%d) to peer=%d (startheight:%d)\\n\", pindexStart->nHeight, pto->id, pto->nStartingHeight);",
          "content_same": false
        },
        {
          "line": 5673,
          "old_api": null,
          "new_api": "uint256",
          "old_text": null,
          "new_text": "uint256()",
          "old_line_content": "        }",
          "new_line_content": "                pto->PushMessage(NetMsgType::GETHEADERS, chainActive.GetLocator(pindexStart), uint256());",
          "content_same": false
        },
        {
          "line": 5682,
          "old_api": null,
          "new_api": "Broadcast",
          "old_text": null,
          "new_text": "GetMainSignals().Broadcast(nTimeBestReceived)",
          "old_line_content": "",
          "new_line_content": "            GetMainSignals().Broadcast(nTimeBestReceived);",
          "content_same": false
        },
        {
          "line": 5700,
          "old_api": null,
          "new_api": "ProcessBlockAvailability",
          "old_text": null,
          "new_text": "ProcessBlockAvailability(pto->id)",
          "old_line_content": "            if (!fRevertToInv) {",
          "new_line_content": "            ProcessBlockAvailability(pto->id); // ensure pindexBestKnownBlock is up-to-date",
          "content_same": false
        },
        {
          "line": 5708,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapBlockIndex.find(hash)",
          "old_line_content": "                    CBlockIndex *pindex = mi->second;",
          "new_line_content": "                    BlockMap::iterator mi = mapBlockIndex.find(hash);",
          "content_same": false
        },
        {
          "line": 5709,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapBlockIndex.end()",
          "old_line_content": "                    if (chainActive[pindex->nHeight] != pindex) {",
          "new_line_content": "                    assert(mi != mapBlockIndex.end());",
          "content_same": false
        },
        {
          "line": 5716,
          "old_api": null,
          "new_api": "assert",
          "old_text": null,
          "new_text": "assert(pBestIndex == NULL || pindex->pprev == pBestIndex)",
          "old_line_content": "                    if (fFoundStartingHeader) {",
          "new_line_content": "                    assert(pBestIndex == NULL || pindex->pprev == pBestIndex);",
          "content_same": false
        },
        {
          "line": 5720,
          "old_api": null,
          "new_api": "GetBlockHeader",
          "old_text": null,
          "new_text": "pindex->GetBlockHeader()",
          "old_line_content": "                        continue; // keep looking for the first new block",
          "new_line_content": "                        vHeaders.push_back(pindex->GetBlockHeader());",
          "content_same": false
        },
        {
          "line": 5723,
          "old_api": null,
          "new_api": "PeerHasHeader",
          "old_text": null,
          "new_text": "PeerHasHeader(&state, pindex->pprev)",
          "old_line_content": "                        // Start sending headers.",
          "new_line_content": "                    } else if (pindex->pprev == NULL || PeerHasHeader(&state, pindex->pprev)) {",
          "content_same": false
        },
        {
          "line": 5727,
          "old_api": null,
          "new_api": "GetBlockHeader",
          "old_text": null,
          "new_text": "pindex->GetBlockHeader()",
          "old_line_content": "                        // Peer doesn't have this header or the prior one -- nothing will",
          "new_line_content": "                        vHeaders.push_back(pindex->GetBlockHeader());",
          "content_same": false
        },
        {
          "line": 5742,
          "old_api": null,
          "new_api": "find",
          "old_text": null,
          "new_text": "mapBlockIndex.find(hashToAnnounce)",
          "old_line_content": "                    CBlockIndex *pindex = mi->second;",
          "new_line_content": "                    BlockMap::iterator mi = mapBlockIndex.find(hashToAnnounce);",
          "content_same": false
        },
        {
          "line": 5743,
          "old_api": null,
          "new_api": "end",
          "old_text": null,
          "new_text": "mapBlockIndex.end()",
          "old_line_content": "",
          "new_line_content": "                    assert(mi != mapBlockIndex.end());",
          "content_same": false
        },
        {
          "line": 5750,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Announcing block %s not on main chain (tip=%s)\\n\",\n                            hashToAnnounce.ToString(), chainActive.Tip()->GetBlockHash().ToString())",
          "old_line_content": "                    }",
          "new_line_content": "                        LogPrint(\"net\", \"Announcing block %s not on main chain (tip=%s)\\n\",",
          "content_same": false
        },
        {
          "line": 5751,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()->GetBlockHash().ToString()",
          "old_line_content": "",
          "new_line_content": "                            hashToAnnounce.ToString(), chainActive.Tip()->GetBlockHash().ToString());",
          "content_same": false
        },
        {
          "line": 5759,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"%s: sending inv peer=%d hash=%s\\n\", __func__,\n                            pto->id, hashToAnnounce.ToString())",
          "old_line_content": "                    }",
          "new_line_content": "                        LogPrint(\"net\", \"%s: sending inv peer=%d hash=%s\\n\", __func__,",
          "content_same": false
        },
        {
          "line": 5760,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "hashToAnnounce.ToString()",
          "old_line_content": "                }",
          "new_line_content": "                            pto->id, hashToAnnounce.ToString());",
          "content_same": false
        },
        {
          "line": 5767,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "vHeaders.front().GetHash().ToString()",
          "old_line_content": "                } else {",
          "new_line_content": "                            vHeaders.front().GetHash().ToString(),",
          "content_same": false
        },
        {
          "line": 5770,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"%s: sending header %s to peer=%d\\n\", __func__,\n                            vHeaders.front().GetHash().ToString(), pto->id)",
          "old_line_content": "                }",
          "new_line_content": "                    LogPrint(\"net\", \"%s: sending header %s to peer=%d\\n\", __func__,",
          "content_same": false
        },
        {
          "line": 5773,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::HEADERS, vHeaders)",
          "old_line_content": "            }",
          "new_line_content": "                pto->PushMessage(NetMsgType::HEADERS, vHeaders);",
          "content_same": false
        },
        {
          "line": 5776,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "pto->vBlockHashesToAnnounce.clear()",
          "old_line_content": "",
          "new_line_content": "            pto->vBlockHashesToAnnounce.clear();",
          "content_same": false
        },
        {
          "line": 5791,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "pto->vInventoryToSend.size()",
          "old_line_content": "            BOOST_FOREACH(const CInv& inv, pto->vInventoryToSend)",
          "new_line_content": "            vInv.reserve(std::min<size_t>(1000, pto->vInventoryToSend.size()));",
          "content_same": false
        },
        {
          "line": 5792,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "pto->vInventoryToSend.size()",
          "old_line_content": "            {",
          "new_line_content": "            vInvWait.reserve(pto->vInventoryToSend.size());",
          "content_same": false
        },
        {
          "line": 5795,
          "old_api": null,
          "new_api": "contains",
          "old_text": null,
          "new_text": "pto->filterInventoryKnown.contains(inv.hash)",
          "old_line_content": "",
          "new_line_content": "                if (inv.type == MSG_TX && pto->filterInventoryKnown.contains(inv.hash))",
          "content_same": false
        },
        {
          "line": 5806,
          "old_api": null,
          "new_api": "END",
          "old_text": null,
          "new_text": "END(hashRand)",
          "old_line_content": "",
          "new_line_content": "                    hashRand = Hash(BEGIN(hashRand), END(hashRand));",
          "content_same": false
        },
        {
          "line": 5807,
          "old_api": null,
          "new_api": "UintToArith256",
          "old_text": null,
          "new_text": "UintToArith256(hashRand)",
          "old_line_content": "                    if (fTrickleWait)",
          "new_line_content": "                    bool fTrickleWait = ((UintToArith256(hashRand) & 3) != 0);",
          "content_same": false
        },
        {
          "line": 5811,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vInvWait.push_back(inv)",
          "old_line_content": "                    }",
          "new_line_content": "                        vInvWait.push_back(inv);",
          "content_same": false
        },
        {
          "line": 5818,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vInv.push_back(inv)",
          "old_line_content": "                {",
          "new_line_content": "                vInv.push_back(inv);",
          "content_same": false
        },
        {
          "line": 5821,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::INV, vInv)",
          "old_line_content": "                }",
          "new_line_content": "                    pto->PushMessage(NetMsgType::INV, vInv);",
          "content_same": false
        },
        {
          "line": 5822,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "vInv.clear()",
          "old_line_content": "            }",
          "new_line_content": "                    vInv.clear();",
          "content_same": false
        },
        {
          "line": 5827,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vInv.empty()",
          "old_line_content": "",
          "new_line_content": "        if (!vInv.empty())",
          "content_same": false
        },
        {
          "line": 5828,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::INV, vInv)",
          "old_line_content": "        // Detect whether we're stalling",
          "new_line_content": "            pto->PushMessage(NetMsgType::INV, vInv);",
          "content_same": false
        },
        {
          "line": 5831,
          "old_api": null,
          "new_api": "GetTimeMicros",
          "old_text": null,
          "new_text": "GetTimeMicros()",
          "old_line_content": "            // Stalling only triggers when the block download window cannot move. During normal steady state,",
          "new_line_content": "        nNow = GetTimeMicros();",
          "content_same": false
        },
        {
          "line": 5836,
          "old_api": null,
          "new_api": "LogPrintf",
          "old_text": null,
          "new_text": "LogPrintf(\"Peer=%d is stalling block download, disconnecting\\n\", pto->id)",
          "old_line_content": "        }",
          "new_line_content": "            LogPrintf(\"Peer=%d is stalling block download, disconnecting\\n\", pto->id);",
          "content_same": false
        },
        {
          "line": 5844,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "state.vBlocksInFlight.size()",
          "old_line_content": "            int nOtherPeersWithValidatedDownloads = nPeersWithValidatedDownloads - (state.nBlocksInFlightValidHeaders > 0);",
          "new_line_content": "        if (!pto->fDisconnect && state.vBlocksInFlight.size() > 0) {",
          "content_same": false
        },
        {
          "line": 5845,
          "old_api": null,
          "new_api": "front",
          "old_text": null,
          "new_text": "state.vBlocksInFlight.front()",
          "old_line_content": "            if (nNow > state.nDownloadingSince + consensusParams.nPowTargetSpacing * (BLOCK_DOWNLOAD_TIMEOUT_BASE + BLOCK_DOWNLOAD_TIMEOUT_PER_PEER * nOtherPeersWithValidatedDownloads)) {",
          "new_line_content": "            QueuedBlock &queuedBlock = state.vBlocksInFlight.front();",
          "content_same": false
        },
        {
          "line": 5848,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "queuedBlock.hash.ToString()",
          "old_line_content": "            }",
          "new_line_content": "                LogPrintf(\"Timeout downloading block %s from peer=%d, disconnecting\\n\", queuedBlock.hash.ToString(), pto->id);",
          "content_same": false
        },
        {
          "line": 5857,
          "old_api": null,
          "new_api": "IsInitialBlockDownload",
          "old_text": null,
          "new_text": "IsInitialBlockDownload()",
          "old_line_content": "            NodeId staller = -1;",
          "new_line_content": "        if (!pto->fDisconnect && !pto->fClient && (fFetch || !IsInitialBlockDownload()) && state.nBlocksInFlight < MAX_BLOCKS_IN_TRANSIT_PER_PEER) {",
          "content_same": false
        },
        {
          "line": 5863,
          "old_api": null,
          "new_api": "GetBlockHash",
          "old_text": null,
          "new_text": "pindex->GetBlockHash()",
          "old_line_content": "                    pindex->nHeight, pto->id);",
          "new_line_content": "                MarkBlockAsInFlight(pto->GetId(), pindex->GetBlockHash(), consensusParams, pindex);",
          "content_same": false
        },
        {
          "line": 5864,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "pindex->GetBlockHash().ToString()",
          "old_line_content": "            }",
          "new_line_content": "                LogPrint(\"net\", \"Requesting block %s (%d) peer=%d\\n\", pindex->GetBlockHash().ToString(),",
          "content_same": false
        },
        {
          "line": 5869,
          "old_api": null,
          "new_api": "State",
          "old_text": null,
          "new_text": "State(staller)",
          "old_line_content": "                }",
          "new_line_content": "                    State(staller)->nStallingSince = nNow;",
          "content_same": false
        },
        {
          "line": 5870,
          "old_api": null,
          "new_api": "LogPrint",
          "old_text": null,
          "new_text": "LogPrint(\"net\", \"Stall started peer=%d\\n\", staller)",
          "old_line_content": "            }",
          "new_line_content": "                    LogPrint(\"net\", \"Stall started peer=%d\\n\", staller);",
          "content_same": false
        },
        {
          "line": 5880,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "pto->mapAskFor.begin()",
          "old_line_content": "            {",
          "new_line_content": "            const CInv& inv = (*pto->mapAskFor.begin()).second;",
          "content_same": false
        },
        {
          "line": 5881,
          "old_api": null,
          "new_api": "AlreadyHave",
          "old_text": null,
          "new_text": "AlreadyHave(inv)",
          "old_line_content": "                if (fDebug)",
          "new_line_content": "            if (!AlreadyHave(inv))",
          "content_same": false
        },
        {
          "line": 5885,
          "old_api": null,
          "new_api": "push_back",
          "old_text": null,
          "new_text": "vGetData.push_back(inv)",
          "old_line_content": "                {",
          "new_line_content": "                vGetData.push_back(inv);",
          "content_same": false
        },
        {
          "line": 5888,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::GETDATA, vGetData)",
          "old_line_content": "                }",
          "new_line_content": "                    pto->PushMessage(NetMsgType::GETDATA, vGetData);",
          "content_same": false
        },
        {
          "line": 5889,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "vGetData.clear()",
          "old_line_content": "            } else {",
          "new_line_content": "                    vGetData.clear();",
          "content_same": false
        },
        {
          "line": 5897,
          "old_api": null,
          "new_api": "empty",
          "old_text": null,
          "new_text": "vGetData.empty()",
          "old_line_content": "",
          "new_line_content": "        if (!vGetData.empty())",
          "content_same": false
        },
        {
          "line": 5898,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::GETDATA, vGetData)",
          "old_line_content": "        //",
          "new_line_content": "            pto->PushMessage(NetMsgType::GETDATA, vGetData);",
          "content_same": false
        },
        {
          "line": 5906,
          "old_api": null,
          "new_api": "GetArg",
          "old_text": null,
          "new_text": "GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE)",
          "old_line_content": "            if (timeNow > pto->nextSendTimeFeeFilter) {",
          "new_line_content": "            CAmount currentFilter = mempool.GetMinFee(GetArg(\"-maxmempool\", DEFAULT_MAX_MEMPOOL_SIZE) * 1000000).GetFeePerK();",
          "content_same": false
        },
        {
          "line": 5911,
          "old_api": null,
          "new_api": "PushMessage",
          "old_text": null,
          "new_text": "pto->PushMessage(NetMsgType::FEEFILTER, filterToSend)",
          "old_line_content": "                }",
          "new_line_content": "                    pto->PushMessage(NetMsgType::FEEFILTER, filterToSend);",
          "content_same": false
        },
        {
          "line": 5914,
          "old_api": null,
          "new_api": "PoissonNextSend",
          "old_text": null,
          "new_text": "PoissonNextSend(timeNow, AVG_FEEFILTER_BROADCAST_INTERVAL)",
          "old_line_content": "            // If the fee filter has changed substantially and it's still more than MAX_FEEFILTER_CHANGE_DELAY",
          "new_line_content": "                pto->nextSendTimeFeeFilter = PoissonNextSend(timeNow, AVG_FEEFILTER_BROADCAST_INTERVAL);",
          "content_same": false
        },
        {
          "line": 5920,
          "old_api": null,
          "new_api": "insecure_rand",
          "old_text": null,
          "new_text": "insecure_rand()",
          "old_line_content": "        }",
          "new_line_content": "                pto->nextSendTimeFeeFilter = timeNow + (insecure_rand() % MAX_FEEFILTER_CHANGE_DELAY) * 1000000;",
          "content_same": false
        },
        {
          "line": 5928,
          "old_api": null,
          "new_api": "DateTimeStrFormat",
          "old_text": null,
          "new_text": "DateTimeStrFormat(\"%Y-%m-%d\", nTimeLast)",
          "old_line_content": "",
          "new_line_content": "     return strprintf(\"CBlockFileInfo(blocks=%u, size=%u, heights=%u...%u, time=%s...%s)\", nBlocks, nSize, nHeightFirst, nHeightLast, DateTimeStrFormat(\"%Y-%m-%d\", nTimeFirst), DateTimeStrFormat(\"%Y-%m-%d\", nTimeLast));",
          "content_same": false
        },
        {
          "line": 5933,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "}",
          "new_line_content": "    LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 5934,
          "old_api": null,
          "new_api": "Tip",
          "old_text": null,
          "new_text": "chainActive.Tip()",
          "old_line_content": "",
          "new_line_content": "    return VersionBitsState(chainActive.Tip(), params, pos, versionbitscache);",
          "content_same": false
        },
        {
          "line": 5943,
          "old_api": null,
          "new_api": "begin",
          "old_text": null,
          "new_text": "mapBlockIndex.begin()",
          "old_line_content": "            delete (*it1).second;",
          "new_line_content": "        BlockMap::iterator it1 = mapBlockIndex.begin();",
          "content_same": false
        },
        {
          "line": 5946,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "mapBlockIndex.clear()",
          "old_line_content": "        // orphan transactions",
          "new_line_content": "        mapBlockIndex.clear();",
          "content_same": false
        },
        {
          "line": 5949,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "mapOrphanTransactions.clear()",
          "old_line_content": "    }",
          "new_line_content": "        mapOrphanTransactions.clear();",
          "content_same": false
        },
        {
          "line": 5950,
          "old_api": null,
          "new_api": "clear",
          "old_text": null,
          "new_text": "mapOrphanTransactionsByPrev.clear()",
          "old_line_content": "} instance_of_cmaincleanup;",
          "new_line_content": "        mapOrphanTransactionsByPrev.clear();",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 4347,
          "old_api": "contains",
          "new_api": null,
          "old_text": "recentRejects->contains(inv.hash)",
          "new_text": null,
          "old_line_content": "            return recentRejects->contains(inv.hash) ||",
          "new_line_content": "            // Use pcoinsTip->HaveCoinsInCache as a quick approximation to exclude",
          "content_same": false
        },
        {
          "line": 4348,
          "old_api": "exists",
          "new_api": null,
          "old_text": "mempool.exists(inv.hash)",
          "new_text": null,
          "old_line_content": "                   mempool.exists(inv.hash) ||",
          "new_line_content": "            // requesting or processing some txs which have already been included in a block",
          "content_same": false
        },
        {
          "line": 4353,
          "old_api": "count",
          "new_api": null,
          "old_text": "mapBlockIndex.count(inv.hash)",
          "new_text": null,
          "old_line_content": "        return mapBlockIndex.count(inv.hash);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4361,
          "old_api": "begin",
          "new_api": null,
          "old_text": "pfrom->vRecvGetData.begin()",
          "new_text": null,
          "old_line_content": "    std::deque<CInv>::iterator it = pfrom->vRecvGetData.begin();",
          "new_line_content": "void static ProcessGetData(CNode* pfrom, const Consensus::Params& consensusParams)",
          "content_same": false
        },
        {
          "line": 4365,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_main);",
          "new_line_content": "    vector<CInv> vNotFound;",
          "content_same": false
        },
        {
          "line": 4374,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "            boost::this_thread::interruption_point();",
          "new_line_content": "        const CInv &inv = *it;",
          "content_same": false
        },
        {
          "line": 4380,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapBlockIndex.find(inv.hash)",
          "new_text": null,
          "old_line_content": "                BlockMap::iterator mi = mapBlockIndex.find(inv.hash);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4381,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapBlockIndex.end()",
          "new_text": null,
          "old_line_content": "                if (mi != mapBlockIndex.end())",
          "new_line_content": "                bool send = false;",
          "content_same": false
        },
        {
          "line": 4390,
          "old_api": "IsValid",
          "new_api": null,
          "old_text": "mi->second->IsValid(BLOCK_VALID_SCRIPTS)",
          "new_text": null,
          "old_line_content": "                        send = mi->second->IsValid(BLOCK_VALID_SCRIPTS) && (pindexBestHeader != NULL) &&",
          "new_line_content": "                        // chain if they are valid, and no more than a month older (both in time, and in",
          "content_same": false
        },
        {
          "line": 4391,
          "old_api": "GetBlockTime",
          "new_api": null,
          "old_text": "mi->second->GetBlockTime()",
          "new_text": null,
          "old_line_content": "                            (pindexBestHeader->GetBlockTime() - mi->second->GetBlockTime() < nOneMonth) &&",
          "new_line_content": "                        // best equivalent proof of work) than the best header chain we know about.",
          "content_same": false
        },
        {
          "line": 4401,
          "old_api": "GetBlockTime",
          "new_api": null,
          "old_text": "mi->second->GetBlockTime()",
          "new_text": null,
          "old_line_content": "                if (send && CNode::OutboundTargetReached(true) && ( ((pindexBestHeader != NULL) && (pindexBestHeader->GetBlockTime() - mi->second->GetBlockTime() > nOneWeek)) || inv.type == MSG_FILTERED_BLOCK) && !pfrom->fWhitelisted)",
          "new_line_content": "                // never disconnect whitelisted nodes",
          "content_same": false
        },
        {
          "line": 4415,
          "old_api": "ReadBlockFromDisk",
          "new_api": null,
          "old_text": "ReadBlockFromDisk(block, (*mi).second, consensusParams)",
          "new_text": null,
          "old_line_content": "                    if (!ReadBlockFromDisk(block, (*mi).second, consensusParams))",
          "new_line_content": "                    // Send block from disk",
          "content_same": false
        },
        {
          "line": 4416,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(!\"cannot load block from disk\")",
          "new_text": null,
          "old_line_content": "                        assert(!\"cannot load block from disk\");",
          "new_line_content": "                    CBlock block;",
          "content_same": false
        },
        {
          "line": 4421,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(pfrom->cs_filter)",
          "new_text": null,
          "old_line_content": "                        LOCK(pfrom->cs_filter);",
          "new_line_content": "                    else // MSG_FILTERED_BLOCK)",
          "content_same": false
        },
        {
          "line": 4425,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::MERKLEBLOCK, merkleBlock)",
          "new_text": null,
          "old_line_content": "                            pfrom->PushMessage(NetMsgType::MERKLEBLOCK, merkleBlock);",
          "new_line_content": "                        {",
          "content_same": false
        },
        {
          "line": 4433,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "BOOST_FOREACH(PairType& pair, merkleBlock.vMatchedTxn)\n                                pfrom->PushMessage(NetMsgType::TX, block.vtx[pair.first])",
          "new_text": null,
          "old_line_content": "                            BOOST_FOREACH(PairType& pair, merkleBlock.vMatchedTxn)",
          "new_line_content": "                            // however we MUST always provide at least what the remote peer needs",
          "content_same": false
        },
        {
          "line": 4447,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()->GetBlockHash()",
          "new_text": null,
          "old_line_content": "                        vInv.push_back(CInv(MSG_BLOCK, chainActive.Tip()->GetBlockHash()));",
          "new_line_content": "                        // wait for other stuff first.",
          "content_same": false
        },
        {
          "line": 4448,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::INV, vInv)",
          "new_text": null,
          "old_line_content": "                        pfrom->PushMessage(NetMsgType::INV, vInv);",
          "new_line_content": "                        vector<CInv> vInv;",
          "content_same": false
        },
        {
          "line": 4453,
          "old_api": "IsKnownType",
          "new_api": null,
          "old_text": "inv.IsKnownType()",
          "new_text": null,
          "old_line_content": "            else if (inv.IsKnownType())",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4458,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_mapRelay)",
          "new_text": null,
          "old_line_content": "                    LOCK(cs_mapRelay);",
          "new_line_content": "                bool pushed = false;",
          "content_same": false
        },
        {
          "line": 4459,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapRelay.find(inv)",
          "new_text": null,
          "old_line_content": "                    map<CInv, CDataStream>::iterator mi = mapRelay.find(inv);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 4467,
          "old_api": "lookup",
          "new_api": null,
          "old_text": "mempool.lookup(inv.hash, tx)",
          "new_text": null,
          "old_line_content": "                    if (mempool.lookup(inv.hash, tx)) {",
          "new_line_content": "                if (!pushed && inv.type == MSG_TX) {",
          "content_same": false
        },
        {
          "line": 4476,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vNotFound.push_back(inv)",
          "new_text": null,
          "old_line_content": "                    vNotFound.push_back(inv);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 4481,
          "old_api": "Inventory",
          "new_api": null,
          "old_text": "GetMainSignals().Inventory(inv.hash)",
          "new_text": null,
          "old_line_content": "            GetMainSignals().Inventory(inv.hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4488,
          "old_api": "begin",
          "new_api": null,
          "old_text": "pfrom->vRecvGetData.begin()",
          "new_text": null,
          "old_line_content": "    pfrom->vRecvGetData.erase(pfrom->vRecvGetData.begin(), it);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 4498,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::NOTFOUND, vNotFound)",
          "new_text": null,
          "old_line_content": "        pfrom->PushMessage(NetMsgType::NOTFOUND, vNotFound);",
          "new_line_content": "        // risk analyze) the dependencies of transactions relevant to them, without",
          "content_same": false
        },
        {
          "line": 4504,
          "old_api": "RandAddSeedPerfmon",
          "new_api": null,
          "old_text": "RandAddSeedPerfmon()",
          "new_text": null,
          "old_line_content": "    RandAddSeedPerfmon();",
          "new_line_content": "bool static ProcessMessage(CNode* pfrom, string strCommand, CDataStream& vRecv, int64_t nTimeReceived, const CChainParams& chainparams)",
          "content_same": false
        },
        {
          "line": 4505,
          "old_api": "size",
          "new_api": null,
          "old_text": "vRecv.size()",
          "new_text": null,
          "old_line_content": "    LogPrint(\"net\", \"received: %s (%u bytes) peer=%d\\n\", SanitizeString(strCommand), vRecv.size(), pfrom->id);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 4519,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "            Misbehaving(pfrom->GetId(), 100);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4533,
          "old_api": "string",
          "new_api": null,
          "old_text": "string(\"Duplicate version message\")",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_DUPLICATE, string(\"Duplicate version message\"));",
          "new_line_content": "        if (pfrom->nVersion != 0)",
          "content_same": false
        },
        {
          "line": 4534,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "            Misbehaving(pfrom->GetId(), 1);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4546,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"peer=%d using obsolete version %i; disconnecting\\n\", pfrom->id, pfrom->nVersion)",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"peer=%d using obsolete version %i; disconnecting\\n\", pfrom->id, pfrom->nVersion);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4547,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_OBSOLETE,\n                               strprintf(\"Version must be %d or greater\", MIN_PEER_PROTO_VERSION))",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_OBSOLETE,",
          "new_line_content": "            // disconnect from peers older than this proto version",
          "content_same": false
        },
        {
          "line": 4555,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vRecv.empty()",
          "new_text": null,
          "old_line_content": "        if (!vRecv.empty())",
          "new_line_content": "        if (pfrom->nVersion == 10300)",
          "content_same": false
        },
        {
          "line": 4558,
          "old_api": "LIMITED_STRING",
          "new_api": null,
          "old_text": "LIMITED_STRING(pfrom->strSubVer, MAX_SUBVERSION_LENGTH)",
          "new_text": null,
          "old_line_content": "            vRecv >> LIMITED_STRING(pfrom->strSubVer, MAX_SUBVERSION_LENGTH);",
          "new_line_content": "            vRecv >> addrFrom >> nNonce;",
          "content_same": false
        },
        {
          "line": 4571,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "pfrom->addr.ToString()",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"connected to self at %s, disconnecting\\n\", pfrom->addr.ToString());",
          "new_line_content": "        if (nNonce == nLocalHostNonce && nNonce > 1)",
          "content_same": false
        },
        {
          "line": 4577,
          "old_api": "IsRoutable",
          "new_api": null,
          "old_text": "addrMe.IsRoutable()",
          "new_text": null,
          "old_line_content": "        if (pfrom->fInbound && addrMe.IsRoutable())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4584,
          "old_api": "PushVersion",
          "new_api": null,
          "old_text": "pfrom->PushVersion()",
          "new_text": null,
          "old_line_content": "            pfrom->PushVersion();",
          "new_line_content": "        // Be shy and don't send version until we hear",
          "content_same": false
        },
        {
          "line": 4589,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "        UpdatePreferredDownload(pfrom, State(pfrom->GetId()));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4592,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::VERACK)",
          "new_text": null,
          "old_line_content": "        pfrom->PushMessage(NetMsgType::VERACK);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4593,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(pfrom->nVersion, PROTOCOL_VERSION)",
          "new_text": null,
          "old_line_content": "        pfrom->ssSend.SetVersion(min(pfrom->nVersion, PROTOCOL_VERSION));",
          "new_line_content": "        // Change version",
          "content_same": false
        },
        {
          "line": 4598,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "            if (fListen && !IsInitialBlockDownload())",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4601,
          "old_api": "IsRoutable",
          "new_api": null,
          "old_text": "addr.IsRoutable()",
          "new_text": null,
          "old_line_content": "                if (addr.IsRoutable())",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4604,
          "old_api": "PushAddress",
          "new_api": null,
          "old_text": "pfrom->PushAddress(addr)",
          "new_text": null,
          "old_line_content": "                    pfrom->PushAddress(addr);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 4613,
          "old_api": "size",
          "new_api": null,
          "old_text": "addrman.size()",
          "new_text": null,
          "old_line_content": "            if (pfrom->fOneShot || pfrom->nVersion >= CADDR_TIME_VERSION || addrman.size() < 1000)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4618,
          "old_api": "Good",
          "new_api": null,
          "old_text": "addrman.Good(pfrom->addr)",
          "new_text": null,
          "old_line_content": "            addrman.Good(pfrom->addr);",
          "new_line_content": "                pfrom->fGetAddr = true;",
          "content_same": false
        },
        {
          "line": 4622,
          "old_api": "Add",
          "new_api": null,
          "old_text": "addrman.Add(addrFrom, addrFrom)",
          "new_text": null,
          "old_line_content": "                addrman.Add(addrFrom, addrFrom);",
          "new_line_content": "            if (((CNetAddr)pfrom->addr) == (CNetAddr)addrFrom)",
          "content_same": false
        },
        {
          "line": 4623,
          "old_api": "Good",
          "new_api": null,
          "old_text": "addrman.Good(addrFrom)",
          "new_text": null,
          "old_line_content": "                addrman.Good(addrFrom);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4631,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "pfrom->addr.ToString()",
          "new_text": null,
          "old_line_content": "            remoteAddr = \", peeraddr=\" + pfrom->addr.ToString();",
          "new_line_content": "        string remoteAddr;",
          "content_same": false
        },
        {
          "line": 4638,
          "old_api": "GetTime",
          "new_api": null,
          "old_text": "GetTime()",
          "new_text": null,
          "old_line_content": "        int64_t nTimeOffset = nTime - GetTime();",
          "new_line_content": "                  remoteAddr);",
          "content_same": false
        },
        {
          "line": 4647,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "        Misbehaving(pfrom->GetId(), 1);",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4654,
          "old_api": "min",
          "new_api": null,
          "old_text": "min(pfrom->nVersion, PROTOCOL_VERSION)",
          "new_text": null,
          "old_line_content": "        pfrom->SetRecvVersion(min(pfrom->nVersion, PROTOCOL_VERSION));",
          "new_line_content": "    else if (strCommand == NetMsgType::VERACK)",
          "content_same": false
        },
        {
          "line": 4658,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "            LOCK(cs_main);",
          "new_line_content": "        // Mark this node as currently connected, so we update its timestamp later.",
          "content_same": false
        },
        {
          "line": 4659,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "            State(pfrom->GetId())->fCurrentlyConnected = true;",
          "new_line_content": "        if (pfrom->fNetworkNode) {",
          "content_same": false
        },
        {
          "line": 4667,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::SENDHEADERS)",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::SENDHEADERS);",
          "new_line_content": "            // non-NODE NETWORK peers can announce blocks (such as pruning",
          "content_same": false
        },
        {
          "line": 4678,
          "old_api": "size",
          "new_api": null,
          "old_text": "addrman.size()",
          "new_text": null,
          "old_line_content": "        if (pfrom->nVersion < CADDR_TIME_VERSION && addrman.size() > 1000)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4683,
          "old_api": "size",
          "new_api": null,
          "old_text": "vAddr.size()",
          "new_text": null,
          "old_line_content": "            return error(\"message addr size() = %u\", vAddr.size());",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4688,
          "old_api": "GetAdjustedTime",
          "new_api": null,
          "old_text": "GetAdjustedTime()",
          "new_text": null,
          "old_line_content": "        int64_t nNow = GetAdjustedTime();",
          "new_line_content": "        // Store the new addresses",
          "content_same": false
        },
        {
          "line": 4692,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "            boost::this_thread::interruption_point();",
          "new_line_content": "        BOOST_FOREACH(CAddress& addr, vAddr)",
          "content_same": false
        },
        {
          "line": 4696,
          "old_api": "AddAddressKnown",
          "new_api": null,
          "old_text": "pfrom->AddAddressKnown(addr)",
          "new_text": null,
          "old_line_content": "            pfrom->AddAddressKnown(addr);",
          "new_line_content": "            if (addr.nTime <= 100000000 || addr.nTime > nNow + 10 * 60)",
          "content_same": false
        },
        {
          "line": 4697,
          "old_api": "IsReachable",
          "new_api": null,
          "old_text": "IsReachable(addr)",
          "new_text": null,
          "old_line_content": "            bool fReachable = IsReachable(addr);",
          "new_line_content": "                addr.nTime = nNow - 5 * 24 * 60 * 60;",
          "content_same": false
        },
        {
          "line": 4702,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_vNodes)",
          "new_text": null,
          "old_line_content": "                    LOCK(cs_vNodes);",
          "new_line_content": "                // Relay to a limited number of other nodes",
          "content_same": false
        },
        {
          "line": 4706,
          "old_api": "IsNull",
          "new_api": null,
          "old_text": "hashSalt.IsNull()",
          "new_text": null,
          "old_line_content": "                    if (hashSalt.IsNull())",
          "new_line_content": "                    // at a time so the addrKnowns of the chosen nodes prevent repeats",
          "content_same": false
        },
        {
          "line": 4707,
          "old_api": "GetRandHash",
          "new_api": null,
          "old_text": "GetRandHash()",
          "new_text": null,
          "old_line_content": "                        hashSalt = GetRandHash();",
          "new_line_content": "                    static uint256 hashSalt;",
          "content_same": false
        },
        {
          "line": 4717,
          "old_api": "memcpy",
          "new_api": null,
          "old_text": "memcpy(&nPointer, &pnode, sizeof(nPointer))",
          "new_text": null,
          "old_line_content": "                        memcpy(&nPointer, &pnode, sizeof(nPointer));",
          "new_line_content": "                            continue;",
          "content_same": false
        },
        {
          "line": 4718,
          "old_api": "UintToArith256",
          "new_api": null,
          "old_text": "UintToArith256(hashRand)",
          "new_text": null,
          "old_line_content": "                        uint256 hashKey = ArithToUint256(UintToArith256(hashRand) ^ nPointer);",
          "new_line_content": "                        unsigned int nPointer;",
          "content_same": false
        },
        {
          "line": 4723,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapMix.end()",
          "new_text": null,
          "old_line_content": "                    for (multimap<uint256, CNode*>::iterator mi = mapMix.begin(); mi != mapMix.end() && nRelayNodes-- > 0; ++mi)",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 4724,
          "old_api": "PushAddress",
          "new_api": null,
          "old_text": "*mi).second)->PushAddress(addr)",
          "new_text": null,
          "old_line_content": "                        ((*mi).second)->PushAddress(addr);",
          "new_line_content": "                    int nRelayNodes = fReachable ? 2 : 1; // limited relaying of addresses outside our network(s)",
          "content_same": false
        },
        {
          "line": 4729,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vAddrOk.push_back(addr)",
          "new_text": null,
          "old_line_content": "                vAddrOk.push_back(addr);",
          "new_line_content": "            // Do not store addresses outside our network",
          "content_same": false
        },
        {
          "line": 4732,
          "old_api": "size",
          "new_api": null,
          "old_text": "vAddr.size()",
          "new_text": null,
          "old_line_content": "        if (vAddr.size() < 1000)",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4740,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_main);",
          "new_line_content": "    else if (strCommand == NetMsgType::SENDHEADERS)",
          "content_same": false
        },
        {
          "line": 4741,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "        State(pfrom->GetId())->fPreferHeaders = true;",
          "new_line_content": "    {",
          "content_same": false
        },
        {
          "line": 4749,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "        if (vInv.size() > MAX_INV_SZ)",
          "new_line_content": "        vector<CInv> vInv;",
          "content_same": false
        },
        {
          "line": 4752,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "            return error(\"message inv size() = %u\", vInv.size());",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4755,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY)",
          "new_text": null,
          "old_line_content": "        bool fBlocksOnly = GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4758,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)",
          "new_text": null,
          "old_line_content": "        if (pfrom->fWhitelisted && GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4761,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_main);",
          "new_line_content": "            fBlocksOnly = false;",
          "content_same": false
        },
        {
          "line": 4765,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "        for (unsigned int nInv = 0; nInv < vInv.size(); nInv++)",
          "new_line_content": "        std::vector<CInv> vToFetch;",
          "content_same": false
        },
        {
          "line": 4769,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "            boost::this_thread::interruption_point();",
          "new_line_content": "            const CInv &inv = vInv[nInv];",
          "content_same": false
        },
        {
          "line": 4770,
          "old_api": "AddInventoryKnown",
          "new_api": null,
          "old_text": "pfrom->AddInventoryKnown(inv)",
          "new_text": null,
          "old_line_content": "            pfrom->AddInventoryKnown(inv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4773,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "inv.ToString()",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"got inv: %s  %s peer=%d\\n\", inv.ToString(), fAlreadyHave ? \"have\" : \"new\", pfrom->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4776,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "                UpdateBlockAvailability(pfrom->GetId(), inv.hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4777,
          "old_api": "count",
          "new_api": null,
          "old_text": "mapBlocksInFlight.count(inv.hash)",
          "new_text": null,
          "old_line_content": "                if (!fAlreadyHave && !fImporting && !fReindex && !mapBlocksInFlight.count(inv.hash)) {",
          "new_line_content": "            if (inv.type == MSG_BLOCK) {",
          "content_same": false
        },
        {
          "line": 4786,
          "old_api": "GetLocator",
          "new_api": null,
          "old_text": "chainActive.GetLocator(pindexBestHeader)",
          "new_text": null,
          "old_line_content": "                    pfrom->PushMessage(NetMsgType::GETHEADERS, chainActive.GetLocator(pindexBestHeader), inv.hash);",
          "new_line_content": "                    // doing this will result in the received block being rejected as an orphan in case it is",
          "content_same": false
        },
        {
          "line": 4787,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "                    CNodeState *nodestate = State(pfrom->GetId());",
          "new_line_content": "                    // not a direct successor.",
          "content_same": false
        },
        {
          "line": 4793,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "                        MarkBlockAsInFlight(pfrom->GetId(), inv.hash, chainparams.GetConsensus());",
          "new_line_content": "                        // Mark block as in flight already, even though the actual \"getdata\" message only goes out",
          "content_same": false
        },
        {
          "line": 4801,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "inv.hash.ToString()",
          "new_text": null,
          "old_line_content": "                    LogPrint(\"net\", \"transaction (%s) inv sent in violation of protocol peer=%d\\n\", inv.hash.ToString(), pfrom->id);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4802,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "                else if (!fAlreadyHave && !fImporting && !fReindex && !IsInitialBlockDownload())",
          "new_line_content": "                if (fBlocksOnly)",
          "content_same": false
        },
        {
          "line": 4807,
          "old_api": "Inventory",
          "new_api": null,
          "old_text": "GetMainSignals().Inventory(inv.hash)",
          "new_text": null,
          "old_line_content": "            GetMainSignals().Inventory(inv.hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4810,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "                Misbehaving(pfrom->GetId(), 50);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4815,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vToFetch.empty()",
          "new_text": null,
          "old_line_content": "        if (!vToFetch.empty())",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4816,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::GETDATA, vToFetch)",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::GETDATA, vToFetch);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4824,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "        if (vInv.size() > MAX_INV_SZ)",
          "new_line_content": "        vector<CInv> vInv;",
          "content_same": false
        },
        {
          "line": 4827,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "            return error(\"message getdata size() = %u\", vInv.size());",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4830,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "        if (fDebug || (vInv.size() != 1))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4831,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"received getdata (%u invsz) peer=%d\\n\", vInv.size(), pfrom->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4834,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "vInv[0].ToString()",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"received getdata for: %s peer=%d\\n\", vInv[0].ToString(), pfrom->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4837,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "        ProcessGetData(pfrom, chainparams.GetConsensus());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4847,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_main);",
          "new_line_content": "        vRecv >> locator >> hashStop;",
          "content_same": false
        },
        {
          "line": 4850,
          "old_api": "FindForkInGlobalIndex",
          "new_api": null,
          "old_text": "FindForkInGlobalIndex(chainActive, locator)",
          "new_text": null,
          "old_line_content": "        CBlockIndex* pindex = FindForkInGlobalIndex(chainActive, locator);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4854,
          "old_api": "Next",
          "new_api": null,
          "old_text": "chainActive.Next(pindex)",
          "new_text": null,
          "old_line_content": "            pindex = chainActive.Next(pindex);",
          "new_line_content": "        // Send the rest of the chain",
          "content_same": false
        },
        {
          "line": 4857,
          "old_api": "Next",
          "new_api": null,
          "old_text": "chainActive.Next(pindex)",
          "new_text": null,
          "old_line_content": "        for (; pindex; pindex = chainActive.Next(pindex))",
          "new_line_content": "        int nLimit = 500;",
          "content_same": false
        },
        {
          "line": 4866,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "            const int nPrunedBlocksLikelyToHave = MIN_BLOCKS_TO_KEEP - 3600 / chainparams.GetConsensus().nPowTargetSpacing;",
          "new_line_content": "            // If pruning, don't inv blocks unless we have on disk and are likely to still have",
          "content_same": false
        },
        {
          "line": 4867,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "            if (fPruneMode && (!(pindex->nStatus & BLOCK_HAVE_DATA) || pindex->nHeight <= chainActive.Tip()->nHeight - nPrunedBlocksLikelyToHave))",
          "new_line_content": "            // for some reasonable time window (1 hour) that block relay might require.",
          "content_same": false
        },
        {
          "line": 4872,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindex->GetBlockHash()",
          "new_text": null,
          "old_line_content": "            pfrom->PushInventory(CInv(MSG_BLOCK, pindex->GetBlockHash()));",
          "new_line_content": "                break;",
          "content_same": false
        },
        {
          "line": 4877,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "pindex->GetBlockHash().ToString()",
          "new_text": null,
          "old_line_content": "                LogPrint(\"net\", \"  getblocks stopping at limit %d %s\\n\", pindex->nHeight, pindex->GetBlockHash().ToString());",
          "new_line_content": "                // When this block is requested, we'll send an inv that'll",
          "content_same": false
        },
        {
          "line": 4878,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindex->GetBlockHash()",
          "new_text": null,
          "old_line_content": "                pfrom->hashContinue = pindex->GetBlockHash();",
          "new_line_content": "                // trigger the peer to getblocks the next batch of inventory.",
          "content_same": false
        },
        {
          "line": 4891,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_main);",
          "new_line_content": "        vRecv >> locator >> hashStop;",
          "content_same": false
        },
        {
          "line": 4892,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "        if (IsInitialBlockDownload() && !pfrom->fWhitelisted) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4897,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "        CNodeState *nodestate = State(pfrom->GetId());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 4902,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapBlockIndex.find(hashStop)",
          "new_text": null,
          "old_line_content": "            BlockMap::iterator mi = mapBlockIndex.find(hashStop);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4903,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapBlockIndex.end()",
          "new_text": null,
          "old_line_content": "            if (mi == mapBlockIndex.end())",
          "new_line_content": "            // If locator is null, return the hashStop block",
          "content_same": false
        },
        {
          "line": 4910,
          "old_api": "FindForkInGlobalIndex",
          "new_api": null,
          "old_text": "FindForkInGlobalIndex(chainActive, locator)",
          "new_text": null,
          "old_line_content": "            pindex = FindForkInGlobalIndex(chainActive, locator);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4918,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "hashStop.ToString()",
          "new_text": null,
          "old_line_content": "        LogPrint(\"net\", \"getheaders %d to %s from peer=%d\\n\", (pindex ? pindex->nHeight : -1), hashStop.ToString(), pfrom->id);",
          "new_line_content": "        vector<CBlock> vHeaders;",
          "content_same": false
        },
        {
          "line": 4919,
          "old_api": "Next",
          "new_api": null,
          "old_text": "chainActive.Next(pindex)",
          "new_text": null,
          "old_line_content": "        for (; pindex; pindex = chainActive.Next(pindex))",
          "new_line_content": "        int nLimit = MAX_HEADERS_RESULTS;",
          "content_same": false
        },
        {
          "line": 4922,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindex->GetBlockHash()",
          "new_text": null,
          "old_line_content": "            if (--nLimit <= 0 || pindex->GetBlockHash() == hashStop)",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 4929,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "        nodestate->pindexBestHeaderSent = pindex ? pindex : chainActive.Tip();",
          "new_line_content": "        // headers message). In both cases it's safe to update",
          "content_same": false
        },
        {
          "line": 4930,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::HEADERS, vHeaders)",
          "new_text": null,
          "old_line_content": "        pfrom->PushMessage(NetMsgType::HEADERS, vHeaders);",
          "new_line_content": "        // pindexBestHeaderSent to be our tip.",
          "content_same": false
        },
        {
          "line": 4938,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)",
          "new_text": null,
          "old_line_content": "        if (GetBoolArg(\"-blocksonly\", DEFAULT_BLOCKSONLY) && (!pfrom->fWhitelisted || !GetBoolArg(\"-whitelistrelay\", DEFAULT_WHITELISTRELAY)))",
          "new_line_content": "        // Stop processing the transaction early if",
          "content_same": false
        },
        {
          "line": 4949,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "tx.GetHash()",
          "new_text": null,
          "old_line_content": "        CInv inv(MSG_TX, tx.GetHash());",
          "new_line_content": "        vRecv >> tx;",
          "content_same": false
        },
        {
          "line": 4950,
          "old_api": "AddInventoryKnown",
          "new_api": null,
          "old_text": "pfrom->AddInventoryKnown(inv)",
          "new_text": null,
          "old_line_content": "        pfrom->AddInventoryKnown(inv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4957,
          "old_api": "erase",
          "new_api": null,
          "old_text": "pfrom->setAskFor.erase(inv.hash)",
          "new_text": null,
          "old_line_content": "        pfrom->setAskFor.erase(inv.hash);",
          "new_line_content": "        CValidationState state;",
          "content_same": false
        },
        {
          "line": 4958,
          "old_api": "erase",
          "new_api": null,
          "old_text": "mapAlreadyAskedFor.erase(inv.hash)",
          "new_text": null,
          "old_line_content": "        mapAlreadyAskedFor.erase(inv.hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4961,
          "old_api": "AcceptToMemoryPool",
          "new_api": null,
          "old_text": "AcceptToMemoryPool(mempool, state, tx, true, &fMissingInputs, &txFeeRate)",
          "new_text": null,
          "old_line_content": "        if (!AlreadyHave(inv) && AcceptToMemoryPool(mempool, state, tx, true, &fMissingInputs, &txFeeRate)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4969,
          "old_api": "DynamicMemoryUsage",
          "new_api": null,
          "old_text": "mempool.DynamicMemoryUsage()",
          "new_text": null,
          "old_line_content": "                mempool.size(), mempool.DynamicMemoryUsage() / 1000);",
          "new_line_content": "                pfrom->id,",
          "content_same": false
        },
        {
          "line": 4973,
          "old_api": "size",
          "new_api": null,
          "old_text": "vWorkQueue.size()",
          "new_text": null,
          "old_line_content": "            for (unsigned int i = 0; i < vWorkQueue.size(); i++)",
          "new_line_content": "            // Recursively process any orphan transactions that depended on this one",
          "content_same": false
        },
        {
          "line": 4976,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapOrphanTransactionsByPrev.end()",
          "new_text": null,
          "old_line_content": "                if (itByPrev == mapOrphanTransactionsByPrev.end())",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 4979,
          "old_api": "end",
          "new_api": null,
          "old_text": "itByPrev->second.end()",
          "new_text": null,
          "old_line_content": "                     mi != itByPrev->second.end();",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 4992,
          "old_api": "count",
          "new_api": null,
          "old_text": "setMisbehaving.count(fromPeer)",
          "new_text": null,
          "old_line_content": "                    if (setMisbehaving.count(fromPeer))",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 4995,
          "old_api": "AcceptToMemoryPool",
          "new_api": null,
          "old_text": "AcceptToMemoryPool(mempool, stateDummy, orphanTx, true, &fMissingInputs2, &orphanFeeRate)",
          "new_text": null,
          "old_line_content": "                    if (AcceptToMemoryPool(mempool, stateDummy, orphanTx, true, &fMissingInputs2, &orphanFeeRate)) {",
          "new_line_content": "                        continue;",
          "content_same": false
        },
        {
          "line": 5004,
          "old_api": "IsInvalid",
          "new_api": null,
          "old_text": "stateDummy.IsInvalid(nDos)",
          "new_text": null,
          "old_line_content": "                        if (stateDummy.IsInvalid(nDos) && nDos > 0)",
          "new_line_content": "                    {",
          "content_same": false
        },
        {
          "line": 5007,
          "old_api": "Misbehaving",
          "new_api": null,
          "old_text": "Misbehaving(fromPeer, nDos)",
          "new_text": null,
          "old_line_content": "                            Misbehaving(fromPeer, nDos);",
          "new_line_content": "                        {",
          "content_same": false
        },
        {
          "line": 5008,
          "old_api": "insert",
          "new_api": null,
          "old_text": "setMisbehaving.insert(fromPeer)",
          "new_text": null,
          "old_line_content": "                            setMisbehaving.insert(fromPeer);",
          "new_line_content": "                            // Punish peer that gave us an invalid orphan tx",
          "content_same": false
        },
        {
          "line": 5013,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "orphanHash.ToString()",
          "new_text": null,
          "old_line_content": "                        LogPrint(\"mempool\", \"   removed orphan tx %s\\n\", orphanHash.ToString());",
          "new_line_content": "                        // Has inputs but not accepted to mempool",
          "content_same": false
        },
        {
          "line": 5014,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vEraseQueue.push_back(orphanHash)",
          "new_text": null,
          "old_line_content": "                        vEraseQueue.push_back(orphanHash);",
          "new_line_content": "                        // Probably non-standard or insufficient fee/priority",
          "content_same": false
        },
        {
          "line": 5023,
          "old_api": "EraseOrphanTx",
          "new_api": null,
          "old_text": "EraseOrphanTx(hash)",
          "new_text": null,
          "old_line_content": "                EraseOrphanTx(hash);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5027,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "            AddOrphanTx(tx, pfrom->GetId());",
          "new_line_content": "        else if (fMissingInputs)",
          "content_same": false
        },
        {
          "line": 5030,
          "old_api": "GetArg",
          "new_api": null,
          "old_text": "GetArg(\"-maxorphantx\", DEFAULT_MAX_ORPHAN_TRANSACTIONS)",
          "new_text": null,
          "old_line_content": "            unsigned int nMaxOrphanTx = (unsigned int)std::max((int64_t)0, GetArg(\"-maxorphantx\", DEFAULT_MAX_ORPHAN_TRANSACTIONS));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5031,
          "old_api": "LimitOrphanTxSize",
          "new_api": null,
          "old_text": "LimitOrphanTxSize(nMaxOrphanTx)",
          "new_text": null,
          "old_line_content": "            unsigned int nEvicted = LimitOrphanTxSize(nMaxOrphanTx);",
          "new_line_content": "            // DoS prevention: do not allow mapOrphanTransactions to grow unbounded",
          "content_same": false
        },
        {
          "line": 5036,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "tx.GetHash()",
          "new_text": null,
          "old_line_content": "            recentRejects->insert(tx.GetHash());",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 5048,
          "old_api": "IsInvalid",
          "new_api": null,
          "old_text": "state.IsInvalid(nDoS)",
          "new_text": null,
          "old_line_content": "                if (!state.IsInvalid(nDoS) || nDoS == 0) {",
          "new_line_content": "                // case.",
          "content_same": false
        },
        {
          "line": 5049,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "tx.GetHash().ToString()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"Force relaying tx %s from whitelisted peer=%d\\n\", tx.GetHash().ToString(), pfrom->id);",
          "new_line_content": "                int nDoS = 0;",
          "content_same": false
        },
        {
          "line": 5057,
          "old_api": "IsInvalid",
          "new_api": null,
          "old_text": "state.IsInvalid(nDoS)",
          "new_text": null,
          "old_line_content": "        if (state.IsInvalid(nDoS))",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5062,
          "old_api": "GetRejectCode",
          "new_api": null,
          "old_text": "state.GetRejectCode()",
          "new_text": null,
          "old_line_content": "            if (state.GetRejectCode() < REJECT_INTERNAL) // Never send AcceptToMemoryPool's internal codes over P2P",
          "new_line_content": "                pfrom->id,",
          "content_same": false
        },
        {
          "line": 5077,
          "old_api": "ReadCompactSize",
          "new_api": null,
          "old_text": "ReadCompactSize(vRecv)",
          "new_text": null,
          "old_line_content": "        unsigned int nCount = ReadCompactSize(vRecv);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5080,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"headers message size = %u\", nCount)",
          "new_text": null,
          "old_line_content": "            return error(\"headers message size = %u\", nCount);",
          "new_line_content": "        if (nCount > MAX_HEADERS_RESULTS) {",
          "content_same": false
        },
        {
          "line": 5085,
          "old_api": "ReadCompactSize",
          "new_api": null,
          "old_text": "ReadCompactSize(vRecv)",
          "new_text": null,
          "old_line_content": "            ReadCompactSize(vRecv); // ignore tx count; assume it is 0.",
          "new_line_content": "        for (unsigned int n = 0; n < nCount; n++) {",
          "content_same": false
        },
        {
          "line": 5088,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "        LOCK(cs_main);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5098,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindexLast->GetBlockHash()",
          "new_text": null,
          "old_line_content": "            if (pindexLast != NULL && header.hashPrevBlock != pindexLast->GetBlockHash()) {",
          "new_line_content": "        BOOST_FOREACH(const CBlockHeader& header, headers) {",
          "content_same": false
        },
        {
          "line": 5099,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "                Misbehaving(pfrom->GetId(), 20);",
          "new_line_content": "            CValidationState state;",
          "content_same": false
        },
        {
          "line": 5107,
          "old_api": "error",
          "new_api": null,
          "old_text": "error(\"invalid header received\")",
          "new_text": null,
          "old_line_content": "                    return error(\"invalid header received\");",
          "new_line_content": "                    if (nDoS > 0)",
          "content_same": false
        },
        {
          "line": 5113,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindexLast->GetBlockHash()",
          "new_text": null,
          "old_line_content": "            UpdateBlockAvailability(pfrom->GetId(), pindexLast->GetBlockHash());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5119,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"more getheaders (%d) to end to peer=%d (startheight:%d)\\n\", pindexLast->nHeight, pfrom->id, pfrom->nStartingHeight)",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"more getheaders (%d) to end to peer=%d (startheight:%d)\\n\", pindexLast->nHeight, pfrom->id, pfrom->nStartingHeight);",
          "new_line_content": "            // TODO: optimize: if pindexLast is an ancestor of chainActive.Tip or pindexBestHeader, continue",
          "content_same": false
        },
        {
          "line": 5120,
          "old_api": "uint256",
          "new_api": null,
          "old_text": "uint256()",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::GETHEADERS, chainActive.GetLocator(pindexLast), uint256());",
          "new_line_content": "            // from there instead.",
          "content_same": false
        },
        {
          "line": 5123,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "        bool fCanDirectFetch = CanDirectFetch(chainparams.GetConsensus());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5124,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "        CNodeState *nodestate = State(pfrom->GetId());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5127,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "        if (fCanDirectFetch && pindexLast->IsValid(BLOCK_VALID_TREE) && chainActive.Tip()->nChainWork <= pindexLast->nChainWork) {",
          "new_line_content": "        // If this set of headers is valid and ends in a block with at least as",
          "content_same": false
        },
        {
          "line": 5131,
          "old_api": "size",
          "new_api": null,
          "old_text": "vToFetch.size()",
          "new_text": null,
          "old_line_content": "            while (pindexWalk && !chainActive.Contains(pindexWalk) && vToFetch.size() <= MAX_BLOCKS_IN_TRANSIT_PER_PEER) {",
          "new_line_content": "            CBlockIndex *pindexWalk = pindexLast;",
          "content_same": false
        },
        {
          "line": 5143,
          "old_api": "Contains",
          "new_api": null,
          "old_text": "chainActive.Contains(pindexWalk)",
          "new_text": null,
          "old_line_content": "            if (!chainActive.Contains(pindexWalk)) {",
          "new_line_content": "            // the main chain -- this shouldn't really happen.  Bail out on the",
          "content_same": false
        },
        {
          "line": 5144,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Large reorg, won't direct fetch to %s (%d)\\n\",\n                        pindexLast->GetBlockHash().ToString(),\n                        pindexLast->nHeight)",
          "new_text": null,
          "old_line_content": "                LogPrint(\"net\", \"Large reorg, won't direct fetch to %s (%d)\\n\",",
          "new_line_content": "            // direct fetch and rely on parallel download instead.",
          "content_same": false
        },
        {
          "line": 5155,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindex->GetBlockHash()",
          "new_text": null,
          "old_line_content": "                    vGetData.push_back(CInv(MSG_BLOCK, pindex->GetBlockHash()));",
          "new_line_content": "                        break;",
          "content_same": false
        },
        {
          "line": 5156,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "                    MarkBlockAsInFlight(pfrom->GetId(), pindex->GetBlockHash(), chainparams.GetConsensus(), pindex);",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 5161,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Downloading blocks toward %s (%d) via headers direct fetch\\n\",\n                            pindexLast->GetBlockHash().ToString(), pindexLast->nHeight)",
          "new_text": null,
          "old_line_content": "                    LogPrint(\"net\", \"Downloading blocks toward %s (%d) via headers direct fetch\\n\",",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5165,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::GETDATA, vGetData)",
          "new_text": null,
          "old_line_content": "                    pfrom->PushMessage(NetMsgType::GETDATA, vGetData);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5170,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "        CheckBlockIndex(chainparams.GetConsensus());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5178,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "block.GetHash()",
          "new_text": null,
          "old_line_content": "        CInv inv(MSG_BLOCK, block.GetHash());",
          "new_line_content": "        vRecv >> block;",
          "content_same": false
        },
        {
          "line": 5179,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "inv.hash.ToString()",
          "new_text": null,
          "old_line_content": "        LogPrint(\"net\", \"received block %s peer=%d\\n\", inv.hash.ToString(), pfrom->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5188,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "        bool forceProcessing = pfrom->fWhitelisted && !IsInitialBlockDownload();",
          "new_line_content": "        // Such an unrequested block may still be processed, subject to the",
          "content_same": false
        },
        {
          "line": 5189,
          "old_api": "ProcessNewBlock",
          "new_api": null,
          "old_text": "ProcessNewBlock(state, chainparams, pfrom, &block, forceProcessing, NULL)",
          "new_text": null,
          "old_line_content": "        ProcessNewBlock(state, chainparams, pfrom, &block, forceProcessing, NULL);",
          "new_line_content": "        // conditions in AcceptBlock().",
          "content_same": false
        },
        {
          "line": 5192,
          "old_api": "GetRejectCode",
          "new_api": null,
          "old_text": "state.GetRejectCode()",
          "new_text": null,
          "old_line_content": "            assert (state.GetRejectCode() < REJECT_INTERNAL); // Blocks are never rejected with internal reject codes",
          "new_line_content": "        int nDoS;",
          "content_same": false
        },
        {
          "line": 5197,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pfrom->GetId()",
          "new_text": null,
          "old_line_content": "                Misbehaving(pfrom->GetId(), nDoS);",
          "new_line_content": "            if (nDoS > 0) {",
          "content_same": false
        },
        {
          "line": 5212,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Ignoring \\\"getaddr\\\" from outbound connection. peer=%d\\n\", pfrom->id)",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"Ignoring \\\"getaddr\\\" from outbound connection. peer=%d\\n\", pfrom->id);",
          "new_line_content": "        // the getaddr message mitigates the attack.",
          "content_same": false
        },
        {
          "line": 5216,
          "old_api": "clear",
          "new_api": null,
          "old_text": "pfrom->vAddrToSend.clear()",
          "new_text": null,
          "old_line_content": "        pfrom->vAddrToSend.clear();",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5217,
          "old_api": "GetAddr",
          "new_api": null,
          "old_text": "addrman.GetAddr()",
          "new_text": null,
          "old_line_content": "        vector<CAddress> vAddr = addrman.GetAddr();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5225,
          "old_api": "CNode::OutboundTargetReached(false)",
          "new_api": null,
          "old_text": "CNode::OutboundTargetReached(false)",
          "new_text": null,
          "old_line_content": "        if (CNode::OutboundTargetReached(false) && !pfrom->fWhitelisted)",
          "new_line_content": "    else if (strCommand == NetMsgType::MEMPOOL)",
          "content_same": false
        },
        {
          "line": 5231,
          "old_api": "LOCK2",
          "new_api": null,
          "old_text": "LOCK2(cs_main, pfrom->cs_filter)",
          "new_text": null,
          "old_line_content": "        LOCK2(cs_main, pfrom->cs_filter);",
          "new_line_content": "            return true;",
          "content_same": false
        },
        {
          "line": 5234,
          "old_api": "queryHashes",
          "new_api": null,
          "old_text": "mempool.queryHashes(vtxid)",
          "new_text": null,
          "old_line_content": "        mempool.queryHashes(vtxid);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5240,
          "old_api": "lookup",
          "new_api": null,
          "old_text": "mempool.lookup(hash, tx)",
          "new_text": null,
          "old_line_content": "                bool fInMemPool = mempool.lookup(hash, tx);",
          "new_line_content": "            if (pfrom->pfilter) {",
          "content_same": false
        },
        {
          "line": 5246,
          "old_api": "lookupFeeRate",
          "new_api": null,
          "old_text": "mempool.lookupFeeRate(hash, feeRate)",
          "new_text": null,
          "old_line_content": "                mempool.lookupFeeRate(hash, feeRate);",
          "new_line_content": "            if (pfrom->minFeeFilter) {",
          "content_same": false
        },
        {
          "line": 5247,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(pfrom->cs_feeFilter)",
          "new_text": null,
          "old_line_content": "                LOCK(pfrom->cs_feeFilter);",
          "new_line_content": "                CFeeRate feeRate;",
          "content_same": false
        },
        {
          "line": 5251,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vInv.push_back(inv)",
          "new_text": null,
          "old_line_content": "            vInv.push_back(inv);",
          "new_line_content": "                    continue;",
          "content_same": false
        },
        {
          "line": 5252,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "            if (vInv.size() == MAX_INV_SZ) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5257,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "        if (vInv.size() > 0)",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5258,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::INV, vInv)",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::INV, vInv);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5279,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pfrom->PushMessage(NetMsgType::PONG, nonce)",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::PONG, nonce);",
          "new_line_content": "            // seconds to respond to each, the 5th ping the remote sends would appear to",
          "content_same": false
        },
        {
          "line": 5288,
          "old_api": "in_avail",
          "new_api": null,
          "old_text": "vRecv.in_avail()",
          "new_text": null,
          "old_line_content": "        size_t nAvail = vRecv.in_avail();",
          "new_line_content": "        int64_t pingUsecEnd = nTimeReceived;",
          "content_same": false
        },
        {
          "line": 5304,
          "old_api": "std::min(pfrom->nMinPingUsecTime, pingUsecTime)",
          "new_api": null,
          "old_text": "std::min(pfrom->nMinPingUsecTime, pingUsecTime)",
          "new_text": null,
          "old_line_content": "                        pfrom->nMinPingUsecTime = std::min(pfrom->nMinPingUsecTime, pingUsecTime);",
          "new_line_content": "                        // Successful ping time measurement, replace previous",
          "content_same": false
        },
        {
          "line": 5327,
          "old_api": "empty",
          "new_api": null,
          "old_text": "sProblem.empty()",
          "new_text": null,
          "old_line_content": "        if (!(sProblem.empty())) {",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5328,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"pong peer=%d: %s, %x expected, %x received, %u bytes\\n\",\n                pfrom->id,\n                sProblem,\n                pfrom->nPingNonceSent,\n                nonce,\n                nAvail)",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"pong peer=%d: %s, %x expected, %x received, %u bytes\\n\",",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5346,
          "old_api": "IsWithinSizeConstraints",
          "new_api": null,
          "old_text": "filter.IsWithinSizeConstraints()",
          "new_text": null,
          "old_line_content": "        if (!filter.IsWithinSizeConstraints())",
          "new_line_content": "        vRecv >> filter;",
          "content_same": false
        },
        {
          "line": 5351,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(pfrom->cs_filter)",
          "new_text": null,
          "old_line_content": "            LOCK(pfrom->cs_filter);",
          "new_line_content": "        else",
          "content_same": false
        },
        {
          "line": 5354,
          "old_api": "UpdateEmptyFull",
          "new_api": null,
          "old_text": "pfrom->pfilter->UpdateEmptyFull()",
          "new_text": null,
          "old_line_content": "            pfrom->pfilter->UpdateEmptyFull();",
          "new_line_content": "            delete pfrom->pfilter;",
          "content_same": false
        },
        {
          "line": 5367,
          "old_api": "size",
          "new_api": null,
          "old_text": "vData.size()",
          "new_text": null,
          "old_line_content": "        if (vData.size() > MAX_SCRIPT_ELEMENT_SIZE)",
          "new_line_content": "        // Nodes must NEVER send a data item > 520 bytes (the max size for a script data object,",
          "content_same": false
        },
        {
          "line": 5382,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(pfrom->cs_filter)",
          "new_text": null,
          "old_line_content": "        LOCK(pfrom->cs_filter);",
          "new_line_content": "    else if (strCommand == NetMsgType::FILTERCLEAR)",
          "content_same": false
        },
        {
          "line": 5394,
          "old_api": "LIMITED_STRING",
          "new_api": null,
          "old_text": "LIMITED_STRING(strReason, MAX_REJECT_MESSAGE_LENGTH)",
          "new_text": null,
          "old_line_content": "                vRecv >> LIMITED_STRING(strMsg, CMessageHeader::COMMAND_SIZE) >> ccode >> LIMITED_STRING(strReason, MAX_REJECT_MESSAGE_LENGTH);",
          "new_line_content": "            try {",
          "content_same": false
        },
        {
          "line": 5397,
          "old_api": "itostr",
          "new_api": null,
          "old_text": "itostr(ccode)",
          "new_text": null,
          "old_line_content": "                ss << strMsg << \" code \" << itostr(ccode) << \": \" << strReason;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5403,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "hash.ToString()",
          "new_text": null,
          "old_line_content": "                    ss << \": hash \" << hash.ToString();",
          "new_line_content": "                    uint256 hash;",
          "content_same": false
        },
        {
          "line": 5408,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Unparseable reject message received\\n\")",
          "new_text": null,
          "old_line_content": "                LogPrint(\"net\", \"Unparseable reject message received\\n\");",
          "new_line_content": "            } catch (const std::ios_base::failure&) {",
          "content_same": false
        },
        {
          "line": 5416,
          "old_api": "MoneyRange",
          "new_api": null,
          "old_text": "MoneyRange(newFeeFilter)",
          "new_text": null,
          "old_line_content": "        if (MoneyRange(newFeeFilter)) {",
          "new_line_content": "        CAmount newFeeFilter = 0;",
          "content_same": false
        },
        {
          "line": 5421,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "CFeeRate(newFeeFilter).ToString()",
          "new_text": null,
          "old_line_content": "            LogPrint(\"net\", \"received: feefilter of %s from peer=%d\\n\", CFeeRate(newFeeFilter).ToString(), pfrom->id);",
          "new_line_content": "                pfrom->minFeeFilter = newFeeFilter;",
          "content_same": false
        },
        {
          "line": 5427,
          "old_api": "SanitizeString",
          "new_api": null,
          "old_text": "SanitizeString(strCommand)",
          "new_text": null,
          "old_line_content": "        LogPrint(\"net\", \"Unknown command \\\"%s\\\" from peer=%d\\n\", SanitizeString(strCommand), pfrom->id);",
          "new_line_content": "    else {",
          "content_same": false
        },
        {
          "line": 5438,
          "old_api": "Params",
          "new_api": null,
          "old_text": "Params()",
          "new_text": null,
          "old_line_content": "    const CChainParams& chainparams = Params();",
          "new_line_content": "bool ProcessMessages(CNode* pfrom)",
          "content_same": false
        },
        {
          "line": 5452,
          "old_api": "empty",
          "new_api": null,
          "old_text": "pfrom->vRecvGetData.empty()",
          "new_text": null,
          "old_line_content": "    if (!pfrom->vRecvGetData.empty())",
          "new_line_content": "    bool fOk = true;",
          "content_same": false
        },
        {
          "line": 5453,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "chainparams.GetConsensus()",
          "new_text": null,
          "old_line_content": "        ProcessGetData(pfrom, chainparams.GetConsensus());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5456,
          "old_api": "empty",
          "new_api": null,
          "old_text": "pfrom->vRecvGetData.empty()",
          "new_text": null,
          "old_line_content": "    if (!pfrom->vRecvGetData.empty()) return fOk;",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5459,
          "old_api": "end",
          "new_api": null,
          "old_text": "pfrom->vRecvMsg.end()",
          "new_text": null,
          "old_line_content": "    while (!pfrom->fDisconnect && it != pfrom->vRecvMsg.end()) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5473,
          "old_api": "complete",
          "new_api": null,
          "old_text": "msg.complete()",
          "new_text": null,
          "old_line_content": "        if (!msg.complete())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5480,
          "old_api": "MessageStart",
          "new_api": null,
          "old_text": "chainparams.MessageStart()",
          "new_text": null,
          "old_line_content": "        if (memcmp(msg.hdr.pchMessageStart, chainparams.MessageStart(), MESSAGE_START_SIZE) != 0) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5481,
          "old_api": "GetCommand",
          "new_api": null,
          "old_text": "msg.hdr.GetCommand()",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"PROCESSMESSAGE: INVALID MESSAGESTART %s peer=%d\\n\", SanitizeString(msg.hdr.GetCommand()), pfrom->id);",
          "new_line_content": "        // Scan for message start",
          "content_same": false
        },
        {
          "line": 5488,
          "old_api": "MessageStart",
          "new_api": null,
          "old_text": "chainparams.MessageStart()",
          "new_text": null,
          "old_line_content": "        if (!hdr.IsValid(chainparams.MessageStart()))",
          "new_line_content": "        // Read header",
          "content_same": false
        },
        {
          "line": 5493,
          "old_api": "GetCommand",
          "new_api": null,
          "old_text": "hdr.GetCommand()",
          "new_text": null,
          "old_line_content": "        string strCommand = hdr.GetCommand();",
          "new_line_content": "            continue;",
          "content_same": false
        },
        {
          "line": 5500,
          "old_api": "begin",
          "new_api": null,
          "old_text": "vRecv.begin()",
          "new_text": null,
          "old_line_content": "        uint256 hash = Hash(vRecv.begin(), vRecv.begin() + nMessageSize);",
          "new_line_content": "        // Checksum",
          "content_same": false
        },
        {
          "line": 5501,
          "old_api": "ReadLE32",
          "new_api": null,
          "old_text": "ReadLE32((unsigned char*)&hash)",
          "new_text": null,
          "old_line_content": "        unsigned int nChecksum = ReadLE32((unsigned char*)&hash);",
          "new_line_content": "        CDataStream& vRecv = msg.vRecv;",
          "content_same": false
        },
        {
          "line": 5504,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"%s(%s, %u bytes): CHECKSUM ERROR nChecksum=%08x hdr.nChecksum=%08x\\n\", __func__,\n               SanitizeString(strCommand), nMessageSize, nChecksum, hdr.nChecksum)",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"%s(%s, %u bytes): CHECKSUM ERROR nChecksum=%08x hdr.nChecksum=%08x\\n\", __func__,",
          "new_line_content": "        if (nChecksum != hdr.nChecksum)",
          "content_same": false
        },
        {
          "line": 5505,
          "old_api": "SanitizeString",
          "new_api": null,
          "old_text": "SanitizeString(strCommand)",
          "new_text": null,
          "old_line_content": "               SanitizeString(strCommand), nMessageSize, nChecksum, hdr.nChecksum);",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 5513,
          "old_api": "ProcessMessage",
          "new_api": null,
          "old_text": "ProcessMessage(pfrom, strCommand, vRecv, msg.nTime, chainparams)",
          "new_text": null,
          "old_line_content": "            fRet = ProcessMessage(pfrom, strCommand, vRecv, msg.nTime, chainparams);",
          "new_line_content": "        try",
          "content_same": false
        },
        {
          "line": 5514,
          "old_api": "boost::this_thread::interruption_point()",
          "new_api": null,
          "old_text": "boost::this_thread::interruption_point()",
          "new_text": null,
          "old_line_content": "            boost::this_thread::interruption_point();",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 5518,
          "old_api": "string",
          "new_api": null,
          "old_text": "string(\"error parsing message\")",
          "new_text": null,
          "old_line_content": "            pfrom->PushMessage(NetMsgType::REJECT, strCommand, REJECT_MALFORMED, string(\"error parsing message\"));",
          "new_line_content": "        catch (const std::ios_base::failure& e)",
          "content_same": false
        },
        {
          "line": 5519,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "            if (strstr(e.what(), \"end of data\"))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 5522,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "                LogPrintf(\"%s(%s, %u bytes): Exception '%s' caught, normally caused by a message being shorter than its stated length\\n\", __func__, SanitizeString(strCommand), nMessageSize, e.what());",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5527,
          "old_api": "what",
          "new_api": null,
          "old_text": "e.what()",
          "new_text": null,
          "old_line_content": "                LogPrintf(\"%s(%s, %u bytes): Exception '%s' caught\\n\", __func__, SanitizeString(strCommand), nMessageSize, e.what());",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5531,
          "old_api": "PrintExceptionContinue",
          "new_api": null,
          "old_text": "PrintExceptionContinue(&e, \"ProcessMessages()\")",
          "new_text": null,
          "old_line_content": "                PrintExceptionContinue(&e, \"ProcessMessages()\");",
          "new_line_content": "            else",
          "content_same": false
        },
        {
          "line": 5538,
          "old_api": "PrintExceptionContinue",
          "new_api": null,
          "old_text": "PrintExceptionContinue(&e, \"ProcessMessages()\")",
          "new_text": null,
          "old_line_content": "            PrintExceptionContinue(&e, \"ProcessMessages()\");",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5544,
          "old_api": "SanitizeString",
          "new_api": null,
          "old_text": "SanitizeString(strCommand)",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"%s(%s, %u bytes) FAILED peer=%d\\n\", __func__, SanitizeString(strCommand), nMessageSize, pfrom->id);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5551,
          "old_api": "begin",
          "new_api": null,
          "old_text": "pfrom->vRecvMsg.begin()",
          "new_text": null,
          "old_line_content": "        pfrom->vRecvMsg.erase(pfrom->vRecvMsg.begin(), it);",
          "new_line_content": "    // In case the connection got shut down, its receive buffer was wiped",
          "content_same": false
        },
        {
          "line": 5559,
          "old_api": "GetConsensus",
          "new_api": null,
          "old_text": "Params().GetConsensus()",
          "new_text": null,
          "old_line_content": "    const Consensus::Params& consensusParams = Params().GetConsensus();",
          "new_line_content": "bool SendMessages(CNode* pto)",
          "content_same": false
        },
        {
          "line": 5573,
          "old_api": "GetTimeMicros",
          "new_api": null,
          "old_text": "GetTimeMicros()",
          "new_text": null,
          "old_line_content": "        if (pto->nPingNonceSent == 0 && pto->nPingUsecStart + PING_INTERVAL * 1000000 < GetTimeMicros()) {",
          "new_line_content": "            pingSend = true;",
          "content_same": false
        },
        {
          "line": 5580,
          "old_api": "GetRandBytes",
          "new_api": null,
          "old_text": "GetRandBytes((unsigned char*)&nonce, sizeof(nonce))",
          "new_text": null,
          "old_line_content": "                GetRandBytes((unsigned char*)&nonce, sizeof(nonce));",
          "new_line_content": "            uint64_t nonce = 0;",
          "content_same": false
        },
        {
          "line": 5583,
          "old_api": "GetTimeMicros",
          "new_api": null,
          "old_text": "GetTimeMicros()",
          "new_text": null,
          "old_line_content": "            pto->nPingUsecStart = GetTimeMicros();",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5586,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pto->PushMessage(NetMsgType::PING, nonce)",
          "new_text": null,
          "old_line_content": "                pto->PushMessage(NetMsgType::PING, nonce);",
          "new_line_content": "            if (pto->nVersion > BIP0031_VERSION) {",
          "content_same": false
        },
        {
          "line": 5590,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pto->PushMessage(NetMsgType::PING)",
          "new_text": null,
          "old_line_content": "                pto->PushMessage(NetMsgType::PING);",
          "new_line_content": "                // Peer is too old to support ping command with nonce, pong will never arrive.",
          "content_same": false
        },
        {
          "line": 5594,
          "old_api": "TRY_LOCK",
          "new_api": null,
          "old_text": "TRY_LOCK(cs_main, lockMain)",
          "new_text": null,
          "old_line_content": "        TRY_LOCK(cs_main, lockMain); // Acquire cs_main for IsInitialBlockDownload() and CNodeState()",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5599,
          "old_api": "GetTimeMicros",
          "new_api": null,
          "old_text": "GetTimeMicros()",
          "new_text": null,
          "old_line_content": "        int64_t nNow = GetTimeMicros();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5600,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "        if (!IsInitialBlockDownload() && pto->nNextLocalAddrSend < nNow) {",
          "new_line_content": "        // Address refresh broadcast",
          "content_same": false
        },
        {
          "line": 5609,
          "old_api": "PoissonNextSend",
          "new_api": null,
          "old_text": "PoissonNextSend(nNow, AVG_ADDRESS_BROADCAST_INTERVAL)",
          "new_text": null,
          "old_line_content": "            pto->nNextAddrSend = PoissonNextSend(nNow, AVG_ADDRESS_BROADCAST_INTERVAL);",
          "new_line_content": "        //",
          "content_same": false
        },
        {
          "line": 5614,
          "old_api": "GetKey",
          "new_api": null,
          "old_text": "addr.GetKey()",
          "new_text": null,
          "old_line_content": "                if (!pto->addrKnown.contains(addr.GetKey()))",
          "new_line_content": "            BOOST_FOREACH(const CAddress& addr, pto->vAddrToSend)",
          "content_same": false
        },
        {
          "line": 5617,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vAddr.push_back(addr)",
          "new_text": null,
          "old_line_content": "                    vAddr.push_back(addr);",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 5622,
          "old_api": "clear",
          "new_api": null,
          "old_text": "vAddr.clear()",
          "new_text": null,
          "old_line_content": "                        vAddr.clear();",
          "new_line_content": "                    {",
          "content_same": false
        },
        {
          "line": 5626,
          "old_api": "clear",
          "new_api": null,
          "old_text": "pto->vAddrToSend.clear()",
          "new_text": null,
          "old_line_content": "            pto->vAddrToSend.clear();",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5627,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vAddr.empty()",
          "new_text": null,
          "old_line_content": "            if (!vAddr.empty())",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5631,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pto->GetId()",
          "new_text": null,
          "old_line_content": "        CNodeState &state = *State(pto->GetId());",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5634,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "pto->addr.ToString()",
          "new_text": null,
          "old_line_content": "                LogPrintf(\"Warning: not punishing whitelisted peer %s!\\n\", pto->addr.ToString());",
          "new_line_content": "        if (state.fShouldBan) {",
          "content_same": false
        },
        {
          "line": 5637,
          "old_api": "IsLocal",
          "new_api": null,
          "old_text": "pto->addr.IsLocal()",
          "new_text": null,
          "old_line_content": "                if (pto->addr.IsLocal())",
          "new_line_content": "            else {",
          "content_same": false
        },
        {
          "line": 5638,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "pto->addr.ToString()",
          "new_text": null,
          "old_line_content": "                    LogPrintf(\"Warning: not banning local peer %s!\\n\", pto->addr.ToString());",
          "new_line_content": "                pto->fDisconnect = true;",
          "content_same": false
        },
        {
          "line": 5641,
          "old_api": "CNode::Ban(pto->addr, BanReasonNodeMisbehaving)",
          "new_api": null,
          "old_text": "CNode::Ban(pto->addr, BanReasonNodeMisbehaving)",
          "new_text": null,
          "old_line_content": "                    CNode::Ban(pto->addr, BanReasonNodeMisbehaving);",
          "new_line_content": "                else",
          "content_same": false
        },
        {
          "line": 5648,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pto->PushMessage(NetMsgType::REJECT, (string)NetMsgType::BLOCK, reject.chRejectCode, reject.strRejectReason, reject.hashBlock)",
          "new_text": null,
          "old_line_content": "            pto->PushMessage(NetMsgType::REJECT, (string)NetMsgType::BLOCK, reject.chRejectCode, reject.strRejectReason, reject.hashBlock);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5649,
          "old_api": "clear",
          "new_api": null,
          "old_text": "state.rejects.clear()",
          "new_text": null,
          "old_line_content": "        state.rejects.clear();",
          "new_line_content": "        BOOST_FOREACH(const CBlockReject& reject, state.rejects)",
          "content_same": false
        },
        {
          "line": 5653,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "            pindexBestHeader = chainActive.Tip();",
          "new_line_content": "        // Start block sync",
          "content_same": false
        },
        {
          "line": 5657,
          "old_api": "GetAdjustedTime",
          "new_api": null,
          "old_text": "GetAdjustedTime()",
          "new_text": null,
          "old_line_content": "            if ((nSyncStarted == 0 && fFetch) || pindexBestHeader->GetBlockTime() > GetAdjustedTime() - 24 * 60 * 60) {",
          "new_line_content": "        if (!state.fSyncStarted && !pto->fClient && !fImporting && !fReindex) {",
          "content_same": false
        },
        {
          "line": 5670,
          "old_api": "LogPrint",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"initial getheaders (%d) to peer=%d (startheight:%d)\\n\", pindexStart->nHeight, pto->id, pto->nStartingHeight)",
          "new_text": null,
          "old_line_content": "                LogPrint(\"net\", \"initial getheaders (%d) to peer=%d (startheight:%d)\\n\", pindexStart->nHeight, pto->id, pto->nStartingHeight);",
          "new_line_content": "                if (pindexStart->pprev)",
          "content_same": false
        },
        {
          "line": 5671,
          "old_api": "uint256",
          "new_api": null,
          "old_text": "uint256()",
          "new_text": null,
          "old_line_content": "                pto->PushMessage(NetMsgType::GETHEADERS, chainActive.GetLocator(pindexStart), uint256());",
          "new_line_content": "                    pindexStart = pindexStart->pprev;",
          "content_same": false
        },
        {
          "line": 5678,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "        if (!fReindex && !fImporting && !IsInitialBlockDownload())",
          "new_line_content": "        // Except during reindex, importing and IBD, when old wallet",
          "content_same": false
        },
        {
          "line": 5694,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(pto->cs_inventory)",
          "new_text": null,
          "old_line_content": "            LOCK(pto->cs_inventory);",
          "new_line_content": "            // blocks, or if the peer doesn't want headers, just",
          "content_same": false
        },
        {
          "line": 5706,
          "old_api": "find",
          "new_api": null,
          "old_text": "mapBlockIndex.find(hash)",
          "new_text": null,
          "old_line_content": "                    BlockMap::iterator mi = mapBlockIndex.find(hash);",
          "new_line_content": "                // headers that aren't on chainActive, give up.",
          "content_same": false
        },
        {
          "line": 5707,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapBlockIndex.end()",
          "new_text": null,
          "old_line_content": "                    assert(mi != mapBlockIndex.end());",
          "new_line_content": "                BOOST_FOREACH(const uint256 &hash, pto->vBlockHashesToAnnounce) {",
          "content_same": false
        },
        {
          "line": 5714,
          "old_api": "assert",
          "new_api": null,
          "old_text": "assert(pBestIndex == NULL || pindex->pprev == pBestIndex)",
          "new_text": null,
          "old_line_content": "                    assert(pBestIndex == NULL || pindex->pprev == pBestIndex);",
          "new_line_content": "                        break;",
          "content_same": false
        },
        {
          "line": 5718,
          "old_api": "GetBlockHeader",
          "new_api": null,
          "old_text": "pindex->GetBlockHeader()",
          "new_text": null,
          "old_line_content": "                        vHeaders.push_back(pindex->GetBlockHeader());",
          "new_line_content": "                    if (fFoundStartingHeader) {",
          "content_same": false
        },
        {
          "line": 5719,
          "old_api": "PeerHasHeader",
          "new_api": null,
          "old_text": "PeerHasHeader(&state, pindex)",
          "new_text": null,
          "old_line_content": "                    } else if (PeerHasHeader(&state, pindex)) {",
          "new_line_content": "                        // add this to the headers message",
          "content_same": false
        },
        {
          "line": 5725,
          "old_api": "GetBlockHeader",
          "new_api": null,
          "old_text": "pindex->GetBlockHeader()",
          "new_text": null,
          "old_line_content": "                        vHeaders.push_back(pindex->GetBlockHeader());",
          "new_line_content": "                        // Start sending headers.",
          "content_same": false
        },
        {
          "line": 5738,
          "old_api": "empty",
          "new_api": null,
          "old_text": "pto->vBlockHashesToAnnounce.empty()",
          "new_text": null,
          "old_line_content": "                if (!pto->vBlockHashesToAnnounce.empty()) {",
          "new_line_content": "                // The last entry in vBlockHashesToAnnounce was our tip at some point",
          "content_same": false
        },
        {
          "line": 5739,
          "old_api": "back",
          "new_api": null,
          "old_text": "pto->vBlockHashesToAnnounce.back()",
          "new_text": null,
          "old_line_content": "                    const uint256 &hashToAnnounce = pto->vBlockHashesToAnnounce.back();",
          "new_line_content": "                // in the past.",
          "content_same": false
        },
        {
          "line": 5748,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "LogPrint(\"net\", \"Announcing block %s not on main chain (tip=%s)\\n\",\n                            hashToAnnounce.ToString(), chainActive.Tip()->GetBlockHash().ToString())",
          "new_text": null,
          "old_line_content": "                        LogPrint(\"net\", \"Announcing block %s not on main chain (tip=%s)\\n\",",
          "new_line_content": "                    // Just log for now.",
          "content_same": false
        },
        {
          "line": 5749,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()->GetBlockHash().ToString()",
          "new_text": null,
          "old_line_content": "                            hashToAnnounce.ToString(), chainActive.Tip()->GetBlockHash().ToString());",
          "new_line_content": "                    if (chainActive[pindex->nHeight] != pindex) {",
          "content_same": false
        },
        {
          "line": 5755,
          "old_api": "PeerHasHeader",
          "new_api": null,
          "old_text": "PeerHasHeader(&state, pindex)",
          "new_text": null,
          "old_line_content": "                    if (!PeerHasHeader(&state, pindex)) {",
          "new_line_content": "                    // (Since block announcements may not be via inv's, we can't solely rely on",
          "content_same": false
        },
        {
          "line": 5756,
          "old_api": "CInv",
          "new_api": null,
          "old_text": "CInv(MSG_BLOCK, hashToAnnounce)",
          "new_text": null,
          "old_line_content": "                        pto->PushInventory(CInv(MSG_BLOCK, hashToAnnounce));",
          "new_line_content": "                    // setInventoryKnown to track this.)",
          "content_same": false
        },
        {
          "line": 5761,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vHeaders.empty()",
          "new_text": null,
          "old_line_content": "            } else if (!vHeaders.empty()) {",
          "new_line_content": "                    }",
          "content_same": false
        },
        {
          "line": 5762,
          "old_api": "size",
          "new_api": null,
          "old_text": "vHeaders.size()",
          "new_text": null,
          "old_line_content": "                if (vHeaders.size() > 1) {",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5769,
          "old_api": "front",
          "new_api": null,
          "old_text": "vHeaders.front().GetHash().ToString()",
          "new_text": null,
          "old_line_content": "                            vHeaders.front().GetHash().ToString(), pto->id);",
          "new_line_content": "                } else {",
          "content_same": false
        },
        {
          "line": 5774,
          "old_api": "clear",
          "new_api": null,
          "old_text": "pto->vBlockHashesToAnnounce.clear()",
          "new_text": null,
          "old_line_content": "            pto->vBlockHashesToAnnounce.clear();",
          "new_line_content": "                state.pindexBestHeaderSent = pBestIndex;",
          "content_same": false
        },
        {
          "line": 5786,
          "old_api": "PoissonNextSend",
          "new_api": null,
          "old_text": "PoissonNextSend(nNow, AVG_INVENTORY_BROADCAST_INTERVAL)",
          "new_text": null,
          "old_line_content": "                pto->nNextInvSend = PoissonNextSend(nNow, AVG_INVENTORY_BROADCAST_INTERVAL);",
          "new_line_content": "            if (pto->nNextInvSend < nNow) {",
          "content_same": false
        },
        {
          "line": 5789,
          "old_api": "size",
          "new_api": null,
          "old_text": "pto->vInventoryToSend.size()",
          "new_text": null,
          "old_line_content": "            vInv.reserve(std::min<size_t>(1000, pto->vInventoryToSend.size()));",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5793,
          "old_api": "contains",
          "new_api": null,
          "old_text": "pto->filterInventoryKnown.contains(inv.hash)",
          "new_text": null,
          "old_line_content": "                if (inv.type == MSG_TX && pto->filterInventoryKnown.contains(inv.hash))",
          "new_line_content": "            BOOST_FOREACH(const CInv& inv, pto->vInventoryToSend)",
          "content_same": false
        },
        {
          "line": 5801,
          "old_api": "IsNull",
          "new_api": null,
          "old_text": "hashSalt.IsNull()",
          "new_text": null,
          "old_line_content": "                    if (hashSalt.IsNull())",
          "new_line_content": "                    // 1/4 of tx invs blast to all immediately",
          "content_same": false
        },
        {
          "line": 5802,
          "old_api": "GetRandHash",
          "new_api": null,
          "old_text": "GetRandHash()",
          "new_text": null,
          "old_line_content": "                        hashSalt = GetRandHash();",
          "new_line_content": "                    static uint256 hashSalt;",
          "content_same": false
        },
        {
          "line": 5809,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vInvWait.push_back(inv)",
          "new_text": null,
          "old_line_content": "                        vInvWait.push_back(inv);",
          "new_line_content": "                    if (fTrickleWait)",
          "content_same": false
        },
        {
          "line": 5814,
          "old_api": "insert",
          "new_api": null,
          "old_text": "pto->filterInventoryKnown.insert(inv.hash)",
          "new_text": null,
          "old_line_content": "                pto->filterInventoryKnown.insert(inv.hash);",
          "new_line_content": "                }",
          "content_same": false
        },
        {
          "line": 5817,
          "old_api": "size",
          "new_api": null,
          "old_text": "vInv.size()",
          "new_text": null,
          "old_line_content": "                if (vInv.size() >= 1000)",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5820,
          "old_api": "clear",
          "new_api": null,
          "old_text": "vInv.clear()",
          "new_text": null,
          "old_line_content": "                    vInv.clear();",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 5825,
          "old_api": "empty",
          "new_api": null,
          "old_text": "vInv.empty()",
          "new_text": null,
          "old_line_content": "        if (!vInv.empty())",
          "new_line_content": "            pto->vInventoryToSend = vInvWait;",
          "content_same": false
        },
        {
          "line": 5826,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pto->PushMessage(NetMsgType::INV, vInv)",
          "new_text": null,
          "old_line_content": "            pto->PushMessage(NetMsgType::INV, vInv);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5829,
          "old_api": "GetTimeMicros",
          "new_api": null,
          "old_text": "GetTimeMicros()",
          "new_text": null,
          "old_line_content": "        nNow = GetTimeMicros();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5834,
          "old_api": "LogPrintf",
          "new_api": null,
          "old_text": "LogPrintf(\"Peer=%d is stalling block download, disconnecting\\n\", pto->id)",
          "new_text": null,
          "old_line_content": "            LogPrintf(\"Peer=%d is stalling block download, disconnecting\\n\", pto->id);",
          "new_line_content": "            // the download window should be much larger than the to-be-downloaded set of blocks, so disconnection",
          "content_same": false
        },
        {
          "line": 5842,
          "old_api": "size",
          "new_api": null,
          "old_text": "state.vBlocksInFlight.size()",
          "new_text": null,
          "old_line_content": "        if (!pto->fDisconnect && state.vBlocksInFlight.size() > 0) {",
          "new_line_content": "        // being saturated. We only count validated in-flight blocks so peers can't advertise non-existing block hashes",
          "content_same": false
        },
        {
          "line": 5843,
          "old_api": "front",
          "new_api": null,
          "old_text": "state.vBlocksInFlight.front()",
          "new_text": null,
          "old_line_content": "            QueuedBlock &queuedBlock = state.vBlocksInFlight.front();",
          "new_line_content": "        // to unreasonably increase our timeout.",
          "content_same": false
        },
        {
          "line": 5846,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "queuedBlock.hash.ToString()",
          "new_text": null,
          "old_line_content": "                LogPrintf(\"Timeout downloading block %s from peer=%d, disconnecting\\n\", queuedBlock.hash.ToString(), pto->id);",
          "new_line_content": "            int nOtherPeersWithValidatedDownloads = nPeersWithValidatedDownloads - (state.nBlocksInFlightValidHeaders > 0);",
          "content_same": false
        },
        {
          "line": 5855,
          "old_api": "IsInitialBlockDownload",
          "new_api": null,
          "old_text": "IsInitialBlockDownload()",
          "new_text": null,
          "old_line_content": "        if (!pto->fDisconnect && !pto->fClient && (fFetch || !IsInitialBlockDownload()) && state.nBlocksInFlight < MAX_BLOCKS_IN_TRANSIT_PER_PEER) {",
          "new_line_content": "        //",
          "content_same": false
        },
        {
          "line": 5858,
          "old_api": "GetId",
          "new_api": null,
          "old_text": "pto->GetId()",
          "new_text": null,
          "old_line_content": "            FindNextBlocksToDownload(pto->GetId(), MAX_BLOCKS_IN_TRANSIT_PER_PEER - state.nBlocksInFlight, vToDownload, staller);",
          "new_line_content": "            vector<CBlockIndex*> vToDownload;",
          "content_same": false
        },
        {
          "line": 5861,
          "old_api": "GetBlockHash",
          "new_api": null,
          "old_text": "pindex->GetBlockHash()",
          "new_text": null,
          "old_line_content": "                MarkBlockAsInFlight(pto->GetId(), pindex->GetBlockHash(), consensusParams, pindex);",
          "new_line_content": "            BOOST_FOREACH(CBlockIndex *pindex, vToDownload) {",
          "content_same": false
        },
        {
          "line": 5866,
          "old_api": "State",
          "new_api": null,
          "old_text": "State(staller)",
          "new_text": null,
          "old_line_content": "                if (State(staller)->nStallingSince == 0) {",
          "new_line_content": "            }",
          "content_same": false
        },
        {
          "line": 5867,
          "old_api": "State",
          "new_api": null,
          "old_text": "State(staller)",
          "new_text": null,
          "old_line_content": "                    State(staller)->nStallingSince = nNow;",
          "new_line_content": "            if (state.nBlocksInFlight == 0 && staller != -1) {",
          "content_same": false
        },
        {
          "line": 5876,
          "old_api": "begin",
          "new_api": null,
          "old_text": "pto->mapAskFor.begin()",
          "new_text": null,
          "old_line_content": "        while (!pto->fDisconnect && !pto->mapAskFor.empty() && (*pto->mapAskFor.begin()).first <= nNow)",
          "new_line_content": "        // Message: getdata (non-blocks)",
          "content_same": false
        },
        {
          "line": 5879,
          "old_api": "AlreadyHave",
          "new_api": null,
          "old_text": "AlreadyHave(inv)",
          "new_text": null,
          "old_line_content": "            if (!AlreadyHave(inv))",
          "new_line_content": "        {",
          "content_same": false
        },
        {
          "line": 5882,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "inv.ToString()",
          "new_text": null,
          "old_line_content": "                    LogPrint(\"net\", \"Requesting %s peer=%d\\n\", inv.ToString(), pto->id);",
          "new_line_content": "            {",
          "content_same": false
        },
        {
          "line": 5883,
          "old_api": "push_back",
          "new_api": null,
          "old_text": "vGetData.push_back(inv)",
          "new_text": null,
          "old_line_content": "                vGetData.push_back(inv);",
          "new_line_content": "                if (fDebug)",
          "content_same": false
        },
        {
          "line": 5887,
          "old_api": "clear",
          "new_api": null,
          "old_text": "vGetData.clear()",
          "new_text": null,
          "old_line_content": "                    vGetData.clear();",
          "new_line_content": "                {",
          "content_same": false
        },
        {
          "line": 5891,
          "old_api": "erase",
          "new_api": null,
          "old_text": "pto->setAskFor.erase(inv.hash)",
          "new_text": null,
          "old_line_content": "                pto->setAskFor.erase(inv.hash);",
          "new_line_content": "            } else {",
          "content_same": false
        },
        {
          "line": 5896,
          "old_api": "PushMessage",
          "new_api": null,
          "old_text": "pto->PushMessage(NetMsgType::GETDATA, vGetData)",
          "new_text": null,
          "old_line_content": "            pto->PushMessage(NetMsgType::GETDATA, vGetData);",
          "new_line_content": "        }",
          "content_same": false
        },
        {
          "line": 5902,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER)",
          "new_text": null,
          "old_line_content": "        if (pto->nVersion >= FEEFILTER_VERSION && GetBoolArg(\"-feefilter\", DEFAULT_FEEFILTER) &&",
          "new_line_content": "        //",
          "content_same": false
        },
        {
          "line": 5903,
          "old_api": "GetBoolArg",
          "new_api": null,
          "old_text": "GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY)",
          "new_text": null,
          "old_line_content": "            !(pto->fWhitelisted && GetBoolArg(\"-whitelistforcerelay\", DEFAULT_WHITELISTFORCERELAY))) {",
          "new_line_content": "        // We don't want white listed peers to filter txs to us if we have -whitelistforcerelay",
          "content_same": false
        },
        {
          "line": 5912,
          "old_api": "PoissonNextSend",
          "new_api": null,
          "old_text": "PoissonNextSend(timeNow, AVG_FEEFILTER_BROADCAST_INTERVAL)",
          "new_text": null,
          "old_line_content": "                pto->nextSendTimeFeeFilter = PoissonNextSend(timeNow, AVG_FEEFILTER_BROADCAST_INTERVAL);",
          "new_line_content": "                    pto->lastSentFeeFilter = filterToSend;",
          "content_same": false
        },
        {
          "line": 5918,
          "old_api": "insecure_rand",
          "new_api": null,
          "old_text": "insecure_rand()",
          "new_text": null,
          "old_line_content": "                pto->nextSendTimeFeeFilter = timeNow + (insecure_rand() % MAX_FEEFILTER_CHANGE_DELAY) * 1000000;",
          "new_line_content": "            else if (timeNow + MAX_FEEFILTER_CHANGE_DELAY * 1000000 < pto->nextSendTimeFeeFilter &&",
          "content_same": false
        },
        {
          "line": 5926,
          "old_api": "DateTimeStrFormat",
          "new_api": null,
          "old_text": "DateTimeStrFormat(\"%Y-%m-%d\", nTimeLast)",
          "new_text": null,
          "old_line_content": "     return strprintf(\"CBlockFileInfo(blocks=%u, size=%u, heights=%u...%u, time=%s...%s)\", nBlocks, nSize, nHeightFirst, nHeightLast, DateTimeStrFormat(\"%Y-%m-%d\", nTimeFirst), DateTimeStrFormat(\"%Y-%m-%d\", nTimeLast));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5931,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_main);",
          "new_line_content": "ThresholdState VersionBitsTipState(const Consensus::Params& params, Consensus::DeploymentPos pos)",
          "content_same": false
        },
        {
          "line": 5932,
          "old_api": "Tip",
          "new_api": null,
          "old_text": "chainActive.Tip()",
          "new_text": null,
          "old_line_content": "    return VersionBitsState(chainActive.Tip(), params, pos, versionbitscache);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 5941,
          "old_api": "begin",
          "new_api": null,
          "old_text": "mapBlockIndex.begin()",
          "new_text": null,
          "old_line_content": "        BlockMap::iterator it1 = mapBlockIndex.begin();",
          "new_line_content": "    ~CMainCleanup() {",
          "content_same": false
        },
        {
          "line": 5942,
          "old_api": "end",
          "new_api": null,
          "old_text": "mapBlockIndex.end()",
          "new_text": null,
          "old_line_content": "        for (; it1 != mapBlockIndex.end(); it1++)",
          "new_line_content": "        // block headers",
          "content_same": false
        },
        {
          "line": 5947,
          "old_api": "clear",
          "new_api": null,
          "old_text": "mapOrphanTransactions.clear()",
          "new_text": null,
          "old_line_content": "        mapOrphanTransactions.clear();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 5948,
          "old_api": "clear",
          "new_api": null,
          "old_text": "mapOrphanTransactionsByPrev.clear()",
          "new_text": null,
          "old_line_content": "        mapOrphanTransactionsByPrev.clear();",
          "new_line_content": "        // orphan transactions",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 155,
      "total_additions": 308,
      "total_deletions": 308,
      "total_api_changes": 771
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 4,
        "api_related_lines": 771,
        "non_api_lines": 1,
        "non_api_line_numbers": [
          4358
        ]
      }
    },
    "api_calls_before": 2202,
    "api_calls_after": 2202,
    "diff_info": {
      "added_lines": 4,
      "removed_lines": 2,
      "total_diff_lines": 33
    }
  }
}
{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/0c6487c74f8c5ba6de5e4aad44c89be5fbdbe942",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/0c6487c74f8c5ba6de5e4aad44c89be5fbdbe942/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/0c6487c74f8c5ba6de5e4aad44c89be5fbdbe942/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/0c6487c74f8c5ba6de5e4aad44c89be5fbdbe942/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 251,
          "old_api": "strprintf",
          "new_api": "Expand",
          "old_text": "strprintf(\"Cannot derive script without private keys\")",
          "new_text": "desc->Expand(i, key_provider, scripts, provider)",
          "old_line_content": "            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Cannot derive script without private keys\"));",
          "new_line_content": "        if (!desc->Expand(i, key_provider, scripts, provider)) {",
          "content_same": false
        },
        {
          "line": 257,
          "old_api": "strprintf",
          "new_api": "ExtractDestination",
          "old_text": "strprintf(\"Descriptor does not have a corresponding address\")",
          "new_text": "ExtractDestination(script, dest)",
          "old_line_content": "                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Descriptor does not have a corresponding address\"));",
          "new_line_content": "            if (!ExtractDestination(script, dest)) {",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "JSONRPCError",
          "new_api": "empty",
          "old_text": "JSONRPCError(RPC_MISC_ERROR, \"Unexpected empty result\")",
          "new_text": "addresses.empty()",
          "old_line_content": "        throw JSONRPCError(RPC_MISC_ERROR, \"Unexpected empty result\");",
          "new_line_content": "    if (addresses.empty()) {",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": "ToString",
          "new_api": "size",
          "old_text": "std::runtime_error(\n            RPCHelpMan{\"verifymessage\",\n                \"\\nVerify a signed message\\n\",\n                {\n                    {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to use for the signature.\"},\n                    {\"signature\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The signature provided by the signer in base 64 encoding (see signmessage).\"},\n                    {\"message\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The message that was signed.\"},\n                },\n                RPCResult{\n            \"true|false   (boolean) If the signature is verified or not.\\n\"\n                },\n                RPCExamples{\n            \"\\nUnlock the wallet for 30 seconds\\n\"\n            + HelpExampleCli(\"walletpassphrase\", \"\\\"mypassphrase\\\" 30\") +\n            \"\\nCreate the signature\\n\"\n            + HelpExampleCli(\"signmessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"my message\\\"\") +\n            \"\\nVerify the signature\\n\"\n            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +\n            \"\\nAs a JSON-RPC call\\n\"\n            + HelpExampleRpc(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"signature\\\", \\\"my message\\\"\")\n                },\n            }.ToString())",
          "new_text": "request.params.size()",
          "old_line_content": "        throw std::runtime_error(",
          "new_line_content": "    if (request.fHelp || request.params.size() != 3)",
          "content_same": false
        },
        {
          "line": 305,
          "old_api": "IsValidDestination",
          "new_api": "DecodeDestination",
          "old_text": "IsValidDestination(destination)",
          "new_text": "DecodeDestination(strAddress)",
          "old_line_content": "    if (!IsValidDestination(destination)) {",
          "new_line_content": "    CTxDestination destination = DecodeDestination(strAddress);",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "JSONRPCError",
          "new_api": "IsValidDestination",
          "old_text": "JSONRPCError(RPC_TYPE_ERROR, \"Invalid address\")",
          "new_text": "IsValidDestination(destination)",
          "old_line_content": "        throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid address\");",
          "new_line_content": "    if (!IsValidDestination(destination)) {",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "ToString",
          "new_api": "size",
          "old_text": "std::runtime_error(\n            RPCHelpMan{\"signmessagewithprivkey\",\n                \"\\nSign a message with the private key of an address\\n\",\n                {\n                    {\"privkey\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The private key to sign the message with.\"},\n                    {\"message\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The message to create a signature of.\"},\n                },\n                RPCResult{\n            \"\\\"signature\\\"          (string) The signature of the message encoded in base 64\\n\"\n                },\n                RPCExamples{\n            \"\\nCreate the signature\\n\"\n            + HelpExampleCli(\"signmessagewithprivkey\", \"\\\"privkey\\\" \\\"my message\\\"\") +\n            \"\\nVerify the signature\\n\"\n            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +\n            \"\\nAs a JSON-RPC call\\n\"\n            + HelpExampleRpc(\"signmessagewithprivkey\", \"\\\"privkey\\\", \\\"my message\\\"\")\n                },\n            }.ToString())",
          "new_text": "request.params.size()",
          "old_line_content": "        throw std::runtime_error(",
          "new_line_content": "    if (request.fHelp || request.params.size() != 2)",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": "IsValid",
          "new_api": "DecodeSecret",
          "old_text": "key.IsValid()",
          "new_text": "DecodeSecret(strPrivkey)",
          "old_line_content": "    if (!key.IsValid()) {",
          "new_line_content": "    CKey key = DecodeSecret(strPrivkey);",
          "content_same": false
        },
        {
          "line": 359,
          "old_api": "JSONRPCError",
          "new_api": "IsValid",
          "old_text": "JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key\")",
          "new_text": "key.IsValid()",
          "old_line_content": "        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key\");",
          "new_line_content": "    if (!key.IsValid()) {",
          "content_same": false
        },
        {
          "line": 368,
          "old_api": "JSONRPCError",
          "new_api": "GetHash",
          "old_text": "JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Sign failed\")",
          "new_text": "ss.GetHash()",
          "old_line_content": "        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Sign failed\");",
          "new_line_content": "    if (!key.SignCompact(ss.GetHash(), vchSig))",
          "content_same": false
        },
        {
          "line": 376,
          "old_api": "ToString",
          "new_api": "size",
          "old_text": "std::runtime_error(\n            RPCHelpMan{\"setmocktime\",\n                \"\\nSet the local time to given timestamp (-regtest only)\\n\",\n                {\n                    {\"timestamp\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"Unix seconds-since-epoch timestamp\\n\"\n            \"   Pass 0 to go back to using the system time.\"},\n                },\n                RPCResults{},\n                RPCExamples{\"\"},\n            }.ToString()\n        )",
          "new_text": "request.params.size()",
          "old_line_content": "        throw std::runtime_error(",
          "new_line_content": "    if (request.fHelp || request.params.size() != 1)",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "std::runtime_error(\"setmocktime for regression testing (-regtest mode) only\")",
          "new_api": "MineBlocksOnDemand",
          "old_text": "std::runtime_error(\"setmocktime for regression testing (-regtest mode) only\")",
          "new_text": "Params().MineBlocksOnDemand()",
          "old_line_content": "        throw std::runtime_error(\"setmocktime for regression testing (-regtest mode) only\");",
          "new_line_content": "    if (!Params().MineBlocksOnDemand())",
          "content_same": false
        },
        {
          "line": 399,
          "old_api": "get_int64",
          "new_api": "RPCTypeCheck",
          "old_text": "request.params[0].get_int64()",
          "new_text": "RPCTypeCheck(request.params, {UniValue::VNUM})",
          "old_line_content": "    SetMockTime(request.params[0].get_int64());",
          "new_line_content": "    RPCTypeCheck(request.params, {UniValue::VNUM});",
          "content_same": false
        },
        {
          "line": 425,
          "old_api": "fclose",
          "new_api": "malloc_info",
          "old_text": "fclose(f)",
          "new_text": "malloc_info(0, f)",
          "old_line_content": "        fclose(f);",
          "new_line_content": "        malloc_info(0, f);",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "ToString",
          "new_api": "size",
          "old_text": "std::runtime_error(\n            RPCHelpMan{\"getmemoryinfo\",\n                \"Returns an object containing information about memory usage.\\n\",\n                {\n                    {\"mode\", RPCArg::Type::STR, /* default */ \"\\\"stats\\\"\", \"determines what kind of information is returned.\\n\"\n            \"  - \\\"stats\\\" returns general statistics about memory usage in the daemon.\\n\"\n            \"  - \\\"mallocinfo\\\" returns an XML string describing low-level heap state (only available if compiled with glibc 2.10+).\"},\n                },\n                {\n                    RPCResult{\"mode \\\"stats\\\"\",\n            \"{\\n\"\n            \"  \\\"locked\\\": {               (json object) Information about locked memory manager\\n\"\n            \"    \\\"used\\\": xxxxx,          (numeric) Number of bytes used\\n\"\n            \"    \\\"free\\\": xxxxx,          (numeric) Number of bytes available in current arenas\\n\"\n            \"    \\\"total\\\": xxxxxxx,       (numeric) Total number of bytes managed\\n\"\n            \"    \\\"locked\\\": xxxxxx,       (numeric) Amount of bytes that succeeded locking. If this number is smaller than total, locking pages failed at some point and key data could be swapped to disk.\\n\"\n            \"    \\\"chunks_used\\\": xxxxx,   (numeric) Number allocated chunks\\n\"\n            \"    \\\"chunks_free\\\": xxxxx,   (numeric) Number unused chunks\\n\"\n            \"  }\\n\"\n            \"}\\n\"\n                    },\n                    RPCResult{\"mode \\\"mallocinfo\\\"\",\n            \"\\\"<malloc version=\\\"1\\\">...\\\"\\n\"\n                    },\n                },\n                RPCExamples{\n                    HelpExampleCli(\"getmemoryinfo\", \"\")\n            + HelpExampleRpc(\"getmemoryinfo\", \"\")\n                },\n            }.ToString())",
          "new_text": "request.params.size()",
          "old_line_content": "        throw std::runtime_error(",
          "new_line_content": "    if (request.fHelp || request.params.size() > 1)",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": "HelpExampleRpc",
          "new_api": "HelpExampleCli",
          "old_text": "HelpExampleRpc(\"getmemoryinfo\", \"\")",
          "new_text": "HelpExampleCli(\"getmemoryinfo\", \"\")",
          "old_line_content": "            + HelpExampleRpc(\"getmemoryinfo\", \"\")",
          "new_line_content": "                    HelpExampleCli(\"getmemoryinfo\", \"\")",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": "size",
          "new_api": "get_array",
          "old_text": "cats.size()",
          "new_text": "cats.get_array()",
          "old_line_content": "    for (unsigned int i = 0; i < cats.size(); ++i) {",
          "new_line_content": "    cats = cats.get_array();",
          "content_same": false
        },
        {
          "line": 492,
          "old_api": "get_str",
          "new_api": "size",
          "old_text": "cats[i].get_str()",
          "new_text": "cats.size()",
          "old_line_content": "        std::string cat = cats[i].get_str();",
          "new_line_content": "    for (unsigned int i = 0; i < cats.size(); ++i) {",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "ToString",
          "new_api": "size",
          "old_text": "std::runtime_error(\n            RPCHelpMan{\"logging\",\n            \"Gets and sets the logging configuration.\\n\"\n            \"When called without an argument, returns the list of categories with status that are currently being debug logged or not.\\n\"\n            \"When called with arguments, adds or removes categories from debug logging and return the lists above.\\n\"\n            \"The arguments are evaluated in order \\\"include\\\", \\\"exclude\\\".\\n\"\n            \"If an item is both included and excluded, it will thus end up being excluded.\\n\"\n            \"The valid logging categories are: \" + ListLogCategories() + \"\\n\"\n            \"In addition, the following are available as category names with special meanings:\\n\"\n            \"  - \\\"all\\\",  \\\"1\\\" : represent all logging categories.\\n\"\n            \"  - \\\"none\\\", \\\"0\\\" : even if other logging categories are specified, ignore all of them.\\n\"\n            ,\n                {\n                    {\"include\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"A json array of categories to add debug logging\",\n                        {\n                            {\"include_category\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"the valid logging category\"},\n                        }},\n                    {\"exclude\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"A json array of categories to remove debug logging\",\n                        {\n                            {\"exclude_category\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"the valid logging category\"},\n                        }},\n                },\n                RPCResult{\n            \"{                   (json object where keys are the logging categories, and values indicates its status\\n\"\n            \"  \\\"category\\\": true|false,  (bool) if being debug logged or not. false:inactive, true:active\\n\"\n            \"  ...\\n\"\n            \"}\\n\"\n                },\n                RPCExamples{\n                    HelpExampleCli(\"logging\", \"\\\"[\\\\\\\"all\\\\\\\"]\\\" \\\"[\\\\\\\"http\\\\\\\"]\\\"\")\n            + HelpExampleRpc(\"logging\", \"[\\\"all\\\"], [\\\"libevent\\\"]\")\n                },\n            }.ToString())",
          "new_text": "request.params.size()",
          "old_line_content": "        throw std::runtime_error(",
          "new_line_content": "    if (request.fHelp || request.params.size() > 2) {",
          "content_same": false
        },
        {
          "line": 540,
          "old_api": "HelpExampleRpc",
          "new_api": "HelpExampleCli",
          "old_text": "HelpExampleRpc(\"logging\", \"[\\\"all\\\"], [\\\"libevent\\\"]\")",
          "new_text": "HelpExampleCli(\"logging\", \"\\\"[\\\\\\\"all\\\\\\\"]\\\" \\\"[\\\\\\\"http\\\\\\\"]\\\"\")",
          "old_line_content": "            + HelpExampleRpc(\"logging\", \"[\\\"all\\\"], [\\\"libevent\\\"]\")",
          "new_line_content": "                    HelpExampleCli(\"logging\", \"\\\"[\\\\\\\"all\\\\\\\"]\\\" \\\"[\\\\\\\"http\\\\\\\"]\\\"\")",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": "isArray",
          "new_api": "GetCategoryMask",
          "old_text": "request.params[0].isArray()",
          "new_text": "LogInstance().GetCategoryMask()",
          "old_line_content": "    if (request.params[0].isArray()) {",
          "new_line_content": "    uint32_t original_log_categories = LogInstance().GetCategoryMask();",
          "content_same": false
        },
        {
          "line": 547,
          "old_api": "EnableOrDisableLogCategories",
          "new_api": "isArray",
          "old_text": "EnableOrDisableLogCategories(request.params[0], true)",
          "new_text": "request.params[0].isArray()",
          "old_line_content": "        EnableOrDisableLogCategories(request.params[0], true);",
          "new_line_content": "    if (request.params[0].isArray()) {",
          "content_same": false
        },
        {
          "line": 550,
          "old_api": "EnableOrDisableLogCategories",
          "new_api": "isArray",
          "old_text": "EnableOrDisableLogCategories(request.params[1], false)",
          "new_text": "request.params[1].isArray()",
          "old_line_content": "        EnableOrDisableLogCategories(request.params[1], false);",
          "new_line_content": "    if (request.params[1].isArray()) {",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "DisableCategory",
          "new_api": "WillLogCategory",
          "old_text": "LogInstance().DisableCategory(BCLog::LIBEVENT)",
          "new_text": "LogInstance().WillLogCategory(BCLog::LIBEVENT)",
          "old_line_content": "            LogInstance().DisableCategory(BCLog::LIBEVENT);",
          "new_line_content": "        if (!UpdateHTTPServerLogging(LogInstance().WillLogCategory(BCLog::LIBEVENT))) {",
          "content_same": false
        },
        {
          "line": 618,
          "old_api": "appendCommand",
          "new_api": "ARRAYLEN",
          "old_text": "t.appendCommand(commands[vcidx].name, &commands[vcidx])",
          "new_text": "ARRAYLEN(commands)",
          "old_line_content": "        t.appendCommand(commands[vcidx].name, &commands[vcidx]);",
          "new_line_content": "    for (unsigned int vcidx = 0; vcidx < ARRAYLEN(commands); vcidx++)",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 512,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "RPCHelpMan{\"logging\",\n            \"Gets and sets the logging configuration.\\n\"\n            \"When called without an argument, returns the list of categories with status that are currently being debug logged or not.\\n\"\n            \"When called with arguments, adds or removes categories from debug logging and return the lists above.\\n\"\n            \"The arguments are evaluated in order \\\"include\\\", \\\"exclude\\\".\\n\"\n            \"If an item is both included and excluded, it will thus end up being excluded.\\n\"\n            \"The valid logging categories are: \" + ListLogCategories() + \"\\n\"\n            \"In addition, the following are available as category names with special meanings:\\n\"\n            \"  - \\\"all\\\",  \\\"1\\\" : represent all logging categories.\\n\"\n            \"  - \\\"none\\\", \\\"0\\\" : even if other logging categories are specified, ignore all of them.\\n\"\n            ,\n                {\n                    {\"include\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"A json array of categories to add debug logging\",\n                        {\n                            {\"include_category\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"the valid logging category\"},\n                        }},\n                    {\"exclude\", RPCArg::Type::ARR, RPCArg::Optional::OMITTED_NAMED_ARG, \"A json array of categories to remove debug logging\",\n                        {\n                            {\"exclude_category\", RPCArg::Type::STR, RPCArg::Optional::OMITTED, \"the valid logging category\"},\n                        }},\n                },\n                RPCResult{\n            \"{                   (json object where keys are the logging categories, and values indicates its status\\n\"\n            \"  \\\"category\\\": true|false,  (bool) if being debug logged or not. false:inactive, true:active\\n\"\n            \"  ...\\n\"\n            \"}\\n\"\n                },\n                RPCExamples{\n                    HelpExampleCli(\"logging\", \"\\\"[\\\\\\\"all\\\\\\\"]\\\" \\\"[\\\\\\\"http\\\\\\\"]\\\"\")\n            + HelpExampleRpc(\"logging\", \"[\\\"all\\\"], [\\\"libevent\\\"]\")\n                },\n            }.ToString()",
          "old_line_content": "            \"Gets and sets the logging configuration.\\n\"",
          "new_line_content": "            RPCHelpMan{\"logging\",",
          "content_same": false
        },
        {
          "line": 258,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"Descriptor does not have a corresponding address\")",
          "old_line_content": "            }",
          "new_line_content": "                throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Descriptor does not have a corresponding address\"));",
          "content_same": false
        },
        {
          "line": 261,
          "old_api": null,
          "new_api": "EncodeDestination",
          "old_text": null,
          "new_text": "EncodeDestination(dest)",
          "old_line_content": "        }",
          "new_line_content": "            addresses.push_back(EncodeDestination(dest));",
          "content_same": false
        },
        {
          "line": 518,
          "old_api": null,
          "new_api": "ListLogCategories",
          "old_text": null,
          "new_text": "ListLogCategories()",
          "old_line_content": "            \"In addition, the following are available as category names with special meanings:\\n\"",
          "new_line_content": "            \"The valid logging categories are: \" + ListLogCategories() + \"\\n\"",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": null,
          "new_api": "std::runtime_error(\"setmocktime for regression testing (-regtest mode) only\")",
          "old_text": null,
          "new_text": "std::runtime_error(\"setmocktime for regression testing (-regtest mode) only\")",
          "old_line_content": "",
          "new_line_content": "        throw std::runtime_error(\"setmocktime for regression testing (-regtest mode) only\");",
          "content_same": false
        },
        {
          "line": 267,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_MISC_ERROR, \"Unexpected empty result\")",
          "old_line_content": "    }",
          "new_line_content": "        throw JSONRPCError(RPC_MISC_ERROR, \"Unexpected empty result\");",
          "content_same": false
        },
        {
          "line": 397,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "",
          "new_line_content": "    LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "get_int64",
          "old_text": null,
          "new_text": "request.params[0].get_int64()",
          "old_line_content": "",
          "new_line_content": "    SetMockTime(request.params[0].get_int64());",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "RPCHelpMan{\"verifymessage\",\n                \"\\nVerify a signed message\\n\",\n                {\n                    {\"address\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The bitcoin address to use for the signature.\"},\n                    {\"signature\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The signature provided by the signer in base 64 encoding (see signmessage).\"},\n                    {\"message\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The message that was signed.\"},\n                },\n                RPCResult{\n            \"true|false   (boolean) If the signature is verified or not.\\n\"\n                },\n                RPCExamples{\n            \"\\nUnlock the wallet for 30 seconds\\n\"\n            + HelpExampleCli(\"walletpassphrase\", \"\\\"mypassphrase\\\" 30\") +\n            \"\\nCreate the signature\\n\"\n            + HelpExampleCli(\"signmessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"my message\\\"\") +\n            \"\\nVerify the signature\\n\"\n            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +\n            \"\\nAs a JSON-RPC call\\n\"\n            + HelpExampleRpc(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"signature\\\", \\\"my message\\\"\")\n                },\n            }.ToString()",
          "old_line_content": "                \"\\nVerify a signed message\\n\",",
          "new_line_content": "            RPCHelpMan{\"verifymessage\",",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": null,
          "new_api": "stats",
          "old_text": null,
          "new_text": "LockedPoolManager::Instance().stats()",
          "old_line_content": "    UniValue obj(UniValue::VOBJ);",
          "new_line_content": "    LockedPool::Stats stats = LockedPoolManager::Instance().stats();",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "HelpExampleRpc",
          "old_text": null,
          "new_text": "HelpExampleRpc(\"logging\", \"[\\\"all\\\"], [\\\"libevent\\\"]\")",
          "old_line_content": "                },",
          "new_line_content": "            + HelpExampleRpc(\"logging\", \"[\\\"all\\\"], [\\\"libevent\\\"]\")",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": null,
          "new_api": "pushKV",
          "old_text": null,
          "new_text": "obj.pushKV(\"chunks_free\", uint64_t(stats.chunks_free))",
          "old_line_content": "    return obj;",
          "new_line_content": "    obj.pushKV(\"chunks_free\", uint64_t(stats.chunks_free));",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "HelpExampleCli",
          "old_text": null,
          "new_text": "HelpExampleCli(\"walletpassphrase\", \"\\\"mypassphrase\\\" 30\")",
          "old_line_content": "            \"\\nCreate the signature\\n\"",
          "new_line_content": "            + HelpExampleCli(\"walletpassphrase\", \"\\\"mypassphrase\\\" 30\") +",
          "content_same": false
        },
        {
          "line": 291,
          "old_api": null,
          "new_api": "HelpExampleCli",
          "old_text": null,
          "new_text": "HelpExampleCli(\"signmessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"my message\\\"\")",
          "old_line_content": "            \"\\nVerify the signature\\n\"",
          "new_line_content": "            + HelpExampleCli(\"signmessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"my message\\\"\") +",
          "content_same": false
        },
        {
          "line": 548,
          "old_api": null,
          "new_api": "EnableOrDisableLogCategories",
          "old_text": null,
          "new_text": "EnableOrDisableLogCategories(request.params[0], true)",
          "old_line_content": "    }",
          "new_line_content": "        EnableOrDisableLogCategories(request.params[0], true);",
          "content_same": false
        },
        {
          "line": 293,
          "old_api": null,
          "new_api": "HelpExampleCli",
          "old_text": null,
          "new_text": "HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\")",
          "old_line_content": "            \"\\nAs a JSON-RPC call\\n\"",
          "new_line_content": "            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": null,
          "new_api": "EnableOrDisableLogCategories",
          "old_text": null,
          "new_text": "EnableOrDisableLogCategories(request.params[1], false)",
          "old_line_content": "    }",
          "new_line_content": "        EnableOrDisableLogCategories(request.params[1], false);",
          "content_same": false
        },
        {
          "line": 295,
          "old_api": null,
          "new_api": "HelpExampleRpc",
          "old_text": null,
          "new_text": "HelpExampleRpc(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"signature\\\", \\\"my message\\\"\")",
          "old_line_content": "                },",
          "new_line_content": "            + HelpExampleRpc(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"signature\\\", \\\"my message\\\"\")",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "GetCategoryMask",
          "old_text": null,
          "new_text": "LogInstance().GetCategoryMask()",
          "old_line_content": "    uint32_t changed_log_categories = original_log_categories ^ updated_log_categories;",
          "new_line_content": "    uint32_t updated_log_categories = LogInstance().GetCategoryMask();",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "open_memstream",
          "old_text": null,
          "new_text": "open_memstream(&ptr, &size)",
          "old_line_content": "    if (f) {",
          "new_line_content": "    FILE *f = open_memstream(&ptr, &size);",
          "content_same": false
        },
        {
          "line": 299,
          "old_api": null,
          "new_api": "LOCK",
          "old_text": null,
          "new_text": "LOCK(cs_main)",
          "old_line_content": "",
          "new_line_content": "    LOCK(cs_main);",
          "content_same": false
        },
        {
          "line": 426,
          "old_api": null,
          "new_api": "fclose",
          "old_text": null,
          "new_text": "fclose(f)",
          "old_line_content": "        if (ptr) {",
          "new_line_content": "        fclose(f);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "free",
          "old_text": null,
          "new_text": "free(ptr)",
          "old_line_content": "            return rv;",
          "new_line_content": "            free(ptr);",
          "content_same": false
        },
        {
          "line": 303,
          "old_api": null,
          "new_api": "get_str",
          "old_text": null,
          "new_text": "request.params[2].get_str()",
          "old_line_content": "",
          "new_line_content": "    std::string strMessage  = request.params[2].get_str();",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "DisableCategory",
          "old_text": null,
          "new_text": "LogInstance().DisableCategory(BCLog::LIBEVENT)",
          "old_line_content": "            if (changed_log_categories == BCLog::LIBEVENT) {",
          "new_line_content": "            LogInstance().DisableCategory(BCLog::LIBEVENT);",
          "content_same": false
        },
        {
          "line": 307,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_TYPE_ERROR, \"Invalid address\")",
          "old_line_content": "    }",
          "new_line_content": "        throw JSONRPCError(RPC_TYPE_ERROR, \"Invalid address\");",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"libevent logging cannot be updated when using libevent before v2.1.1.\")",
          "old_line_content": "            }",
          "new_line_content": "            throw JSONRPCError(RPC_INVALID_PARAMETER, \"libevent logging cannot be updated when using libevent before v2.1.1.\");",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "boost::get<CKeyID>(&destination)",
          "old_text": null,
          "new_text": "boost::get<CKeyID>(&destination)",
          "old_line_content": "    if (!keyID) {",
          "new_line_content": "    const CKeyID *keyID = boost::get<CKeyID>(&destination);",
          "content_same": false
        },
        {
          "line": 312,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\")",
          "old_line_content": "    }",
          "new_line_content": "        throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": null,
          "new_api": "ListActiveLogCategories",
          "old_text": null,
          "new_text": "ListActiveLogCategories()",
          "old_line_content": "    for (const auto& logCatActive : vLogCatActive) {",
          "new_line_content": "    std::vector<CLogCategoryActive> vLogCatActive = ListActiveLogCategories();",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": null,
          "new_api": "c_str",
          "old_text": null,
          "new_text": "strSign.c_str()",
          "old_line_content": "",
          "new_line_content": "    std::vector<unsigned char> vchSig = DecodeBase64(strSign.c_str(), &fInvalid);",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "pushKV",
          "old_text": null,
          "new_text": "result.pushKV(logCatActive.category, logCatActive.active)",
          "old_line_content": "    }",
          "new_line_content": "        result.pushKV(logCatActive.category, logCatActive.active);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "RPCHelpMan{\"getmemoryinfo\",\n                \"Returns an object containing information about memory usage.\\n\",\n                {\n                    {\"mode\", RPCArg::Type::STR, /* default */ \"\\\"stats\\\"\", \"determines what kind of information is returned.\\n\"\n            \"  - \\\"stats\\\" returns general statistics about memory usage in the daemon.\\n\"\n            \"  - \\\"mallocinfo\\\" returns an XML string describing low-level heap state (only available if compiled with glibc 2.10+).\"},\n                },\n                {\n                    RPCResult{\"mode \\\"stats\\\"\",\n            \"{\\n\"\n            \"  \\\"locked\\\": {               (json object) Information about locked memory manager\\n\"\n            \"    \\\"used\\\": xxxxx,          (numeric) Number of bytes used\\n\"\n            \"    \\\"free\\\": xxxxx,          (numeric) Number of bytes available in current arenas\\n\"\n            \"    \\\"total\\\": xxxxxxx,       (numeric) Total number of bytes managed\\n\"\n            \"    \\\"locked\\\": xxxxxx,       (numeric) Amount of bytes that succeeded locking. If this number is smaller than total, locking pages failed at some point and key data could be swapped to disk.\\n\"\n            \"    \\\"chunks_used\\\": xxxxx,   (numeric) Number allocated chunks\\n\"\n            \"    \\\"chunks_free\\\": xxxxx,   (numeric) Number unused chunks\\n\"\n            \"  }\\n\"\n            \"}\\n\"\n                    },\n                    RPCResult{\"mode \\\"mallocinfo\\\"\",\n            \"\\\"<malloc version=\\\"1\\\">...\\\"\\n\"\n                    },\n                },\n                RPCExamples{\n                    HelpExampleCli(\"getmemoryinfo\", \"\")\n            + HelpExampleRpc(\"getmemoryinfo\", \"\")\n                },\n            }.ToString()",
          "old_line_content": "                \"Returns an object containing information about memory usage.\\n\",",
          "new_line_content": "            RPCHelpMan{\"getmemoryinfo\",",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Malformed base64 encoding\")",
          "old_line_content": "",
          "new_line_content": "        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Malformed base64 encoding\");",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "GetHash",
          "old_text": null,
          "new_text": "ss.GetHash()",
          "old_line_content": "        return false;",
          "new_line_content": "    if (!pubkey.RecoverCompact(ss.GetHash(), vchSig))",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "RPCHelpMan{\"echo|echojson ...\",\n                \"\\nSimply echo back the input arguments. This command is for testing.\\n\"\n                \"\\nThe difference between echo and echojson is that echojson has argument conversion enabled in the client-side table in \"\n                \"bitcoin-cli and the GUI. There is no server-side difference.\",\n                {},\n                RPCResults{},\n                RPCExamples{\"\"},\n            }.ToString()",
          "old_line_content": "                \"\\nSimply echo back the input arguments. This command is for testing.\\n\"",
          "new_line_content": "            RPCHelpMan{\"echo|echojson ...\",",
          "content_same": false
        },
        {
          "line": 329,
          "old_api": null,
          "new_api": "GetID",
          "old_text": null,
          "new_text": "pubkey.GetID()",
          "old_line_content": "}",
          "new_line_content": "    return (pubkey.GetID() == *keyID);",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "RPCHelpMan{\"signmessagewithprivkey\",\n                \"\\nSign a message with the private key of an address\\n\",\n                {\n                    {\"privkey\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The private key to sign the message with.\"},\n                    {\"message\", RPCArg::Type::STR, RPCArg::Optional::NO, \"The message to create a signature of.\"},\n                },\n                RPCResult{\n            \"\\\"signature\\\"          (string) The signature of the message encoded in base 64\\n\"\n                },\n                RPCExamples{\n            \"\\nCreate the signature\\n\"\n            + HelpExampleCli(\"signmessagewithprivkey\", \"\\\"privkey\\\" \\\"my message\\\"\") +\n            \"\\nVerify the signature\\n\"\n            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +\n            \"\\nAs a JSON-RPC call\\n\"\n            + HelpExampleRpc(\"signmessagewithprivkey\", \"\\\"privkey\\\", \\\"my message\\\"\")\n                },\n            }.ToString()",
          "old_line_content": "                \"\\nSign a message with the private key of an address\\n\",",
          "new_line_content": "            RPCHelpMan{\"signmessagewithprivkey\",",
          "content_same": false
        },
        {
          "line": 470,
          "old_api": null,
          "new_api": "HelpExampleRpc",
          "old_text": null,
          "new_text": "HelpExampleRpc(\"getmemoryinfo\", \"\")",
          "old_line_content": "                },",
          "new_line_content": "            + HelpExampleRpc(\"getmemoryinfo\", \"\")",
          "content_same": false
        },
        {
          "line": 474,
          "old_api": null,
          "new_api": "get_str",
          "old_text": null,
          "new_text": "request.params[0].get_str()",
          "old_line_content": "    if (mode == \"stats\") {",
          "new_line_content": "    std::string mode = request.params[0].isNull() ? \"stats\" : request.params[0].get_str();",
          "content_same": false
        },
        {
          "line": 347,
          "old_api": null,
          "new_api": "HelpExampleCli",
          "old_text": null,
          "new_text": "HelpExampleCli(\"signmessagewithprivkey\", \"\\\"privkey\\\" \\\"my message\\\"\")",
          "old_line_content": "            \"\\nVerify the signature\\n\"",
          "new_line_content": "            + HelpExampleCli(\"signmessagewithprivkey\", \"\\\"privkey\\\" \\\"my message\\\"\") +",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": null,
          "new_api": "HelpExampleCli",
          "old_text": null,
          "new_text": "HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\")",
          "old_line_content": "            \"\\nAs a JSON-RPC call\\n\"",
          "new_line_content": "            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +",
          "content_same": false
        },
        {
          "line": 477,
          "old_api": null,
          "new_api": "RPCLockedMemoryInfo",
          "old_text": null,
          "new_text": "RPCLockedMemoryInfo()",
          "old_line_content": "        return obj;",
          "new_line_content": "        obj.pushKV(\"locked\", RPCLockedMemoryInfo());",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "HelpExampleRpc",
          "old_text": null,
          "new_text": "HelpExampleRpc(\"signmessagewithprivkey\", \"\\\"privkey\\\", \\\"my message\\\"\")",
          "old_line_content": "                },",
          "new_line_content": "            + HelpExampleRpc(\"signmessagewithprivkey\", \"\\\"privkey\\\", \\\"my message\\\"\")",
          "content_same": false
        },
        {
          "line": 481,
          "old_api": null,
          "new_api": "RPCMallocInfo",
          "old_text": null,
          "new_text": "RPCMallocInfo()",
          "old_line_content": "#else",
          "new_line_content": "        return RPCMallocInfo();",
          "content_same": false
        },
        {
          "line": 483,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"mallocinfo is only available when compiled with glibc 2.10+\")",
          "old_line_content": "#endif",
          "new_line_content": "        throw JSONRPCError(RPC_INVALID_PARAMETER, \"mallocinfo is only available when compiled with glibc 2.10+\");",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": null,
          "new_api": "get_str",
          "old_text": null,
          "new_text": "request.params[1].get_str()",
          "old_line_content": "",
          "new_line_content": "    std::string strMessage = request.params[1].get_str();",
          "content_same": false
        },
        {
          "line": 486,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"unknown mode \" + mode)",
          "old_line_content": "    }",
          "new_line_content": "        throw JSONRPCError(RPC_INVALID_PARAMETER, \"unknown mode \" + mode);",
          "content_same": false
        },
        {
          "line": 360,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key\")",
          "old_line_content": "    }",
          "new_line_content": "        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Invalid private key\");",
          "content_same": false
        },
        {
          "line": 619,
          "old_api": null,
          "new_api": "appendCommand",
          "old_text": null,
          "new_text": "t.appendCommand(commands[vcidx].name, &commands[vcidx])",
          "old_line_content": "}",
          "new_line_content": "        t.appendCommand(commands[vcidx].name, &commands[vcidx]);",
          "content_same": false
        },
        {
          "line": 493,
          "old_api": null,
          "new_api": "get_str",
          "old_text": null,
          "new_text": "cats[i].get_str()",
          "old_line_content": "",
          "new_line_content": "        std::string cat = cats[i].get_str();",
          "content_same": false
        },
        {
          "line": 369,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Sign failed\")",
          "old_line_content": "",
          "new_line_content": "        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Sign failed\");",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": null,
          "new_api": "EnableCategory",
          "old_text": null,
          "new_text": "LogInstance().EnableCategory(cat)",
          "old_line_content": "        } else {",
          "new_line_content": "            success = LogInstance().EnableCategory(cat);",
          "content_same": false
        },
        {
          "line": 371,
          "old_api": null,
          "new_api": "size",
          "old_text": null,
          "new_text": "vchSig.size()",
          "old_line_content": "}",
          "new_line_content": "    return EncodeBase64(vchSig.data(), vchSig.size());",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": null,
          "new_api": "DisableCategory",
          "old_text": null,
          "new_text": "LogInstance().DisableCategory(cat)",
          "old_line_content": "        }",
          "new_line_content": "            success = LogInstance().DisableCategory(cat);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "JSONRPCError",
          "old_text": null,
          "new_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"unknown logging category \" + cat)",
          "old_line_content": "        }",
          "new_line_content": "            throw JSONRPCError(RPC_INVALID_PARAMETER, \"unknown logging category \" + cat);",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": null,
          "new_api": "ToString",
          "old_text": null,
          "new_text": "RPCHelpMan{\"setmocktime\",\n                \"\\nSet the local time to given timestamp (-regtest only)\\n\",\n                {\n                    {\"timestamp\", RPCArg::Type::NUM, RPCArg::Optional::NO, \"Unix seconds-since-epoch timestamp\\n\"\n            \"   Pass 0 to go back to using the system time.\"},\n                },\n                RPCResults{},\n                RPCExamples{\"\"},\n            }.ToString()",
          "old_line_content": "                \"\\nSet the local time to given timestamp (-regtest only)\\n\",",
          "new_line_content": "            RPCHelpMan{\"setmocktime\",",
          "content_same": false
        },
        {
          "line": 252,
          "old_api": null,
          "new_api": "strprintf",
          "old_text": null,
          "new_text": "strprintf(\"Cannot derive script without private keys\")",
          "old_line_content": "        }",
          "new_line_content": "            throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, strprintf(\"Cannot derive script without private keys\"));",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 256,
          "old_api": "ExtractDestination",
          "new_api": null,
          "old_text": "ExtractDestination(script, dest)",
          "new_text": null,
          "old_line_content": "            if (!ExtractDestination(script, dest)) {",
          "new_line_content": "            CTxDestination dest;",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "EncodeDestination",
          "new_api": null,
          "old_text": "EncodeDestination(dest)",
          "new_text": null,
          "old_line_content": "            addresses.push_back(EncodeDestination(dest));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 517,
          "old_api": "ListLogCategories",
          "new_api": null,
          "old_text": "ListLogCategories()",
          "new_text": null,
          "old_line_content": "            \"The valid logging categories are: \" + ListLogCategories() + \"\\n\"",
          "new_line_content": "            \"If an item is both included and excluded, it will thus end up being excluded.\\n\"",
          "content_same": false
        },
        {
          "line": 388,
          "old_api": "MineBlocksOnDemand",
          "new_api": null,
          "old_text": "Params().MineBlocksOnDemand()",
          "new_text": null,
          "old_line_content": "    if (!Params().MineBlocksOnDemand())",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": "empty",
          "new_api": null,
          "old_text": "addresses.empty()",
          "new_text": null,
          "old_line_content": "    if (addresses.empty()) {",
          "new_line_content": "    // This should not be possible, but an assert seems overkill:",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_main);",
          "new_line_content": "    // ensure all call sites of GetTime() are accessing this safely.",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "RPCTypeCheck",
          "new_api": null,
          "old_text": "RPCTypeCheck(request.params, {UniValue::VNUM})",
          "new_text": null,
          "old_line_content": "    RPCTypeCheck(request.params, {UniValue::VNUM});",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "size",
          "new_api": null,
          "old_text": "request.params.size()",
          "new_text": null,
          "old_line_content": "    if (request.fHelp || request.params.size() != 3)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 406,
          "old_api": "stats",
          "new_api": null,
          "old_text": "LockedPoolManager::Instance().stats()",
          "new_text": null,
          "old_line_content": "    LockedPool::Stats stats = LockedPoolManager::Instance().stats();",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 408,
          "old_api": "pushKV",
          "new_api": null,
          "old_text": "obj.pushKV(\"used\", uint64_t(stats.used))",
          "new_text": null,
          "old_line_content": "    obj.pushKV(\"used\", uint64_t(stats.used));",
          "new_line_content": "    UniValue obj(UniValue::VOBJ);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"logging\", \"\\\"[\\\\\\\"all\\\\\\\"]\\\" \\\"[\\\\\\\"http\\\\\\\"]\\\"\")",
          "new_text": null,
          "old_line_content": "                    HelpExampleCli(\"logging\", \"\\\"[\\\\\\\"all\\\\\\\"]\\\" \\\"[\\\\\\\"http\\\\\\\"]\\\"\")",
          "new_line_content": "                RPCExamples{",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"walletpassphrase\", \"\\\"mypassphrase\\\" 30\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleCli(\"walletpassphrase\", \"\\\"mypassphrase\\\" 30\") +",
          "new_line_content": "            \"\\nUnlock the wallet for 30 seconds\\n\"",
          "content_same": false
        },
        {
          "line": 545,
          "old_api": "GetCategoryMask",
          "new_api": null,
          "old_text": "LogInstance().GetCategoryMask()",
          "new_text": null,
          "old_line_content": "    uint32_t original_log_categories = LogInstance().GetCategoryMask();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"signmessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"my message\\\"\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleCli(\"signmessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"my message\\\"\") +",
          "new_line_content": "            \"\\nCreate the signature\\n\"",
          "content_same": false
        },
        {
          "line": 292,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +",
          "new_line_content": "            \"\\nVerify the signature\\n\"",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "isArray",
          "new_api": null,
          "old_text": "request.params[1].isArray()",
          "new_text": null,
          "old_line_content": "    if (request.params[1].isArray()) {",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 294,
          "old_api": "HelpExampleRpc",
          "new_api": null,
          "old_text": "HelpExampleRpc(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"signature\\\", \\\"my message\\\"\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleRpc(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\", \\\"signature\\\", \\\"my message\\\"\")",
          "new_line_content": "            \"\\nAs a JSON-RPC call\\n\"",
          "content_same": false
        },
        {
          "line": 422,
          "old_api": "open_memstream",
          "new_api": null,
          "old_text": "open_memstream(&ptr, &size)",
          "new_text": null,
          "old_line_content": "    FILE *f = open_memstream(&ptr, &size);",
          "new_line_content": "    size_t size = 0;",
          "content_same": false
        },
        {
          "line": 552,
          "old_api": "GetCategoryMask",
          "new_api": null,
          "old_text": "LogInstance().GetCategoryMask()",
          "new_text": null,
          "old_line_content": "    uint32_t updated_log_categories = LogInstance().GetCategoryMask();",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 424,
          "old_api": "malloc_info",
          "new_api": null,
          "old_text": "malloc_info(0, f)",
          "new_text": null,
          "old_line_content": "        malloc_info(0, f);",
          "new_line_content": "    if (f) {",
          "content_same": false
        },
        {
          "line": 298,
          "old_api": "LOCK",
          "new_api": null,
          "old_text": "LOCK(cs_main)",
          "new_text": null,
          "old_line_content": "    LOCK(cs_main);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 300,
          "old_api": "get_str",
          "new_api": null,
          "old_text": "request.params[0].get_str()",
          "new_text": null,
          "old_line_content": "    std::string strAddress  = request.params[0].get_str();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 428,
          "old_api": "free",
          "new_api": null,
          "old_text": "free(ptr)",
          "new_text": null,
          "old_line_content": "            free(ptr);",
          "new_line_content": "            std::string rv(ptr, size);",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "DecodeDestination",
          "new_api": null,
          "old_text": "DecodeDestination(strAddress)",
          "new_text": null,
          "old_line_content": "    CTxDestination destination = DecodeDestination(strAddress);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "WillLogCategory",
          "new_api": null,
          "old_text": "LogInstance().WillLogCategory(BCLog::LIBEVENT)",
          "new_text": null,
          "old_line_content": "        if (!UpdateHTTPServerLogging(LogInstance().WillLogCategory(BCLog::LIBEVENT))) {",
          "new_line_content": "    if (changed_log_categories & BCLog::LIBEVENT) {",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": "JSONRPCError",
          "new_api": null,
          "old_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"libevent logging cannot be updated when using libevent before v2.1.1.\")",
          "new_text": null,
          "old_line_content": "            throw JSONRPCError(RPC_INVALID_PARAMETER, \"libevent logging cannot be updated when using libevent before v2.1.1.\");",
          "new_line_content": "            if (changed_log_categories == BCLog::LIBEVENT) {",
          "content_same": false
        },
        {
          "line": 309,
          "old_api": "boost::get<CKeyID>(&destination)",
          "new_api": null,
          "old_text": "boost::get<CKeyID>(&destination)",
          "new_text": null,
          "old_line_content": "    const CKeyID *keyID = boost::get<CKeyID>(&destination);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "JSONRPCError",
          "new_api": null,
          "old_text": "JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\")",
          "new_text": null,
          "old_line_content": "        throw JSONRPCError(RPC_TYPE_ERROR, \"Address does not refer to key\");",
          "new_line_content": "    if (!keyID) {",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": "size",
          "new_api": null,
          "old_text": "request.params.size()",
          "new_text": null,
          "old_line_content": "    if (request.fHelp || request.params.size() > 1)",
          "new_line_content": "     */",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "ListActiveLogCategories",
          "new_api": null,
          "old_text": "ListActiveLogCategories()",
          "new_text": null,
          "old_line_content": "    std::vector<CLogCategoryActive> vLogCatActive = ListActiveLogCategories();",
          "new_line_content": "    UniValue result(UniValue::VOBJ);",
          "content_same": false
        },
        {
          "line": 315,
          "old_api": "c_str",
          "new_api": null,
          "old_text": "strSign.c_str()",
          "new_text": null,
          "old_line_content": "    std::vector<unsigned char> vchSig = DecodeBase64(strSign.c_str(), &fInvalid);",
          "new_line_content": "    bool fInvalid = false;",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": "pushKV",
          "new_api": null,
          "old_text": "result.pushKV(logCatActive.category, logCatActive.active)",
          "new_text": null,
          "old_line_content": "        result.pushKV(logCatActive.category, logCatActive.active);",
          "new_line_content": "    for (const auto& logCatActive : vLogCatActive) {",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": "JSONRPCError",
          "new_api": null,
          "old_text": "JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Malformed base64 encoding\")",
          "new_text": null,
          "old_line_content": "        throw JSONRPCError(RPC_INVALID_ADDRESS_OR_KEY, \"Malformed base64 encoding\");",
          "new_line_content": "    if (fInvalid)",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "ToString",
          "new_api": null,
          "old_text": "std::runtime_error(\n            RPCHelpMan{\"echo|echojson ...\",\n                \"\\nSimply echo back the input arguments. This command is for testing.\\n\"\n                \"\\nThe difference between echo and echojson is that echojson has argument conversion enabled in the client-side table in \"\n                \"bitcoin-cli and the GUI. There is no server-side difference.\",\n                {},\n                RPCResults{},\n                RPCExamples{\"\"},\n            }.ToString()\n        )",
          "new_text": null,
          "old_line_content": "        throw std::runtime_error(",
          "new_line_content": "    if (request.fHelp)",
          "content_same": false
        },
        {
          "line": 325,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "ss.GetHash()",
          "new_text": null,
          "old_line_content": "    if (!pubkey.RecoverCompact(ss.GetHash(), vchSig))",
          "new_line_content": "    CPubKey pubkey;",
          "content_same": false
        },
        {
          "line": 328,
          "old_api": "GetID",
          "new_api": null,
          "old_text": "pubkey.GetID()",
          "new_text": null,
          "old_line_content": "    return (pubkey.GetID() == *keyID);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "size",
          "new_api": null,
          "old_text": "request.params.size()",
          "new_text": null,
          "old_line_content": "    if (request.fHelp || request.params.size() != 2)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"getmemoryinfo\", \"\")",
          "new_text": null,
          "old_line_content": "                    HelpExampleCli(\"getmemoryinfo\", \"\")",
          "new_line_content": "                RPCExamples{",
          "content_same": false
        },
        {
          "line": 473,
          "old_api": "get_str",
          "new_api": null,
          "old_text": "request.params[0].get_str()",
          "new_text": null,
          "old_line_content": "    std::string mode = request.params[0].isNull() ? \"stats\" : request.params[0].get_str();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 346,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"signmessagewithprivkey\", \"\\\"privkey\\\" \\\"my message\\\"\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleCli(\"signmessagewithprivkey\", \"\\\"privkey\\\" \\\"my message\\\"\") +",
          "new_line_content": "            \"\\nCreate the signature\\n\"",
          "content_same": false
        },
        {
          "line": 348,
          "old_api": "HelpExampleCli",
          "new_api": null,
          "old_text": "HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleCli(\"verifymessage\", \"\\\"1D1ZrZNe3JUo7ZycKEYQQiQAWd9y54F4XX\\\" \\\"signature\\\" \\\"my message\\\"\") +",
          "new_line_content": "            \"\\nVerify the signature\\n\"",
          "content_same": false
        },
        {
          "line": 476,
          "old_api": "RPCLockedMemoryInfo",
          "new_api": null,
          "old_text": "RPCLockedMemoryInfo()",
          "new_text": null,
          "old_line_content": "        obj.pushKV(\"locked\", RPCLockedMemoryInfo());",
          "new_line_content": "        UniValue obj(UniValue::VOBJ);",
          "content_same": false
        },
        {
          "line": 350,
          "old_api": "HelpExampleRpc",
          "new_api": null,
          "old_text": "HelpExampleRpc(\"signmessagewithprivkey\", \"\\\"privkey\\\", \\\"my message\\\"\")",
          "new_text": null,
          "old_line_content": "            + HelpExampleRpc(\"signmessagewithprivkey\", \"\\\"privkey\\\", \\\"my message\\\"\")",
          "new_line_content": "            \"\\nAs a JSON-RPC call\\n\"",
          "content_same": false
        },
        {
          "line": 480,
          "old_api": "RPCMallocInfo",
          "new_api": null,
          "old_text": "RPCMallocInfo()",
          "new_text": null,
          "old_line_content": "        return RPCMallocInfo();",
          "new_line_content": "#ifdef HAVE_MALLOC_INFO",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "get_str",
          "new_api": null,
          "old_text": "request.params[0].get_str()",
          "new_text": null,
          "old_line_content": "    std::string strPrivkey = request.params[0].get_str();",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 482,
          "old_api": "JSONRPCError",
          "new_api": null,
          "old_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"mallocinfo is only available when compiled with glibc 2.10+\")",
          "new_text": null,
          "old_line_content": "        throw JSONRPCError(RPC_INVALID_PARAMETER, \"mallocinfo is only available when compiled with glibc 2.10+\");",
          "new_line_content": "#else",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": "DecodeSecret",
          "new_api": null,
          "old_text": "DecodeSecret(strPrivkey)",
          "new_text": null,
          "old_line_content": "    CKey key = DecodeSecret(strPrivkey);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 485,
          "old_api": "JSONRPCError",
          "new_api": null,
          "old_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"unknown mode \" + mode)",
          "new_text": null,
          "old_line_content": "        throw JSONRPCError(RPC_INVALID_PARAMETER, \"unknown mode \" + mode);",
          "new_line_content": "    } else {",
          "content_same": false
        },
        {
          "line": 617,
          "old_api": "ARRAYLEN",
          "new_api": null,
          "old_text": "ARRAYLEN(commands)",
          "new_text": null,
          "old_line_content": "    for (unsigned int vcidx = 0; vcidx < ARRAYLEN(commands); vcidx++)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 490,
          "old_api": "get_array",
          "new_api": null,
          "old_text": "cats.get_array()",
          "new_text": null,
          "old_line_content": "    cats = cats.get_array();",
          "new_line_content": "static void EnableOrDisableLogCategories(UniValue cats, bool enable) {",
          "content_same": false
        },
        {
          "line": 367,
          "old_api": "GetHash",
          "new_api": null,
          "old_text": "ss.GetHash()",
          "new_text": null,
          "old_line_content": "    if (!key.SignCompact(ss.GetHash(), vchSig))",
          "new_line_content": "    std::vector<unsigned char> vchSig;",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "EnableCategory",
          "new_api": null,
          "old_text": "LogInstance().EnableCategory(cat)",
          "new_text": null,
          "old_line_content": "            success = LogInstance().EnableCategory(cat);",
          "new_line_content": "        if (enable) {",
          "content_same": false
        },
        {
          "line": 370,
          "old_api": "size",
          "new_api": null,
          "old_text": "vchSig.size()",
          "new_text": null,
          "old_line_content": "    return EncodeBase64(vchSig.data(), vchSig.size());",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": "DisableCategory",
          "new_api": null,
          "old_text": "LogInstance().DisableCategory(cat)",
          "new_text": null,
          "old_line_content": "            success = LogInstance().DisableCategory(cat);",
          "new_line_content": "        } else {",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": "JSONRPCError",
          "new_api": null,
          "old_text": "JSONRPCError(RPC_INVALID_PARAMETER, \"unknown logging category \" + cat)",
          "new_text": null,
          "old_line_content": "            throw JSONRPCError(RPC_INVALID_PARAMETER, \"unknown logging category \" + cat);",
          "new_line_content": "        if (!success) {",
          "content_same": false
        },
        {
          "line": 375,
          "old_api": "size",
          "new_api": null,
          "old_text": "request.params.size()",
          "new_text": null,
          "old_line_content": "    if (request.fHelp || request.params.size() != 1)",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "Expand",
          "new_api": null,
          "old_text": "desc->Expand(i, provider, scripts, provider)",
          "new_text": null,
          "old_line_content": "        if (!desc->Expand(i, provider, scripts, provider)) {",
          "new_line_content": "        std::vector<CScript> scripts;",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "size",
          "new_api": null,
          "old_text": "request.params.size()",
          "new_text": null,
          "old_line_content": "    if (request.fHelp || request.params.size() > 2) {",
          "new_line_content": "{",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 25,
      "total_additions": 58,
      "total_deletions": 58,
      "total_api_changes": 141
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 6,
        "api_related_lines": 141,
        "non_api_lines": 4,
        "non_api_line_numbers": [
          255,
          235,
          237,
          239
        ]
      }
    },
    "api_calls_before": 210,
    "api_calls_after": 210,
    "diff_info": {
      "added_lines": 5,
      "removed_lines": 4,
      "total_diff_lines": 48
    }
  }
}
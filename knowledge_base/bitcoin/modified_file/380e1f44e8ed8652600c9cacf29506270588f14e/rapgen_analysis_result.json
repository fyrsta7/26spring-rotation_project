{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/380e1f44e8ed8652600c9cacf29506270588f14e",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/380e1f44e8ed8652600c9cacf29506270588f14e/before.cpp",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/380e1f44e8ed8652600c9cacf29506270588f14e/after.cpp",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/bitcoin/modified_file/380e1f44e8ed8652600c9cacf29506270588f14e/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": false,
    "api_changes": {
      "replacements": [
        {
          "line": 197,
          "old_api": "run",
          "new_api": "rand256",
          "old_text": "bench.run([&] {\n        *((uint64_t*)x.begin()) = SipHashUint256(0, ++k1, x);\n    })",
          "new_text": "rng.rand256()",
          "old_line_content": "    bench.run([&] {",
          "new_line_content": "    auto val{rng.rand256()};",
          "content_same": false
        },
        {
          "line": 247,
          "old_api": "BENCHMARK",
          "new_api": "run",
          "old_text": "BENCHMARK(SHA1, benchmark::PriorityLevel::HIGH)",
          "new_text": "bench.run([&] {\n        MuHash3072{key};\n    })",
          "old_line_content": "BENCHMARK(SHA1, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "    bench.run([&] {",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 225,
          "old_api": null,
          "new_api": "run",
          "old_text": null,
          "new_text": "bench.run([&] {\n        acc *= muhash;\n    })",
          "old_line_content": "{",
          "new_line_content": "    bench.run([&] {",
          "content_same": false
        },
        {
          "line": 196,
          "old_api": null,
          "new_api": "rand64",
          "old_text": null,
          "new_text": "rng.rand64()",
          "old_line_content": "    uint64_t k1 = 0;",
          "new_line_content": "    auto k0{rng.rand64()}, k1{rng.rand64()};",
          "content_same": false
        },
        {
          "line": 199,
          "old_api": null,
          "new_api": "run",
          "old_text": null,
          "new_text": "bench.run([&] {\n        ankerl::nanobench::doNotOptimizeAway(SipHashUint256(k0, k1, val));\n        ++k0;\n        ++k1;\n        ++i;\n        val.data()[i % uint256::size()] ^= i & 0xFF;\n    })",
          "old_line_content": "    });",
          "new_line_content": "    bench.run([&] {",
          "content_same": false
        },
        {
          "line": 200,
          "old_api": null,
          "new_api": "SipHashUint256",
          "old_text": null,
          "new_text": "SipHashUint256(k0, k1, val)",
          "old_line_content": "}",
          "new_line_content": "        ankerl::nanobench::doNotOptimizeAway(SipHashUint256(k0, k1, val));",
          "content_same": false
        },
        {
          "line": 264,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(SHA256_32b_SHANI, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(SHA256_32b_SHANI, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 234,
          "old_api": null,
          "new_api": "randbytes",
          "old_text": null,
          "new_text": "rng.randbytes(32)",
          "old_line_content": "",
          "new_line_content": "    MuHash3072 muhash{rng.randbytes(32)};",
          "content_same": false
        },
        {
          "line": 204,
          "old_api": null,
          "new_api": "uint256::size()",
          "old_text": null,
          "new_text": "uint256::size()",
          "old_line_content": "    MuHash3072 acc;",
          "new_line_content": "        val.data()[i % uint256::size()] ^= i & 0xFF;",
          "content_same": false
        },
        {
          "line": 236,
          "old_api": null,
          "new_api": "run",
          "old_text": null,
          "new_text": "bench.run([&] {\n        acc /= muhash;\n    })",
          "old_line_content": "{",
          "new_line_content": "    bench.run([&] {",
          "content_same": false
        },
        {
          "line": 269,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(SHA256D64_1024_SHANI, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(SHA256D64_1024_SHANI, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(MuHash, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(MuHash, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 272,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(MuHashMul, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(MuHashMul, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 273,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(MuHashDiv, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(MuHashDiv, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(MuHashPrecompute, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(MuHashPrecompute, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 213,
          "old_api": null,
          "new_api": "run",
          "old_text": null,
          "new_text": "bench.run([&] {\n        key[0] = ++i & 0xFF;\n        acc *= MuHash3072(key);\n    })",
          "old_line_content": "static void MuHashMul(benchmark::Bench& bench)",
          "new_line_content": "    bench.run([&] {",
          "content_same": false
        },
        {
          "line": 245,
          "old_api": null,
          "new_api": "randbytes",
          "old_text": null,
          "new_text": "rng.randbytes(32)",
          "old_line_content": "",
          "new_line_content": "    std::vector<unsigned char> key{rng.randbytes(32)};",
          "content_same": false
        },
        {
          "line": 215,
          "old_api": null,
          "new_api": "MuHash3072",
          "old_text": null,
          "new_text": "MuHash3072(key)",
          "old_line_content": "    MuHash3072 acc;",
          "new_line_content": "        acc *= MuHash3072(key);",
          "content_same": false
        },
        {
          "line": 254,
          "old_api": null,
          "new_api": "BENCHMARK",
          "old_text": null,
          "new_text": "BENCHMARK(SHA256_STANDARD, benchmark::PriorityLevel::HIGH)",
          "old_line_content": "",
          "new_line_content": "BENCHMARK(SHA256_STANDARD, benchmark::PriorityLevel::HIGH);",
          "content_same": false
        },
        {
          "line": 223,
          "old_api": null,
          "new_api": "randbytes",
          "old_text": null,
          "new_text": "rng.randbytes(32)",
          "old_line_content": "",
          "new_line_content": "    MuHash3072 muhash{rng.randbytes(32)};",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 228,
          "old_api": "randbytes",
          "new_api": null,
          "old_text": "rng.randbytes(32)",
          "new_text": null,
          "old_line_content": "    MuHash3072 muhash{rng.randbytes(32)};",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 249,
          "old_api": "BENCHMARK",
          "new_api": null,
          "old_text": "BENCHMARK(SHA256_SSE4, benchmark::PriorityLevel::HIGH)",
          "new_text": null,
          "old_line_content": "BENCHMARK(SHA256_SSE4, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "    });",
          "content_same": false
        },
        {
          "line": 198,
          "old_api": "SipHashUint256",
          "new_api": null,
          "old_text": "SipHashUint256(0, ++k1, x)",
          "new_text": null,
          "old_line_content": "        *((uint64_t*)x.begin()) = SipHashUint256(0, ++k1, x);",
          "new_line_content": "    auto i{0U};",
          "content_same": false
        },
        {
          "line": 230,
          "old_api": "run",
          "new_api": null,
          "old_text": "bench.run([&] {\n        acc /= muhash;\n    })",
          "new_text": null,
          "old_line_content": "    bench.run([&] {",
          "new_line_content": "static void MuHashDiv(benchmark::Bench& bench)",
          "content_same": false
        },
        {
          "line": 260,
          "old_api": "BENCHMARK",
          "new_api": null,
          "old_text": "BENCHMARK(SHA256D64_1024_STANDARD, benchmark::PriorityLevel::HIGH)",
          "new_text": null,
          "old_line_content": "BENCHMARK(SHA256D64_1024_STANDARD, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 207,
          "old_api": "run",
          "new_api": null,
          "old_text": "bench.run([&] {\n        key[0] = ++i & 0xFF;\n        acc *= MuHash3072(key);\n    })",
          "new_text": null,
          "old_line_content": "    bench.run([&] {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 239,
          "old_api": "randbytes",
          "new_api": null,
          "old_text": "rng.randbytes(32)",
          "new_text": null,
          "old_line_content": "    std::vector<unsigned char> key{rng.randbytes(32)};",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 209,
          "old_api": "MuHash3072",
          "new_api": null,
          "old_text": "MuHash3072(key)",
          "new_text": null,
          "old_line_content": "        acc *= MuHash3072(key);",
          "new_line_content": "{",
          "content_same": false
        },
        {
          "line": 241,
          "old_api": "run",
          "new_api": null,
          "old_text": "bench.run([&] {\n        MuHash3072{key};\n    })",
          "new_text": null,
          "old_line_content": "    bench.run([&] {",
          "new_line_content": "static void MuHashPrecompute(benchmark::Bench& bench)",
          "content_same": false
        },
        {
          "line": 251,
          "old_api": "BENCHMARK",
          "new_api": null,
          "old_text": "BENCHMARK(SHA256_SHANI, benchmark::PriorityLevel::HIGH)",
          "new_text": null,
          "old_line_content": "BENCHMARK(SHA256_SHANI, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 246,
          "old_api": "BENCHMARK",
          "new_api": null,
          "old_text": "BENCHMARK(BenchRIPEMD160, benchmark::PriorityLevel::HIGH)",
          "new_text": null,
          "old_line_content": "BENCHMARK(BenchRIPEMD160, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 248,
          "old_api": "BENCHMARK",
          "new_api": null,
          "old_text": "BENCHMARK(SHA256_STANDARD, benchmark::PriorityLevel::HIGH)",
          "new_text": null,
          "old_line_content": "BENCHMARK(SHA256_STANDARD, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "        MuHash3072{key};",
          "content_same": false
        },
        {
          "line": 217,
          "old_api": "randbytes",
          "new_api": null,
          "old_text": "rng.randbytes(32)",
          "new_text": null,
          "old_line_content": "    MuHash3072 muhash{rng.randbytes(32)};",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 250,
          "old_api": "BENCHMARK",
          "new_api": null,
          "old_text": "BENCHMARK(SHA256_AVX2, benchmark::PriorityLevel::HIGH)",
          "new_text": null,
          "old_line_content": "BENCHMARK(SHA256_AVX2, benchmark::PriorityLevel::HIGH);",
          "new_line_content": "}",
          "content_same": false
        },
        {
          "line": 219,
          "old_api": "run",
          "new_api": null,
          "old_text": "bench.run([&] {\n        acc *= muhash;\n    })",
          "new_text": null,
          "old_line_content": "    bench.run([&] {",
          "new_line_content": "static void MuHashMul(benchmark::Bench& bench)",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 2,
      "total_additions": 18,
      "total_deletions": 15,
      "total_api_changes": 35
    },
    "non_api_changes": {
      "has_non_api_changes": true,
      "evidence": {
        "total_diff_lines": 12,
        "api_related_lines": 35,
        "non_api_lines": 9,
        "non_api_line_numbers": [
          202,
          206,
          208,
          210,
          212,
          214,
          216,
          218,
          220
        ]
      }
    },
    "api_calls_before": 218,
    "api_calls_after": 223,
    "diff_info": {
      "added_lines": 11,
      "removed_lines": 5,
      "total_diff_lines": 47
    }
  }
}
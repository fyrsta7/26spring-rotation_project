{
  "status": "completed",
  "commit_dir": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/grpc/modified_file/311f7f1eaf2a11b09fa15fea3d26eab07fe23239",
  "file_info": {
    "before_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/grpc/modified_file/311f7f1eaf2a11b09fa15fea3d26eab07fe23239/before.c",
    "after_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/grpc/modified_file/311f7f1eaf2a11b09fa15fea3d26eab07fe23239/after.c",
    "diff_file": "/home/zyw/llm_on_code/llm_on_code_optimization/knowledge_base/grpc/modified_file/311f7f1eaf2a11b09fa15fea3d26eab07fe23239/diff.txt"
  },
  "semgrep_analysis": {
    "is_api_change": true,
    "api_changes": {
      "replacements": [
        {
          "line": 268,
          "old_api": "gpr_log",
          "new_api": "gpr_malloc",
          "old_text": "gpr_log(GPR_DEBUG, \"%p create copying %p\", out, in)",
          "new_text": "gpr_malloc(sizeof(*out))",
          "old_line_content": "    gpr_log(GPR_DEBUG, \"%p create copying %p\", out, in);",
          "new_line_content": "    out = gpr_malloc(sizeof(*out));",
          "content_same": false
        },
        {
          "line": 270,
          "old_api": "gpr_avl_ref",
          "new_api": "gpr_log",
          "old_text": "gpr_avl_ref(in->ints)",
          "new_text": "gpr_log(GPR_DEBUG, \"%p create copying %p\", out, in)",
          "old_line_content": "    out->ints = gpr_avl_ref(in->ints);",
          "new_line_content": "    gpr_log(GPR_DEBUG, \"%p create copying %p\", out, in);",
          "content_same": false
        },
        {
          "line": 274,
          "old_api": "gpr_atm_no_barrier_store",
          "new_api": "gpr_avl_ref",
          "old_text": "gpr_atm_no_barrier_store(&out->error_string, 0)",
          "new_text": "gpr_avl_ref(in->errs)",
          "old_line_content": "    gpr_atm_no_barrier_store(&out->error_string, 0);",
          "new_line_content": "    out->errs = gpr_avl_ref(in->errs);",
          "content_same": false
        },
        {
          "line": 276,
          "old_api": "gpr_ref_init",
          "new_api": "gpr_atm_no_barrier_store",
          "old_text": "gpr_ref_init(&out->refs, 1)",
          "new_text": "gpr_atm_no_barrier_store(&out->error_string, 0)",
          "old_line_content": "    gpr_ref_init(&out->refs, 1);",
          "new_line_content": "    gpr_atm_no_barrier_store(&out->error_string, 0);",
          "content_same": false
        },
        {
          "line": 279,
          "old_api": "GPR_TIMER_END",
          "new_api": "GRPC_ERROR_UNREF",
          "old_text": "GPR_TIMER_END(\"copy_error_and_unref\", 0)",
          "new_text": "GRPC_ERROR_UNREF(in)",
          "old_line_content": "  GPR_TIMER_END(\"copy_error_and_unref\", 0);",
          "new_line_content": "    GRPC_ERROR_UNREF(in);",
          "content_same": false
        },
        {
          "line": 287,
          "old_api": "gpr_avl_add",
          "new_api": "GPR_TIMER_BEGIN",
          "old_text": "gpr_avl_add(new->ints, (void *)(uintptr_t)which, (void *)value)",
          "new_text": "GPR_TIMER_BEGIN(\"grpc_error_set_int\", 0)",
          "old_line_content": "  new->ints = gpr_avl_add(new->ints, (void *)(uintptr_t)which, (void *)value);",
          "new_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_set_int\", 0);",
          "content_same": false
        },
        {
          "line": 288,
          "old_api": "GPR_TIMER_END",
          "new_api": "copy_error_and_unref",
          "old_text": "GPR_TIMER_END(\"grpc_error_set_int\", 0)",
          "new_text": "copy_error_and_unref(src)",
          "old_line_content": "  GPR_TIMER_END(\"grpc_error_set_int\", 0);",
          "new_line_content": "  grpc_error *new = copy_error_and_unref(src);",
          "content_same": false
        },
        {
          "line": 306,
          "old_api": "grpc_error_is_special",
          "new_api": "GPR_TIMER_BEGIN",
          "old_text": "grpc_error_is_special(err)",
          "new_text": "GPR_TIMER_BEGIN(\"grpc_error_get_int\", 0)",
          "old_line_content": "  if (grpc_error_is_special(err)) {",
          "new_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_get_int\", 0);",
          "content_same": false
        },
        {
          "line": 308,
          "old_api": "GPR_ARRAY_SIZE",
          "new_api": "grpc_error_is_special",
          "old_text": "GPR_ARRAY_SIZE(error_status_map)",
          "new_text": "grpc_error_is_special(err)",
          "old_line_content": "      for (size_t i = 0; i < GPR_ARRAY_SIZE(error_status_map); i++) {",
          "new_line_content": "  if (grpc_error_is_special(err)) {",
          "content_same": false
        },
        {
          "line": 321,
          "old_api": "GPR_TIMER_END",
          "new_api": "gpr_avl_maybe_get",
          "old_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "new_text": "gpr_avl_maybe_get(err->ints, (void *)(uintptr_t)which, &pp)",
          "old_line_content": "    GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "new_line_content": "  if (gpr_avl_maybe_get(err->ints, (void *)(uintptr_t)which, &pp)) {",
          "content_same": false
        },
        {
          "line": 333,
          "old_api": "gpr_strdup",
          "new_api": "copy_error_and_unref",
          "old_text": "gpr_strdup(value)",
          "new_text": "copy_error_and_unref(src)",
          "old_line_content": "      gpr_avl_add(new->strs, (void *)(uintptr_t)which, gpr_strdup(value));",
          "new_line_content": "  grpc_error *new = copy_error_and_unref(src);",
          "content_same": false
        },
        {
          "line": 341,
          "old_api": "GPR_ARRAY_SIZE",
          "new_api": "grpc_error_is_special",
          "old_text": "GPR_ARRAY_SIZE(error_status_map)",
          "new_text": "grpc_error_is_special(err)",
          "old_line_content": "      for (size_t i = 0; i < GPR_ARRAY_SIZE(error_status_map); i++) {",
          "new_line_content": "  if (grpc_error_is_special(err)) {",
          "content_same": false
        },
        {
          "line": 355,
          "old_api": "gpr_avl_add",
          "new_api": "GPR_TIMER_BEGIN",
          "old_text": "gpr_avl_add(new->errs, (void *)(new->next_err++), child)",
          "new_text": "GPR_TIMER_BEGIN(\"grpc_error_add_child\", 0)",
          "old_line_content": "  new->errs = gpr_avl_add(new->errs, (void *)(new->next_err++), child);",
          "new_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_add_child\", 0);",
          "content_same": false
        },
        {
          "line": 356,
          "old_api": "GPR_TIMER_END",
          "new_api": "copy_error_and_unref",
          "old_text": "GPR_TIMER_END(\"grpc_error_add_child\", 0)",
          "new_text": "copy_error_and_unref(src)",
          "old_line_content": "  GPR_TIMER_END(\"grpc_error_add_child\", 0);",
          "new_line_content": "  grpc_error *new = copy_error_and_unref(src);",
          "content_same": false
        },
        {
          "line": 390,
          "old_api": "collect_kvs",
          "new_api": "fmt",
          "old_text": "collect_kvs(node->right, key, fmt, kvs)",
          "new_text": "fmt(node->value)",
          "old_line_content": "  collect_kvs(node->right, key, fmt, kvs);",
          "new_line_content": "  append_kv(kvs, key(node->key), fmt(node->value));",
          "content_same": false
        },
        {
          "line": 499,
          "old_api": "grpc_error_string",
          "new_api": "append_chr",
          "old_text": "grpc_error_string(n->value)",
          "new_text": "append_chr(',', s, sz, cap)",
          "old_line_content": "  const char *e = grpc_error_string(n->value);",
          "new_line_content": "  if (!*first) append_chr(',', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 501,
          "old_api": "add_errs",
          "new_api": "grpc_error_string",
          "old_text": "add_errs(n->right, s, sz, cap, first)",
          "new_text": "grpc_error_string(n->value)",
          "old_line_content": "  add_errs(n->right, s, sz, cap, first);",
          "new_line_content": "  const char *e = grpc_error_string(n->value);",
          "content_same": false
        },
        {
          "line": 512,
          "old_api": "append_chr",
          "new_api": "add_errs",
          "old_text": "append_chr(0, &s, &sz, &cap)",
          "new_text": "add_errs(err->errs.root, &s, &sz, &cap, &first)",
          "old_line_content": "  append_chr(0, &s, &sz, &cap);",
          "new_line_content": "  add_errs(err->errs.root, &s, &sz, &cap, &first);",
          "content_same": false
        },
        {
          "line": 531,
          "old_api": "gpr_free",
          "new_api": "append_chr",
          "old_text": "gpr_free(kvs->kvs[i].key)",
          "new_text": "append_chr(',', &s, &sz, &cap)",
          "old_line_content": "    gpr_free(kvs->kvs[i].key);",
          "new_line_content": "    if (i != 0) append_chr(',', &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 532,
          "old_api": "append_chr",
          "new_api": "append_esc_str",
          "old_text": "append_chr(':', &s, &sz, &cap)",
          "new_text": "append_esc_str(kvs->kvs[i].key, &s, &sz, &cap)",
          "old_line_content": "    append_chr(':', &s, &sz, &cap);",
          "new_line_content": "    append_esc_str(kvs->kvs[i].key, &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 533,
          "old_api": "append_str",
          "new_api": "gpr_free",
          "old_text": "append_str(kvs->kvs[i].value, &s, &sz, &cap)",
          "new_text": "gpr_free(kvs->kvs[i].key)",
          "old_line_content": "    append_str(kvs->kvs[i].value, &s, &sz, &cap);",
          "new_line_content": "    gpr_free(kvs->kvs[i].key);",
          "content_same": false
        },
        {
          "line": 534,
          "old_api": "gpr_free",
          "new_api": "append_chr",
          "old_text": "gpr_free(kvs->kvs[i].value)",
          "new_text": "append_chr(':', &s, &sz, &cap)",
          "old_line_content": "    gpr_free(kvs->kvs[i].value);",
          "new_line_content": "    append_chr(':', &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 536,
          "old_api": "append_chr",
          "new_api": "gpr_free",
          "old_text": "append_chr('}', &s, &sz, &cap)",
          "new_text": "gpr_free(kvs->kvs[i].value)",
          "old_line_content": "  append_chr('}', &s, &sz, &cap);",
          "new_line_content": "    gpr_free(kvs->kvs[i].value);",
          "content_same": false
        },
        {
          "line": 539,
          "old_api": "gpr_free",
          "new_api": "append_chr",
          "old_text": "gpr_free(kvs->kvs)",
          "new_text": "append_chr(0, &s, &sz, &cap)",
          "old_line_content": "  gpr_free(kvs->kvs);",
          "new_line_content": "  append_chr(0, &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 551,
          "old_api": "GPR_TIMER_END",
          "new_api": "gpr_atm_acq_load",
          "old_text": "GPR_TIMER_END(\"grpc_error_string\", 0)",
          "new_text": "gpr_atm_acq_load(&err->error_string)",
          "old_line_content": "    GPR_TIMER_END(\"grpc_error_string\", 0);",
          "new_line_content": "  void *p = (void *)gpr_atm_acq_load(&err->error_string);",
          "content_same": false
        },
        {
          "line": 558,
          "old_api": "collect_kvs",
          "new_api": "memset",
          "old_text": "collect_kvs(err->ints.root, key_int, fmt_int, &kvs)",
          "new_text": "memset(&kvs, 0, sizeof(kvs))",
          "old_line_content": "  collect_kvs(err->ints.root, key_int, fmt_int, &kvs);",
          "new_line_content": "  memset(&kvs, 0, sizeof(kvs));",
          "content_same": false
        },
        {
          "line": 561,
          "old_api": "gpr_avl_is_empty",
          "new_api": "collect_kvs",
          "old_text": "gpr_avl_is_empty(err->errs)",
          "new_text": "collect_kvs(err->strs.root, key_str, fmt_str, &kvs)",
          "old_line_content": "  if (!gpr_avl_is_empty(err->errs)) {",
          "new_line_content": "  collect_kvs(err->strs.root, key_str, fmt_str, &kvs);",
          "content_same": false
        },
        {
          "line": 562,
          "old_api": "errs_string",
          "new_api": "collect_kvs",
          "old_text": "errs_string(err)",
          "new_text": "collect_kvs(err->times.root, key_time, fmt_time, &kvs)",
          "old_line_content": "    append_kv(&kvs, gpr_strdup(\"referenced_errors\"), errs_string(err));",
          "new_line_content": "  collect_kvs(err->times.root, key_time, fmt_time, &kvs);",
          "content_same": false
        },
        {
          "line": 567,
          "old_api": "finish_kvs",
          "new_api": "qsort",
          "old_text": "finish_kvs(&kvs)",
          "new_text": "qsort(kvs.kvs, kvs.num_kvs, sizeof(kv_pair), cmp_kvs)",
          "old_line_content": "  char *out = finish_kvs(&kvs);",
          "new_line_content": "  qsort(kvs.kvs, kvs.num_kvs, sizeof(kv_pair), cmp_kvs);",
          "content_same": false
        },
        {
          "line": 569,
          "old_api": "gpr_atm_rel_cas",
          "new_api": "finish_kvs",
          "old_text": "gpr_atm_rel_cas(&err->error_string, 0, (gpr_atm)out)",
          "new_text": "finish_kvs(&kvs)",
          "old_line_content": "  if (!gpr_atm_rel_cas(&err->error_string, 0, (gpr_atm)out)) {",
          "new_line_content": "  char *out = finish_kvs(&kvs);",
          "content_same": false
        },
        {
          "line": 571,
          "old_api": "gpr_atm_no_barrier_load",
          "new_api": "gpr_atm_rel_cas",
          "old_text": "gpr_atm_no_barrier_load(&err->error_string)",
          "new_text": "gpr_atm_rel_cas(&err->error_string, 0, (gpr_atm)out)",
          "old_line_content": "    out = (char *)gpr_atm_no_barrier_load(&err->error_string);",
          "new_line_content": "  if (!gpr_atm_rel_cas(&err->error_string, 0, (gpr_atm)out)) {",
          "content_same": false
        },
        {
          "line": 582,
          "old_api": "grpc_error_create",
          "new_api": "grpc_error_set_str",
          "old_text": "grpc_error_create(file, line, \"OS Error\", NULL, 0)",
          "new_text": "grpc_error_set_str(\n      grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_ERRNO, err),\n          GRPC_ERROR_STR_OS_ERROR, strerror(err)),\n      GRPC_ERROR_STR_SYSCALL, call_name)",
          "old_line_content": "          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),",
          "new_line_content": "  return grpc_error_set_str(",
          "content_same": false
        },
        {
          "line": 584,
          "old_api": "strerror",
          "new_api": "grpc_error_create",
          "old_text": "strerror(err)",
          "new_text": "grpc_error_create(file, line, \"OS Error\", NULL, 0)",
          "old_line_content": "          GRPC_ERROR_STR_OS_ERROR, strerror(err)),",
          "new_line_content": "          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),",
          "content_same": false
        },
        {
          "line": 593,
          "old_api": "grpc_error_set_str",
          "new_api": "gpr_format_message",
          "old_text": "grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_WSA_ERROR, err),\n          GRPC_ERROR_STR_OS_ERROR, utf8_message)",
          "new_text": "gpr_format_message(err)",
          "old_line_content": "      grpc_error_set_str(",
          "new_line_content": "  char *utf8_message = gpr_format_message(err);",
          "content_same": false
        },
        {
          "line": 594,
          "old_api": "grpc_error_create",
          "new_api": "grpc_error_set_str",
          "old_text": "grpc_error_create(file, line, \"OS Error\", NULL, 0)",
          "new_text": "grpc_error_set_str(\n      grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_WSA_ERROR, err),\n          GRPC_ERROR_STR_OS_ERROR, utf8_message),\n      GRPC_ERROR_STR_SYSCALL, call_name)",
          "old_line_content": "          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),",
          "new_line_content": "  grpc_error *error = grpc_error_set_str(",
          "content_same": false
        },
        {
          "line": 608,
          "old_api": "GRPC_ERROR_UNREF",
          "new_api": "grpc_error_string",
          "old_text": "GRPC_ERROR_UNREF(error)",
          "new_text": "grpc_error_string(error)",
          "old_line_content": "  GRPC_ERROR_UNREF(error);",
          "new_line_content": "  const char *msg = grpc_error_string(error);",
          "content_same": false
        }
      ],
      "additions": [
        {
          "line": 513,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr(']', &s, &sz, &cap)",
          "old_line_content": "  return s;",
          "new_line_content": "  append_chr(']', &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 514,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr(0, &s, &sz, &cap)",
          "old_line_content": "}",
          "new_line_content": "  append_chr(0, &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 391,
          "old_api": null,
          "new_api": "collect_kvs",
          "old_text": null,
          "new_text": "collect_kvs(node->left, key, fmt, kvs)",
          "old_line_content": "}",
          "new_line_content": "  collect_kvs(node->left, key, fmt, kvs);",
          "content_same": false
        },
        {
          "line": 392,
          "old_api": null,
          "new_api": "collect_kvs",
          "old_text": null,
          "new_text": "collect_kvs(node->right, key, fmt, kvs)",
          "old_line_content": "",
          "new_line_content": "  collect_kvs(node->right, key, fmt, kvs);",
          "content_same": false
        },
        {
          "line": 521,
          "old_api": null,
          "new_api": "strcmp",
          "old_text": null,
          "new_text": "strcmp(ka->key, kb->key)",
          "old_line_content": "",
          "new_line_content": "  return strcmp(ka->key, kb->key);",
          "content_same": false
        },
        {
          "line": 265,
          "old_api": null,
          "new_api": "gpr_ref_is_unique",
          "old_text": null,
          "new_text": "gpr_ref_is_unique(&in->refs)",
          "old_line_content": "  } else {",
          "new_line_content": "  } else if (gpr_ref_is_unique(&in->refs)) {",
          "content_same": false
        },
        {
          "line": 396,
          "old_api": null,
          "new_api": "error_int_name",
          "old_text": null,
          "new_text": "error_int_name((grpc_error_ints)(uintptr_t)p)",
          "old_line_content": "",
          "new_line_content": "  return gpr_strdup(error_int_name((grpc_error_ints)(uintptr_t)p));",
          "content_same": false
        },
        {
          "line": 400,
          "old_api": null,
          "new_api": "error_str_name",
          "old_text": null,
          "new_text": "error_str_name((grpc_error_strs)(uintptr_t)p)",
          "old_line_content": "",
          "new_line_content": "  return gpr_strdup(error_str_name((grpc_error_strs)(uintptr_t)p));",
          "content_same": false
        },
        {
          "line": 275,
          "old_api": null,
          "new_api": "gpr_avl_ref",
          "old_text": null,
          "new_text": "gpr_avl_ref(in->times)",
          "old_line_content": "    out->next_err = in->next_err;",
          "new_line_content": "    out->times = gpr_avl_ref(in->times);",
          "content_same": false
        },
        {
          "line": 404,
          "old_api": null,
          "new_api": "error_time_name",
          "old_text": null,
          "new_text": "error_time_name((grpc_error_times)(uintptr_t)p)",
          "old_line_content": "",
          "new_line_content": "  return gpr_strdup(error_time_name((grpc_error_times)(uintptr_t)p));",
          "content_same": false
        },
        {
          "line": 278,
          "old_api": null,
          "new_api": "gpr_ref_init",
          "old_text": null,
          "new_text": "gpr_ref_init(&out->refs, 1)",
          "old_line_content": "  }",
          "new_line_content": "    gpr_ref_init(&out->refs, 1);",
          "content_same": false
        },
        {
          "line": 535,
          "old_api": null,
          "new_api": "append_str",
          "old_text": null,
          "new_text": "append_str(kvs->kvs[i].value, &s, &sz, &cap)",
          "old_line_content": "  }",
          "new_line_content": "    append_str(kvs->kvs[i].value, &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 281,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"copy_error_and_unref\", 0)",
          "old_line_content": "}",
          "new_line_content": "  GPR_TIMER_END(\"copy_error_and_unref\", 0);",
          "content_same": false
        },
        {
          "line": 538,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('}', &s, &sz, &cap)",
          "old_line_content": "",
          "new_line_content": "  append_chr('}', &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 409,
          "old_api": null,
          "new_api": "gpr_asprintf",
          "old_text": null,
          "new_text": "gpr_asprintf(&s, \"%\" PRIdPTR, (intptr_t)p)",
          "old_line_content": "}",
          "new_line_content": "  gpr_asprintf(&s, \"%\" PRIdPTR, (intptr_t)p);",
          "content_same": false
        },
        {
          "line": 541,
          "old_api": null,
          "new_api": "gpr_free",
          "old_text": null,
          "new_text": "gpr_free(kvs->kvs)",
          "old_line_content": "}",
          "new_line_content": "  gpr_free(kvs->kvs);",
          "content_same": false
        },
        {
          "line": 415,
          "old_api": null,
          "new_api": "GPR_MAX",
          "old_text": null,
          "new_text": "GPR_MAX(8, 3 * *cap / 2)",
          "old_line_content": "  }",
          "new_line_content": "    *cap = GPR_MAX(8, 3 * *cap / 2);",
          "content_same": false
        },
        {
          "line": 416,
          "old_api": null,
          "new_api": "gpr_realloc",
          "old_text": null,
          "new_text": "gpr_realloc(*s, *cap)",
          "old_line_content": "  (*s)[(*sz)++] = c;",
          "new_line_content": "    *s = gpr_realloc(*s, *cap);",
          "content_same": false
        },
        {
          "line": 289,
          "old_api": null,
          "new_api": "gpr_avl_add",
          "old_text": null,
          "new_text": "gpr_avl_add(new->ints, (void *)(uintptr_t)which, (void *)value)",
          "old_line_content": "  return new;",
          "new_line_content": "  new->ints = gpr_avl_add(new->ints, (void *)(uintptr_t)which, (void *)value);",
          "content_same": false
        },
        {
          "line": 546,
          "old_api": null,
          "new_api": "GPR_TIMER_BEGIN",
          "old_text": null,
          "new_text": "GPR_TIMER_BEGIN(\"grpc_error_string\", 0)",
          "old_line_content": "  if (err == GRPC_ERROR_OOM) return oom_error_string;",
          "new_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_string\", 0);",
          "content_same": false
        },
        {
          "line": 290,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_set_int\", 0)",
          "old_line_content": "}",
          "new_line_content": "  GPR_TIMER_END(\"grpc_error_set_int\", 0);",
          "content_same": false
        },
        {
          "line": 423,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr(*c, s, sz, cap)",
          "old_line_content": "}",
          "new_line_content": "    append_chr(*c, s, sz, cap);",
          "content_same": false
        },
        {
          "line": 553,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_string\", 0)",
          "old_line_content": "  }",
          "new_line_content": "    GPR_TIMER_END(\"grpc_error_string\", 0);",
          "content_same": false
        },
        {
          "line": 429,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('\"', s, sz, cap)",
          "old_line_content": "    if (*c < 32 || *c >= 127) {",
          "new_line_content": "  append_chr('\"', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 432,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('\\\\', s, sz, cap)",
          "old_line_content": "        case '\\b':",
          "new_line_content": "      append_chr('\\\\', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 563,
          "old_api": null,
          "new_api": "gpr_avl_is_empty",
          "old_text": null,
          "new_text": "gpr_avl_is_empty(err->errs)",
          "old_line_content": "  }",
          "new_line_content": "  if (!gpr_avl_is_empty(err->errs)) {",
          "content_same": false
        },
        {
          "line": 564,
          "old_api": null,
          "new_api": "errs_string",
          "old_text": null,
          "new_text": "errs_string(err)",
          "old_line_content": "",
          "new_line_content": "    append_kv(&kvs, gpr_strdup(\"referenced_errors\"), errs_string(err));",
          "content_same": false
        },
        {
          "line": 435,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('b', s, sz, cap)",
          "old_line_content": "        case '\\f':",
          "new_line_content": "          append_chr('b', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 310,
          "old_api": null,
          "new_api": "GPR_ARRAY_SIZE",
          "old_text": null,
          "new_text": "GPR_ARRAY_SIZE(error_status_map)",
          "old_line_content": "          if (p != NULL) *p = error_status_map[i].code;",
          "new_line_content": "      for (size_t i = 0; i < GPR_ARRAY_SIZE(error_status_map); i++) {",
          "content_same": false
        },
        {
          "line": 438,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('f', s, sz, cap)",
          "old_line_content": "        case '\\n':",
          "new_line_content": "          append_chr('f', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 313,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "old_line_content": "        }",
          "new_line_content": "          GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "content_same": false
        },
        {
          "line": 441,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('n', s, sz, cap)",
          "old_line_content": "        case '\\r':",
          "new_line_content": "          append_chr('n', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 572,
          "old_api": null,
          "new_api": "gpr_free",
          "old_text": null,
          "new_text": "gpr_free(out)",
          "old_line_content": "  }",
          "new_line_content": "    gpr_free(out);",
          "content_same": false
        },
        {
          "line": 573,
          "old_api": null,
          "new_api": "gpr_atm_no_barrier_load",
          "old_text": null,
          "new_text": "gpr_atm_no_barrier_load(&err->error_string)",
          "old_line_content": "",
          "new_line_content": "    out = (char *)gpr_atm_no_barrier_load(&err->error_string);",
          "content_same": false
        },
        {
          "line": 318,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "old_line_content": "  }",
          "new_line_content": "    GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "content_same": false
        },
        {
          "line": 444,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('r', s, sz, cap)",
          "old_line_content": "        case '\\t':",
          "new_line_content": "          append_chr('r', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 576,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_string\", 0)",
          "old_line_content": "}",
          "new_line_content": "  GPR_TIMER_END(\"grpc_error_string\", 0);",
          "content_same": false
        },
        {
          "line": 447,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('t', s, sz, cap)",
          "old_line_content": "        default:",
          "new_line_content": "          append_chr('t', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 323,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "old_line_content": "  }",
          "new_line_content": "    GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "content_same": false
        },
        {
          "line": 453,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr(hex[*c >> 4], s, sz, cap)",
          "old_line_content": "          break;",
          "new_line_content": "          append_chr(hex[*c >> 4], s, sz, cap);",
          "content_same": false
        },
        {
          "line": 326,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "old_line_content": "}",
          "new_line_content": "  GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "content_same": false
        },
        {
          "line": 583,
          "old_api": null,
          "new_api": "grpc_error_set_str",
          "old_text": null,
          "new_text": "grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_ERRNO, err),\n          GRPC_ERROR_STR_OS_ERROR, strerror(err))",
          "old_line_content": "                             GRPC_ERROR_INT_ERRNO, err),",
          "new_line_content": "      grpc_error_set_str(",
          "content_same": false
        },
        {
          "line": 454,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr(hex[*c & 0x0f], s, sz, cap)",
          "old_line_content": "      }",
          "new_line_content": "          append_chr(hex[*c & 0x0f], s, sz, cap);",
          "content_same": false
        },
        {
          "line": 586,
          "old_api": null,
          "new_api": "strerror",
          "old_text": null,
          "new_text": "strerror(err)",
          "old_line_content": "}",
          "new_line_content": "          GRPC_ERROR_STR_OS_ERROR, strerror(err)),",
          "content_same": false
        },
        {
          "line": 458,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr((char)*c, s, sz, cap)",
          "old_line_content": "  }",
          "new_line_content": "      append_chr((char)*c, s, sz, cap);",
          "content_same": false
        },
        {
          "line": 332,
          "old_api": null,
          "new_api": "GPR_TIMER_BEGIN",
          "old_text": null,
          "new_text": "GPR_TIMER_BEGIN(\"grpc_error_set_str\", 0)",
          "old_line_content": "  new->strs =",
          "new_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_set_str\", 0);",
          "content_same": false
        },
        {
          "line": 461,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr('\"', s, sz, cap)",
          "old_line_content": "",
          "new_line_content": "  append_chr('\"', s, sz, cap);",
          "content_same": false
        },
        {
          "line": 335,
          "old_api": null,
          "new_api": "gpr_strdup",
          "old_text": null,
          "new_text": "gpr_strdup(value)",
          "old_line_content": "  return new;",
          "new_line_content": "      gpr_avl_add(new->strs, (void *)(uintptr_t)which, gpr_strdup(value));",
          "content_same": false
        },
        {
          "line": 336,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_set_str\", 0)",
          "old_line_content": "}",
          "new_line_content": "  GPR_TIMER_END(\"grpc_error_set_str\", 0);",
          "content_same": false
        },
        {
          "line": 595,
          "old_api": null,
          "new_api": "grpc_error_set_str",
          "old_text": null,
          "new_text": "grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_WSA_ERROR, err),\n          GRPC_ERROR_STR_OS_ERROR, utf8_message)",
          "old_line_content": "                             GRPC_ERROR_INT_WSA_ERROR, err),",
          "new_line_content": "      grpc_error_set_str(",
          "content_same": false
        },
        {
          "line": 596,
          "old_api": null,
          "new_api": "grpc_error_create",
          "old_text": null,
          "new_text": "grpc_error_create(file, line, \"OS Error\", NULL, 0)",
          "old_line_content": "          GRPC_ERROR_STR_OS_ERROR, utf8_message),",
          "new_line_content": "          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),",
          "content_same": false
        },
        {
          "line": 468,
          "old_api": null,
          "new_api": "append_esc_str",
          "old_text": null,
          "new_text": "append_esc_str(p, &s, &sz, &cap)",
          "old_line_content": "  return s;",
          "new_line_content": "  append_esc_str(p, &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 469,
          "old_api": null,
          "new_api": "append_chr",
          "old_text": null,
          "new_text": "append_chr(0, &s, &sz, &cap)",
          "old_line_content": "}",
          "new_line_content": "  append_chr(0, &s, &sz, &cap);",
          "content_same": false
        },
        {
          "line": 343,
          "old_api": null,
          "new_api": "GPR_ARRAY_SIZE",
          "old_text": null,
          "new_text": "GPR_ARRAY_SIZE(error_status_map)",
          "old_line_content": "          return error_status_map[i].msg;",
          "new_line_content": "      for (size_t i = 0; i < GPR_ARRAY_SIZE(error_status_map); i++) {",
          "content_same": false
        },
        {
          "line": 600,
          "old_api": null,
          "new_api": "gpr_free",
          "old_text": null,
          "new_text": "gpr_free(utf8_message)",
          "old_line_content": "}",
          "new_line_content": "  gpr_free(utf8_message);",
          "content_same": false
        },
        {
          "line": 351,
          "old_api": null,
          "new_api": "gpr_avl_get",
          "old_text": null,
          "new_text": "gpr_avl_get(err->strs, (void *)(uintptr_t)which)",
          "old_line_content": "",
          "new_line_content": "  return gpr_avl_get(err->strs, (void *)(uintptr_t)which);",
          "content_same": false
        },
        {
          "line": 609,
          "old_api": null,
          "new_api": "gpr_log",
          "old_text": null,
          "new_text": "gpr_log(file, line, GPR_LOG_SEVERITY_ERROR, \"%s: %s\", what, msg)",
          "old_line_content": "  return false;",
          "new_line_content": "  gpr_log(file, line, GPR_LOG_SEVERITY_ERROR, \"%s: %s\", what, msg);",
          "content_same": false
        },
        {
          "line": 610,
          "old_api": null,
          "new_api": "GRPC_ERROR_UNREF",
          "old_text": null,
          "new_text": "GRPC_ERROR_UNREF(error)",
          "old_line_content": "}",
          "new_line_content": "  GRPC_ERROR_UNREF(error);",
          "content_same": false
        },
        {
          "line": 357,
          "old_api": null,
          "new_api": "gpr_avl_add",
          "old_text": null,
          "new_text": "gpr_avl_add(new->errs, (void *)(new->next_err++), child)",
          "old_line_content": "  return new;",
          "new_line_content": "  new->errs = gpr_avl_add(new->errs, (void *)(new->next_err++), child);",
          "content_same": false
        },
        {
          "line": 358,
          "old_api": null,
          "new_api": "GPR_TIMER_END",
          "old_text": null,
          "new_text": "GPR_TIMER_END(\"grpc_error_add_child\", 0)",
          "old_line_content": "}",
          "new_line_content": "  GPR_TIMER_END(\"grpc_error_add_child\", 0);",
          "content_same": false
        },
        {
          "line": 491,
          "old_api": null,
          "new_api": "gpr_asprintf",
          "old_text": null,
          "new_text": "gpr_asprintf(&out, \"\\\"%s%\" PRId64 \".%09d\\\"\", pfx, tm.tv_sec, tm.tv_nsec)",
          "old_line_content": "}",
          "new_line_content": "  gpr_asprintf(&out, \"\\\"%s%\" PRId64 \".%09d\\\"\", pfx, tm.tv_sec, tm.tv_nsec);",
          "content_same": false
        },
        {
          "line": 498,
          "old_api": null,
          "new_api": "add_errs",
          "old_text": null,
          "new_text": "add_errs(n->left, s, sz, cap, first)",
          "old_line_content": "  *first = false;",
          "new_line_content": "  add_errs(n->left, s, sz, cap, first);",
          "content_same": false
        },
        {
          "line": 502,
          "old_api": null,
          "new_api": "append_str",
          "old_text": null,
          "new_text": "append_str(e, s, sz, cap)",
          "old_line_content": "}",
          "new_line_content": "  append_str(e, s, sz, cap);",
          "content_same": false
        },
        {
          "line": 503,
          "old_api": null,
          "new_api": "add_errs",
          "old_text": null,
          "new_text": "add_errs(n->right, s, sz, cap, first)",
          "old_line_content": "",
          "new_line_content": "  add_errs(n->right, s, sz, cap, first);",
          "content_same": false
        },
        {
          "line": 379,
          "old_api": null,
          "new_api": "GPR_MAX",
          "old_text": null,
          "new_text": "GPR_MAX(3 * kvs->cap_kvs / 2, 4)",
          "old_line_content": "  }",
          "new_line_content": "    kvs->cap_kvs = GPR_MAX(3 * kvs->cap_kvs / 2, 4);",
          "content_same": false
        },
        {
          "line": 380,
          "old_api": null,
          "new_api": "gpr_realloc",
          "old_text": null,
          "new_text": "gpr_realloc(kvs->kvs, sizeof(*kvs->kvs) * kvs->cap_kvs)",
          "old_line_content": "  kvs->kvs[kvs->num_kvs].key = key;",
          "new_line_content": "    kvs->kvs = gpr_realloc(kvs->kvs, sizeof(*kvs->kvs) * kvs->cap_kvs);",
          "content_same": false
        }
      ],
      "deletions": [
        {
          "line": 388,
          "old_api": "fmt",
          "new_api": null,
          "old_text": "fmt(node->value)",
          "new_text": null,
          "old_line_content": "  append_kv(kvs, key(node->key), fmt(node->value));",
          "new_line_content": "                        char *fmt(void *v), kv_pairs *kvs) {",
          "content_same": false
        },
        {
          "line": 389,
          "old_api": "collect_kvs",
          "new_api": null,
          "old_text": "collect_kvs(node->left, key, fmt, kvs)",
          "new_text": null,
          "old_line_content": "  collect_kvs(node->left, key, fmt, kvs);",
          "new_line_content": "  if (node == NULL) return;",
          "content_same": false
        },
        {
          "line": 519,
          "old_api": "strcmp",
          "new_api": null,
          "old_text": "strcmp(ka->key, kb->key)",
          "new_text": null,
          "old_line_content": "  return strcmp(ka->key, kb->key);",
          "new_line_content": "  const kv_pair *ka = a;",
          "content_same": false
        },
        {
          "line": 266,
          "old_api": "gpr_malloc",
          "new_api": null,
          "old_text": "gpr_malloc(sizeof(*out))",
          "new_text": null,
          "old_line_content": "    out = gpr_malloc(sizeof(*out));",
          "new_line_content": "    return in;",
          "content_same": false
        },
        {
          "line": 394,
          "old_api": "error_int_name",
          "new_api": null,
          "old_text": "error_int_name((grpc_error_ints)(uintptr_t)p)",
          "new_text": null,
          "old_line_content": "  return gpr_strdup(error_int_name((grpc_error_ints)(uintptr_t)p));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 398,
          "old_api": "error_str_name",
          "new_api": null,
          "old_text": "error_str_name((grpc_error_strs)(uintptr_t)p)",
          "new_text": null,
          "old_line_content": "  return gpr_strdup(error_str_name((grpc_error_strs)(uintptr_t)p));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 527,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('{', &s, &sz, &cap)",
          "new_text": null,
          "old_line_content": "  append_chr('{', &s, &sz, &cap);",
          "new_line_content": "  size_t cap = 0;",
          "content_same": false
        },
        {
          "line": 271,
          "old_api": "gpr_avl_ref",
          "new_api": null,
          "old_text": "gpr_avl_ref(in->strs)",
          "new_text": null,
          "old_line_content": "    out->strs = gpr_avl_ref(in->strs);",
          "new_line_content": "#endif",
          "content_same": false
        },
        {
          "line": 530,
          "old_api": "append_esc_str",
          "new_api": null,
          "old_text": "append_esc_str(kvs->kvs[i].key, &s, &sz, &cap)",
          "new_text": null,
          "old_line_content": "    append_esc_str(kvs->kvs[i].key, &s, &sz, &cap);",
          "new_line_content": "  for (size_t i = 0; i < kvs->num_kvs; i++) {",
          "content_same": false
        },
        {
          "line": 402,
          "old_api": "error_time_name",
          "new_api": null,
          "old_text": "error_time_name((grpc_error_times)(uintptr_t)p)",
          "new_text": null,
          "old_line_content": "  return gpr_strdup(error_time_name((grpc_error_times)(uintptr_t)p));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 277,
          "old_api": "GRPC_ERROR_UNREF",
          "new_api": null,
          "old_text": "GRPC_ERROR_UNREF(in)",
          "new_text": null,
          "old_line_content": "    GRPC_ERROR_UNREF(in);",
          "new_line_content": "    out->next_err = in->next_err;",
          "content_same": false
        },
        {
          "line": 407,
          "old_api": "gpr_asprintf",
          "new_api": null,
          "old_text": "gpr_asprintf(&s, \"%\" PRIdPTR, (intptr_t)p)",
          "new_text": null,
          "old_line_content": "  gpr_asprintf(&s, \"%\" PRIdPTR, (intptr_t)p);",
          "new_line_content": "static char *fmt_int(void *p) {",
          "content_same": false
        },
        {
          "line": 537,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr(0, &s, &sz, &cap)",
          "new_text": null,
          "old_line_content": "  append_chr(0, &s, &sz, &cap);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 285,
          "old_api": "GPR_TIMER_BEGIN",
          "new_api": null,
          "old_text": "GPR_TIMER_BEGIN(\"grpc_error_set_int\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_set_int\", 0);",
          "new_line_content": "grpc_error *grpc_error_set_int(grpc_error *src, grpc_error_ints which,",
          "content_same": false
        },
        {
          "line": 286,
          "old_api": "copy_error_and_unref",
          "new_api": null,
          "old_text": "copy_error_and_unref(src)",
          "new_text": null,
          "old_line_content": "  grpc_error *new = copy_error_and_unref(src);",
          "new_line_content": "                               intptr_t value) {",
          "content_same": false
        },
        {
          "line": 413,
          "old_api": "GPR_MAX",
          "new_api": null,
          "old_text": "GPR_MAX(8, 3 * *cap / 2)",
          "new_text": null,
          "old_line_content": "    *cap = GPR_MAX(8, 3 * *cap / 2);",
          "new_line_content": "static void append_chr(char c, char **s, size_t *sz, size_t *cap) {",
          "content_same": false
        },
        {
          "line": 544,
          "old_api": "GPR_TIMER_BEGIN",
          "new_api": null,
          "old_text": "GPR_TIMER_BEGIN(\"grpc_error_string\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_string\", 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 414,
          "old_api": "gpr_realloc",
          "new_api": null,
          "old_text": "gpr_realloc(*s, *cap)",
          "new_text": null,
          "old_line_content": "    *s = gpr_realloc(*s, *cap);",
          "new_line_content": "  if (*sz == *cap) {",
          "content_same": false
        },
        {
          "line": 549,
          "old_api": "gpr_atm_acq_load",
          "new_api": null,
          "old_text": "gpr_atm_acq_load(&err->error_string)",
          "new_text": null,
          "old_line_content": "  void *p = (void *)gpr_atm_acq_load(&err->error_string);",
          "new_line_content": "  if (err == GRPC_ERROR_CANCELLED) return cancelled_error_string;",
          "content_same": false
        },
        {
          "line": 421,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr(*c, s, sz, cap)",
          "new_text": null,
          "old_line_content": "    append_chr(*c, s, sz, cap);",
          "new_line_content": "static void append_str(const char *str, char **s, size_t *sz, size_t *cap) {",
          "content_same": false
        },
        {
          "line": 427,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('\"', s, sz, cap)",
          "new_text": null,
          "old_line_content": "  append_chr('\"', s, sz, cap);",
          "new_line_content": "static void append_esc_str(const char *str, char **s, size_t *sz, size_t *cap) {",
          "content_same": false
        },
        {
          "line": 556,
          "old_api": "memset",
          "new_api": null,
          "old_text": "memset(&kvs, 0, sizeof(kvs))",
          "new_text": null,
          "old_line_content": "  memset(&kvs, 0, sizeof(kvs));",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 430,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('\\\\', s, sz, cap)",
          "new_text": null,
          "old_line_content": "      append_chr('\\\\', s, sz, cap);",
          "new_line_content": "  for (const uint8_t *c = (const uint8_t *)str; *c; c++) {",
          "content_same": false
        },
        {
          "line": 559,
          "old_api": "collect_kvs",
          "new_api": null,
          "old_text": "collect_kvs(err->strs.root, key_str, fmt_str, &kvs)",
          "new_text": null,
          "old_line_content": "  collect_kvs(err->strs.root, key_str, fmt_str, &kvs);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 304,
          "old_api": "GPR_TIMER_BEGIN",
          "new_api": null,
          "old_text": "GPR_TIMER_BEGIN(\"grpc_error_get_int\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_get_int\", 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 433,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('b', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('b', s, sz, cap);",
          "new_line_content": "      switch (*c) {",
          "content_same": false
        },
        {
          "line": 436,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('f', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('f', s, sz, cap);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 565,
          "old_api": "qsort",
          "new_api": null,
          "old_text": "qsort(kvs.kvs, kvs.num_kvs, sizeof(kv_pair), cmp_kvs)",
          "new_text": null,
          "old_line_content": "  qsort(kvs.kvs, kvs.num_kvs, sizeof(kv_pair), cmp_kvs);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 311,
          "old_api": "GPR_TIMER_END",
          "new_api": null,
          "old_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "new_text": null,
          "old_line_content": "          GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "new_line_content": "        if (error_status_map[i].error == err) {",
          "content_same": false
        },
        {
          "line": 439,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('n', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('n', s, sz, cap);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 570,
          "old_api": "gpr_free",
          "new_api": null,
          "old_text": "gpr_free(out)",
          "new_text": null,
          "old_line_content": "    gpr_free(out);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 442,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('r', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('r', s, sz, cap);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 316,
          "old_api": "GPR_TIMER_END",
          "new_api": null,
          "old_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "new_text": null,
          "old_line_content": "    GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 445,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('t', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('t', s, sz, cap);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 574,
          "old_api": "GPR_TIMER_END",
          "new_api": null,
          "old_text": "GPR_TIMER_END(\"grpc_error_string\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_END(\"grpc_error_string\", 0);",
          "new_line_content": "  }",
          "content_same": false
        },
        {
          "line": 319,
          "old_api": "gpr_avl_maybe_get",
          "new_api": null,
          "old_text": "gpr_avl_maybe_get(err->ints, (void *)(uintptr_t)which, &pp)",
          "new_text": null,
          "old_line_content": "  if (gpr_avl_maybe_get(err->ints, (void *)(uintptr_t)which, &pp)) {",
          "new_line_content": "    return false;",
          "content_same": false
        },
        {
          "line": 448,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('u', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('u', s, sz, cap);",
          "new_line_content": "          break;",
          "content_same": false
        },
        {
          "line": 449,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('0', s, sz, cap)",
          "new_text": null,
          "old_line_content": "          append_chr('0', s, sz, cap);",
          "new_line_content": "        default:",
          "content_same": false
        },
        {
          "line": 580,
          "old_api": "grpc_error_set_str",
          "new_api": null,
          "old_text": "grpc_error_set_str(\n      grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_ERRNO, err),\n          GRPC_ERROR_STR_OS_ERROR, strerror(err)),\n      GRPC_ERROR_STR_SYSCALL, call_name)",
          "new_text": null,
          "old_line_content": "  return grpc_error_set_str(",
          "new_line_content": "grpc_error *grpc_os_error(const char *file, int line, int err,",
          "content_same": false
        },
        {
          "line": 581,
          "old_api": "grpc_error_set_str",
          "new_api": null,
          "old_text": "grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_ERRNO, err),\n          GRPC_ERROR_STR_OS_ERROR, strerror(err))",
          "new_text": null,
          "old_line_content": "      grpc_error_set_str(",
          "new_line_content": "                          const char *call_name) {",
          "content_same": false
        },
        {
          "line": 324,
          "old_api": "GPR_TIMER_END",
          "new_api": null,
          "old_text": "GPR_TIMER_END(\"grpc_error_get_int\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_END(\"grpc_error_get_int\", 0);",
          "new_line_content": "    return true;",
          "content_same": false
        },
        {
          "line": 456,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr((char)*c, s, sz, cap)",
          "new_text": null,
          "old_line_content": "      append_chr((char)*c, s, sz, cap);",
          "new_line_content": "      }",
          "content_same": false
        },
        {
          "line": 330,
          "old_api": "GPR_TIMER_BEGIN",
          "new_api": null,
          "old_text": "GPR_TIMER_BEGIN(\"grpc_error_set_str\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_set_str\", 0);",
          "new_line_content": "grpc_error *grpc_error_set_str(grpc_error *src, grpc_error_strs which,",
          "content_same": false
        },
        {
          "line": 331,
          "old_api": "copy_error_and_unref",
          "new_api": null,
          "old_text": "copy_error_and_unref(src)",
          "new_text": null,
          "old_line_content": "  grpc_error *new = copy_error_and_unref(src);",
          "new_line_content": "                               const char *value) {",
          "content_same": false
        },
        {
          "line": 459,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('\"', s, sz, cap)",
          "new_text": null,
          "old_line_content": "  append_chr('\"', s, sz, cap);",
          "new_line_content": "    }",
          "content_same": false
        },
        {
          "line": 334,
          "old_api": "GPR_TIMER_END",
          "new_api": null,
          "old_text": "GPR_TIMER_END(\"grpc_error_set_str\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_END(\"grpc_error_set_str\", 0);",
          "new_line_content": "  new->strs =",
          "content_same": false
        },
        {
          "line": 591,
          "old_api": "gpr_format_message",
          "new_api": null,
          "old_text": "gpr_format_message(err)",
          "new_text": null,
          "old_line_content": "  char *utf8_message = gpr_format_message(err);",
          "new_line_content": "grpc_error *grpc_wsa_error(const char *file, int line, int err,",
          "content_same": false
        },
        {
          "line": 592,
          "old_api": "grpc_error_set_str",
          "new_api": null,
          "old_text": "grpc_error_set_str(\n      grpc_error_set_str(\n          grpc_error_set_int(grpc_error_create(file, line, \"OS Error\", NULL, 0),\n                             GRPC_ERROR_INT_WSA_ERROR, err),\n          GRPC_ERROR_STR_OS_ERROR, utf8_message),\n      GRPC_ERROR_STR_SYSCALL, call_name)",
          "new_text": null,
          "old_line_content": "  grpc_error *error = grpc_error_set_str(",
          "new_line_content": "                           const char *call_name) {",
          "content_same": false
        },
        {
          "line": 466,
          "old_api": "append_esc_str",
          "new_api": null,
          "old_text": "append_esc_str(p, &s, &sz, &cap)",
          "new_text": null,
          "old_line_content": "  append_esc_str(p, &s, &sz, &cap);",
          "new_line_content": "  size_t sz = 0;",
          "content_same": false
        },
        {
          "line": 339,
          "old_api": "grpc_error_is_special",
          "new_api": null,
          "old_text": "grpc_error_is_special(err)",
          "new_text": null,
          "old_line_content": "  if (grpc_error_is_special(err)) {",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 467,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr(0, &s, &sz, &cap)",
          "new_text": null,
          "old_line_content": "  append_chr(0, &s, &sz, &cap);",
          "new_line_content": "  size_t cap = 0;",
          "content_same": false
        },
        {
          "line": 598,
          "old_api": "gpr_free",
          "new_api": null,
          "old_text": "gpr_free(utf8_message)",
          "new_text": null,
          "old_line_content": "  gpr_free(utf8_message);",
          "new_line_content": "          GRPC_ERROR_STR_OS_ERROR, utf8_message),",
          "content_same": false
        },
        {
          "line": 349,
          "old_api": "gpr_avl_get",
          "new_api": null,
          "old_text": "gpr_avl_get(err->strs, (void *)(uintptr_t)which)",
          "new_text": null,
          "old_line_content": "  return gpr_avl_get(err->strs, (void *)(uintptr_t)which);",
          "new_line_content": "    return NULL;",
          "content_same": false
        },
        {
          "line": 606,
          "old_api": "grpc_error_string",
          "new_api": null,
          "old_text": "grpc_error_string(error)",
          "new_text": null,
          "old_line_content": "  const char *msg = grpc_error_string(error);",
          "new_line_content": "                       int line) {",
          "content_same": false
        },
        {
          "line": 607,
          "old_api": "gpr_log",
          "new_api": null,
          "old_text": "gpr_log(file, line, GPR_LOG_SEVERITY_ERROR, \"%s: %s\", what, msg)",
          "new_text": null,
          "old_line_content": "  gpr_log(file, line, GPR_LOG_SEVERITY_ERROR, \"%s: %s\", what, msg);",
          "new_line_content": "  if (error == GRPC_ERROR_NONE) return true;",
          "content_same": false
        },
        {
          "line": 353,
          "old_api": "GPR_TIMER_BEGIN",
          "new_api": null,
          "old_text": "GPR_TIMER_BEGIN(\"grpc_error_add_child\", 0)",
          "new_text": null,
          "old_line_content": "  GPR_TIMER_BEGIN(\"grpc_error_add_child\", 0);",
          "new_line_content": "",
          "content_same": false
        },
        {
          "line": 354,
          "old_api": "copy_error_and_unref",
          "new_api": null,
          "old_text": "copy_error_and_unref(src)",
          "new_text": null,
          "old_line_content": "  grpc_error *new = copy_error_and_unref(src);",
          "new_line_content": "grpc_error *grpc_error_add_child(grpc_error *src, grpc_error *child) {",
          "content_same": false
        },
        {
          "line": 489,
          "old_api": "gpr_asprintf",
          "new_api": null,
          "old_text": "gpr_asprintf(&out, \"\\\"%s%\" PRId64 \".%09d\\\"\", pfx, tm.tv_sec, tm.tv_nsec)",
          "new_text": null,
          "old_line_content": "  gpr_asprintf(&out, \"\\\"%s%\" PRId64 \".%09d\\\"\", pfx, tm.tv_sec, tm.tv_nsec);",
          "new_line_content": "      break;",
          "content_same": false
        },
        {
          "line": 496,
          "old_api": "add_errs",
          "new_api": null,
          "old_text": "add_errs(n->left, s, sz, cap, first)",
          "new_text": null,
          "old_line_content": "  add_errs(n->left, s, sz, cap, first);",
          "new_line_content": "                     bool *first) {",
          "content_same": false
        },
        {
          "line": 497,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr(',', s, sz, cap)",
          "new_text": null,
          "old_line_content": "  if (!*first) append_chr(',', s, sz, cap);",
          "new_line_content": "  if (n == NULL) return;",
          "content_same": false
        },
        {
          "line": 500,
          "old_api": "append_str",
          "new_api": null,
          "old_text": "append_str(e, s, sz, cap)",
          "new_text": null,
          "old_line_content": "  append_str(e, s, sz, cap);",
          "new_line_content": "  *first = false;",
          "content_same": false
        },
        {
          "line": 377,
          "old_api": "GPR_MAX",
          "new_api": null,
          "old_text": "GPR_MAX(3 * kvs->cap_kvs / 2, 4)",
          "new_text": null,
          "old_line_content": "    kvs->cap_kvs = GPR_MAX(3 * kvs->cap_kvs / 2, 4);",
          "new_line_content": "static void append_kv(kv_pairs *kvs, char *key, char *value) {",
          "content_same": false
        },
        {
          "line": 378,
          "old_api": "gpr_realloc",
          "new_api": null,
          "old_text": "gpr_realloc(kvs->kvs, sizeof(*kvs->kvs) * kvs->cap_kvs)",
          "new_text": null,
          "old_line_content": "    kvs->kvs = gpr_realloc(kvs->kvs, sizeof(*kvs->kvs) * kvs->cap_kvs);",
          "new_line_content": "  if (kvs->num_kvs == kvs->cap_kvs) {",
          "content_same": false
        },
        {
          "line": 509,
          "old_api": "append_chr",
          "new_api": null,
          "old_text": "append_chr('[', &s, &sz, &cap)",
          "new_text": null,
          "old_line_content": "  append_chr('[', &s, &sz, &cap);",
          "new_line_content": "  size_t cap = 0;",
          "content_same": false
        },
        {
          "line": 510,
          "old_api": "add_errs",
          "new_api": null,
          "old_text": "add_errs(err->errs.root, &s, &sz, &cap, &first)",
          "new_text": null,
          "old_line_content": "  add_errs(err->errs.root, &s, &sz, &cap, &first);",
          "new_line_content": "  bool first = true;",
          "content_same": false
        }
      ]
    },
    "api_summary": {
      "total_replacements": 36,
      "total_additions": 66,
      "total_deletions": 65,
      "total_api_changes": 167
    },
    "non_api_changes": {
      "has_non_api_changes": false,
      "evidence": {
        "total_diff_lines": 2,
        "api_related_lines": 167,
        "non_api_lines": 0,
        "non_api_line_numbers": []
      }
    },
    "api_calls_before": 179,
    "api_calls_after": 180,
    "diff_info": {
      "added_lines": 2,
      "removed_lines": 0,
      "total_diff_lines": 14
    }
  }
}